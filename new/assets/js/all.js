!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e="length"in t&&t.length,i=J.type(t);return"function"===i||J.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function r(t,e,i){if(J.isFunction(e))return J.grep(t,function(t,r){return!!e.call(t,r,t)!==i});if(e.nodeType)return J.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(oe.test(e))return J.filter(e,t,i);e=J.filter(e,t)}return J.grep(t,function(t){return W.call(e,t)>=0!==i})}function n(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function s(t){var e=fe[t]={};return J.each(t.match(pe)||[],function(t,i){e[i]=!0}),e}function a(){K.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1),J.ready()}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+o.uid++}function h(t,e,i){var r;if(void 0===i&&1===t.nodeType)if(r="data-"+e.replace(ye,"-$1").toLowerCase(),i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:_e.test(i)?J.parseJSON(i):i}catch(n){}ve.set(t,e,i)}else i=void 0;return i}function l(){return!0}function u(){return!1}function c(){try{return K.activeElement}catch(t){}}function d(t,e){return J.nodeName(t,"table")&&J.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Ie.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var i=0,r=t.length;r>i;i++)Ee.set(t[i],"globalEval",!e||Ee.get(e[i],"globalEval"))}function g(t,e){var i,r,n,s,a,o,h,l;if(1===e.nodeType){if(Ee.hasData(t)&&(s=Ee.access(t),a=Ee.set(e,s),l=s.events)){delete a.handle,a.events={};for(n in l)for(i=0,r=l[n].length;r>i;i++)J.event.add(e,n,l[n][i])}ve.hasData(t)&&(o=ve.access(t),h=J.extend({},o),ve.set(e,h))}}function E(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&J.nodeName(t,e)?J.merge([t],i):i}function v(t,e){var i=e.nodeName.toLowerCase();"input"===i&&be.test(t.type)?e.checked=t.checked:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}function _(e,i){var r,n=J(i.createElement(e)).appendTo(i.body),s=t.getDefaultComputedStyle&&(r=t.getDefaultComputedStyle(n[0]))?r.display:J.css(n[0],"display");return n.detach(),s}function y(t){var e=K,i=Be[t];return i||(i=_(t,e),"none"!==i&&i||(je=(je||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=je[0].contentDocument,e.write(),e.close(),i=_(t,e),je.detach()),Be[t]=i),i}function T(t,e,i){var r,n,s,a,o=t.style;return i=i||Ve(t),i&&(a=i.getPropertyValue(e)||i[e]),i&&(""!==a||J.contains(t.ownerDocument,t)||(a=J.style(t,e)),ze.test(a)&&Ue.test(e)&&(r=o.width,n=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=a,a=i.width,o.width=r,o.minWidth=n,o.maxWidth=s)),void 0!==a?a+"":a}function x(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function R(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),r=e,n=Ye.length;n--;)if(e=Ye[n]+i,e in t)return e;return r}function b(t,e,i){var r=Ge.exec(e);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):e}function w(t,e,i,r,n){for(var s=i===(r?"border":"content")?4:"width"===e?1:0,a=0;4>s;s+=2)"margin"===i&&(a+=J.css(t,i+xe[s],!0,n)),r?("content"===i&&(a-=J.css(t,"padding"+xe[s],!0,n)),"margin"!==i&&(a-=J.css(t,"border"+xe[s]+"Width",!0,n))):(a+=J.css(t,"padding"+xe[s],!0,n),"padding"!==i&&(a+=J.css(t,"border"+xe[s]+"Width",!0,n)));return a}function H(t,e,i){var r=!0,n="width"===e?t.offsetWidth:t.offsetHeight,s=Ve(t),a="border-box"===J.css(t,"boxSizing",!1,s);if(0>=n||null==n){if(n=T(t,e,s),(0>n||null==n)&&(n=t.style[e]),ze.test(n))return n;r=a&&(Q.boxSizingReliable()||n===t.style[e]),n=parseFloat(n)||0}return n+w(t,e,i||(a?"border":"content"),r,s)+"px"}function S(t,e){for(var i,r,n,s=[],a=0,o=t.length;o>a;a++)r=t[a],r.style&&(s[a]=Ee.get(r,"olddisplay"),i=r.style.display,e?(s[a]||"none"!==i||(r.style.display=""),""===r.style.display&&Re(r)&&(s[a]=Ee.access(r,"olddisplay",y(r.nodeName)))):(n=Re(r),"none"===i&&n||Ee.set(r,"olddisplay",n?i:J.css(r,"display"))));for(a=0;o>a;a++)r=t[a],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?s[a]||"":"none"));return t}function M(t,e,i,r,n){return new M.prototype.init(t,e,i,r,n)}function C(){return setTimeout(function(){Qe=void 0}),Qe=J.now()}function A(t,e){var i,r=0,n={height:t};for(e=e?1:0;4>r;r+=2-e)i=xe[r],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function P(t,e,i){for(var r,n=(ii[e]||[]).concat(ii["*"]),s=0,a=n.length;a>s;s++)if(r=n[s].call(i,e,t))return r}function L(t,e,i){var r,n,s,a,o,h,l,u,c=this,d={},p=t.style,f=t.nodeType&&Re(t),m=Ee.get(t,"fxshow");i.queue||(o=J._queueHooks(t,"fx"),null==o.unqueued&&(o.unqueued=0,h=o.empty.fire,o.empty.fire=function(){o.unqueued||h()}),o.unqueued++,c.always(function(){c.always(function(){o.unqueued--,J.queue(t,"fx").length||o.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],l=J.css(t,"display"),u="none"===l?Ee.get(t,"olddisplay")||y(t.nodeName):l,"inline"===u&&"none"===J.css(t,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(r in e)if(n=e[r],Ze.exec(n)){if(delete e[r],s=s||"toggle"===n,n===(f?"hide":"show")){if("show"!==n||!m||void 0===m[r])continue;f=!0}d[r]=m&&m[r]||J.style(t,r)}else l=void 0;if(J.isEmptyObject(d))"inline"===("none"===l?y(t.nodeName):l)&&(p.display=l);else{m?"hidden"in m&&(f=m.hidden):m=Ee.access(t,"fxshow",{}),s&&(m.hidden=!f),f?J(t).show():c.done(function(){J(t).hide()}),c.done(function(){var e;Ee.remove(t,"fxshow");for(e in d)J.style(t,e,d[e])});for(r in d)a=P(f?m[r]:0,r,c),r in m||(m[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function O(t,e){var i,r,n,s,a;for(i in t)if(r=J.camelCase(i),n=e[r],s=t[i],J.isArray(s)&&(n=s[1],s=t[i]=s[0]),i!==r&&(t[r]=s,delete t[i]),a=J.cssHooks[r],a&&"expand"in a){s=a.expand(s),delete t[r];for(i in s)i in t||(t[i]=s[i],e[i]=n)}else e[r]=n}function D(t,e,i){var r,n,s=0,a=ei.length,o=J.Deferred().always(function(){delete h.elem}),h=function(){if(n)return!1;for(var e=Qe||C(),i=Math.max(0,l.startTime+l.duration-e),r=i/l.duration||0,s=1-r,a=0,h=l.tweens.length;h>a;a++)l.tweens[a].run(s);return o.notifyWith(t,[l,s,i]),1>s&&h?i:(o.resolveWith(t,[l]),!1)},l=o.promise({elem:t,props:J.extend({},e),opts:J.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Qe||C(),duration:i.duration,tweens:[],createTween:function(e,i){var r=J.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var i=0,r=e?l.tweens.length:0;if(n)return this;for(n=!0;r>i;i++)l.tweens[i].run(1);return e?o.resolveWith(t,[l,e]):o.rejectWith(t,[l,e]),this}}),u=l.props;for(O(u,l.opts.specialEasing);a>s;s++)if(r=ei[s].call(l,t,u,l.opts))return r;return J.map(u,P,l),J.isFunction(l.opts.start)&&l.opts.start.call(t,l),J.fx.timer(J.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function k(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var r,n=0,s=e.toLowerCase().match(pe)||[];if(J.isFunction(i))for(;r=s[n++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(i)):(t[r]=t[r]||[]).push(i)}}function I(t,e,i,r){function n(o){var h;return s[o]=!0,J.each(t[o]||[],function(t,o){var l=o(e,i,r);return"string"!=typeof l||a||s[l]?a?!(h=l):void 0:(e.dataTypes.unshift(l),n(l),!1)}),h}var s={},a=t===_i;return n(e.dataTypes[0])||!s["*"]&&n("*")}function N(t,e){var i,r,n=J.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((n[i]?t:r||(r={}))[i]=e[i]);return r&&J.extend(!0,t,r),t}function F(t,e,i){for(var r,n,s,a,o=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(n in o)if(o[n]&&o[n].test(r)){h.unshift(n);break}if(h[0]in i)s=h[0];else{for(n in i){if(!h[0]||t.converters[n+" "+h[0]]){s=n;break}a||(a=n)}s=s||a}return s?(s!==h[0]&&h.unshift(s),i[s]):void 0}function j(t,e,i,r){var n,s,a,o,h,l={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(s=u.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!h&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=s,s=u.shift())if("*"===s)s=h;else if("*"!==h&&h!==s){if(a=l[h+" "+s]||l["* "+s],!a)for(n in l)if(o=n.split(" "),o[1]===s&&(a=l[h+" "+o[0]]||l["* "+o[0]])){a===!0?a=l[n]:l[n]!==!0&&(s=o[0],u.unshift(o[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(c){return{state:"parsererror",error:a?c:"No conversion from "+h+" to "+s}}}return{state:"success",data:e}}function B(t,e,i,r){var n;if(J.isArray(e))J.each(e,function(e,n){i||bi.test(t)?r(t,n):B(t+"["+("object"==typeof n?e:"")+"]",n,i,r)});else if(i||"object"!==J.type(e))r(t,e);else for(n in e)B(t+"["+n+"]",e[n],i,r)}function U(t){return J.isWindow(t)?t:9===t.nodeType&&t.defaultView}var z=[],V=z.slice,$=z.concat,G=z.push,W=z.indexOf,q={},X=q.toString,Y=q.hasOwnProperty,Q={},K=t.document,Z="2.1.4",J=function(t,e){return new J.fn.init(t,e)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,ie=/-([\da-z])/gi,re=function(t,e){return e.toUpperCase()};J.fn=J.prototype={jquery:Z,constructor:J,selector:"",length:0,toArray:function(){return V.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:V.call(this)},pushStack:function(t){var e=J.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return J.each(this,t,e)},map:function(t){return this.pushStack(J.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:z.sort,splice:z.splice},J.extend=J.fn.extend=function(){var t,e,i,r,n,s,a=arguments[0]||{},o=1,h=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[o]||{},o++),"object"==typeof a||J.isFunction(a)||(a={}),o===h&&(a=this,o--);h>o;o++)if(null!=(t=arguments[o]))for(e in t)i=a[e],r=t[e],a!==r&&(l&&r&&(J.isPlainObject(r)||(n=J.isArray(r)))?(n?(n=!1,s=i&&J.isArray(i)?i:[]):s=i&&J.isPlainObject(i)?i:{},a[e]=J.extend(l,s,r)):void 0!==r&&(a[e]=r));return a},J.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===J.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!J.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==J.type(t)||t.nodeType||J.isWindow(t)?!1:t.constructor&&!Y.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?q[X.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=J.trim(t),t&&(1===t.indexOf("use strict")?(e=K.createElement("script"),e.text=t,K.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(ee,"ms-").replace(ie,re)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var n,s=0,a=t.length,o=i(t);if(r){if(o)for(;a>s&&(n=e.apply(t[s],r),n!==!1);s++);else for(s in t)if(n=e.apply(t[s],r),n===!1)break}else if(o)for(;a>s&&(n=e.call(t[s],s,t[s]),n!==!1);s++);else for(s in t)if(n=e.call(t[s],s,t[s]),n===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(te,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(i(Object(t))?J.merge(r,"string"==typeof t?[t]:t):G.call(r,t)),r},inArray:function(t,e,i){return null==e?-1:W.call(e,t,i)},merge:function(t,e){for(var i=+e.length,r=0,n=t.length;i>r;r++)t[n++]=e[r];return t.length=n,t},grep:function(t,e,i){for(var r,n=[],s=0,a=t.length,o=!i;a>s;s++)r=!e(t[s],s),r!==o&&n.push(t[s]);return n},map:function(t,e,r){var n,s=0,a=t.length,o=i(t),h=[];if(o)for(;a>s;s++)n=e(t[s],s,r),null!=n&&h.push(n);else for(s in t)n=e(t[s],s,r),null!=n&&h.push(n);return $.apply([],h)},guid:1,proxy:function(t,e){var i,r,n;return"string"==typeof e&&(i=t[e],e=t,t=i),J.isFunction(t)?(r=V.call(arguments,2),n=function(){return t.apply(e||this,r.concat(V.call(arguments)))},n.guid=t.guid=t.guid||J.guid++,n):void 0},now:Date.now,support:Q}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){q["[object "+e+"]"]=e.toLowerCase()});var ne=function(t){function e(t,e,i,r){var n,s,a,o,h,l,c,p,f,m;if((e?e.ownerDocument||e:B)!==L&&P(e),e=e||L,i=i||[],o=e.nodeType,"string"!=typeof t||!t||1!==o&&9!==o&&11!==o)return i;if(!r&&D){if(11!==o&&(n=ve.exec(t)))if(a=n[1]){if(9===o){if(s=e.getElementById(a),!s||!s.parentNode)return i;if(s.id===a)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(a))&&F(e,s)&&s.id===a)return i.push(s),i}else{if(n[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((a=n[3])&&T.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(a)),i}if(T.qsa&&(!k||!k.test(t))){if(p=c=j,f=e,m=1!==o&&t,1===o&&"object"!==e.nodeName.toLowerCase()){for(l=w(t),(c=e.getAttribute("id"))?p=c.replace(ye,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",h=l.length;h--;)l[h]=p+d(l[h]);f=_e.test(t)&&u(e.parentNode)||e,m=l.join(",")}if(m)try{return Z.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{c||e.removeAttribute("id")}}}return S(t.replace(he,"$1"),e,i,r)}function i(){function t(i,r){return e.push(i+" ")>x.cacheLength&&delete t[e.shift()],t[i+" "]=r}var e=[];return t}function r(t){return t[j]=!0,t}function n(t){var e=L.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),r=t.length;r--;)x.attrHandle[i[r]]=e}function a(t,e){var i=e&&t,r=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||q)-(~t.sourceIndex||q);if(r)return r;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function o(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function l(t){return r(function(e){return e=+e,r(function(i,r){for(var n,s=t([],i.length,e),a=s.length;a--;)i[n=s[a]]&&(i[n]=!(r[n]=i[n]))})})}function u(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function d(t){for(var e=0,i=t.length,r="";i>e;e++)r+=t[e].value;return r}function p(t,e,i){var r=e.dir,n=i&&"parentNode"===r,s=z++;return e.first?function(e,i,s){for(;e=e[r];)if(1===e.nodeType||n)return t(e,i,s)}:function(e,i,a){var o,h,l=[U,s];if(a){for(;e=e[r];)if((1===e.nodeType||n)&&t(e,i,a))return!0}else for(;e=e[r];)if(1===e.nodeType||n){if(h=e[j]||(e[j]={}),(o=h[r])&&o[0]===U&&o[1]===s)return l[2]=o[2];if(h[r]=l,l[2]=t(e,i,a))return!0}}}function f(t){return t.length>1?function(e,i,r){for(var n=t.length;n--;)if(!t[n](e,i,r))return!1;return!0}:t[0]}function m(t,i,r){for(var n=0,s=i.length;s>n;n++)e(t,i[n],r);return r}function g(t,e,i,r,n){for(var s,a=[],o=0,h=t.length,l=null!=e;h>o;o++)(s=t[o])&&(!i||i(s,r,n))&&(a.push(s),l&&e.push(o));return a}function E(t,e,i,n,s,a){return n&&!n[j]&&(n=E(n)),s&&!s[j]&&(s=E(s,a)),r(function(r,a,o,h){var l,u,c,d=[],p=[],f=a.length,E=r||m(e||"*",o.nodeType?[o]:o,[]),v=!t||!r&&e?E:g(E,d,t,o,h),_=i?s||(r?t:f||n)?[]:a:v;if(i&&i(v,_,o,h),n)for(l=g(_,p),n(l,[],o,h),u=l.length;u--;)(c=l[u])&&(_[p[u]]=!(v[p[u]]=c));if(r){if(s||t){if(s){for(l=[],u=_.length;u--;)(c=_[u])&&l.push(v[u]=c);s(null,_=[],l,h)}for(u=_.length;u--;)(c=_[u])&&(l=s?te(r,c):d[u])>-1&&(r[l]=!(a[l]=c))}}else _=g(_===a?_.splice(f,_.length):_),s?s(null,a,_,h):Z.apply(a,_)})}function v(t){for(var e,i,r,n=t.length,s=x.relative[t[0].type],a=s||x.relative[" "],o=s?1:0,h=p(function(t){return t===e},a,!0),l=p(function(t){return te(e,t)>-1},a,!0),u=[function(t,i,r){var n=!s&&(r||i!==M)||((e=i).nodeType?h(t,i,r):l(t,i,r));return e=null,n}];n>o;o++)if(i=x.relative[t[o].type])u=[p(f(u),i)];else{if(i=x.filter[t[o].type].apply(null,t[o].matches),i[j]){for(r=++o;n>r&&!x.relative[t[r].type];r++);return E(o>1&&f(u),o>1&&d(t.slice(0,o-1).concat({value:" "===t[o-2].type?"*":""})).replace(he,"$1"),i,r>o&&v(t.slice(o,r)),n>r&&v(t=t.slice(r)),n>r&&d(t))}u.push(i)}return f(u)}function _(t,i){var n=i.length>0,s=t.length>0,a=function(r,a,o,h,l){var u,c,d,p=0,f="0",m=r&&[],E=[],v=M,_=r||s&&x.find.TAG("*",l),y=U+=null==v?1:Math.random()||.1,T=_.length;for(l&&(M=a!==L&&a);f!==T&&null!=(u=_[f]);f++){if(s&&u){for(c=0;d=t[c++];)if(d(u,a,o)){h.push(u);break}l&&(U=y)}n&&((u=!d&&u)&&p--,r&&m.push(u))}if(p+=f,n&&f!==p){for(c=0;d=i[c++];)d(m,E,a,o);if(r){if(p>0)for(;f--;)m[f]||E[f]||(E[f]=Q.call(h));E=g(E)}Z.apply(h,E),l&&!r&&E.length>0&&p+i.length>1&&e.uniqueSort(h)}return l&&(U=y,M=v),m};return n?r(a):a}var y,T,x,R,b,w,H,S,M,C,A,P,L,O,D,k,I,N,F,j="sizzle"+1*new Date,B=t.document,U=0,z=0,V=i(),$=i(),G=i(),W=function(t,e){return t===e&&(A=!0),0},q=1<<31,X={}.hasOwnProperty,Y=[],Q=Y.pop,K=Y.push,Z=Y.push,J=Y.slice,te=function(t,e){for(var i=0,r=t.length;r>i;i++)if(t[i]===e)return i;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=re.replace("w","w#"),se="\\["+ie+"*("+re+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+ie+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",oe=new RegExp(ie+"+","g"),he=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ue=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ce=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(ae),pe=new RegExp("^"+ne+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,Ee=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/[+~]/,ye=/'|\\/g,Te=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),xe=function(t,e,i){var r="0x"+e-65536;return r!==r||i?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Re=function(){P()};try{Z.apply(Y=J.call(B.childNodes),B.childNodes),Y[B.childNodes.length].nodeType}catch(be){Z={apply:Y.length?function(t,e){K.apply(t,J.call(e))}:function(t,e){for(var i=t.length,r=0;t[i++]=e[r++];);t.length=i-1}}}T=e.support={},b=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},P=e.setDocument=function(t){var e,i,r=t?t.ownerDocument||t:B;return r!==L&&9===r.nodeType&&r.documentElement?(L=r,O=r.documentElement,i=r.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",Re,!1):i.attachEvent&&i.attachEvent("onunload",Re)),D=!b(r),T.attributes=n(function(t){return t.className="i",!t.getAttribute("className")}),T.getElementsByTagName=n(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),T.getElementsByClassName=Ee.test(r.getElementsByClassName),T.getById=n(function(t){return O.appendChild(t).id=j,!r.getElementsByName||!r.getElementsByName(j).length}),T.getById?(x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&D){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},x.filter.ID=function(t){var e=t.replace(Te,xe);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(Te,xe);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),x.find.TAG=T.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):T.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,r=[],n=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[n++];)1===i.nodeType&&r.push(i);return r}return s},x.find.CLASS=T.getElementsByClassName&&function(t,e){return D?e.getElementsByClassName(t):void 0},I=[],k=[],(T.qsa=Ee.test(r.querySelectorAll))&&(n(function(t){O.appendChild(t).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&k.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||k.push("\\["+ie+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+j+"-]").length||k.push("~="),t.querySelectorAll(":checked").length||k.push(":checked"),t.querySelectorAll("a#"+j+"+*").length||k.push(".#.+[+~]")}),n(function(t){var e=r.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&k.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||k.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),k.push(",.*:")})),(T.matchesSelector=Ee.test(N=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&n(function(t){T.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),I.push("!=",ae)}),k=k.length&&new RegExp(k.join("|")),I=I.length&&new RegExp(I.join("|")),e=Ee.test(O.compareDocumentPosition),F=e||Ee.test(O.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(i.contains?i.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return A=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!T.sortDetached&&e.compareDocumentPosition(t)===i?t===r||t.ownerDocument===B&&F(B,t)?-1:e===r||e.ownerDocument===B&&F(B,e)?1:C?te(C,t)-te(C,e):0:4&i?-1:1)}:function(t,e){if(t===e)return A=!0,0;var i,n=0,s=t.parentNode,o=e.parentNode,h=[t],l=[e];if(!s||!o)return t===r?-1:e===r?1:s?-1:o?1:C?te(C,t)-te(C,e):0;if(s===o)return a(t,e);for(i=t;i=i.parentNode;)h.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;h[n]===l[n];)n++;return n?a(h[n],l[n]):h[n]===B?-1:l[n]===B?1:0},r):L},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==L&&P(t),i=i.replace(ce,"='$1']"),!(!T.matchesSelector||!D||I&&I.test(i)||k&&k.test(i)))try{var r=N.call(t,i);if(r||T.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(n){}return e(i,L,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==L&&P(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==L&&P(t);var i=x.attrHandle[e.toLowerCase()],r=i&&X.call(x.attrHandle,e.toLowerCase())?i(t,e,!D):void 0;return void 0!==r?r:T.attributes||!D?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],r=0,n=0;if(A=!T.detectDuplicates,C=!T.sortStable&&t.slice(0),t.sort(W),A){for(;e=t[n++];)e===t[n]&&(r=i.push(n));for(;r--;)t.splice(i[r],1)}return C=null,t},R=e.getText=function(t){var e,i="",r=0,n=t.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=R(t)}else if(3===n||4===n)return t.nodeValue}else for(;e=t[r++];)i+=R(e);return i},x=e.selectors={cacheLength:50,createPseudo:r,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Te,xe),t[3]=(t[3]||t[4]||t[5]||"").replace(Te,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&de.test(i)&&(e=w(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Te,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=V[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&V(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,r){return function(n){var s=e.attr(n,t);return null==s?"!="===i:i?(s+="","="===i?s===r:"!="===i?s!==r:"^="===i?r&&0===s.indexOf(r):"*="===i?r&&s.indexOf(r)>-1:"$="===i?r&&s.slice(-r.length)===r:"~="===i?(" "+s.replace(oe," ")+" ").indexOf(r)>-1:"|="===i?s===r||s.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,i,r,n){var s="nth"!==t.slice(0,3),a="last"!==t.slice(-4),o="of-type"===e;return 1===r&&0===n?function(t){return!!t.parentNode}:function(e,i,h){var l,u,c,d,p,f,m=s!==a?"nextSibling":"previousSibling",g=e.parentNode,E=o&&e.nodeName.toLowerCase(),v=!h&&!o;if(g){if(s){for(;m;){for(c=e;c=c[m];)if(o?c.nodeName.toLowerCase()===E:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&v){for(u=g[j]||(g[j]={}),l=u[t]||[],p=l[0]===U&&l[1],d=l[0]===U&&l[2],c=p&&g.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[U,p,d];break}}else if(v&&(l=(e[j]||(e[j]={}))[t])&&l[0]===U)d=l[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((o?c.nodeName.toLowerCase()!==E:1!==c.nodeType)||!++d||(v&&((c[j]||(c[j]={}))[t]=[U,d]),c!==e)););return d-=n,d===r||d%r===0&&d/r>=0}}},PSEUDO:function(t,i){var n,s=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[j]?s(i):s.length>1?(n=[t,t,"",i],x.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,n=s(t,i),a=n.length;a--;)r=te(t,n[a]),t[r]=!(e[r]=n[a])}):function(t){return s(t,0,n)}):s}},pseudos:{not:r(function(t){var e=[],i=[],n=H(t.replace(he,"$1"));return n[j]?r(function(t,e,i,r){for(var s,a=n(t,null,r,[]),o=t.length;o--;)(s=a[o])&&(t[o]=!(e[o]=s))}):function(t,r,s){return e[0]=t,n(e,null,s,i),e[0]=null,!i.pop()}}),has:r(function(t){return function(i){return e(t,i).length>0}}),contains:r(function(t){return t=t.replace(Te,xe),function(e){return(e.textContent||e.innerText||R(e)).indexOf(t)>-1}}),lang:r(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Te,xe).toLowerCase(),function(e){var i;do if(i=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[0>i?i+e:i]}),even:l(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var r=0>i?i+e:i;--r>=0;)t.push(r);return t}),gt:l(function(t,e,i){for(var r=0>i?i+e:i;++r<e;)t.push(r);return t})}},x.pseudos.nth=x.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[y]=o(y);for(y in{submit:!0,reset:!0})x.pseudos[y]=h(y);return c.prototype=x.filters=x.pseudos,x.setFilters=new c,w=e.tokenize=function(t,i){var r,n,s,a,o,h,l,u=$[t+" "];if(u)return i?0:u.slice(0);for(o=t,h=[],l=x.preFilter;o;){(!r||(n=le.exec(o)))&&(n&&(o=o.slice(n[0].length)||o),h.push(s=[])),r=!1,(n=ue.exec(o))&&(r=n.shift(),s.push({value:r,type:n[0].replace(he," ")}),o=o.slice(r.length));for(a in x.filter)!(n=fe[a].exec(o))||l[a]&&!(n=l[a](n))||(r=n.shift(),s.push({value:r,type:a,matches:n}),o=o.slice(r.length));if(!r)break}return i?o.length:o?e.error(t):$(t,h).slice(0)},H=e.compile=function(t,e){var i,r=[],n=[],s=G[t+" "];if(!s){for(e||(e=w(t)),i=e.length;i--;)s=v(e[i]),s[j]?r.push(s):n.push(s);s=G(t,_(n,r)),s.selector=t}return s},S=e.select=function(t,e,i,r){var n,s,a,o,h,l="function"==typeof t&&t,c=!r&&w(t=l.selector||t);if(i=i||[],1===c.length){if(s=c[0]=c[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&T.getById&&9===e.nodeType&&D&&x.relative[s[1].type]){if(e=(x.find.ID(a.matches[0].replace(Te,xe),e)||[])[0],!e)return i;l&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(n=fe.needsContext.test(t)?0:s.length;n--&&(a=s[n],!x.relative[o=a.type]);)if((h=x.find[o])&&(r=h(a.matches[0].replace(Te,xe),_e.test(s[0].type)&&u(e.parentNode)||e))){if(s.splice(n,1),t=r.length&&d(s),!t)return Z.apply(i,r),i;break}}return(l||H(t,c))(r,e,!D,i,_e.test(t)&&u(e.parentNode)||e),i},T.sortStable=j.split("").sort(W).join("")===j,T.detectDuplicates=!!A,P(),T.sortDetached=n(function(t){return 1&t.compareDocumentPosition(L.createElement("div"))}),n(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),T.attributes&&n(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),n(function(t){return null==t.getAttribute("disabled")})||s(ee,function(t,e,i){var r;return i?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);J.find=ne,J.expr=ne.selectors,J.expr[":"]=J.expr.pseudos,J.unique=ne.uniqueSort,J.text=ne.getText,J.isXMLDoc=ne.isXML,J.contains=ne.contains;var se=J.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,oe=/^.[^:#\[\.,]*$/;J.filter=function(t,e,i){var r=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?J.find.matchesSelector(r,t)?[r]:[]:J.find.matches(t,J.grep(e,function(t){return 1===t.nodeType}))},J.fn.extend({find:function(t){var e,i=this.length,r=[],n=this;if("string"!=typeof t)return this.pushStack(J(t).filter(function(){for(e=0;i>e;e++)if(J.contains(n[e],this))return!0}));for(e=0;i>e;e++)J.find(t,n[e],r);return r=this.pushStack(i>1?J.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&se.test(t)?J(t):t||[],!1).length}});var he,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=J.fn.init=function(t,e){var i,r;if(!t)return this;if("string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:le.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||he).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof J?e[0]:e,J.merge(this,J.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:K,!0)),ae.test(i[1])&&J.isPlainObject(e))for(i in e)J.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);
return this}return r=K.getElementById(i[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=K,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):J.isFunction(t)?"undefined"!=typeof he.ready?he.ready(t):t(J):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),J.makeArray(t,this))};ue.prototype=J.fn,he=J(K);var ce=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(t,e,i){for(var r=[],n=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(n&&J(t).is(i))break;r.push(t)}return r},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),J.fn.extend({has:function(t){var e=J(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(J.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,r=0,n=this.length,s=[],a=se.test(t)||"string"!=typeof t?J(t,e||this.context):0;n>r;r++)for(i=this[r];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&J.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?J.unique(s):s)},index:function(t){return t?"string"==typeof t?W.call(J(t),this[0]):W.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(J.unique(J.merge(this.get(),J(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),J.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return J.dir(t,"parentNode")},parentsUntil:function(t,e,i){return J.dir(t,"parentNode",i)},next:function(t){return n(t,"nextSibling")},prev:function(t){return n(t,"previousSibling")},nextAll:function(t){return J.dir(t,"nextSibling")},prevAll:function(t){return J.dir(t,"previousSibling")},nextUntil:function(t,e,i){return J.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return J.dir(t,"previousSibling",i)},siblings:function(t){return J.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return J.sibling(t.firstChild)},contents:function(t){return t.contentDocument||J.merge([],t.childNodes)}},function(t,e){J.fn[t]=function(i,r){var n=J.map(this,e,i);return"Until"!==t.slice(-5)&&(r=i),r&&"string"==typeof r&&(n=J.filter(r,n)),this.length>1&&(de[t]||J.unique(n),ce.test(t)&&n.reverse()),this.pushStack(n)}});var pe=/\S+/g,fe={};J.Callbacks=function(t){t="string"==typeof t?fe[t]||s(t):J.extend({},t);var e,i,r,n,a,o,h=[],l=!t.once&&[],u=function(s){for(e=t.memory&&s,i=!0,o=n||0,n=0,a=h.length,r=!0;h&&a>o;o++)if(h[o].apply(s[0],s[1])===!1&&t.stopOnFalse){e=!1;break}r=!1,h&&(l?l.length&&u(l.shift()):e?h=[]:c.disable())},c={add:function(){if(h){var i=h.length;!function s(e){J.each(e,function(e,i){var r=J.type(i);"function"===r?t.unique&&c.has(i)||h.push(i):i&&i.length&&"string"!==r&&s(i)})}(arguments),r?a=h.length:e&&(n=i,u(e))}return this},remove:function(){return h&&J.each(arguments,function(t,e){for(var i;(i=J.inArray(e,h,i))>-1;)h.splice(i,1),r&&(a>=i&&a--,o>=i&&o--)}),this},has:function(t){return t?J.inArray(t,h)>-1:!(!h||!h.length)},empty:function(){return h=[],a=0,this},disable:function(){return h=l=e=void 0,this},disabled:function(){return!h},lock:function(){return l=void 0,e||c.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!h||i&&!l||(e=e||[],e=[t,e.slice?e.slice():e],r?l.push(e):u(e)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},J.extend({Deferred:function(t){var e=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],i="pending",r={state:function(){return i},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var t=arguments;return J.Deferred(function(i){J.each(e,function(e,s){var a=J.isFunction(t[e])&&t[e];n[s[1]](function(){var t=a&&a.apply(this,arguments);t&&J.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===r?i.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?J.extend(t,r):r}},n={};return r.pipe=r.then,J.each(e,function(t,s){var a=s[2],o=s[3];r[s[1]]=a.add,o&&a.add(function(){i=o},e[1^t][2].disable,e[2][2].lock),n[s[0]]=function(){return n[s[0]+"With"](this===n?r:this,arguments),this},n[s[0]+"With"]=a.fireWith}),r.promise(n),t&&t.call(n,n),n},when:function(t){var e,i,r,n=0,s=V.call(arguments),a=s.length,o=1!==a||t&&J.isFunction(t.promise)?a:0,h=1===o?t:J.Deferred(),l=function(t,i,r){return function(n){i[t]=this,r[t]=arguments.length>1?V.call(arguments):n,r===e?h.notifyWith(i,r):--o||h.resolveWith(i,r)}};if(a>1)for(e=new Array(a),i=new Array(a),r=new Array(a);a>n;n++)s[n]&&J.isFunction(s[n].promise)?s[n].promise().done(l(n,r,s)).fail(h.reject).progress(l(n,i,e)):--o;return o||h.resolveWith(r,s),h.promise()}});var me;J.fn.ready=function(t){return J.ready.promise().done(t),this},J.extend({isReady:!1,readyWait:1,holdReady:function(t){t?J.readyWait++:J.ready(!0)},ready:function(t){(t===!0?--J.readyWait:J.isReady)||(J.isReady=!0,t!==!0&&--J.readyWait>0||(me.resolveWith(K,[J]),J.fn.triggerHandler&&(J(K).triggerHandler("ready"),J(K).off("ready"))))}}),J.ready.promise=function(e){return me||(me=J.Deferred(),"complete"===K.readyState?setTimeout(J.ready):(K.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1))),me.promise(e)},J.ready.promise();var ge=J.access=function(t,e,i,r,n,s,a){var o=0,h=t.length,l=null==i;if("object"===J.type(i)){n=!0;for(o in i)J.access(t,e,o,i[o],!0,s,a)}else if(void 0!==r&&(n=!0,J.isFunction(r)||(a=!0),l&&(a?(e.call(t,r),e=null):(l=e,e=function(t,e,i){return l.call(J(t),i)})),e))for(;h>o;o++)e(t[o],i,a?r:r.call(t[o],o,e(t[o],i)));return n?t:l?e.call(t):h?e(t[0],i):s};J.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},o.uid=1,o.accepts=J.acceptData,o.prototype={key:function(t){if(!o.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=o.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(r){e[this.expando]=i,J.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var r,n=this.key(t),s=this.cache[n];if("string"==typeof e)s[e]=i;else if(J.isEmptyObject(s))J.extend(this.cache[n],e);else for(r in e)s[r]=e[r];return s},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var r;return void 0===e||e&&"string"==typeof e&&void 0===i?(r=this.get(t,e),void 0!==r?r:this.get(t,J.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,r,n,s=this.key(t),a=this.cache[s];if(void 0===e)this.cache[s]={};else{J.isArray(e)?r=e.concat(e.map(J.camelCase)):(n=J.camelCase(e),e in a?r=[e,n]:(r=n,r=r in a?[r]:r.match(pe)||[])),i=r.length;for(;i--;)delete a[r[i]]}},hasData:function(t){return!J.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var Ee=new o,ve=new o,_e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ye=/([A-Z])/g;J.extend({hasData:function(t){return ve.hasData(t)||Ee.hasData(t)},data:function(t,e,i){return ve.access(t,e,i)},removeData:function(t,e){ve.remove(t,e)},_data:function(t,e,i){return Ee.access(t,e,i)},_removeData:function(t,e){Ee.remove(t,e)}}),J.fn.extend({data:function(t,e){var i,r,n,s=this[0],a=s&&s.attributes;if(void 0===t){if(this.length&&(n=ve.get(s),1===s.nodeType&&!Ee.get(s,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&(r=a[i].name,0===r.indexOf("data-")&&(r=J.camelCase(r.slice(5)),h(s,r,n[r])));Ee.set(s,"hasDataAttrs",!0)}return n}return"object"==typeof t?this.each(function(){ve.set(this,t)}):ge(this,function(e){var i,r=J.camelCase(t);if(s&&void 0===e){if(i=ve.get(s,t),void 0!==i)return i;if(i=ve.get(s,r),void 0!==i)return i;if(i=h(s,r,void 0),void 0!==i)return i}else this.each(function(){var i=ve.get(this,r);ve.set(this,r,e),-1!==t.indexOf("-")&&void 0!==i&&ve.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ve.remove(this,t)})}}),J.extend({queue:function(t,e,i){var r;return t?(e=(e||"fx")+"queue",r=Ee.get(t,e),i&&(!r||J.isArray(i)?r=Ee.access(t,e,J.makeArray(i)):r.push(i)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=J.queue(t,e),r=i.length,n=i.shift(),s=J._queueHooks(t,e),a=function(){J.dequeue(t,e)};"inprogress"===n&&(n=i.shift(),r--),n&&("fx"===e&&i.unshift("inprogress"),delete s.stop,n.call(t,a,s)),!r&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Ee.get(t,i)||Ee.access(t,i,{empty:J.Callbacks("once memory").add(function(){Ee.remove(t,[e+"queue",i])})})}}),J.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?J.queue(this[0],t):void 0===e?this:this.each(function(){var i=J.queue(this,t,e);J._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&J.dequeue(this,t)})},dequeue:function(t){return this.each(function(){J.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,r=1,n=J.Deferred(),s=this,a=this.length,o=function(){--r||n.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)i=Ee.get(s[a],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(o));return o(),n.promise(e)}});var Te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xe=["Top","Right","Bottom","Left"],Re=function(t,e){return t=e||t,"none"===J.css(t,"display")||!J.contains(t.ownerDocument,t)},be=/^(?:checkbox|radio)$/i;!function(){var t=K.createDocumentFragment(),e=t.appendChild(K.createElement("div")),i=K.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),Q.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var we="undefined";Q.focusinBubbles="onfocusin"in t;var He=/^key/,Se=/^(?:mouse|pointer|contextmenu)|click/,Me=/^(?:focusinfocus|focusoutblur)$/,Ce=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(t,e,i,r,n){var s,a,o,h,l,u,c,d,p,f,m,g=Ee.get(t);if(g)for(i.handler&&(s=i,i=s.handler,n=s.selector),i.guid||(i.guid=J.guid++),(h=g.events)||(h=g.events={}),(a=g.handle)||(a=g.handle=function(e){return typeof J!==we&&J.event.triggered!==e.type?J.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(pe)||[""],l=e.length;l--;)o=Ce.exec(e[l])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p&&(c=J.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,c=J.event.special[p]||{},u=J.extend({type:p,origType:m,data:r,handler:i,guid:i.guid,selector:n,needsContext:n&&J.expr.match.needsContext.test(n),namespace:f.join(".")},s),(d=h[p])||(d=h[p]=[],d.delegateCount=0,c.setup&&c.setup.call(t,r,f,a)!==!1||t.addEventListener&&t.addEventListener(p,a,!1)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),n?d.splice(d.delegateCount++,0,u):d.push(u),J.event.global[p]=!0)},remove:function(t,e,i,r,n){var s,a,o,h,l,u,c,d,p,f,m,g=Ee.hasData(t)&&Ee.get(t);if(g&&(h=g.events)){for(e=(e||"").match(pe)||[""],l=e.length;l--;)if(o=Ce.exec(e[l])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p){for(c=J.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,d=h[p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=d.length;s--;)u=d[s],!n&&m!==u.origType||i&&i.guid!==u.guid||o&&!o.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,c.remove&&c.remove.call(t,u));a&&!d.length&&(c.teardown&&c.teardown.call(t,f,g.handle)!==!1||J.removeEvent(t,p,g.handle),delete h[p])}else for(p in h)J.event.remove(t,p+e[l],i,r,!0);J.isEmptyObject(h)&&(delete g.handle,Ee.remove(t,"events"))}},trigger:function(e,i,r,n){var s,a,o,h,l,u,c,d=[r||K],p=Y.call(e,"type")?e.type:e,f=Y.call(e,"namespace")?e.namespace.split("."):[];if(a=o=r=r||K,3!==r.nodeType&&8!==r.nodeType&&!Me.test(p+J.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,e=e[J.expando]?e:new J.Event(p,"object"==typeof e&&e),e.isTrigger=n?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),i=null==i?[e]:J.makeArray(i,[e]),c=J.event.special[p]||{},n||!c.trigger||c.trigger.apply(r,i)!==!1)){if(!n&&!c.noBubble&&!J.isWindow(r)){for(h=c.delegateType||p,Me.test(h+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),o=a;o===(r.ownerDocument||K)&&d.push(o.defaultView||o.parentWindow||t)}for(s=0;(a=d[s++])&&!e.isPropagationStopped();)e.type=s>1?h:c.bindType||p,u=(Ee.get(a,"events")||{})[e.type]&&Ee.get(a,"handle"),u&&u.apply(a,i),u=l&&a[l],u&&u.apply&&J.acceptData(a)&&(e.result=u.apply(a,i),e.result===!1&&e.preventDefault());return e.type=p,n||e.isDefaultPrevented()||c._default&&c._default.apply(d.pop(),i)!==!1||!J.acceptData(r)||l&&J.isFunction(r[p])&&!J.isWindow(r)&&(o=r[l],o&&(r[l]=null),J.event.triggered=p,r[p](),J.event.triggered=void 0,o&&(r[l]=o)),e.result}},dispatch:function(t){t=J.event.fix(t);var e,i,r,n,s,a=[],o=V.call(arguments),h=(Ee.get(this,"events")||{})[t.type]||[],l=J.event.special[t.type]||{};if(o[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(a=J.event.handlers.call(this,t,h),e=0;(n=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=n.elem,i=0;(s=n.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,r=((J.event.special[s.origType]||{}).handle||s.handler).apply(n.elem,o),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,r,n,s,a=[],o=e.delegateCount,h=t.target;if(o&&h.nodeType&&(!t.button||"click"!==t.type))for(;h!==this;h=h.parentNode||this)if(h.disabled!==!0||"click"!==t.type){for(r=[],i=0;o>i;i++)s=e[i],n=s.selector+" ",void 0===r[n]&&(r[n]=s.needsContext?J(n,this).index(h)>=0:J.find(n,this,null,[h]).length),r[n]&&r.push(s);r.length&&a.push({elem:h,handlers:r})}return o<e.length&&a.push({elem:this,handlers:e.slice(o)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,r,n,s=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||K,r=i.documentElement,n=i.body,t.pageX=e.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[J.expando])return t;var e,i,r,n=t.type,s=t,a=this.fixHooks[n];for(a||(this.fixHooks[n]=a=Se.test(n)?this.mouseHooks:He.test(n)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new J.Event(s),e=r.length;e--;)i=r[e],t[i]=s[i];return t.target||(t.target=K),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return J.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,r){var n=J.extend(new J.Event,i,{type:t,isSimulated:!0,originalEvent:{}});r?J.event.trigger(n,null,e):J.event.dispatch.call(e,n),n.isDefaultPrevented()&&i.preventDefault()}},J.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},J.Event=function(t,e){return this instanceof J.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?l:u):this.type=t,e&&J.extend(this,e),this.timeStamp=t&&t.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(t,e)},J.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=l,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){J.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,r=this,n=t.relatedTarget,s=t.handleObj;return(!n||n!==r&&!J.contains(r,n))&&(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),Q.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){J.event.simulate(e,t.target,J.event.fix(t),!0)};J.event.special[e]={setup:function(){var r=this.ownerDocument||this,n=Ee.access(r,e);n||r.addEventListener(t,i,!0),Ee.access(r,e,(n||0)+1)},teardown:function(){var r=this.ownerDocument||this,n=Ee.access(r,e)-1;n?Ee.access(r,e,n):(r.removeEventListener(t,i,!0),Ee.remove(r,e))}}}),J.fn.extend({on:function(t,e,i,r,n){var s,a;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(a in t)this.on(a,e,i,t[a],n);return this}if(null==i&&null==r?(r=e,i=e=void 0):null==r&&("string"==typeof e?(r=i,i=void 0):(r=i,i=e,e=void 0)),r===!1)r=u;else if(!r)return this;return 1===n&&(s=r,r=function(t){return J().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=J.guid++)),this.each(function(){J.event.add(this,t,r,i,e)})},one:function(t,e,i,r){return this.on(t,e,i,r,1)},off:function(t,e,i){var r,n;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,J(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(n in t)this.off(n,e,t[n]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=u),this.each(function(){J.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){J.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?J.event.trigger(t,e,i,!0):void 0}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pe=/<([\w:]+)/,Le=/<|&#?\w+;/,Oe=/<(?:script|style|link)/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^$|\/(?:java|ecma)script/i,Ie=/^true\/(.*)/,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,J.extend({clone:function(t,e,i){var r,n,s,a,o=t.cloneNode(!0),h=J.contains(t.ownerDocument,t);if(!(Q.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||J.isXMLDoc(t)))for(a=E(o),s=E(t),r=0,n=s.length;n>r;r++)v(s[r],a[r]);if(e)if(i)for(s=s||E(t),a=a||E(o),r=0,n=s.length;n>r;r++)g(s[r],a[r]);else g(t,o);return a=E(o,"script"),a.length>0&&m(a,!h&&E(t,"script")),o},buildFragment:function(t,e,i,r){for(var n,s,a,o,h,l,u=e.createDocumentFragment(),c=[],d=0,p=t.length;p>d;d++)if(n=t[d],n||0===n)if("object"===J.type(n))J.merge(c,n.nodeType?[n]:n);else if(Le.test(n)){for(s=s||u.appendChild(e.createElement("div")),a=(Pe.exec(n)||["",""])[1].toLowerCase(),o=Fe[a]||Fe._default,s.innerHTML=o[1]+n.replace(Ae,"<$1></$2>")+o[2],l=o[0];l--;)s=s.lastChild;J.merge(c,s.childNodes),s=u.firstChild,s.textContent=""}else c.push(e.createTextNode(n));for(u.textContent="",d=0;n=c[d++];)if((!r||-1===J.inArray(n,r))&&(h=J.contains(n.ownerDocument,n),s=E(u.appendChild(n),"script"),h&&m(s),i))for(l=0;n=s[l++];)ke.test(n.type||"")&&i.push(n);return u},cleanData:function(t){for(var e,i,r,n,s=J.event.special,a=0;void 0!==(i=t[a]);a++){if(J.acceptData(i)&&(n=i[Ee.expando],n&&(e=Ee.cache[n]))){if(e.events)for(r in e.events)s[r]?J.event.remove(i,r):J.removeEvent(i,r,e.handle);Ee.cache[n]&&delete Ee.cache[n]}delete ve.cache[i[ve.expando]]}}}),J.fn.extend({text:function(t){return ge(this,function(t){return void 0===t?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,r=t?J.filter(t,this):this,n=0;null!=(i=r[n]);n++)e||1!==i.nodeType||J.cleanData(E(i)),i.parentNode&&(e&&J.contains(i.ownerDocument,i)&&m(E(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(J.cleanData(E(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return J.clone(this,t,e)})},html:function(t){return ge(this,function(t){var e=this[0]||{},i=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Oe.test(t)&&!Fe[(Pe.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ae,"<$1></$2>");try{for(;r>i;i++)e=this[i]||{},1===e.nodeType&&(J.cleanData(E(e,!1)),e.innerHTML=t);e=0}catch(n){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,J.cleanData(E(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=$.apply([],t);var i,r,n,s,a,o,h=0,l=this.length,u=this,c=l-1,d=t[0],m=J.isFunction(d);if(m||l>1&&"string"==typeof d&&!Q.checkClone&&De.test(d))return this.each(function(i){var r=u.eq(i);m&&(t[0]=d.call(this,i,r.html())),r.domManip(t,e)});if(l&&(i=J.buildFragment(t,this[0].ownerDocument,!1,this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(n=J.map(E(i,"script"),p),s=n.length;l>h;h++)a=i,h!==c&&(a=J.clone(a,!0,!0),s&&J.merge(n,E(a,"script"))),e.call(this[h],a,h);if(s)for(o=n[n.length-1].ownerDocument,J.map(n,f),h=0;s>h;h++)a=n[h],ke.test(a.type||"")&&!Ee.access(a,"globalEval")&&J.contains(o,a)&&(a.src?J._evalUrl&&J._evalUrl(a.src):J.globalEval(a.textContent.replace(Ne,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){J.fn[t]=function(t){for(var i,r=[],n=J(t),s=n.length-1,a=0;s>=a;a++)i=a===s?this:this.clone(!0),J(n[a])[e](i),G.apply(r,i.get());return this.pushStack(r)}});var je,Be={},Ue=/^margin/,ze=new RegExp("^("+Te+")(?!px)[a-z%]+$","i"),Ve=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",n.appendChild(s);var e=t.getComputedStyle(a,null);i="1%"!==e.top,r="4px"===e.width,n.removeChild(s)}var i,r,n=K.documentElement,s=K.createElement("div"),a=K.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",s.appendChild(a),t.getComputedStyle&&J.extend(Q,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==r&&e(),r},reliableMarginRight:function(){var e,i=a.appendChild(K.createElement("div"));return i.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",a.style.width="1px",n.appendChild(s),e=!parseFloat(t.getComputedStyle(i,null).marginRight),n.removeChild(s),a.removeChild(i),e}}))}(),J.swap=function(t,e,i,r){var n,s,a={};for(s in e)a[s]=t.style[s],t.style[s]=e[s];n=i.apply(t,r||[]);for(s in e)t.style[s]=a[s];return n};var $e=/^(none|table(?!-c[ea]).+)/,Ge=new RegExp("^("+Te+")(.*)$","i"),We=new RegExp("^([+-])=("+Te+")","i"),qe={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},Ye=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=T(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var n,s,a,o=J.camelCase(e),h=t.style;return e=J.cssProps[o]||(J.cssProps[o]=R(h,o)),a=J.cssHooks[e]||J.cssHooks[o],void 0===i?a&&"get"in a&&void 0!==(n=a.get(t,!1,r))?n:h[e]:(s=typeof i,"string"===s&&(n=We.exec(i))&&(i=(n[1]+1)*n[2]+parseFloat(J.css(t,e)),s="number"),void(null!=i&&i===i&&("number"!==s||J.cssNumber[o]||(i+="px"),Q.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,r))||(h[e]=i))))}},css:function(t,e,i,r){var n,s,a,o=J.camelCase(e);return e=J.cssProps[o]||(J.cssProps[o]=R(t.style,o)),a=J.cssHooks[e]||J.cssHooks[o],a&&"get"in a&&(n=a.get(t,!0,i)),void 0===n&&(n=T(t,e,r)),"normal"===n&&e in Xe&&(n=Xe[e]),""===i||i?(s=parseFloat(n),i===!0||J.isNumeric(s)?s||0:n):n}}),J.each(["height","width"],function(t,e){J.cssHooks[e]={get:function(t,i,r){return i?$e.test(J.css(t,"display"))&&0===t.offsetWidth?J.swap(t,qe,function(){return H(t,e,r)}):H(t,e,r):void 0},set:function(t,i,r){var n=r&&Ve(t);return b(t,i,r?w(t,e,r,"border-box"===J.css(t,"boxSizing",!1,n),n):0)}}}),J.cssHooks.marginRight=x(Q.reliableMarginRight,function(t,e){return e?J.swap(t,{display:"inline-block"},T,[t,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(t,e){J.cssHooks[t+e]={expand:function(i){for(var r=0,n={},s="string"==typeof i?i.split(" "):[i];4>r;r++)n[t+xe[r]+e]=s[r]||s[r-2]||s[0];return n}},Ue.test(t)||(J.cssHooks[t+e].set=b)}),J.fn.extend({css:function(t,e){return ge(this,function(t,e,i){var r,n,s={},a=0;if(J.isArray(e)){for(r=Ve(t),n=e.length;n>a;a++)s[e[a]]=J.css(t,e[a],!1,r);return s}return void 0!==i?J.style(t,e,i):J.css(t,e)},t,e,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Re(this)?J(this).show():J(this).hide()})}}),J.Tween=M,M.prototype={constructor:M,init:function(t,e,i,r,n,s){this.elem=t,this.prop=i,this.easing=n||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=s||(J.cssNumber[i]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return t&&t.get?t.get(this):M.propHooks._default.get(this)},run:function(t){var e,i=M.propHooks[this.prop];return this.pos=e=this.options.duration?J.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=J.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){J.fx.step[t.prop]?J.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[J.cssProps[t.prop]]||J.cssHooks[t.prop])?J.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},J.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},J.fx=M.prototype.init,J.fx.step={};var Qe,Ke,Ze=/^(?:toggle|show|hide)$/,Je=new RegExp("^(?:([+-])=|)("+Te+")([a-z%]*)$","i"),ti=/queueHooks$/,ei=[L],ii={"*":[function(t,e){var i=this.createTween(t,e),r=i.cur(),n=Je.exec(e),s=n&&n[3]||(J.cssNumber[t]?"":"px"),a=(J.cssNumber[t]||"px"!==s&&+r)&&Je.exec(J.css(i.elem,t)),o=1,h=20;if(a&&a[3]!==s){s=s||a[3],n=n||[],a=+r||1;do o=o||".5",a/=o,J.style(i.elem,t,a+s);while(o!==(o=i.cur()/r)&&1!==o&&--h)}return n&&(a=i.start=+a||+r||0,i.unit=s,i.end=n[1]?a+(n[1]+1)*n[2]:+n[2]),i}]};J.Animation=J.extend(D,{tweener:function(t,e){J.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,r=0,n=t.length;n>r;r++)i=t[r],ii[i]=ii[i]||[],ii[i].unshift(e)},prefilter:function(t,e){e?ei.unshift(t):ei.push(t)}}),J.speed=function(t,e,i){var r=t&&"object"==typeof t?J.extend({},t):{complete:i||!i&&e||J.isFunction(t)&&t,duration:t,easing:i&&e||e&&!J.isFunction(e)&&e};return r.duration=J.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in J.fx.speeds?J.fx.speeds[r.duration]:J.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){J.isFunction(r.old)&&r.old.call(this),r.queue&&J.dequeue(this,r.queue)},r},J.fn.extend({fadeTo:function(t,e,i,r){return this.filter(Re).css("opacity",0).show().end().animate({opacity:e},t,i,r)},animate:function(t,e,i,r){var n=J.isEmptyObject(t),s=J.speed(e,i,r),a=function(){var e=D(this,J.extend({},t),s);(n||Ee.get(this,"finish"))&&e.stop(!0)};return a.finish=a,n||s.queue===!1?this.each(a):this.queue(s.queue,a)},stop:function(t,e,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",s=J.timers,a=Ee.get(this);if(n)a[n]&&a[n].stop&&r(a[n]);else for(n in a)a[n]&&a[n].stop&&ti.test(n)&&r(a[n]);for(n=s.length;n--;)s[n].elem!==this||null!=t&&s[n].queue!==t||(s[n].anim.stop(i),e=!1,s.splice(n,1));(e||!i)&&J.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=Ee.get(this),r=i[t+"queue"],n=i[t+"queueHooks"],s=J.timers,a=r?r.length:0;for(i.finish=!0,J.queue(this,t,[]),n&&n.stop&&n.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;a>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete i.finish})}}),J.each(["toggle","show","hide"],function(t,e){var i=J.fn[e];J.fn[e]=function(t,r,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(A(e,!0),t,r,n)}}),J.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){J.fn[t]=function(t,i,r){return this.animate(e,t,i,r)}}),J.timers=[],J.fx.tick=function(){var t,e=0,i=J.timers;for(Qe=J.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||J.fx.stop(),Qe=void 0},J.fx.timer=function(t){J.timers.push(t),t()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Ke||(Ke=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Ke),Ke=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(t,e){return t=J.fx?J.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var r=setTimeout(e,t);i.stop=function(){clearTimeout(r)}})},function(){var t=K.createElement("input"),e=K.createElement("select"),i=e.appendChild(K.createElement("option"));t.type="checkbox",Q.checkOn=""!==t.value,Q.optSelected=i.selected,e.disabled=!0,Q.optDisabled=!i.disabled,t=K.createElement("input"),t.value="t",t.type="radio",Q.radioValue="t"===t.value}();var ri,ni,si=J.expr.attrHandle;J.fn.extend({attr:function(t,e){return ge(this,J.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){J.removeAttr(this,t)})}}),J.extend({attr:function(t,e,i){var r,n,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?typeof t.getAttribute===we?J.prop(t,e,i):(1===s&&J.isXMLDoc(t)||(e=e.toLowerCase(),r=J.attrHooks[e]||(J.expr.match.bool.test(e)?ni:ri)),void 0===i?r&&"get"in r&&null!==(n=r.get(t,e))?n:(n=J.find.attr(t,e),null==n?void 0:n):null!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):void J.removeAttr(t,e)):void 0
},removeAttr:function(t,e){var i,r,n=0,s=e&&e.match(pe);if(s&&1===t.nodeType)for(;i=s[n++];)r=J.propFix[i]||i,J.expr.match.bool.test(i)&&(t[r]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!Q.radioValue&&"radio"===e&&J.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),ni={set:function(t,e,i){return e===!1?J.removeAttr(t,i):t.setAttribute(i,i),i}},J.each(J.expr.match.bool.source.match(/\w+/g),function(t,e){var i=si[e]||J.find.attr;si[e]=function(t,e,r){var n,s;return r||(s=si[e],si[e]=n,n=null!=i(t,e,r)?e.toLowerCase():null,si[e]=s),n}});var ai=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(t,e){return ge(this,J.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[J.propFix[t]||t]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var r,n,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(s=1!==a||!J.isXMLDoc(t),s&&(e=J.propFix[e]||e,n=J.propHooks[e]),void 0!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:t[e]=i:n&&"get"in n&&null!==(r=n.get(t,e))?r:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ai.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Q.optSelected||(J.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var oi=/[\t\r\n\f]/g;J.fn.extend({addClass:function(t){var e,i,r,n,s,a,o="string"==typeof t&&t,h=0,l=this.length;if(J.isFunction(t))return this.each(function(e){J(this).addClass(t.call(this,e,this.className))});if(o)for(e=(t||"").match(pe)||[];l>h;h++)if(i=this[h],r=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(oi," "):" ")){for(s=0;n=e[s++];)r.indexOf(" "+n+" ")<0&&(r+=n+" ");a=J.trim(r),i.className!==a&&(i.className=a)}return this},removeClass:function(t){var e,i,r,n,s,a,o=0===arguments.length||"string"==typeof t&&t,h=0,l=this.length;if(J.isFunction(t))return this.each(function(e){J(this).removeClass(t.call(this,e,this.className))});if(o)for(e=(t||"").match(pe)||[];l>h;h++)if(i=this[h],r=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(oi," "):"")){for(s=0;n=e[s++];)for(;r.indexOf(" "+n+" ")>=0;)r=r.replace(" "+n+" "," ");a=t?J.trim(r):"",i.className!==a&&(i.className=a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(J.isFunction(t)?function(i){J(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,r=0,n=J(this),s=t.match(pe)||[];e=s[r++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else(i===we||"boolean"===i)&&(this.className&&Ee.set(this,"__className__",this.className),this.className=this.className||t===!1?"":Ee.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,r=this.length;r>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(oi," ").indexOf(e)>=0)return!0;return!1}});var hi=/\r/g;J.fn.extend({val:function(t){var e,i,r,n=this[0];return arguments.length?(r=J.isFunction(t),this.each(function(i){var n;1===this.nodeType&&(n=r?t.call(this,i,J(this).val()):t,null==n?n="":"number"==typeof n?n+="":J.isArray(n)&&(n=J.map(n,function(t){return null==t?"":t+""})),e=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,n,"value")||(this.value=n))})):n?(e=J.valHooks[n.type]||J.valHooks[n.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(n,"value"))?i:(i=n.value,"string"==typeof i?i.replace(hi,""):null==i?"":i)):void 0}}),J.extend({valHooks:{option:{get:function(t){var e=J.find.attr(t,"value");return null!=e?e:J.trim(J.text(t))}},select:{get:function(t){for(var e,i,r=t.options,n=t.selectedIndex,s="select-one"===t.type||0>n,a=s?null:[],o=s?n+1:r.length,h=0>n?o:s?n:0;o>h;h++)if(i=r[h],!(!i.selected&&h!==n||(Q.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&J.nodeName(i.parentNode,"optgroup"))){if(e=J(i).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var i,r,n=t.options,s=J.makeArray(e),a=n.length;a--;)r=n[a],(r.selected=J.inArray(r.value,s)>=0)&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(t,e){return J.isArray(e)?t.checked=J.inArray(J(t).val(),e)>=0:void 0}},Q.checkOn||(J.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){J.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),J.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,r){return this.on(e,t,i,r)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var li=J.now(),ui=/\?/;J.parseJSON=function(t){return JSON.parse(t+"")},J.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+t),e};var ci=/#.*$/,di=/([?&])_=[^&]*/,pi=/^(.*?):[ \t]*([^\r\n]*)$/gm,fi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mi=/^(?:GET|HEAD)$/,gi=/^\/\//,Ei=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,vi={},_i={},yi="*/".concat("*"),Ti=t.location.href,xi=Ei.exec(Ti.toLowerCase())||[];J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ti,type:"GET",isLocal:fi.test(xi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?N(N(t,J.ajaxSettings),e):N(J.ajaxSettings,t)},ajaxPrefilter:k(vi),ajaxTransport:k(_i),ajax:function(t,e){function i(t,e,i,a){var h,u,E,v,y,x=e;2!==_&&(_=2,o&&clearTimeout(o),r=void 0,s=a||"",T.readyState=t>0?4:0,h=t>=200&&300>t||304===t,i&&(v=F(c,T,i)),v=j(c,v,T,h),h?(c.ifModified&&(y=T.getResponseHeader("Last-Modified"),y&&(J.lastModified[n]=y),y=T.getResponseHeader("etag"),y&&(J.etag[n]=y)),204===t||"HEAD"===c.type?x="nocontent":304===t?x="notmodified":(x=v.state,u=v.data,E=v.error,h=!E)):(E=x,(t||!x)&&(x="error",0>t&&(t=0))),T.status=t,T.statusText=(e||x)+"",h?f.resolveWith(d,[u,x,T]):f.rejectWith(d,[T,x,E]),T.statusCode(g),g=void 0,l&&p.trigger(h?"ajaxSuccess":"ajaxError",[T,c,h?u:E]),m.fireWith(d,[T,x]),l&&(p.trigger("ajaxComplete",[T,c]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,n,s,a,o,h,l,u,c=J.ajaxSetup({},e),d=c.context||c,p=c.context&&(d.nodeType||d.jquery)?J(d):J.event,f=J.Deferred(),m=J.Callbacks("once memory"),g=c.statusCode||{},E={},v={},_=0,y="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!a)for(a={};e=pi.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return _||(t=v[i]=v[i]||t,E[t]=e),this},overrideMimeType:function(t){return _||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)g[e]=[g[e],t[e]];else T.always(t[T.status]);return this},abort:function(t){var e=t||y;return r&&r.abort(e),i(0,e),this}};if(f.promise(T).complete=m.add,T.success=T.done,T.error=T.fail,c.url=((t||c.url||Ti)+"").replace(ci,"").replace(gi,xi[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=J.trim(c.dataType||"*").toLowerCase().match(pe)||[""],null==c.crossDomain&&(h=Ei.exec(c.url.toLowerCase()),c.crossDomain=!(!h||h[1]===xi[1]&&h[2]===xi[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(xi[3]||("http:"===xi[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=J.param(c.data,c.traditional)),I(vi,c,e,T),2===_)return T;l=J.event&&c.global,l&&0===J.active++&&J.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!mi.test(c.type),n=c.url,c.hasContent||(c.data&&(n=c.url+=(ui.test(n)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=di.test(n)?n.replace(di,"$1_="+li++):n+(ui.test(n)?"&":"?")+"_="+li++)),c.ifModified&&(J.lastModified[n]&&T.setRequestHeader("If-Modified-Since",J.lastModified[n]),J.etag[n]&&T.setRequestHeader("If-None-Match",J.etag[n])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&T.setRequestHeader("Content-Type",c.contentType),T.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+yi+"; q=0.01":""):c.accepts["*"]);for(u in c.headers)T.setRequestHeader(u,c.headers[u]);if(c.beforeSend&&(c.beforeSend.call(d,T,c)===!1||2===_))return T.abort();y="abort";for(u in{success:1,error:1,complete:1})T[u](c[u]);if(r=I(_i,c,e,T)){T.readyState=1,l&&p.trigger("ajaxSend",[T,c]),c.async&&c.timeout>0&&(o=setTimeout(function(){T.abort("timeout")},c.timeout));try{_=1,r.send(E,i)}catch(x){if(!(2>_))throw x;i(-1,x)}}else i(-1,"No Transport");return T},getJSON:function(t,e,i){return J.get(t,e,i,"json")},getScript:function(t,e){return J.get(t,void 0,e,"script")}}),J.each(["get","post"],function(t,e){J[e]=function(t,i,r,n){return J.isFunction(i)&&(n=n||r,r=i,i=void 0),J.ajax({url:t,type:e,dataType:n,data:i,success:r})}}),J._evalUrl=function(t){return J.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(t){var e;return J.isFunction(t)?this.each(function(e){J(this).wrapAll(t.call(this,e))}):(this[0]&&(e=J(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(J.isFunction(t)?function(e){J(this).wrapInner(t.call(this,e))}:function(){var e=J(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=J.isFunction(t);return this.each(function(i){J(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},J.expr.filters.visible=function(t){return!J.expr.filters.hidden(t)};var Ri=/%20/g,bi=/\[\]$/,wi=/\r?\n/g,Hi=/^(?:submit|button|image|reset|file)$/i,Si=/^(?:input|select|textarea|keygen)/i;J.param=function(t,e){var i,r=[],n=function(t,e){e=J.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(t)||t.jquery&&!J.isPlainObject(t))J.each(t,function(){n(this.name,this.value)});else for(i in t)B(i,t[i],e,n);return r.join("&").replace(Ri,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=J.prop(this,"elements");return t?J.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!J(this).is(":disabled")&&Si.test(this.nodeName)&&!Hi.test(t)&&(this.checked||!be.test(t))}).map(function(t,e){var i=J(this).val();return null==i?null:J.isArray(i)?J.map(i,function(t){return{name:e.name,value:t.replace(wi,"\r\n")}}):{name:e.name,value:i.replace(wi,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Mi=0,Ci={},Ai={0:200,1223:204},Pi=J.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Ci)Ci[t]()}),Q.cors=!!Pi&&"withCredentials"in Pi,Q.ajax=Pi=!!Pi,J.ajaxTransport(function(t){var e;return Q.cors||Pi&&!t.crossDomain?{send:function(i,r){var n,s=t.xhr(),a=++Mi;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(n in t.xhrFields)s[n]=t.xhrFields[n];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(n in i)s.setRequestHeader(n,i[n]);e=function(t){return function(){e&&(delete Ci[a],e=s.onload=s.onerror=null,"abort"===t?s.abort():"error"===t?r(s.status,s.statusText):r(Ai[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=e(),s.onerror=e("error"),e=Ci[a]=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(o){if(e)throw o}},abort:function(){e&&e()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return J.globalEval(t),t}}}),J.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),J.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(r,n){e=J("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&n("error"===t.type?404:200,t.type)}),K.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Li=[],Oi=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Li.pop()||J.expando+"_"+li++;return this[t]=!0,t}}),J.ajaxPrefilter("json jsonp",function(e,i,r){var n,s,a,o=e.jsonp!==!1&&(Oi.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oi.test(e.data)&&"data");return o||"jsonp"===e.dataTypes[0]?(n=e.jsonpCallback=J.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Oi,"$1"+n):e.jsonp!==!1&&(e.url+=(ui.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return a||J.error(n+" was not called"),a[0]},e.dataTypes[0]="json",s=t[n],t[n]=function(){a=arguments},r.always(function(){t[n]=s,e[n]&&(e.jsonpCallback=i.jsonpCallback,Li.push(n)),a&&J.isFunction(s)&&s(a[0]),a=s=void 0}),"script"):void 0}),J.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||K;var r=ae.exec(t),n=!i&&[];return r?[e.createElement(r[1])]:(r=J.buildFragment([t],e,n),n&&n.length&&J(n).remove(),J.merge([],r.childNodes))};var Di=J.fn.load;J.fn.load=function(t,e,i){if("string"!=typeof t&&Di)return Di.apply(this,arguments);var r,n,s,a=this,o=t.indexOf(" ");return o>=0&&(r=J.trim(t.slice(o)),t=t.slice(0,o)),J.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(n="POST"),a.length>0&&J.ajax({url:t,type:n,dataType:"html",data:e}).done(function(t){s=arguments,a.html(r?J("<div>").append(J.parseHTML(t)).find(r):t)}).complete(i&&function(t,e){a.each(i,s||[t.responseText,e,t])}),this},J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){J.fn[e]=function(t){return this.on(e,t)}}),J.expr.filters.animated=function(t){return J.grep(J.timers,function(e){return t===e.elem}).length};var ki=t.document.documentElement;J.offset={setOffset:function(t,e,i){var r,n,s,a,o,h,l,u=J.css(t,"position"),c=J(t),d={};"static"===u&&(t.style.position="relative"),o=c.offset(),s=J.css(t,"top"),h=J.css(t,"left"),l=("absolute"===u||"fixed"===u)&&(s+h).indexOf("auto")>-1,l?(r=c.position(),a=r.top,n=r.left):(a=parseFloat(s)||0,n=parseFloat(h)||0),J.isFunction(e)&&(e=e.call(t,i,o)),null!=e.top&&(d.top=e.top-o.top+a),null!=e.left&&(d.left=e.left-o.left+n),"using"in e?e.using.call(t,d):c.css(d)}},J.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){J.offset.setOffset(this,t,e)});var e,i,r=this[0],n={top:0,left:0},s=r&&r.ownerDocument;return s?(e=s.documentElement,J.contains(e,r)?(typeof r.getBoundingClientRect!==we&&(n=r.getBoundingClientRect()),i=U(s),{top:n.top+i.pageYOffset-e.clientTop,left:n.left+i.pageXOffset-e.clientLeft}):n):void 0},position:function(){if(this[0]){var t,e,i=this[0],r={top:0,left:0};return"fixed"===J.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),J.nodeName(t[0],"html")||(r=t.offset()),r.top+=J.css(t[0],"borderTopWidth",!0),r.left+=J.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-J.css(i,"marginTop",!0),left:e.left-r.left-J.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||ki;t&&!J.nodeName(t,"html")&&"static"===J.css(t,"position");)t=t.offsetParent;return t||ki})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var r="pageYOffset"===i;J.fn[e]=function(n){return ge(this,function(e,n,s){var a=U(e);return void 0===s?a?a[i]:e[n]:void(a?a.scrollTo(r?t.pageXOffset:s,r?s:t.pageYOffset):e[n]=s)},e,n,arguments.length,null)}}),J.each(["top","left"],function(t,e){J.cssHooks[e]=x(Q.pixelPosition,function(t,i){return i?(i=T(t,e),ze.test(i)?J(t).position()[e]+"px":i):void 0})}),J.each({Height:"height",Width:"width"},function(t,e){J.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,r){J.fn[r]=function(r,n){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||n===!0?"margin":"border");return ge(this,function(e,i,r){var n;return J.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])):void 0===r?J.css(e,i,a):J.style(e,i,r,a)},e,s?r:void 0,s,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var Ii=t.jQuery,Ni=t.$;return J.noConflict=function(e){return t.$===J&&(t.$=Ni),e&&t.jQuery===J&&(t.jQuery=Ii),J},typeof e===we&&(t.jQuery=t.$=J),J}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,r,n){return jQuery.easing[jQuery.easing.def](t,e,i,r,n)},easeInQuad:function(t,e,i,r,n){return r*(e/=n)*e+i},easeOutQuad:function(t,e,i,r,n){return-r*(e/=n)*(e-2)+i},easeInOutQuad:function(t,e,i,r,n){return(e/=n/2)<1?r/2*e*e+i:-r/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,r,n){return r*(e/=n)*e*e+i},easeOutCubic:function(t,e,i,r,n){return r*((e=e/n-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,r,n){return(e/=n/2)<1?r/2*e*e*e+i:r/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,r,n){return r*(e/=n)*e*e*e+i},easeOutQuart:function(t,e,i,r,n){return-r*((e=e/n-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,r,n){return(e/=n/2)<1?r/2*e*e*e*e+i:-r/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,r,n){return r*(e/=n)*e*e*e*e+i},easeOutQuint:function(t,e,i,r,n){return r*((e=e/n-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,r,n){return(e/=n/2)<1?r/2*e*e*e*e*e+i:r/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,r,n){return-r*Math.cos(e/n*(Math.PI/2))+r+i},easeOutSine:function(t,e,i,r,n){return r*Math.sin(e/n*(Math.PI/2))+i},easeInOutSine:function(t,e,i,r,n){return-r/2*(Math.cos(Math.PI*e/n)-1)+i},easeInExpo:function(t,e,i,r,n){return 0==e?i:r*Math.pow(2,10*(e/n-1))+i},easeOutExpo:function(t,e,i,r,n){return e==n?i+r:r*(-Math.pow(2,-10*e/n)+1)+i},easeInOutExpo:function(t,e,i,r,n){return 0==e?i:e==n?i+r:(e/=n/2)<1?r/2*Math.pow(2,10*(e-1))+i:r/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,r,n){return-r*(Math.sqrt(1-(e/=n)*e)-1)+i},easeOutCirc:function(t,e,i,r,n){return r*Math.sqrt(1-(e=e/n-1)*e)+i},easeInOutCirc:function(t,e,i,r,n){return(e/=n/2)<1?-r/2*(Math.sqrt(1-e*e)-1)+i:r/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,r,n){var s=1.70158,a=0,o=r;if(0==e)return i;if(1==(e/=n))return i+r;if(a||(a=.3*n),o<Math.abs(r)){o=r;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(r/o);return-(o*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-s)*Math.PI/a))+i},easeOutElastic:function(t,e,i,r,n){var s=1.70158,a=0,o=r;if(0==e)return i;if(1==(e/=n))return i+r;if(a||(a=.3*n),o<Math.abs(r)){o=r;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(r/o);return o*Math.pow(2,-10*e)*Math.sin(2*(e*n-s)*Math.PI/a)+r+i},easeInOutElastic:function(t,e,i,r,n){var s=1.70158,a=0,o=r;if(0==e)return i;if(2==(e/=n/2))return i+r;if(a||(a=.3*n*1.5),o<Math.abs(r)){o=r;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(r/o);return 1>e?-.5*o*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-s)*Math.PI/a)+i:o*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*n-s)*Math.PI/a)*.5+r+i},easeInBack:function(t,e,i,r,n,s){return void 0==s&&(s=1.70158),r*(e/=n)*e*((s+1)*e-s)+i},easeOutBack:function(t,e,i,r,n,s){return void 0==s&&(s=1.70158),r*((e=e/n-1)*e*((s+1)*e+s)+1)+i},easeInOutBack:function(t,e,i,r,n,s){return void 0==s&&(s=1.70158),(e/=n/2)<1?r/2*e*e*(((s*=1.525)+1)*e-s)+i:r/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+i},easeInBounce:function(t,e,i,r,n){return r-jQuery.easing.easeOutBounce(t,n-e,0,r,n)+i},easeOutBounce:function(t,e,i,r,n){return(e/=n)<1/2.75?7.5625*r*e*e+i:2/2.75>e?r*(7.5625*(e-=1.5/2.75)*e+.75)+i:2.5/2.75>e?r*(7.5625*(e-=2.25/2.75)*e+.9375)+i:r*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(t,e,i,r,n){return n/2>e?.5*jQuery.easing.easeInBounce(t,2*e,0,r,n)+i:.5*jQuery.easing.easeOutBounce(t,2*e-n,0,r,n)+.5*r+i}}),/**
 * jquery.mobile.vmouse.js
 *
 * https://github.com/jquery/jquery-mobile/blob/1.3.1/js/jquery.mobile.vmouse.js
 *
 * Copyright 2010, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(t,e,i,r){function n(t){for(;t&&"undefined"!=typeof t.originalEvent;)t=t.originalEvent;return t}function s(e,i){var s,a,o,h,l,u,c,d,p,f=e.type;if(e=t.Event(e),e.type=i,s=e.originalEvent,a=t.event.props,f.search(/^(mouse|click)/)>-1&&(a=C),s)for(c=a.length,h;c;)h=a[--c],e[h]=s[h];if(f.search(/mouse(down|up)|click/)>-1&&!e.which&&(e.which=1),-1!==f.search(/^touch/)&&(o=n(s),f=o.touches,l=o.changedTouches,u=f&&f.length?f[0]:l&&l.length?l[0]:r))for(d=0,p=S.length;p>d;d++)h=S[d],e[h]=u[h];return e}function a(e){for(var i,r,n={};e;){i=t.data(e,b);for(r in i)i[r]&&(n[r]=n.hasVirtualBinding=!0);e=e.parentNode}return n}function o(e,i){for(var r;e;){if(r=t.data(e,b),r&&(!i||r[i]))return e;e=e.parentNode}return null}function h(){N=!1}function l(){N=!0}function u(){U=0,k.length=0,I=!1,l()}function c(){h()}function d(){p(),P=setTimeout(function(){P=0,u()},t.vmouse.resetTimerDuration)}function p(){P&&(clearTimeout(P),P=0)}function f(e,i,r){var n;return(r&&r[e]||!r&&o(i.target,e))&&(n=s(i,e),t(i.target).trigger(n)),n}function m(e){var i=t.data(e.target,w);if(!(I||U&&U===i)){var r=f("v"+e.type,e);r&&(r.isDefaultPrevented()&&e.preventDefault(),r.isPropagationStopped()&&e.stopPropagation(),r.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}}function g(e){var i,r,s=n(e).touches;if(s&&1===s.length&&(i=e.target,r=a(i),r.hasVirtualBinding)){U=B++,t.data(i,w,U),p(),c(),D=!1;var o=n(e).touches[0];L=o.pageX,O=o.pageY,f("vmouseover",e,r),f("vmousedown",e,r)}}function E(t){N||(D||f("vmousecancel",t,a(t.target)),D=!0,d())}function v(e){if(!N){var i=n(e).touches[0],r=D,s=t.vmouse.moveDistanceThreshold,o=a(e.target);D=D||Math.abs(i.pageX-L)>s||Math.abs(i.pageY-O)>s,D&&!r&&f("vmousecancel",e,o),f("vmousemove",e,o),d()}}function _(t){if(!N){l();var e,i=a(t.target);if(f("vmouseup",t,i),!D){var r=f("vclick",t,i);r&&r.isDefaultPrevented()&&(e=n(t).changedTouches[0],k.push({touchID:U,x:e.clientX,y:e.clientY}),I=!0)}f("vmouseout",t,i),D=!1,d()}}function y(e){var i,r=t.data(e,b);if(r)for(i in r)if(r[i])return!0;return!1}function T(){}function x(e){var i=e.substr(1);return{setup:function(){y(this)||t.data(this,b,{});var r=t.data(this,b);r[e]=!0,A[e]=(A[e]||0)+1,1===A[e]&&j.bind(i,m),t(this).bind(i,T),F&&(A.touchstart=(A.touchstart||0)+1,1===A.touchstart&&j.bind("touchstart",g).bind("touchend",_).bind("touchmove",v).bind("scroll",E))},teardown:function(){--A[e],A[e]||j.unbind(i,m),F&&(--A.touchstart,A.touchstart||j.unbind("touchstart",g).unbind("touchmove",v).unbind("touchend",_).unbind("scroll",E));var r=t(this),n=t.data(this,b);n&&(n[e]=!1),r.unbind(i,T),y(this)||r.removeData(b)}}}var R,b="virtualMouseBindings",w="virtualTouchID",H="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),S="clientX clientY pageX pageY screenX screenY".split(" "),M=t.event.mouseHooks?t.event.mouseHooks.props:[],C=t.event.props.concat(M),A={},P=0,L=0,O=0,D=!1,k=[],I=!1,N=!1,F="addEventListener"in i,j=t(i),B=1,U=0;t.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var z=0;z<H.length;z++)t.event.special[H[z]]=x(H[z]);F&&i.addEventListener("click",function(e){var i,r,n,s,a,o,h=k.length,l=e.target;if(h)for(i=e.clientX,r=e.clientY,R=t.vmouse.clickDistanceThreshold,n=l;n;){for(s=0;h>s;s++)if(a=k[s],o=0,n===l&&Math.abs(a.x-i)<R&&Math.abs(a.y-r)<R||t.data(n,w)===a.touchID)return e.preventDefault(),void e.stopPropagation();n=n.parentNode}},!0)}(jQuery,window,document),/**
 * events/touch.js
 *
 * https://raw.github.com/jquery/jquery-mobile/1.3.1/js/events/touch.js
 *
 * Copyright 2010, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(t,e,i){function r(e,i,r){var n=r.type;r.type=i,t.event.dispatch.call(e,r),r.type=n}var n=t(document);t.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,i){t.fn[i]=function(t){return t?this.bind(i,t):this.trigger(i)},t.attrFn&&(t.attrFn[i]=!0)});var s="ontouchend"in document,a="touchmove scroll",o=s?"touchstart":"mousedown",h=s?"touchend":"mouseup",l=s?"touchmove":"mousemove";t.event.special.scrollstart={enabled:!0,setup:function(){function e(t,e){i=e,r(s,i?"scrollstart":"scrollstop",t)}var i,n,s=this,o=t(s);o.bind(a,function(r){t.event.special.scrollstart.enabled&&(i||e(r,!0),clearTimeout(n),n=setTimeout(function(){e(r,!1)},50))})}},t.event.special.tap={tapholdThreshold:750,setup:function(){var e=this,i=t(e);i.bind("vmousedown",function(s){function a(){clearTimeout(l)}function o(){a(),i.unbind("vclick",h).unbind("vmouseup",a),n.unbind("vmousecancel",o)}function h(t){o(),u===t.target&&r(e,"tap",t)}if(s.which&&1!==s.which)return!1;{var l,u=s.target;s.originalEvent}i.bind("vmouseup",a).bind("vclick",h),n.bind("vmousecancel",o),l=setTimeout(function(){r(e,"taphold",t.Event("taphold",{target:u}))},t.event.special.tap.tapholdThreshold)})}},t.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,start:function(e){var i=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:t(e.target)}},stop:function(t){var e=t.originalEvent.touches?t.originalEvent.touches[0]:t;return{time:(new Date).getTime(),coords:[e.pageX,e.pageY]}},handleSwipe:function(e,i){i.time-e.time<t.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-i.coords[0])>t.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-i.coords[1])<t.event.special.swipe.verticalDistanceThreshold&&e.origin.trigger("swipe").trigger(e.coords[0]>i.coords[0]?"swipeleft":"swiperight")},setup:function(){var e=this,r=t(e);r.bind(o,function(e){function n(e){a&&(s=t.event.special.swipe.stop(e),Math.abs(a.coords[0]-s.coords[0])>t.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())}var s,a=t.event.special.swipe.start(e);r.bind(l,n).one(h,function(){r.unbind(l,n),a&&s&&t.event.special.swipe.handleSwipe(a,s),a=s=i})})}},t.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(e,i){t.event.special[e]={setup:function(){t(this).bind(i,t.noop)}}})}(jQuery,this),function(){var t=this,e=t._,i=Array.prototype,r=Object.prototype,n=Function.prototype,s=i.push,a=i.slice,o=i.concat,h=r.toString,l=r.hasOwnProperty,u=Array.isArray,c=Object.keys,d=n.bind,p=function(t){return t instanceof p?t:this instanceof p?void(this._wrapped=t):new p(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):t._=p,p.VERSION="1.7.0";var f=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,n){return t.call(e,i,r,n)};case 4:return function(i,r,n,s){return t.call(e,i,r,n,s)}}return function(){return t.apply(e,arguments)}};p.iteratee=function(t,e,i){return null==t?p.identity:p.isFunction(t)?f(t,e,i):p.isObject(t)?p.matches(t):p.property(t)},p.each=p.forEach=function(t,e,i){if(null==t)return t;e=f(e,i);var r,n=t.length;if(n===+n)for(r=0;n>r;r++)e(t[r],r,t);else{var s=p.keys(t);for(r=0,n=s.length;n>r;r++)e(t[s[r]],s[r],t)}return t},p.map=p.collect=function(t,e,i){if(null==t)return[];e=p.iteratee(e,i);for(var r,n=t.length!==+t.length&&p.keys(t),s=(n||t).length,a=Array(s),o=0;s>o;o++)r=n?n[o]:o,a[o]=e(t[r],r,t);return a};var m="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(t,e,i,r){null==t&&(t=[]),e=f(e,r,4);var n,s=t.length!==+t.length&&p.keys(t),a=(s||t).length,o=0;if(arguments.length<3){if(!a)throw new TypeError(m);i=t[s?s[o++]:o++]}for(;a>o;o++)n=s?s[o]:o,i=e(i,t[n],n,t);return i},p.reduceRight=p.foldr=function(t,e,i,r){null==t&&(t=[]),e=f(e,r,4);var n,s=t.length!==+t.length&&p.keys(t),a=(s||t).length;if(arguments.length<3){if(!a)throw new TypeError(m);i=t[s?s[--a]:--a]}for(;a--;)n=s?s[a]:a,i=e(i,t[n],n,t);return i},p.find=p.detect=function(t,e,i){var r;return e=p.iteratee(e,i),p.some(t,function(t,i,n){return e(t,i,n)?(r=t,!0):void 0}),r},p.filter=p.select=function(t,e,i){var r=[];return null==t?r:(e=p.iteratee(e,i),p.each(t,function(t,i,n){e(t,i,n)&&r.push(t)}),r)},p.reject=function(t,e,i){return p.filter(t,p.negate(p.iteratee(e)),i)},p.every=p.all=function(t,e,i){if(null==t)return!0;e=p.iteratee(e,i);var r,n,s=t.length!==+t.length&&p.keys(t),a=(s||t).length;for(r=0;a>r;r++)if(n=s?s[r]:r,!e(t[n],n,t))return!1;return!0},p.some=p.any=function(t,e,i){if(null==t)return!1;e=p.iteratee(e,i);var r,n,s=t.length!==+t.length&&p.keys(t),a=(s||t).length;for(r=0;a>r;r++)if(n=s?s[r]:r,e(t[n],n,t))return!0;return!1},p.contains=p.include=function(t,e){return null==t?!1:(t.length!==+t.length&&(t=p.values(t)),p.indexOf(t,e)>=0)},p.invoke=function(t,e){var i=a.call(arguments,2),r=p.isFunction(e);return p.map(t,function(t){return(r?e:t[e]).apply(t,i)})},p.pluck=function(t,e){return p.map(t,p.property(e))},p.where=function(t,e){return p.filter(t,p.matches(e))},p.findWhere=function(t,e){return p.find(t,p.matches(e))},p.max=function(t,e,i){var r,n,s=-1/0,a=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var o=0,h=t.length;h>o;o++)r=t[o],r>s&&(s=r)}else e=p.iteratee(e,i),p.each(t,function(t,i,r){n=e(t,i,r),(n>a||n===-1/0&&s===-1/0)&&(s=t,a=n)});return s},p.min=function(t,e,i){var r,n,s=1/0,a=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var o=0,h=t.length;h>o;o++)r=t[o],s>r&&(s=r)}else e=p.iteratee(e,i),p.each(t,function(t,i,r){n=e(t,i,r),(a>n||1/0===n&&1/0===s)&&(s=t,a=n)});return s},p.shuffle=function(t){for(var e,i=t&&t.length===+t.length?t:p.values(t),r=i.length,n=Array(r),s=0;r>s;s++)e=p.random(0,s),e!==s&&(n[s]=n[e]),n[e]=i[s];return n},p.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=p.values(t)),t[p.random(t.length-1)]):p.shuffle(t).slice(0,Math.max(0,e))},p.sortBy=function(t,e,i){return e=p.iteratee(e,i),p.pluck(p.map(t,function(t,i,r){return{value:t,index:i,criteria:e(t,i,r)}}).sort(function(t,e){var i=t.criteria,r=e.criteria;if(i!==r){if(i>r||void 0===i)return 1;if(r>i||void 0===r)return-1}return t.index-e.index}),"value")};var g=function(t){return function(e,i,r){var n={};return i=p.iteratee(i,r),p.each(e,function(r,s){var a=i(r,s,e);t(n,r,a)}),n}};p.groupBy=g(function(t,e,i){p.has(t,i)?t[i].push(e):t[i]=[e]}),p.indexBy=g(function(t,e,i){t[i]=e}),p.countBy=g(function(t,e,i){p.has(t,i)?t[i]++:t[i]=1}),p.sortedIndex=function(t,e,i,r){i=p.iteratee(i,r,1);for(var n=i(e),s=0,a=t.length;a>s;){var o=s+a>>>1;i(t[o])<n?s=o+1:a=o}return s},p.toArray=function(t){return t?p.isArray(t)?a.call(t):t.length===+t.length?p.map(t,p.identity):p.values(t):[]},p.size=function(t){return null==t?0:t.length===+t.length?t.length:p.keys(t).length},p.partition=function(t,e,i){e=p.iteratee(e,i);var r=[],n=[];return p.each(t,function(t,i,s){(e(t,i,s)?r:n).push(t)}),[r,n]},p.first=p.head=p.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:0>e?[]:a.call(t,0,e)},p.initial=function(t,e,i){return a.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},p.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},p.rest=p.tail=p.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},p.compact=function(t){return p.filter(t,p.identity)};var E=function(t,e,i,r){if(e&&p.every(t,p.isArray))return o.apply(r,t);for(var n=0,a=t.length;a>n;n++){var h=t[n];p.isArray(h)||p.isArguments(h)?e?s.apply(r,h):E(h,e,i,r):i||r.push(h)}return r};p.flatten=function(t,e){return E(t,e,!1,[])},p.without=function(t){return p.difference(t,a.call(arguments,1))},p.uniq=p.unique=function(t,e,i,r){if(null==t)return[];p.isBoolean(e)||(r=i,i=e,e=!1),null!=i&&(i=p.iteratee(i,r));for(var n=[],s=[],a=0,o=t.length;o>a;a++){var h=t[a];if(e)a&&s===h||n.push(h),s=h;else if(i){var l=i(h,a,t);p.indexOf(s,l)<0&&(s.push(l),n.push(h))}else p.indexOf(n,h)<0&&n.push(h)}return n},p.union=function(){return p.uniq(E(arguments,!0,!0,[]))},p.intersection=function(t){if(null==t)return[];for(var e=[],i=arguments.length,r=0,n=t.length;n>r;r++){var s=t[r];if(!p.contains(e,s)){for(var a=1;i>a&&p.contains(arguments[a],s);a++);a===i&&e.push(s)}}return e},p.difference=function(t){var e=E(a.call(arguments,1),!0,!0,[]);return p.filter(t,function(t){return!p.contains(e,t)})},p.zip=function(t){if(null==t)return[];for(var e=p.max(arguments,"length").length,i=Array(e),r=0;e>r;r++)i[r]=p.pluck(arguments,r);return i},p.object=function(t,e){if(null==t)return{};for(var i={},r=0,n=t.length;n>r;r++)e?i[t[r]]=e[r]:i[t[r][0]]=t[r][1];return i},p.indexOf=function(t,e,i){if(null==t)return-1;var r=0,n=t.length;if(i){if("number"!=typeof i)return r=p.sortedIndex(t,e),t[r]===e?r:-1;r=0>i?Math.max(0,n+i):i}for(;n>r;r++)if(t[r]===e)return r;return-1},p.lastIndexOf=function(t,e,i){if(null==t)return-1;var r=t.length;for("number"==typeof i&&(r=0>i?r+i+1:Math.min(r,i+1));--r>=0;)if(t[r]===e)return r;return-1},p.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=i||1;for(var r=Math.max(Math.ceil((e-t)/i),0),n=Array(r),s=0;r>s;s++,t+=i)n[s]=t;return n};var v=function(){};p.bind=function(t,e){var i,r;if(d&&t.bind===d)return d.apply(t,a.call(arguments,1));if(!p.isFunction(t))throw new TypeError("Bind must be called on a function");return i=a.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,i.concat(a.call(arguments)));v.prototype=t.prototype;var n=new v;v.prototype=null;var s=t.apply(n,i.concat(a.call(arguments)));return p.isObject(s)?s:n}},p.partial=function(t){var e=a.call(arguments,1);return function(){for(var i=0,r=e.slice(),n=0,s=r.length;s>n;n++)r[n]===p&&(r[n]=arguments[i++]);for(;i<arguments.length;)r.push(arguments[i++]);return t.apply(this,r)}},p.bindAll=function(t){var e,i,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)i=arguments[e],t[i]=p.bind(t[i],t);return t},p.memoize=function(t,e){var i=function(r){var n=i.cache,s=e?e.apply(this,arguments):r;return p.has(n,s)||(n[s]=t.apply(this,arguments)),n[s]};return i.cache={},i},p.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},p.defer=function(t){return p.delay.apply(p,[t,1].concat(a.call(arguments,1)))},p.throttle=function(t,e,i){var r,n,s,a=null,o=0;i||(i={});var h=function(){o=i.leading===!1?0:p.now(),a=null,s=t.apply(r,n),a||(r=n=null)};return function(){var l=p.now();o||i.leading!==!1||(o=l);var u=e-(l-o);return r=this,n=arguments,0>=u||u>e?(clearTimeout(a),a=null,o=l,s=t.apply(r,n),a||(r=n=null)):a||i.trailing===!1||(a=setTimeout(h,u)),s}},p.debounce=function(t,e,i){var r,n,s,a,o,h=function(){var l=p.now()-a;e>l&&l>0?r=setTimeout(h,e-l):(r=null,i||(o=t.apply(s,n),r||(s=n=null)))};return function(){s=this,n=arguments,a=p.now();var l=i&&!r;return r||(r=setTimeout(h,e)),l&&(o=t.apply(s,n),s=n=null),o}},p.wrap=function(t,e){return p.partial(e,t)},p.negate=function(t){return function(){return!t.apply(this,arguments)}},p.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,r=t[e].apply(this,arguments);i--;)r=t[i].call(this,r);return r}},p.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},p.before=function(t,e){var i;return function(){return--t>0?i=e.apply(this,arguments):e=null,i}},p.once=p.partial(p.before,2),p.keys=function(t){if(!p.isObject(t))return[];if(c)return c(t);var e=[];for(var i in t)p.has(t,i)&&e.push(i);return e},p.values=function(t){for(var e=p.keys(t),i=e.length,r=Array(i),n=0;i>n;n++)r[n]=t[e[n]];return r},p.pairs=function(t){for(var e=p.keys(t),i=e.length,r=Array(i),n=0;i>n;n++)r[n]=[e[n],t[e[n]]];return r},p.invert=function(t){for(var e={},i=p.keys(t),r=0,n=i.length;n>r;r++)e[t[i[r]]]=i[r];return e},p.functions=p.methods=function(t){var e=[];for(var i in t)p.isFunction(t[i])&&e.push(i);return e.sort()},p.extend=function(t){if(!p.isObject(t))return t;for(var e,i,r=1,n=arguments.length;n>r;r++){e=arguments[r];for(i in e)l.call(e,i)&&(t[i]=e[i])}return t},p.pick=function(t,e,i){var r,n={};if(null==t)return n;if(p.isFunction(e)){e=f(e,i);for(r in t){var s=t[r];e(s,r,t)&&(n[r]=s)}}else{var h=o.apply([],a.call(arguments,1));t=new Object(t);for(var l=0,u=h.length;u>l;l++)r=h[l],r in t&&(n[r]=t[r])}return n},p.omit=function(t,e,i){if(p.isFunction(e))e=p.negate(e);else{var r=p.map(o.apply([],a.call(arguments,1)),String);e=function(t,e){return!p.contains(r,e)}}return p.pick(t,e,i)},p.defaults=function(t){if(!p.isObject(t))return t;for(var e=1,i=arguments.length;i>e;e++){var r=arguments[e];for(var n in r)void 0===t[n]&&(t[n]=r[n])}return t},p.clone=function(t){return p.isObject(t)?p.isArray(t)?t.slice():p.extend({},t):t},p.tap=function(t,e){return e(t),t};var _=function(t,e,i,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof p&&(t=t._wrapped),e instanceof p&&(e=e._wrapped);var n=h.call(t);if(n!==h.call(e))return!1;switch(n){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]===t)return r[s]===e;var a=t.constructor,o=e.constructor;if(a!==o&&"constructor"in t&&"constructor"in e&&!(p.isFunction(a)&&a instanceof a&&p.isFunction(o)&&o instanceof o))return!1;i.push(t),r.push(e);var l,u;if("[object Array]"===n){if(l=t.length,u=l===e.length)for(;l--&&(u=_(t[l],e[l],i,r)););}else{var c,d=p.keys(t);if(l=d.length,u=p.keys(e).length===l)for(;l--&&(c=d[l],u=p.has(e,c)&&_(t[c],e[c],i,r)););}return i.pop(),r.pop(),u};p.isEqual=function(t,e){return _(t,e,[],[])},p.isEmpty=function(t){if(null==t)return!0;if(p.isArray(t)||p.isString(t)||p.isArguments(t))return 0===t.length;for(var e in t)if(p.has(t,e))return!1;return!0},p.isElement=function(t){return!(!t||1!==t.nodeType)},p.isArray=u||function(t){return"[object Array]"===h.call(t)},p.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){p["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),p.isArguments(arguments)||(p.isArguments=function(t){return p.has(t,"callee")}),"function"!=typeof/./&&(p.isFunction=function(t){return"function"==typeof t||!1}),p.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},p.isNaN=function(t){return p.isNumber(t)&&t!==+t},p.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},p.isNull=function(t){return null===t},p.isUndefined=function(t){return void 0===t},p.has=function(t,e){return null!=t&&l.call(t,e)},p.noConflict=function(){return t._=e,this},p.identity=function(t){return t},p.constant=function(t){return function(){return t}},p.noop=function(){},p.property=function(t){return function(e){return e[t]}},p.matches=function(t){var e=p.pairs(t),i=e.length;return function(t){if(null==t)return!i;t=new Object(t);for(var r=0;i>r;r++){var n=e[r],s=n[0];if(n[1]!==t[s]||!(s in t))return!1}return!0}},p.times=function(t,e,i){var r=Array(Math.max(0,t));e=f(e,i,1);for(var n=0;t>n;n++)r[n]=e(n);return r},p.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},p.now=Date.now||function(){return(new Date).getTime()};var y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=p.invert(y),x=function(t){var e=function(e){return t[e]},i="(?:"+p.keys(t).join("|")+")",r=RegExp(i),n=RegExp(i,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(n,e):t}};p.escape=x(y),p.unescape=x(T),p.result=function(t,e){if(null==t)return void 0;var i=t[e];return p.isFunction(i)?t[e]():i};var R=0;p.uniqueId=function(t){var e=++R+"";return t?t+e:e},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var b=/(.)^/,w={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,S=function(t){return"\\"+w[t]};p.template=function(t,e,i){!e&&i&&(e=i),e=p.defaults({},e,p.templateSettings);var r=RegExp([(e.escape||b).source,(e.interpolate||b).source,(e.evaluate||b).source].join("|")+"|$","g"),n=0,s="__p+='";t.replace(r,function(e,i,r,a,o){return s+=t.slice(n,o).replace(H,S),n=o+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(s+="';\n"+a+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var a=new Function(e.variable||"obj","_",s)}catch(o){throw o.source=s,o}var h=function(t){return a.call(this,t,p)},l=e.variable||"obj";return h.source="function("+l+"){\n"+s+"}",h},p.chain=function(t){var e=p(t);return e._chain=!0,e};var M=function(t){return this._chain?p(t).chain():t};p.mixin=function(t){p.each(p.functions(t),function(e){var i=p[e]=t[e];p.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),M.call(this,i.apply(p,t))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];p.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],M.call(this,i)}}),p.each(["concat","join","slice"],function(t){var e=i[t];p.prototype[t]=function(){return M.call(this,e.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}.call(this),function(t){function e(t,e,i,r,n){this._listener=e,this._isOnce=i,this.context=r,this._signal=t,this._priority=n||0}function i(t,e){if("function"!=typeof t)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function r(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){r.prototype.dispatch.apply(t,arguments)}}e.prototype={active:!0,params:null,execute:function(t){var e;return this.active&&this._listener&&(t=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,t),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,i,r,n){var s=this._indexOfListener(t,r);if(-1!==s){if(t=this._bindings[s],t.isOnce()!==i)throw Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else t=new e(this,t,i,r,n),this._addBinding(t);return this.memorize&&this._prevParams&&t.execute(this._prevParams),t},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var i,r=this._bindings.length;r--;)if(i=this._bindings[r],i._listener===t&&i.context===e)return r;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,r){return i(t,"add"),this._registerListener(t,!1,e,r)},addOnce:function(t,e,r){return i(t,"addOnce"),this._registerListener(t,!0,e,r)},remove:function(t,e){i(t,"remove");var r=this._indexOfListener(t,e);return-1!==r&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var t,e=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=e),i){t=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(t[i]&&this._shouldPropagate&&t[i].execute(e)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var n=r;n.Signal=r,"function"==typeof define&&define.amd?define(function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:t.signals=n}(this),function(){var t,e,i,r,n,s,a,o;for(window.$$={},this.Browser={ie:!1},a=navigator.userAgent,-1!==a.indexOf("MSIE")&&(Browser.ie=1),-1!==a.indexOf("MSIE 8")&&(Browser.ie=8),-1!==a.indexOf("MSIE 9")&&(Browser.ie=9),-1!==a.indexOf("MSIE 10")&&(Browser.ie=10),-1!==a.indexOf("Trident")&&-1!==a.indexOf("rv:11")&&(Browser.ie=11),-1!==a.indexOf("Firefox")?Browser.firefox=!0:-1!==a.indexOf("Chrome")?Browser.chrome=!0:-1!==a.indexOf("Safari")&&(Browser.safari=!0),$$.Device=!1,a=navigator.userAgent,-1!==a.indexOf("iPhone")&&($$.Device="iPhone",$$.OS="iOS"),-1!==a.indexOf("iPad")&&($$.Device="iPad",$$.OS="iOS"),-1!==a.indexOf("iPod")&&($$.Device="iPod",$$.OS="iOS"),-1!==a.indexOf("Android")&&($$.Device=-1!==a.indexOf("Mobile")?"Android SP":"Android TAB",$$.OS="Android"),-1!==a.indexOf("Windows Phone")&&($$.Device="Windows Phone"),-1!==a.indexOf("Mac OS")&&($$.isMac=!0),$$.resizeSignal=new signals.Signal,$$.scrollSignal=new signals.Signal,null!=this.console||(this.console={log:function(){}}),location.href.match(/localhost|10\.0\.1/i)||(console.log=function(){}),$$.error=function(t){return location.href.match(/localhost/i)?console.error("ERROR:"+t):void 0},$(window).resize(function(){var t,e;return e=$(window).width(),t=$(window).height(),$$.resizeSignal.dispatch(e,t)}),$(window).scroll(function(){var t;return t=$(window).scrollTop(),$$.scrollSignal.dispatch(t)}),t=2*Math.PI,jQuery.extend(jQuery.easing,{easeOutElastic:function(e,i,r,n,s,a,o){var h;return 0===i?r:1===(i/=s)?r+n:(o||(o=.35*s),!a||a<Math.abs(n)?(a=n,h=o/4):h=o/t*Math.asin(n/a),a*Math.pow(2,-10*i)*Math.sin((i*s-h)*t/o)+n+r)}}),e=[],i=[],r=o=0;100>=o;r=++o)s=r/100,s||(s=0),n=$.easing.easeOutElastic(0,s,0,1,1),e.push(n),i.push(r)}.call(this),

/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function e(t){return o.raw?t:encodeURIComponent(t)}function i(t){return o.raw?t:decodeURIComponent(t)}function r(t){return e(o.json?JSON.stringify(t):String(t))}function n(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(a," ")),o.json?JSON.parse(t):t}catch(e){}}function s(e,i){var r=o.raw?e:n(e);return t.isFunction(i)?i(r):r}var a=/\+/g,o=t.cookie=function(n,a,h){if(arguments.length>1&&!t.isFunction(a)){if(h=t.extend({},o.defaults,h),"number"==typeof h.expires){var l=h.expires,u=h.expires=new Date;u.setTime(+u+864e5*l)}return document.cookie=[e(n),"=",r(a),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}for(var c=n?void 0:{},d=document.cookie?document.cookie.split("; "):[],p=0,f=d.length;f>p;p++){var m=d[p].split("="),g=i(m.shift()),E=m.join("=");if(n&&n===g){c=s(E,a);break}n||void 0===(E=s(E))||(c[g]=E)}return c};o.defaults={},t.removeCookie=function(e,i){return void 0===t.cookie(e)?!1:(t.cookie(e,"",t.extend({},i,{expires:-1})),!t.cookie(e))}}),function(){$$.checkBrowser=function(){var t,e;return e=navigator.userAgent,t=$("body"),Browser.ie&&(t.addClass("ie"),t.addClass("ie"+Browser.ie)),-1!==e.indexOf("Windows")&&t.addClass("win"),-1!==e.indexOf("WebKit")&&t.addClass("wk"),-1!==e.indexOf("Firefox")&&t.addClass("ff"),-1!==e.indexOf("iPhone")&&t.addClass("iph ios"),-1!==e.indexOf("iPad")&&t.addClass("ipd ios"),-1!==e.indexOf("iPod")&&t.addClass("ipod ios"),-1!==e.indexOf("Android")?t.addClass("ad"):void 0},$$.checkDevice=function(){var t;if(t=location.pathname,"iPhone"!==$$.Device&&"Android SP"!==$$.Device){if(-1!==t.indexOf("/sp/"))return t=t.replace("/sp/","/"),location.href=t}else if(-1===t.indexOf("/sp/"))return t="/sp"+t,location.href=t},$.fn.pageScroll=function(t){return this.each(function(){var e;return e={time:1e3,easing:"easeOutExpo",offsetTop:0},$.extend(e,t),$(this).on("click",function(){var t;return t=$(this).attr("href"),$(t).size()&&(e.top=$(t).offset().top),$("html,body").animate({scrollTop:e.top+e.offsetTop},e.time,e.easing),!1}),this})},$.fn.googleMap=function(t){var e;return e={latlng:[36.794883,10.1432776],zoom:15,marker:!0},$.extend(e,t),e.kml&&(e.isMymap=!0),this.each(function(){var t,i,r,n,s,a,o,h,l,u,c,d,p;if(t={zoom:e.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP,scaleControl:!0,scrollwheel:!1},a=new google.maps.Map(this,t),e.latlng[0]instanceof Array){for(i=!1,h=new google.maps.LatLngBounds,n=e.latlng,p=e.latlng,c=0,d=p.length;d>c;c++)u=p[c],l=new google.maps.LatLng(u[0],u[1]),o=new google.maps.Marker({position:l,map:a}),h.extend(l);a.fitBounds(h)}else i=!0,n=[e.latlng],l=new google.maps.LatLng(e.latlng[0],e.latlng[1]),!e.isMymap&&e.marker&&(o=new google.maps.Marker({position:l,map:a})),a.setCenter(l);return e.isMymap?(r=new google.maps.KmlLayer(e.kml,{preserveViewport:!0}),r.setMap(a)):e.more!==!1&&(s=e.more?e.more:"http://maps.google.co.jp/maps?q=loc:"+n[0][0]+","+n[0][1]+"&z=10",$(this).after('<a href="'+s+'" target="_blank" class="gmap-more">\u5927\u304d\u3044\u5730\u56f3\u3067\u8868\u793a</a>')),this})},$$.absolutePath=function(t){var e;return e=document.createElement("span"),e.innerHTML='<a href="'+t+'" />',e.firstChild.href},$.fn.current=function(t){var e,i,r,n,s,a;return a=location.protocol+"//"+location.host+"/",i=location.href,t=t||{child:!0},r={},e=function(t){var e;return e=document.createElement("span"),e.innerHTML='<a href="'+t+'" />',e.firstChild.href},n=function(t){return e(t)===i},s=function(t){var r;return r=e(t).replace(/index\.html$/,""),0<=i.search(r)&&a!==r},$(this).each(function(){var e,i;if(i=$(this),e=i.attr("href"),t.child){if(n(e)||s(e))return i.parent().addClass("current"),i.addClass("current")}else if(n(e))return i.parent().addClass("current"),i.addClass("current")}),this},$.fn.contentScroll=function(t){var e,i;return e={move:300,btnUp:".scroll-up",btnDown:".scroll-down",content:".content-scroll"},$.extend(e,t),i=function(t){var i,r;return i=t.target.scrollTop(),r="up"===t.type?i-e.move:i+e.move,t.target.animate({scrollTop:r},400,"easeOutQuint")},this.each(function(){var t,r,n;return r=$(this).find(e.btnUp),t=$(this).find(e.btnDown),n=$(this).find(e.content),r.on("click",function(){return i({type:"up",target:n})}),t.on("click",function(){return i({type:"down",target:n})}),this})},$$.popup=function(){return function(t,e,i){var r,n;return r=(screen.availWidth-e)/2,n=screen.availHeight>i?(screen.availHeight-i)/2:0,window.open(t,"pop_window","width="+e+", height="+i+", left="+r+", top="+n+", menubar=no, toolbar=no, scrollbars=yes")}}(this)}.call(this),/*!
* @license PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.6.1",t.buildDate="Thu, 21 May 2015 16:17:37 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,r=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(r){i[(e+="_")+"constructor"]=r.constructor;for(var n in r)i.hasOwnProperty(n)&&"function"==typeof r[n]&&(i[e+n]=r[n])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,r=t.length;r>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var r;r=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=r[t];return n&&this.removeEventListener(t,e,i),n=r[t],n?n.push(e):r[t]=[e],e},e.on=function(t,e,i,r,n,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,n),r&&t.remove()},s)},e.removeEventListener=function(t,e,i){var r=i?this._captureListeners:this._listeners;if(r){var n=r[t];if(n)for(var s=0,a=n.length;a>s;s++)if(n[s]==e){1==a?delete r[t]:n.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(i){}if(t.bubbles&&this.parent){for(var r=this,n=[r];r.parent;)n.push(r=r.parent);var s,a=n.length;for(s=a-1;s>=0&&!t.propagationStopped;s--)n[s]._dispatchEvent(t,1+(0==s));for(s=1;a>s&&!t.propagationStopped;s++)n[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,r=1==e?this._captureListeners:this._listeners;if(t&&r){var n=r[t.type];if(!n||!(i=n.length))return;try{t.currentTarget=this}catch(s){}try{t.eventPhase=e}catch(s){}t.removed=!1,n=n.slice();for(var a=0;i>a&&!t.immediatePropagationStopped;a++){var o=n[a];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),function(){function t(e,r){function s(t){if(s[t]!==g)return s[t];var e;if("bug-string-char-index"==t)e="a"!="a"[0];else if("json"==t)e=s("json-stringify")&&s("json-parse");else{var i,n='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var h=r.stringify,u="function"==typeof h&&_;if(u){(i=function(){return 1}).toJSON=i;try{u="0"===h(0)&&"0"===h(new a)&&'""'==h(new o)&&h(v)===g&&h(g)===g&&h()===g&&"1"===h(i)&&"[1]"==h([i])&&"[null]"==h([g])&&"null"==h(null)&&"[null,null,null]"==h([g,v,null])&&h({a:[i,!0,!1,null,"\x00\b\n\f\r	"]})==n&&"1"===h(null,i)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new l(-1))}catch(c){u=!1}}e=u}if("json-parse"==t){var d=r.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){i=d(n);var p=5==i.a.length&&1===i.a[0];if(p){try{p=!d('"	"')}catch(c){}if(p)try{p=1!==d("01")}catch(c){}if(p)try{p=1!==d("1.")}catch(c){}}}}catch(c){p=!1}e=p}}return s[t]=!!e}e||(e=n.Object()),r||(r=n.Object());var a=e.Number||n.Number,o=e.String||n.String,h=e.Object||n.Object,l=e.Date||n.Date,u=e.SyntaxError||n.SyntaxError,c=e.TypeError||n.TypeError,d=e.Math||n.Math,p=e.JSON||n.JSON;"object"==typeof p&&p&&(r.stringify=p.stringify,r.parse=p.parse);var f,m,g,E=h.prototype,v=E.toString,_=new l(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(y){}if(!s("json")){var T="[object Function]",x="[object Date]",R="[object Number]",b="[object String]",w="[object Array]",H="[object Boolean]",S=s("bug-string-char-index");if(!_)var M=d.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(t,e){return C[e]+365*(t-1970)+M((t-1969+(e=+(e>1)))/4)-M((t-1901+e)/100)+M((t-1601+e)/400)};if((f=E.hasOwnProperty)||(f=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=v?f=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,f=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,f.call(this,t)}),m=function(t,e){var r,n,s,a=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,n=new r;for(s in n)f.call(n,s)&&a++;return r=n=null,a?m=2==a?function(t,e){var i,r={},n=v.call(t)==T;for(i in t)n&&"prototype"==i||f.call(r,i)||!(r[i]=1)||!f.call(t,i)||e(i)}:function(t,e){var i,r,n=v.call(t)==T;for(i in t)n&&"prototype"==i||!f.call(t,i)||(r="constructor"===i)||e(i);(r||f.call(t,i="constructor"))&&e(i)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(t,e){var r,s,a=v.call(t)==T,o=!a&&"function"!=typeof t.constructor&&i[typeof t.hasOwnProperty]&&t.hasOwnProperty||f;for(r in t)a&&"prototype"==r||!o.call(t,r)||e(r);for(s=n.length;r=n[--s];o.call(t,r)&&e(r));}),m(t,e)},!s("json-stringify")){var P={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},L="000000",O=function(t,e){return(L+(e||0)).slice(-t)},D="\\u00",k=function(t){for(var e='"',i=0,r=t.length,n=!S||r>10,s=n&&(S?t.split(""):t);r>i;i++){var a=t.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=P[a];break;default:if(32>a){e+=D+O(2,a.toString(16));break}e+=n?s[i]:t.charAt(i)}}return e+'"'},I=function(t,e,i,r,n,s,a){var o,h,l,u,d,p,E,_,y,T,S,C,P,L,D,N;try{o=e[t]}catch(F){}if("object"==typeof o&&o)if(h=v.call(o),h!=x||f.call(o,"toJSON"))"function"==typeof o.toJSON&&(h!=R&&h!=b&&h!=w||f.call(o,"toJSON"))&&(o=o.toJSON(t));else if(o>-1/0&&1/0>o){if(A){for(d=M(o/864e5),l=M(d/365.2425)+1970-1;A(l+1,0)<=d;l++);for(u=M((d-A(l,0))/30.42);A(l,u+1)<=d;u++);d=1+d-A(l,u),p=(o%864e5+864e5)%864e5,E=M(p/36e5)%24,_=M(p/6e4)%60,y=M(p/1e3)%60,T=p%1e3}else l=o.getUTCFullYear(),u=o.getUTCMonth(),d=o.getUTCDate(),E=o.getUTCHours(),_=o.getUTCMinutes(),y=o.getUTCSeconds(),T=o.getUTCMilliseconds();o=(0>=l||l>=1e4?(0>l?"-":"+")+O(6,0>l?-l:l):O(4,l))+"-"+O(2,u+1)+"-"+O(2,d)+"T"+O(2,E)+":"+O(2,_)+":"+O(2,y)+"."+O(3,T)+"Z"}else o=null;if(i&&(o=i.call(e,t,o)),null===o)return"null";if(h=v.call(o),h==H)return""+o;if(h==R)return o>-1/0&&1/0>o?""+o:"null";if(h==b)return k(""+o);if("object"==typeof o){for(L=a.length;L--;)if(a[L]===o)throw c();if(a.push(o),S=[],D=s,s+=n,h==w){for(P=0,L=o.length;L>P;P++)C=I(P,o,i,r,n,s,a),S.push(C===g?"null":C);N=S.length?n?"[\n"+s+S.join(",\n"+s)+"\n"+D+"]":"["+S.join(",")+"]":"[]"}else m(r||o,function(t){var e=I(t,o,i,r,n,s,a);e!==g&&S.push(k(t)+":"+(n?" ":"")+e)}),N=S.length?n?"{\n"+s+S.join(",\n"+s)+"\n"+D+"}":"{"+S.join(",")+"}":"{}";return a.pop(),N}};r.stringify=function(t,e,r){var n,s,a,o;if(i[typeof e]&&e)if((o=v.call(e))==T)s=e;else if(o==w){a={};for(var h,l=0,u=e.length;u>l;h=e[l++],o=v.call(h),(o==b||o==R)&&(a[h]=1));}if(r)if((o=v.call(r))==R){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else o==b&&(n=r.length<=10?r:r.slice(0,10));return I("",(h={},h[""]=t,h),s,a,n,"",[])}}if(!s("json-parse")){var N,F,j=o.fromCharCode,B={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},U=function(){throw N=F=null,u()},z=function(){for(var t,e,i,r,n,s=F,a=s.length;a>N;)switch(n=s.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=S?s.charAt(N):s[N],N++,t;case 34:for(t="@",N++;a>N;)if(n=s.charCodeAt(N),32>n)U();else if(92==n)switch(n=s.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=B[n],N++;break;case 117:for(e=++N,i=N+4;i>N;N++)n=s.charCodeAt(N),n>=48&&57>=n||n>=97&&102>=n||n>=65&&70>=n||U();t+=j("0x"+s.slice(e,N));break;default:U()}else{if(34==n)break;for(n=s.charCodeAt(N),e=N;n>=32&&92!=n&&34!=n;)n=s.charCodeAt(++N);t+=s.slice(e,N)}if(34==s.charCodeAt(N))return N++,t;U();default:if(e=N,45==n&&(r=!0,n=s.charCodeAt(++N)),n>=48&&57>=n){for(48==n&&(n=s.charCodeAt(N+1),n>=48&&57>=n)&&U(),r=!1;a>N&&(n=s.charCodeAt(N),n>=48&&57>=n);N++);if(46==s.charCodeAt(N)){for(i=++N;a>i&&(n=s.charCodeAt(i),n>=48&&57>=n);i++);i==N&&U(),N=i}if(n=s.charCodeAt(N),101==n||69==n){for(n=s.charCodeAt(++N),(43==n||45==n)&&N++,i=N;a>i&&(n=s.charCodeAt(i),n>=48&&57>=n);i++);i==N&&U(),N=i}return+s.slice(e,N)}if(r&&U(),"true"==s.slice(N,N+4))return N+=4,!0;if("false"==s.slice(N,N+5))return N+=5,!1;if("null"==s.slice(N,N+4))return N+=4,null;U()}return"$"},V=function(t){var e,i;if("$"==t&&U(),"string"==typeof t){if("@"==(S?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=z(),"]"!=t;i||(i=!0))i&&(","==t?(t=z(),"]"==t&&U()):U()),","==t&&U(),e.push(V(t));return e}if("{"==t){for(e={};t=z(),"}"!=t;i||(i=!0))i&&(","==t?(t=z(),"}"==t&&U()):U()),(","==t||"string"!=typeof t||"@"!=(S?t.charAt(0):t[0])||":"!=z())&&U(),e[t.slice(1)]=V(z());return e}U()}return t},$=function(t,e,i){var r=G(t,e,i);r===g?delete t[e]:t[e]=r},G=function(t,e,i){var r,n=t[e];if("object"==typeof n&&n)if(v.call(n)==w)for(r=n.length;r--;)$(n,r,i);else m(n,function(t){$(n,t,i)});return i.call(t,e,n)};r.parse=function(t,e){var i,r;return N=0,F=""+t,i=V(z()),"$"!=z()&&U(),N=F=null,e&&v.call(e)==T?G((r={},r[""]=i,r),"",e):i}}}return r.runInContext=t,r}var e="function"==typeof define&&define.amd,i={"function":!0,object:!0},r=i[typeof exports]&&exports&&!exports.nodeType&&exports,n=i[typeof window]&&window||this,s=r&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!s||s.global!==s&&s.window!==s&&s.self!==s||(n=s),r&&!e)t(n,r);else{var a=n.JSON,o=n.JSON3,h=!1,l=t(n,n.JSON3={noConflict:function(){return h||(h=!0,n.JSON=a,n.JSON3=o,a=o=null),l}});n.JSON={parse:l.parse,stringify:l.stringify}}e&&define(function(){return l})}.call(this),function(){var t={};t.appendToHead=function(e){t.getHead().appendChild(e)},t.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},t.getBody=function(){return document.body||document.getElementsByTagName("body")[0]},createjs.DomUtils=t}(),function(){var t={};t.parseXML=function(t,e){var i=null;try{if(window.DOMParser){var r=new DOMParser;i=r.parseFromString(t,e)}}catch(n){}if(!i)try{i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t)}catch(n){i=null}return i},t.parseJSON=function(t){if(null==t)return null;try{return JSON.parse(t)}catch(e){throw e}},createjs.DataUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var r=new t;return r.src=e,r}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[./]*?\//i,t.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,t.parseURI=function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var r=e.indexOf("?");r>-1&&(e=e.substr(0,r));var n;return t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var r in t)i.push(r+"="+escape(t[r]));return e&&(i=i.concat(e)),i.join("&")},t.buildPath=function(t,e){if(null==e)return t;var i=[],r=t.indexOf("?");if(-1!=r){var n=t.slice(r+1);i=i.concat(n.split("&"))}return-1!=r?t.slice(0,r)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");i.href=location.href;var r=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return r},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return window.HTMLAudioElement?t instanceof HTMLAudioElement:!1},t.isVideoTag=function(t){return window.HTMLVideoElement?t instanceof HTMLVideoElement:!1},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),i=this;e instanceof Function?e(function(t){i._result=t,i._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(t.type)}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(e){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===e.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},r=null;if(window.XMLHttpRequest)r=new XMLHttpRequest,e&&void 0===r.withCredentials&&window.XDomainRequest&&(r=new XDomainRequest);else{for(var n=0,a=s.ACTIVEX_VERSIONS.length;a>n;n++){var o=s.ACTIVEX_VERSIONS[n];try{r=new ActiveXObject(o);break}catch(h){}}if(null==r)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof r.responseType?2:1;var l=null;if(l=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,r.open(t.method||createjs.AbstractLoader.GET,l,!0),e&&r instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var u in t.headers)i[u]=t.headers[u];for(u in i)r.setRequestHeader(u,i[u]);return r instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(r.withCredentials=t.withCredentials),this._request=r,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(t,e,i)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;e.init=function(t,e,i){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this._paused=!1,this._basePath=e,this._crossOrigin=i,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=0/0},i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY=createjs.AbstractLoader.BINARY,i.CSS=createjs.AbstractLoader.CSS,i.IMAGE=createjs.AbstractLoader.IMAGE,i.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,i.JSON=createjs.AbstractLoader.JSON,i.JSONP=createjs.AbstractLoader.JSONP,i.MANIFEST=createjs.AbstractLoader.MANIFEST,i.SOUND=createjs.AbstractLoader.SOUND,i.VIDEO=createjs.AbstractLoader.VIDEO,i.SVG=createjs.AbstractLoader.SVG,i.TEXT=createjs.AbstractLoader.TEXT,i.XML=createjs.AbstractLoader.XML,i.POST=createjs.AbstractLoader.POST,i.GET=createjs.AbstractLoader.GET,e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");
if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){var e=this._availableLoaders.indexOf(t);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},e.setUseXHR=function(t){return this.setPreferXHR(t)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var i=!1;if(e){for(;e.length;){var r=e.pop(),n=this.getResult(r);for(s=this._loadQueue.length-1;s>=0;s--)if(a=this._loadQueue[s].getItem(),a.id==r||a.src==r){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if(a=this._loadQueueBackup[s].getItem(),a.id==r||a.src==r){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(n)this._disposeItem(this.getItem(r));else for(var s=this._currentLoads.length-1;s>=0;s--){var a=this._currentLoads[s].getItem();if(a.id==r||a.src==r){this._currentLoads.splice(s,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{this.close();for(var o in this._loadItemsById)this._disposeItem(this._loadItemsById[o]);this.init(this.preferXHR,this._basePath)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,r=this._loadQueueBackup.length;r>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){this._plugins.push(t);var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,r=e.types.length;r>i;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,r=e.extensions.length;r>i;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null==t){var r=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(r)}this._addItem(t,null,i),this.setPaused(e!==!1?!1:!0)},e.loadManifest=function(t,e,r){var n=null,s=null;if(t instanceof Array){if(0==t.length){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(a)}n=t}else if("string"==typeof t)n=[{src:t,type:i.MANIFEST}];else{if("object"!=typeof t){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(a)}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(a)}n=[t]}else void 0!==t.manifest&&(n=t.manifest,s=t.path)}for(var o=0,h=n.length;h>o;o++)this._addItem(n[o],s,r);this.setPaused(e!==!1?!1:!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var r=i.id;return e&&this._loadedRawResults[r]?this._loadedRawResults[r]:this._loadedResults[r]},e.getItems=function(t){var e=[];for(var i in this._loadItemsById){var r=this._loadItemsById[i],n=this.getResult(i);(t!==!0||null!=n)&&e.push({item:r,result:n,rawResult:this.getResult(i,!0)})}return e},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=0/0},e._addItem=function(t,e,i){var r=this._createLoadItem(t,e,i);if(null!=r){var n=this._createLoader(r);null!=n&&("plugins"in n&&(n.plugins=this._plugins),r._loader=n,this._loadQueue.push(n),this._loadQueueBackup.push(n),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&r.type==createjs.LoadQueue.JAVASCRIPT||r.maintainOrder===!0)&&(this._scriptOrder.push(r),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,i){var r=createjs.LoadItem.create(t);if(null==r)return null;var n="",s=i||this._basePath;if(r.src instanceof Object){if(!r.type)return null;if(e){n=e;var a=createjs.RequestUtils.parseURI(e);null==s||a.absolute||a.relative||(n=s+n)}else null!=s&&(n=s)}else{var o=createjs.RequestUtils.parseURI(r.src);o.extension&&(r.ext=o.extension),null==r.type&&(r.type=createjs.RequestUtils.getTypeByExtension(r.ext));var h=r.src;if(!o.absolute&&!o.relative)if(e){n=e;var a=createjs.RequestUtils.parseURI(e);h=e+h,null==s||a.absolute||a.relative||(n=s+n)}else null!=s&&(n=s);r.src=n+r.src}r.path=n,(void 0===r.id||null===r.id||""===r.id)&&(r.id=h);var l=this._typeCallbacks[r.type]||this._extensionCallbacks[r.ext];if(l){var u=l.callback.call(l.scope,r,this);if(u===!1)return null;u===!0||null!=u&&(r._loader=u),o=createjs.RequestUtils.parseURI(r.src),null!=o.extension&&(r.ext=o.extension)}return this._loadItemsById[r.id]=r,this._loadItemsBySrc[r.src]=r,null==r.crossOrigin&&(r.crossOrigin=this._crossOrigin),r},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var r=this._availableLoaders[i];if(r&&r.canLoadItem(t))return new r(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){var e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(e)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(i),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(e),this._cleanLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem(),r=e.getResult();this._loadedResults[i.id]=r;var n=e.getResult(!0);null!=n&&n!==r&&(this._loadedRawResults[i.id]=n),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(i,e),this._cleanLoadItem(e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var i=0;i<e.length;i++){var r=e[i].item;this._loadItemsBySrc[r.src]=r,this._loadItemsById[r.id]=r,this._loadedResults[r.id]=e[i].result,this._loadedRawResults[r.id]=e[i].rawResult}},e._finishOrderedItem=function(t,e){var i=t.getItem();if(this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT||i.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var r=createjs.indexOf(this._scriptOrder,i);return-1==r?!1:(this._loadedScripts[r]=e===!0?!0:i,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var i=this._loadedScripts[e];if(null===i)break;if(i!==!0){var r=this._loadedResults[i.id];i.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(r);var n=i._loader;this._processFinishedLoad(i,n),this._loadedScripts[e]=!0}}},e._processFinishedLoad=function(t,e){this._numItemsLoaded++,this.maintainScriptOrder||t.type!=createjs.LoadQueue.JAVASCRIPT||createjs.DomUtils.appendToHead(t.result),this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;var e=t.getItem();if(e.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var i=this._scriptOrder.indexOf(e),r=0;i>r;){var n=this._loadedScripts[r];if(null==n)return!1;r++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,i=0;e>i;i++)if(this._currentLoads[i]==t){this._currentLoads.splice(i,1);break}},e._cleanLoadItem=function(t){var e=t.getItem();e&&delete e._loader},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,r=0,n=this._currentLoads.length;n>r;r++)i+=this._currentLoads[r].progress;t+=i/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()&&!this._paused){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.TEXT)}var e=(createjs.extend(t,createjs.AbstractLoader),t);e.canLoadItem=function(t){return t.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=document.createElement(e?"style":"link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.CSS},e._formatResult=function(t){if(this._preferXHR){var e=t.getTag();if(e.styleSheet)e.styleSheet.cssText=t.getResult(!0);else{var i=document.createTextNode(t.getResult(!0));e.appendChild(i)}}else e=this._tag;return createjs.DomUtils.appendToHead(e),e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(t)?this._tag=t:createjs.RequestUtils.isImageTag(t.src)?this._tag=t.src:createjs.RequestUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.IMAGE},e.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var t=this._item.crossOrigin;1==t&&(t="Anonymous"),null==t||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=t),this.AbstractLoader_load()},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){var e=this;return function(i){var r=e._tag,n=window.URL||window.webkitURL;if(e._preferXHR)if(n){var s=n.createObjectURL(t.getResult(!0));r.src=s,r.onload=function(){n.revokeObjectURL(e.src)}}else r.src=t.getItem().src;r.complete?i(r):r.onload=function(){i(this)}}},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSON&&!t._loadAsJSONP},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(i){var r=new createjs.ErrorEvent("JSON_FORMAT",null,i);return this._sendError(r),i}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSONP||t._loadAsJSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0);for(var i=0,r=this.plugins.length;r>i;i++)e.installPlugin(this.plugins[i]);e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(t)||createjs.RequestUtils.isVideoTag(t.src)?(this.setTag(createjs.RequestUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;e._createTag=function(){return document.createElement("video")},i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t&&t instanceof Function?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){if(t&&t.images){var e=this._manifestQueue=new createjs.LoadQueue;e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images)}},e._handleManifestFileLoad=function(t){var e=t.result;if(null!=e){var i=this.getResult().images,r=i.indexOf(t.item.src);i[r]=e}},e._handleManifestComplete=function(){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0),"text/xml"),i=t.getTag();return!this._preferXHR&&document.body.contains(i)&&document.body.removeChild(i),null!=e.documentElement?(i.appendChild(e.documentElement),i.style.visibility="visible",i):e},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}();var THREE={REVISION:"71"};"object"==typeof module&&(module.exports=THREE),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:t>0?1:+t}),THREE.log=function(){console.log.apply(console,arguments)},THREE.warn=function(){console.warn.apply(console,arguments)},THREE.error=function(){console.error.apply(console,arguments)},THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.MinEquation=103,THREE.MaxEquation=104,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=300,THREE.CubeReflectionMapping=301,THREE.CubeRefractionMapping=302,THREE.EquirectangularReflectionMapping=303,THREE.EquirectangularRefractionMapping=304,THREE.SphericalReflectionMapping=305,THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.HalfFloatType=1025,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGBEFormat=THREE.RGBAFormat,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.RGB_PVRTC_4BPPV1_Format=2100,THREE.RGB_PVRTC_2BPPV1_Format=2101,THREE.RGBA_PVRTC_4BPPV1_Format=2102,THREE.RGBA_PVRTC_2BPPV1_Format=2103,THREE.Projector=function(){THREE.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){THREE.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){THREE.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){THREE.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},THREE.CanvasRenderer=function(){THREE.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},THREE.Color=function(t){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(t)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(t){return t instanceof THREE.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){if(0===e)this.r=this.g=this.b=i;else{var r=function(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+6*(e-t)*(2/3-i):t};e=.5>=i?i*(1+e):i+e-i*e,i=2*i-e,this.r=r(i,e,t+1/3),this.g=r(i,e,t),this.b=r(i,e,t-1/3)}return this},setStyle:function(t){return/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(t)?(t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(t),this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this):/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(t)?(t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(t),this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this):/^\#([0-9a-f]{6})$/i.test(t)?(t=/^\#([0-9a-f]{6})$/i.exec(t),this.setHex(parseInt(t[1],16)),this):/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(t)?(t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t),this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this):/^(\w+)$/i.test(t)?(this.setHex(THREE.ColorKeywords[t]),this):void 0},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){t=t||{h:0,s:0,l:0};var e,i=this.r,r=this.g,n=this.b,s=Math.max(i,r,n),a=Math.min(i,r,n),o=(a+s)/2;if(a===s)a=e=0;else{var h=s-a,a=.5>=o?h/(s+a):h/(2-s-a);switch(s){case i:e=(r-n)/h+(n>r?6:0);break;case r:e=(n-i)/h+2;break;case n:e=(i-r)/h+4}e/=6}return t.h=e,t.s=a,t.l=o,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){var r=this.getHSL();return r.h+=t,r.s+=e,r.l+=i,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t){return this.r=t[0],this.g=t[1],this.b=t[2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==r?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this.onChangeCallback(),this},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1==t instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),r=Math.cos(t._y/2),n=Math.cos(t._z/2),s=Math.sin(t._x/2),a=Math.sin(t._y/2),o=Math.sin(t._z/2);return"XYZ"===t.order?(this._x=s*r*n+i*a*o,this._y=i*a*n-s*r*o,this._z=i*r*o+s*a*n,this._w=i*r*n-s*a*o):"YXZ"===t.order?(this._x=s*r*n+i*a*o,this._y=i*a*n-s*r*o,this._z=i*r*o-s*a*n,this._w=i*r*n+s*a*o):"ZXY"===t.order?(this._x=s*r*n-i*a*o,this._y=i*a*n+s*r*o,this._z=i*r*o+s*a*n,this._w=i*r*n-s*a*o):"ZYX"===t.order?(this._x=s*r*n-i*a*o,this._y=i*a*n+s*r*o,this._z=i*r*o-s*a*n,this._w=i*r*n+s*a*o):"YZX"===t.order?(this._x=s*r*n+i*a*o,this._y=i*a*n+s*r*o,this._z=i*r*o-s*a*n,this._w=i*r*n-s*a*o):"XZY"===t.order&&(this._x=s*r*n-i*a*o,this._y=i*a*n-s*r*o,this._z=i*r*o+s*a*n,this._w=i*r*n+s*a*o),!1!==e&&this.onChangeCallback(),this
},setFromAxisAngle:function(t,e){var i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,i=e[0];t=e[4];var r=e[8],n=e[1],s=e[5],a=e[9],o=e[2],h=e[6],e=e[10],l=i+s+e;return l>0?(i=.5/Math.sqrt(l+1),this._w=.25/i,this._x=(h-a)*i,this._y=(r-o)*i,this._z=(n-t)*i):i>s&&i>e?(i=2*Math.sqrt(1+i-s-e),this._w=(h-a)/i,this._x=.25*i,this._y=(t+n)/i,this._z=(r+o)/i):s>e?(i=2*Math.sqrt(1+s-i-e),this._w=(r-o)/i,this._x=(t+n)/i,this._y=.25*i,this._z=(a+h)/i):(i=2*Math.sqrt(1+e-i-s),this._w=(n-t)/i,this._x=(r+o)/i,this._y=(a+h)/i,this._z=.25*i),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e;return function(i,r){return void 0===t&&(t=new THREE.Vector3),e=i.dot(r)+1,1e-6>e?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(THREE.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var i=t._x,r=t._y,n=t._z,s=t._w,a=e._x,o=e._y,h=e._z,l=e._w;return this._x=i*l+s*a+r*h-n*o,this._y=r*l+s*o+n*a-i*h,this._z=n*l+s*h+i*o-r*a,this._w=s*l-i*a-r*o-n*h,this.onChangeCallback(),this},multiplyVector3:function(t){return THREE.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,r=this._y,n=this._z,s=this._w,a=s*t._w+i*t._x+r*t._y+n*t._z;if(0>a?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;var o=Math.acos(a),h=Math.sqrt(1-a*a);return.001>Math.abs(h)?(this._w=.5*(s+this._w),this._x=.5*(i+this._x),this._y=.5*(r+this._y),this._z=.5*(n+this._z),this):(a=Math.sin((1-e)*o)/h,o=Math.sin(e*o)/h,this._w=s*a+this._w*o,this._x=i*a+this._x*o,this._y=r*a+this._y*o,this._z=n*a+this._z*o,this.onChangeCallback(),this)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(t,e,i,r){return i.copy(t).slerp(e,r)},THREE.Vector2=function(t,e){this.x=t||0,this.y=e||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(THREE.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},sub:function(t,e){return void 0!==e?(THREE.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t):this.y=this.x=0,this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new THREE.Vector2,e=new THREE.Vector2),t.set(i,i),e.set(r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return t=this.y-t.y,e*e+t*t},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(THREE.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t,e){return void 0!==e?(THREE.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(THREE.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return!1==e instanceof THREE.Euler&&THREE.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new THREE.Quaternion),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var t;return function(e,i){return void 0===t&&(t=new THREE.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,i)),this}}(),applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6]*r,this.y=t[1]*e+t[4]*i+t[7]*r,this.z=t[2]*e+t[5]*i+t[8]*r,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*r+t[12],this.y=t[1]*e+t[5]*i+t[9]*r+t[13],this.z=t[2]*e+t[6]*i+t[10]*r+t[14],this},applyProjection:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;var n=1/(t[3]*e+t[7]*i+t[11]*r+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*r+t[12])*n,this.y=(t[1]*e+t[5]*i+t[9]*r+t[13])*n,this.z=(t[2]*e+t[6]*i+t[10]*r+t[14])*n,this},applyQuaternion:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,a=t.z;t=t.w;var o=t*e+s*r-a*i,h=t*i+a*e-n*r,l=t*r+n*i-s*e,e=-n*e-s*i-a*r;return this.x=o*t+e*-n+h*-a-l*-s,this.y=h*t+e*-s+l*-n-o*-a,this.z=l*t+e*-a+o*-s-h*-n,this},project:function(){var t;return function(e){return void 0===t&&(t=new THREE.Matrix4),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new THREE.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,i=this.y,r=this.z;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*r,this.y=t[1]*e+t[5]*i+t[9]*r,this.z=t[2]*e+t[6]*i+t[10]*r,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t,this.z*=t):this.z=this.y=this.x=0,this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new THREE.Vector3,e=new THREE.Vector3),t.set(i,i,i),e.set(r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t),this},cross:function(t,e){if(void 0!==e)return THREE.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var i=this.x,r=this.y,n=this.z;return this.x=r*t.z-n*t.y,this.y=n*t.x-i*t.z,this.z=i*t.y-r*t.x,this},crossVectors:function(t,e){var i=t.x,r=t.y,n=t.z,s=e.x,a=e.y,o=e.z;return this.x=r*o-n*a,this.y=n*s-i*o,this.z=i*a-r*s,this},projectOnVector:function(){var t,e;return function(i){return void 0===t&&(t=new THREE.Vector3),t.copy(i).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new THREE.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new THREE.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){return t=this.dot(t)/(this.length()*t.length()),Math.acos(THREE.Math.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return t=this.z-t.z,e*e+i*i+t*t},setEulerFromRotationMatrix:function(){THREE.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){THREE.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return THREE.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return THREE.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return THREE.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),i=this.set(t.elements[4],t.elements[5],t.elements[6]).length();return t=this.set(t.elements[8],t.elements[9],t.elements[10]).length(),this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){var i=4*t,r=e.elements;return this.x=r[i],this.y=r[i+1],this.z=r[i+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(t,e,i,r){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==r?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(THREE.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},sub:function(t,e){return void 0!==e?(THREE.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=this.w;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*r+t[12]*n,this.y=t[1]*e+t[5]*i+t[9]*r+t[13]*n,this.z=t[2]*e+t[6]*i+t[10]*r+t[14]*n,this.w=t[3]*e+t[7]*i+t[11]*r+t[15]*n,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.z=this.y=this.x=0,this.w=1),this},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,r;t=t.elements;var n=t[0];r=t[4];var s=t[8],a=t[1],o=t[5],h=t[9];i=t[2],e=t[6];var l=t[10];return.01>Math.abs(r-a)&&.01>Math.abs(s-i)&&.01>Math.abs(h-e)?.1>Math.abs(r+a)&&.1>Math.abs(s+i)&&.1>Math.abs(h+e)&&.1>Math.abs(n+o+l-3)?(this.set(1,0,0,0),this):(t=Math.PI,n=(n+1)/2,o=(o+1)/2,l=(l+1)/2,r=(r+a)/4,s=(s+i)/4,h=(h+e)/4,n>o&&n>l?.01>n?(e=0,r=i=.707106781):(e=Math.sqrt(n),i=r/e,r=s/e):o>l?.01>o?(e=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),e=r/i,r=h/i):.01>l?(i=e=.707106781,r=0):(r=Math.sqrt(l),e=s/r,i=h/r),this.set(e,i,r,t),this):(t=Math.sqrt((e-h)*(e-h)+(s-i)*(s-i)+(a-r)*(a-r)),.001>Math.abs(t)&&(t=1),this.x=(e-h)/t,this.y=(s-i)/t,this.z=(a-r)/t,this.w=Math.acos((n+o+l-1)/2),this)},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this.w>t.w&&(this.w=t.w),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this.w<t.w&&(this.w=t.w),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this.w<t.w?this.w=t.w:this.w>e.w&&(this.w=e.w),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new THREE.Vector4,e=new THREE.Vector4),t.set(i,i,i,i),e.set(r,r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._order=r||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._order=r||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var r=THREE.Math.clamp,n=t.elements;t=n[0];var s=n[4],a=n[8],o=n[1],h=n[5],l=n[9],u=n[2],c=n[6],n=n[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(r(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-l,n),this._z=Math.atan2(-s,t)):(this._x=Math.atan2(c,h),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(a,n),this._z=Math.atan2(o,h)):(this._y=Math.atan2(-u,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(c,-1,1)),.99999>Math.abs(c)?(this._y=Math.atan2(-u,n),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(o,t))):"ZYX"===e?(this._y=Math.asin(-r(u,-1,1)),.99999>Math.abs(u)?(this._x=Math.atan2(c,n),this._z=Math.atan2(o,t)):(this._x=0,this._z=Math.atan2(-s,h))):"YZX"===e?(this._z=Math.asin(r(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(-l,h),this._y=Math.atan2(-u,t)):(this._x=0,this._y=Math.atan2(a,n))):"XZY"===e?(this._z=Math.asin(-r(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(c,h),this._y=Math.atan2(a,t)):(this._x=Math.atan2(-l,n),this._y=0)):THREE.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,i,r){return void 0===t&&(t=new THREE.Matrix4),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,r),this}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new THREE.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(t,e){this.start=void 0!==t?t:new THREE.Vector3,this.end=void 0!==e?e:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},center:function(t){return(t||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var i=e||new THREE.Vector3;return this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i,r){t.subVectors(i,this.start),e.subVectors(this.end,this.start);var n=e.dot(e),n=e.dot(t)/n;return r&&(n=THREE.Math.clamp(n,0,1)),n}}(),closestPointToPoint:function(t,e,i){return t=this.closestPointToPointParameter(t,e),i=i||new THREE.Vector3,this.delta(i).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(t,e){this.min=void 0!==t?t:new THREE.Vector2(1/0,1/0),this.max=void 0!==e?e:new THREE.Vector2(-1/0,-1/0)},THREE.Box2.prototype={constructor:THREE.Box2,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;i>e;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new THREE.Vector2;return function(e,i){var r=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){return(t||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y?!0:!1},getParameter:function(t,e){return(e||new THREE.Vector2).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y?!1:!0},clampPoint:function(t,e){return(e||new THREE.Vector2).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new THREE.Vector2;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(t,e){this.min=void 0!==t?t:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==e?e:new THREE.Vector3(-1/0,-1/0,-1/0)},THREE.Box3.prototype={constructor:THREE.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;i>e;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new THREE.Vector3;return function(e,i){var r=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(){var t=new THREE.Vector3;return function(e){var i=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var r=e.geometry;if(void 0!==r)if(r instanceof THREE.Geometry)for(var n=r.vertices,r=0,s=n.length;s>r;r++)t.copy(n[r]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t);else if(r instanceof THREE.BufferGeometry&&void 0!==r.attributes.position)for(n=r.attributes.position.array,r=0,s=n.length;s>r;r+=3)t.set(n[r],n[r+1],n[r+2]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){return(t||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z?!0:!1},getParameter:function(t,e){return(e||new THREE.Vector3).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z?!1:!0},clampPoint:function(t,e){return(e||new THREE.Vector3).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new THREE.Vector3;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new THREE.Vector3;return function(e){return e=e||new THREE.Sphere,e.center=this.center(),e.radius=.5*this.size(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(e){return t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(t),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&THREE.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(t,e,i,r,n,s,a,o,h){var l=this.elements;return l[0]=t,l[3]=e,l[6]=i,l[1]=r,l[4]=n,l[7]=s,l[2]=a,l[5]=o,l[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(t){return t=t.elements,this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(t){return THREE.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return THREE.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new THREE.Vector3;return function(e,i,r){void 0===i&&(i=0),void 0===r&&(r=e.length);for(var n=0;r>n;n+=3,i+=3)t.x=e[i],t.y=e[i+1],t.z=e[i+2],t.applyMatrix3(this),e[i]=t.x,e[i+1]=t.y,e[i+2]=t.z;return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],h=t[7],t=t[8];return e*s*t-e*a*h-i*n*t+i*a*o+r*n*h-r*s*o},getInverse:function(t,e){var i=t.elements,r=this.elements;if(r[0]=i[10]*i[5]-i[6]*i[9],r[1]=-i[10]*i[1]+i[2]*i[9],r[2]=i[6]*i[1]-i[2]*i[5],r[3]=-i[10]*i[4]+i[6]*i[8],r[4]=i[10]*i[0]-i[2]*i[8],r[5]=-i[6]*i[0]+i[2]*i[4],r[6]=i[9]*i[4]-i[5]*i[8],r[7]=-i[9]*i[0]+i[1]*i[8],r[8]=i[5]*i[0]-i[1]*i[4],i=i[0]*r[0]+i[1]*r[3]+i[2]*r[6],0===i){if(e)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");
return THREE.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/i),this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},clone:function(){return(new THREE.Matrix3).fromArray(this.elements)}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&THREE.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(t,e,i,r,n,s,a,o,h,l,u,c,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=r,g[1]=n,g[5]=s,g[9]=a,g[13]=o,g[2]=h,g[6]=l,g[10]=u,g[14]=c,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(t){return this.elements.set(t.elements),this},extractPosition:function(t){return THREE.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,i){var r=this.elements;return t.set(r[0],r[1],r[2]),e.set(r[4],r[5],r[6]),i.set(r[8],r[9],r[10]),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t=new THREE.Vector3;return function(e){var i=this.elements;e=e.elements;var r=1/t.set(e[0],e[1],e[2]).length(),n=1/t.set(e[4],e[5],e[6]).length(),s=1/t.set(e[8],e[9],e[10]).length();return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i[4]=e[4]*n,i[5]=e[5]*n,i[6]=e[6]*n,i[8]=e[8]*s,i[9]=e[9]*s,i[10]=e[10]*s,this}}(),makeRotationFromEuler:function(t){!1==t instanceof THREE.Euler&&THREE.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,r=t.y,n=t.z,s=Math.cos(i),i=Math.sin(i),a=Math.cos(r),r=Math.sin(r),o=Math.cos(n),n=Math.sin(n);if("XYZ"===t.order){t=s*o;var h=s*n,l=i*o,u=i*n;e[0]=a*o,e[4]=-a*n,e[8]=r,e[1]=h+l*r,e[5]=t-u*r,e[9]=-i*a,e[2]=u-t*r,e[6]=l+h*r,e[10]=s*a}else"YXZ"===t.order?(t=a*o,h=a*n,l=r*o,u=r*n,e[0]=t+u*i,e[4]=l*i-h,e[8]=s*r,e[1]=s*n,e[5]=s*o,e[9]=-i,e[2]=h*i-l,e[6]=u+t*i,e[10]=s*a):"ZXY"===t.order?(t=a*o,h=a*n,l=r*o,u=r*n,e[0]=t-u*i,e[4]=-s*n,e[8]=l+h*i,e[1]=h+l*i,e[5]=s*o,e[9]=u-t*i,e[2]=-s*r,e[6]=i,e[10]=s*a):"ZYX"===t.order?(t=s*o,h=s*n,l=i*o,u=i*n,e[0]=a*o,e[4]=l*r-h,e[8]=t*r+u,e[1]=a*n,e[5]=u*r+t,e[9]=h*r-l,e[2]=-r,e[6]=i*a,e[10]=s*a):"YZX"===t.order?(t=s*a,h=s*r,l=i*a,u=i*r,e[0]=a*o,e[4]=u-t*n,e[8]=l*n+h,e[1]=n,e[5]=s*o,e[9]=-i*o,e[2]=-r*o,e[6]=h*n+l,e[10]=t-u*n):"XZY"===t.order&&(t=s*a,h=s*r,l=i*a,u=i*r,e[0]=a*o,e[4]=-n,e[8]=r*o,e[1]=t*n+u,e[5]=s*o,e[9]=h*n-l,e[2]=l*n-h,e[6]=i*o,e[10]=u*n+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},setRotationFromQuaternion:function(t){return THREE.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},makeRotationFromQuaternion:function(t){var e=this.elements,i=t.x,r=t.y,n=t.z,s=t.w,a=i+i,o=r+r,h=n+n;t=i*a;var l=i*o,i=i*h,u=r*o,r=r*h,n=n*h,a=s*a,o=s*o,s=s*h;return e[0]=1-(u+n),e[4]=l-s,e[8]=i+o,e[1]=l+s,e[5]=1-(t+n),e[9]=r-a,e[2]=i-o,e[6]=r+a,e[10]=1-(t+u),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,s){var a=this.elements;return i.subVectors(r,n).normalize(),0===i.length()&&(i.z=1),t.crossVectors(s,i).normalize(),0===t.length()&&(i.x+=1e-4,t.crossVectors(s,i).normalize()),e.crossVectors(i,t),a[0]=t.x,a[4]=e.x,a[8]=i.x,a[1]=t.y,a[5]=e.y,a[9]=i.y,a[2]=t.z,a[6]=e.z,a[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(THREE.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var i=t.elements,r=e.elements,n=this.elements,s=i[0],a=i[4],o=i[8],h=i[12],l=i[1],u=i[5],c=i[9],d=i[13],p=i[2],f=i[6],m=i[10],g=i[14],E=i[3],v=i[7],_=i[11],i=i[15],y=r[0],T=r[4],x=r[8],R=r[12],b=r[1],w=r[5],H=r[9],S=r[13],M=r[2],C=r[6],A=r[10],P=r[14],L=r[3],O=r[7],D=r[11],r=r[15];return n[0]=s*y+a*b+o*M+h*L,n[4]=s*T+a*w+o*C+h*O,n[8]=s*x+a*H+o*A+h*D,n[12]=s*R+a*S+o*P+h*r,n[1]=l*y+u*b+c*M+d*L,n[5]=l*T+u*w+c*C+d*O,n[9]=l*x+u*H+c*A+d*D,n[13]=l*R+u*S+c*P+d*r,n[2]=p*y+f*b+m*M+g*L,n[6]=p*T+f*w+m*C+g*O,n[10]=p*x+f*H+m*A+g*D,n[14]=p*R+f*S+m*P+g*r,n[3]=E*y+v*b+_*M+i*L,n[7]=E*T+v*w+_*C+i*O,n[11]=E*x+v*H+_*A+i*D,n[15]=E*R+v*S+_*P+i*r,this},multiplyToArray:function(t,e,i){var r=this.elements;return this.multiplyMatrices(t,e),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},multiplyVector3:function(t){return THREE.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return THREE.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return THREE.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new THREE.Vector3;return function(e,i,r){void 0===i&&(i=0),void 0===r&&(r=e.length);for(var n=0;r>n;n+=3,i+=3)t.x=e[i],t.y=e[i+1],t.z=e[i+2],t.applyMatrix4(this),e[i]=t.x,e[i+1]=t.y,e[i+2]=t.z;return e}}(),rotateAxis:function(t){THREE.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return THREE.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},determinant:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],s=t[1],a=t[5],o=t[9],h=t[13],l=t[2],u=t[6],c=t[10],d=t[14];return t[3]*(+n*o*u-r*h*u-n*a*c+i*h*c+r*a*d-i*o*d)+t[7]*(+e*o*d-e*h*c+n*s*c-r*s*d+r*h*l-n*o*l)+t[11]*(+e*h*u-e*a*d-n*s*u+i*s*d+n*a*l-i*h*l)+t[15]*(-r*a*l-e*o*u+e*a*c+r*s*u-i*s*c+i*o*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t},getPosition:function(){var t=new THREE.Vector3;return function(){THREE.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return t.set(e[12],e[13],e[14])}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,r=t.elements,n=r[0],s=r[4],a=r[8],o=r[12],h=r[1],l=r[5],u=r[9],c=r[13],d=r[2],p=r[6],f=r[10],m=r[14],g=r[3],E=r[7],v=r[11],r=r[15];if(i[0]=u*m*E-c*f*E+c*p*v-l*m*v-u*p*r+l*f*r,i[4]=o*f*E-a*m*E-o*p*v+s*m*v+a*p*r-s*f*r,i[8]=a*c*E-o*u*E+o*l*v-s*c*v-a*l*r+s*u*r,i[12]=o*u*p-a*c*p-o*l*f+s*c*f+a*l*m-s*u*m,i[1]=c*f*g-u*m*g-c*d*v+h*m*v+u*d*r-h*f*r,i[5]=a*m*g-o*f*g+o*d*v-n*m*v-a*d*r+n*f*r,i[9]=o*u*g-a*c*g-o*h*v+n*c*v+a*h*r-n*u*r,i[13]=a*c*d-o*u*d+o*h*f-n*c*f-a*h*m+n*u*m,i[2]=l*m*g-c*p*g+c*d*E-h*m*E-l*d*r+h*p*r,i[6]=o*p*g-s*m*g-o*d*E+n*m*E+s*d*r-n*p*r,i[10]=s*c*g-o*l*g+o*h*E-n*c*E-s*h*r+n*l*r,i[14]=o*l*d-s*c*d-o*h*p+n*c*p+s*h*m-n*l*m,i[3]=u*p*g-l*f*g-u*d*E+h*f*E+l*d*v-h*p*v,i[7]=s*f*g-a*p*g+a*d*E-n*f*E-s*d*v+n*p*v,i[11]=a*l*g-s*u*g-a*h*E+n*u*E+s*h*v-n*l*v,i[15]=s*u*d-a*l*d+a*h*p-n*u*p-s*h*f+n*l*f,i=n*i[0]+h*i[4]+d*i[8]+g*i[12],0==i){if(e)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return THREE.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/i),this},translate:function(){THREE.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){THREE.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){THREE.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){THREE.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){THREE.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(t){var e=this.elements,i=t.x,r=t.y;return t=t.z,e[0]*=i,e[4]*=r,e[8]*=t,e[1]*=i,e[5]*=r,e[9]*=t,e[2]*=i,e[6]*=r,e[10]*=t,e[3]*=i,e[7]*=r,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],Math.max(t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10])))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=1-i,s=t.x,a=t.y,o=t.z,h=n*s,l=n*a;return this.set(h*s+i,h*a-r*o,h*o+r*a,0,h*a+r*o,l*a+i,l*o-r*s,0,h*o-r*a,l*o+r*s,n*o*o+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t=new THREE.Vector3,e=new THREE.Matrix4;return function(i,r,n){var s=this.elements,a=t.set(s[0],s[1],s[2]).length(),o=t.set(s[4],s[5],s[6]).length(),h=t.set(s[8],s[9],s[10]).length();0>this.determinant()&&(a=-a),i.x=s[12],i.y=s[13],i.z=s[14],e.elements.set(this.elements),i=1/a;var s=1/o,l=1/h;return e.elements[0]*=i,e.elements[1]*=i,e.elements[2]*=i,e.elements[4]*=s,e.elements[5]*=s,e.elements[6]*=s,e.elements[8]*=l,e.elements[9]*=l,e.elements[10]*=l,r.setFromRotationMatrix(e),n.x=a,n.y=o,n.z=h,this}}(),makeFrustum:function(t,e,i,r,n,s){var a=this.elements;return a[0]=2*n/(e-t),a[4]=0,a[8]=(e+t)/(e-t),a[12]=0,a[1]=0,a[5]=2*n/(r-i),a[9]=(r+i)/(r-i),a[13]=0,a[2]=0,a[6]=0,a[10]=-(s+n)/(s-n),a[14]=-2*s*n/(s-n),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(t,e,i,r){t=i*Math.tan(THREE.Math.degToRad(.5*t));var n=-t;return this.makeFrustum(n*e,t*e,n,t,i,r)},makeOrthographic:function(t,e,i,r,n,s){var a=this.elements,o=e-t,h=i-r,l=s-n;return a[0]=2/o,a[4]=0,a[8]=0,a[12]=-((e+t)/o),a[1]=0,a[5]=2/h,a[9]=0,a[13]=-((i+r)/h),a[2]=0,a[6]=0,a[10]=-2/l,a[14]=-((s+n)/l),a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)}},THREE.Ray=function(t,e){this.origin=void 0!==t?t:new THREE.Vector3,this.direction=void 0!==e?e:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new THREE.Vector3).copy(this.direction).multiplyScalar(t).add(this.origin)},recast:function(){var t=new THREE.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var i=e||new THREE.Vector3;i.subVectors(t,this.origin);var r=i.dot(this.direction);return 0>r?i.copy(this.origin):i.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var t=new THREE.Vector3;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return 0>i?this.origin.distanceTo(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceTo(e))}}(),distanceSqToSegment:function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,s,a){t.copy(r).add(n).multiplyScalar(.5),e.copy(n).sub(r).normalize(),i.copy(this.origin).sub(t);var o,h=.5*r.distanceTo(n),l=-this.direction.dot(e),u=i.dot(this.direction),c=-i.dot(e),d=i.lengthSq(),p=Math.abs(1-l*l);return p>0?(r=l*c-u,n=l*u-c,o=h*p,r>=0?n>=-o?o>=n?(h=1/p,r*=h,n*=h,l=r*(r+l*n+2*u)+n*(l*r+n+2*c)+d):(n=h,r=Math.max(0,-(l*n+u)),l=-r*r+n*(n+2*c)+d):(n=-h,r=Math.max(0,-(l*n+u)),l=-r*r+n*(n+2*c)+d):-o>=n?(r=Math.max(0,-(-l*h+u)),n=r>0?-h:Math.min(Math.max(-h,-c),h),l=-r*r+n*(n+2*c)+d):o>=n?(r=0,n=Math.min(Math.max(-h,-c),h),l=n*(n+2*c)+d):(r=Math.max(0,-(l*h+u)),n=r>0?h:Math.min(Math.max(-h,-c),h),l=-r*r+n*(n+2*c)+d)):(n=l>0?-h:h,r=Math.max(0,-(l*n+u)),l=-r*r+n*(n+2*c)+d),s&&s.copy(this.direction).multiplyScalar(r).add(this.origin),a&&a.copy(e).multiplyScalar(n).add(t),l}}(),isIntersectionSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},intersectSphere:function(){var t=new THREE.Vector3;return function(e,i){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),n=t.dot(t)-r*r,s=e.radius*e.radius;return n>s?null:(s=Math.sqrt(s-n),n=r-s,r+=s,0>n&&0>r?null:0>n?this.at(r,i):this.at(n,i))}}(),isIntersectionPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e?!0:!1},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0==e?0==t.distanceToPoint(this.origin)?0:null:(t=-(this.origin.dot(t.normal)+t.constant)/e,t>=0?t:null)},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},isIntersectionBox:function(){var t=new THREE.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectBox:function(t,e){var i,r,n,s,a;r=1/this.direction.x,s=1/this.direction.y,a=1/this.direction.z;var o=this.origin;return r>=0?(i=(t.min.x-o.x)*r,r*=t.max.x-o.x):(i=(t.max.x-o.x)*r,r*=t.min.x-o.x),s>=0?(n=(t.min.y-o.y)*s,s*=t.max.y-o.y):(n=(t.max.y-o.y)*s,s*=t.min.y-o.y),i>s||n>r?null:((n>i||i!==i)&&(i=n),(r>s||r!==r)&&(r=s),a>=0?(n=(t.min.z-o.z)*a,a*=t.max.z-o.z):(n=(t.max.z-o.z)*a,a*=t.min.z-o.z),i>a||n>r?null:((n>i||i!==i)&&(i=n),(r>a||r!==r)&&(r=a),0>r?null:this.at(i>=0?i:r,e)))},intersectTriangle:function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Vector3;return function(n,s,a,o,h){if(e.subVectors(s,n),i.subVectors(a,n),r.crossVectors(e,i),s=this.direction.dot(r),s>0){if(o)return null;o=1}else{if(!(0>s))return null;o=-1,s=-s}return t.subVectors(this.origin,n),n=o*this.direction.dot(i.crossVectors(t,i)),0>n?null:(a=o*this.direction.dot(e.cross(t)),0>a||n+a>s?null:(n=-o*t.dot(r),0>n?null:this.at(n/s,h)))}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(t,e){this.center=void 0!==t?t:new THREE.Vector3,this.radius=void 0!==e?e:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new THREE.Box3;return function(e,i){var r=this.center;void 0!==i?r.copy(i):t.setFromPoints(e).center(r);for(var n=0,s=0,a=e.length;a>s;s++)n=Math.max(n,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(n),this}}(),copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},clampPoint:function(t,e){var i=this.center.distanceToSquared(t),r=e||new THREE.Vector3;return r.copy(t),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){return t=t||new THREE.Box3,t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(t,e,i,r,n,s){this.planes=[void 0!==t?t:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==s?s:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(t,e,i,r,n,s){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(n),a[5].copy(s),this},copy:function(t){for(var e=this.planes,i=0;6>i;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements;t=i[0];var r=i[1],n=i[2],s=i[3],a=i[4],o=i[5],h=i[6],l=i[7],u=i[8],c=i[9],d=i[10],p=i[11],f=i[12],m=i[13],g=i[14],i=i[15];return e[0].setComponents(s-t,l-a,p-u,i-f).normalize(),e[1].setComponents(s+t,l+a,p+u,i+f).normalize(),e[2].setComponents(s+r,l+o,p+c,i+m).normalize(),e[3].setComponents(s-r,l-o,p-c,i-m).normalize(),e[4].setComponents(s-n,l-h,p-d,i-g).normalize(),e[5].setComponents(s+n,l+h,p+d,i+g).normalize(),this},intersectsObject:function(){var t=new THREE.Sphere;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere),t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){var e=this.planes,i=t.center;t=-t.radius;for(var r=0;6>r;r++)if(e[r].distanceToPoint(i)<t)return!1;return!0},intersectsBox:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i){for(var r=this.planes,n=0;6>n;n++){var s=r[n];t.x=0<s.normal.x?i.min.x:i.max.x,e.x=0<s.normal.x?i.max.x:i.min.x,t.y=0<s.normal.y?i.min.y:i.max.y,e.y=0<s.normal.y?i.max.y:i.min.y,t.z=0<s.normal.z?i.min.z:i.max.z,e.z=0<s.normal.z?i.max.z:i.min.z;var a=s.distanceToPoint(t),s=s.distanceToPoint(e);if(0>a&&0>s)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;6>i;i++)if(0>e[i].distanceToPoint(t))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(t,e){this.normal=void 0!==t?t:new THREE.Vector3(1,0,0),this.constant=void 0!==e?e:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i,r,n){return r=t.subVectors(n,r).cross(e.subVectors(i,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,i),this}}(),copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var i=this.distanceToPoint(t);return(e||new THREE.Vector3).copy(this.normal).multiplyScalar(i)},isIntersectionLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&t>0||0>t&&e>0},intersectLine:function(){var t=new THREE.Vector3;return function(e,i){var r=i||new THREE.Vector3,n=e.delta(t),s=this.normal.dot(n);return 0!=s?(s=-(e.start.dot(this.normal)+this.constant)/s,0>s||s>1?void 0:r.copy(n).multiplyScalar(s).add(e.start)):0==this.distanceToPoint(e.start)?r.copy(e.start):void 0}}(),coplanarPoint:function(t){return(t||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Matrix3;return function(r,n){var s=n||i.getNormalMatrix(r),s=t.copy(this.normal).applyMatrix3(s),a=this.coplanarPoint(e);return a.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(s,a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=Array(36),r=0;return function(){for(var n=0;36>n;n++)8==n||13==n||18==n||23==n?i[n]="-":14==n?i[n]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,i[n]=e[19==n?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return e>t?e:t>i?i:t},clampBottom:function(t,e){return e>t?e:t},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},smoothstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*(3-2*t))},smootherstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return Math.floor(this.randFloat(t,e))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}},THREE.Spline=function(t){function e(t,e,i,r,n,s,a){return t=.5*(i-t),r=.5*(r-e),(2*(e-i)+t+r)*a+(-3*(e-i)-2*t-r)*s+t*n+e}this.points=t;var i,r,n,s,a,o,h,l,u,c=[],d={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return i=(this.points.length-1)*t,r=Math.floor(i),n=i-r,c[0]=0===r?r:r-1,c[1]=r,c[2]=r>this.points.length-2?this.points.length-1:r+1,c[3]=r>this.points.length-3?this.points.length-1:r+2,o=this.points[c[0]],h=this.points[c[1]],l=this.points[c[2]],u=this.points[c[3]],s=n*n,a=n*s,d.x=e(o.x,h.x,l.x,u.x,n,s,a),d.y=e(o.y,h.y,l.y,u.y,n,s,a),d.z=e(o.z,h.z,l.z,u.z,n,s,a),d},this.getControlPointsArray=function(){var t,e,i=this.points.length,r=[];for(t=0;i>t;t++)e=this.points[t],r[t]=[e.x,e.y,e.z];return r},this.getLength=function(t){var e,i,r,n=e=e=0,s=new THREE.Vector3,a=new THREE.Vector3,o=[],h=0;for(o[0]=0,t||(t=100),i=this.points.length*t,s.copy(this.points[0]),t=1;i>t;t++)e=t/i,r=this.getPoint(e),a.copy(r),h+=a.distanceTo(s),s.copy(r),e*=this.points.length-1,e=Math.floor(e),e!=n&&(o[e]=h,n=e);return o[o.length]=h,{chunks:o,total:h}},this.reparametrizeByArcLength=function(t){var e,i,r,n,s,a,o=[],h=new THREE.Vector3,l=this.getLength();for(o.push(h.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(i=l.chunks[e]-l.chunks[e-1],a=Math.ceil(t*i/l.total),n=(e-1)/(this.points.length-1),s=e/(this.points.length-1),i=1;a-1>i;i++)r=n+1/a*i*(s-n),r=this.getPoint(r),o.push(h.copy(r).clone());o.push(h.copy(this.points[e]).clone())}this.points=o}},THREE.Triangle=function(t,e,i){this.a=void 0!==t?t:new THREE.Vector3,this.b=void 0!==e?e:new THREE.Vector3,this.c=void 0!==i?i:new THREE.Vector3},THREE.Triangle.normal=function(){var t=new THREE.Vector3;return function(e,i,r,n){return n=n||new THREE.Vector3,n.subVectors(r,i),t.subVectors(e,i),n.cross(t),e=n.lengthSq(),e>0?n.multiplyScalar(1/Math.sqrt(e)):n.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,s,a,o){t.subVectors(a,n),e.subVectors(s,n),i.subVectors(r,n),r=t.dot(t),n=t.dot(e),s=t.dot(i);var h=e.dot(e);a=e.dot(i);var l=r*h-n*n;return o=o||new THREE.Vector3,0==l?o.set(-2,-1,-1):(l=1/l,h=(h*s-n*a)*l,r=(r*a-n*s)*l,o.set(1-h-r,r,h))}}(),THREE.Triangle.containsPoint=function(){var t=new THREE.Vector3;return function(e,i,r,n){return e=THREE.Triangle.barycoordFromPoint(e,i,r,n,t),0<=e.x&&0<=e.y&&1>=e.x+e.y}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){return(t||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return THREE.Triangle.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return THREE.Triangle.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return THREE.Triangle.containsPoint(t,this.a,this.b,this.c)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Clock=function(t){this.autoStart=void 0!==t?t:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),t=.001*(e-this.oldTime);this.oldTime=e,this.elapsedTime+=t}return t}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(t){t.addEventListener=THREE.EventDispatcher.prototype.addEventListener,t.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,t.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,t.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)?!0:!1},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners[t];if(void 0!==i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=[],r=e.length,n=0;r>n;n++)i[n]=e[n];for(n=0;r>n;n++)i[n].call(this,t)}}}},function(t){t.Raycaster=function(e,i,r,n){this.ray=new t.Ray(e,i),this.near=r||0,this.far=n||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var e=function(t,e){return t.distance-e.distance},i=function(t,e,r,n){if(t.raycast(e,r),!0===n){t=t.children,n=0;for(var s=t.length;s>n;n++)i(t[n],e,r,!0)}};t.Raycaster.prototype={constructor:t.Raycaster,precision:1e-4,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(e,i){i instanceof t.PerspectiveCamera?(this.ray.origin.copy(i.position),this.ray.direction.set(e.x,e.y,.5).unproject(i).sub(i.position).normalize()):i instanceof t.OrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld)):t.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,r){var n=[];return i(t,this,n,r),n.sort(e),n},intersectObjects:function(r,n){var s=[];if(!1==r instanceof Array)return t.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),s;for(var a=0,o=r.length;o>a;a++)i(r[a],this,s,n);return s.sort(e),s}}}(THREE),THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var t=new THREE.Vector3,e=new THREE.Euler,i=new THREE.Quaternion,r=new THREE.Vector3(1,1,1);e.onChange(function(){i.setFromEuler(e,!1)}),i.onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:r}}),this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return THREE.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(t){THREE.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=t},get useQuaternion(){THREE.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(t){THREE.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new THREE.Quaternion;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new THREE.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new THREE.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new THREE.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new THREE.Vector3;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translate:function(t,e){return THREE.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},translateX:function(){var t=new THREE.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new THREE.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new THREE.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new THREE.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new THREE.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(THREE.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t instanceof THREE.Object3D?(void 0!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):THREE.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)
},remove:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);e=this.children.indexOf(t),-1!==e&&(t.parent=void 0,t.dispatchEvent({type:"removed"}),this.children.splice(e,1))},getChildByName:function(t){return THREE.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}},getWorldPosition:function(t){return t=t||new THREE.Vector3,this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i){return i=i||new THREE.Quaternion,this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,i,e),i}}(),getWorldRotation:function(){var t=new THREE.Quaternion;return function(e){return e=e||new THREE.Euler,this.getWorldQuaternion(t),e.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new THREE.Vector3,e=new THREE.Quaternion;return function(i){return i=i||new THREE.Vector3,this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,i),i}}(),getWorldDirection:function(){var t=new THREE.Quaternion;return function(e){return e=e||new THREE.Vector3,this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=0,i=this.children.length;i>e;e++)this.children[e].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=0,i=this.children.length;i>e;e++)this.children[e].traverseVisible(t)}},traverseAncestors:function(t){this.parent&&(t(this.parent),this.parent.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===t)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=0,i=this.children.length;i>e;e++)this.children[e].updateMatrixWorld(t)},toJSON:function(){var t={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},e={},i={},r=function(e){if(void 0===t.materials&&(t.materials=[]),void 0===i[e.uuid]){var r=e.toJSON();delete r.metadata,i[e.uuid]=r,t.materials.push(r)}return e.uuid},n=function(i){var s={};if(s.uuid=i.uuid,s.type=i.type,""!==i.name&&(s.name=i.name),"{}"!==JSON.stringify(i.userData)&&(s.userData=i.userData),!0!==i.visible&&(s.visible=i.visible),i instanceof THREE.PerspectiveCamera)s.fov=i.fov,s.aspect=i.aspect,s.near=i.near,s.far=i.far;else if(i instanceof THREE.OrthographicCamera)s.left=i.left,s.right=i.right,s.top=i.top,s.bottom=i.bottom,s.near=i.near,s.far=i.far;else if(i instanceof THREE.AmbientLight)s.color=i.color.getHex();else if(i instanceof THREE.DirectionalLight)s.color=i.color.getHex(),s.intensity=i.intensity;else if(i instanceof THREE.PointLight)s.color=i.color.getHex(),s.intensity=i.intensity,s.distance=i.distance,s.decay=i.decay;else if(i instanceof THREE.SpotLight)s.color=i.color.getHex(),s.intensity=i.intensity,s.distance=i.distance,s.angle=i.angle,s.exponent=i.exponent,s.decay=i.decay;else if(i instanceof THREE.HemisphereLight)s.color=i.color.getHex(),s.groundColor=i.groundColor.getHex();else if(i instanceof THREE.Mesh||i instanceof THREE.Line||i instanceof THREE.PointCloud){var a=i.geometry;if(void 0===t.geometries&&(t.geometries=[]),void 0===e[a.uuid]){var o=a.toJSON();delete o.metadata,e[a.uuid]=o,t.geometries.push(o)}s.geometry=a.uuid,s.material=r(i.material),i instanceof THREE.Line&&(s.mode=i.mode)}else i instanceof THREE.Sprite&&(s.material=r(i.material));if(s.matrix=i.matrix.toArray(),0<i.children.length)for(s.children=[],a=0;a<i.children.length;a++)s.children.push(n(i.children[a]));return s};return t.object=n(this),t},clone:function(t,e){if(void 0===t&&(t=new THREE.Object3D),void 0===e&&(e=!0),t.name=this.name,t.up.copy(this.up),t.position.copy(this.position),t.quaternion.copy(this.quaternion),t.scale.copy(this.scale),t.rotationAutoUpdate=this.rotationAutoUpdate,t.matrix.copy(this.matrix),t.matrixWorld.copy(this.matrixWorld),t.matrixAutoUpdate=this.matrixAutoUpdate,t.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,t.visible=this.visible,t.castShadow=this.castShadow,t.receiveShadow=this.receiveShadow,t.frustumCulled=this.frustumCulled,t.userData=JSON.parse(JSON.stringify(this.userData)),!0===e)for(var i=0;i<this.children.length;i++)t.add(this.children[i].clone());return t}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Face3=function(t,e,i,r,n,s){this.a=t,this.b=e,this.c=i,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=n instanceof THREE.Color?n:new THREE.Color,this.vertexColors=n instanceof Array?n:[],this.vertexTangents=[],this.materialIndex=void 0!==s?s:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var t=new THREE.Face3(this.a,this.b,this.c);t.normal.copy(this.normal),t.color.copy(this.color),t.materialIndex=this.materialIndex;for(var e=0,i=this.vertexNormals.length;i>e;e++)t.vertexNormals[e]=this.vertexNormals[e].clone();for(e=0,i=this.vertexColors.length;i>e;e++)t.vertexColors[e]=this.vertexColors[e].clone();for(e=0,i=this.vertexTangents.length;i>e;e++)t.vertexTangents[e]=this.vertexTangents[e].clone();return t}},THREE.Face4=function(t,e,i,r,n,s,a){return THREE.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(t,e,i,n,s,a)},THREE.BufferAttribute=function(t,e){this.array=t,this.itemSize=e,this.needsUpdate=!1},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var r=0,n=this.itemSize;n>r;r++)this.array[t+r]=e.array[i+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},setX:function(t,e){return this.array[t*this.itemSize]=e,this},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=i,this.array[t+2]=r,this},setXYZW:function(t,e,i,r,n){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=n,this},clone:function(){return new THREE.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},THREE.Int8Attribute=function(t,e){return THREE.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint8Attribute=function(t,e){return THREE.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint8ClampedAttribute=function(t,e){return THREE.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Int16Attribute=function(t,e){return THREE.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint16Attribute=function(t,e){return THREE.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Int32Attribute=function(t,e){return THREE.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Uint32Attribute=function(t,e){return THREE.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Float32Attribute=function(t,e){return THREE.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.Float64Attribute=function(t,e){return THREE.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(t,e)},THREE.DynamicBufferAttribute=function(t,e){THREE.BufferAttribute.call(this,t,e),this.updateRange={offset:0,count:-1}},THREE.DynamicBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.DynamicBufferAttribute.prototype.constructor=THREE.DynamicBufferAttribute,THREE.DynamicBufferAttribute.prototype.clone=function(){return new THREE.DynamicBufferAttribute(new this.array.constructor(this.array),this.itemSize)},THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.offsets=this.drawcalls=[],this.boundingSphere=this.boundingBox=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(t,e,i){!1==e instanceof THREE.BufferAttribute?(THREE.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[t]={array:e,itemSize:i}):(this.attributes[t]=e,this.attributesKeys=Object.keys(this.attributes))},getAttribute:function(t){return this.attributes[t]},addDrawCall:function(t,e,i){this.drawcalls.push({start:t,count:e,index:void 0!==i?i:0})},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0),e=this.attributes.normal,void 0!==e&&((new THREE.Matrix3).getNormalMatrix(t).applyToVector3Array(e.array),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()},center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.applyMatrix((new THREE.Matrix4).setPosition(t)),t},fromGeometry:function(t,e){e=e||{vertexColors:THREE.NoColors};var i=t.vertices,r=t.faces,n=t.faceVertexUvs,s=e.vertexColors,a=0<n[0].length,o=3==r[0].vertexNormals.length,h=new Float32Array(9*r.length);this.addAttribute("position",new THREE.BufferAttribute(h,3));var l=new Float32Array(9*r.length);if(this.addAttribute("normal",new THREE.BufferAttribute(l,3)),s!==THREE.NoColors){var u=new Float32Array(9*r.length);this.addAttribute("color",new THREE.BufferAttribute(u,3))}if(!0===a){var c=new Float32Array(6*r.length);this.addAttribute("uv",new THREE.BufferAttribute(c,2))}for(var d=0,p=0,f=0;d<r.length;d++,p+=6,f+=9){var m=r[d],g=i[m.a],E=i[m.b],v=i[m.c];h[f]=g.x,h[f+1]=g.y,h[f+2]=g.z,h[f+3]=E.x,h[f+4]=E.y,h[f+5]=E.z,h[f+6]=v.x,h[f+7]=v.y,h[f+8]=v.z,!0===o?(g=m.vertexNormals[0],E=m.vertexNormals[1],v=m.vertexNormals[2],l[f]=g.x,l[f+1]=g.y,l[f+2]=g.z,l[f+3]=E.x,l[f+4]=E.y,l[f+5]=E.z,l[f+6]=v.x,l[f+7]=v.y,l[f+8]=v.z):(g=m.normal,l[f]=g.x,l[f+1]=g.y,l[f+2]=g.z,l[f+3]=g.x,l[f+4]=g.y,l[f+5]=g.z,l[f+6]=g.x,l[f+7]=g.y,l[f+8]=g.z),s===THREE.FaceColors?(m=m.color,u[f]=m.r,u[f+1]=m.g,u[f+2]=m.b,u[f+3]=m.r,u[f+4]=m.g,u[f+5]=m.b,u[f+6]=m.r,u[f+7]=m.g,u[f+8]=m.b):s===THREE.VertexColors&&(g=m.vertexColors[0],E=m.vertexColors[1],m=m.vertexColors[2],u[f]=g.r,u[f+1]=g.g,u[f+2]=g.b,u[f+3]=E.r,u[f+4]=E.g,u[f+5]=E.b,u[f+6]=m.r,u[f+7]=m.g,u[f+8]=m.b),!0===a&&(m=n[0][d][0],g=n[0][d][1],E=n[0][d][2],c[p]=m.x,c[p+1]=m.y,c[p+2]=g.x,c[p+3]=g.y,c[p+4]=E.x,c[p+5]=E.y)}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var t=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.attributes.position.array;if(e){var i=this.boundingBox;i.makeEmpty();for(var r=0,n=e.length;n>r;r+=3)t.set(e[r],e[r+1],e[r+2]),i.expandByPoint(t)}(void 0===e||0===e.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&THREE.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var t=new THREE.Box3,e=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var i=this.attributes.position.array;if(i){t.makeEmpty();for(var r=this.boundingSphere.center,n=0,s=i.length;s>n;n+=3)e.set(i[n],i[n+1],i[n+2]),t.expandByPoint(e);t.center(r);for(var a=0,n=0,s=i.length;s>n;n+=3)e.set(i[n],i[n+1],i[n+2]),a=Math.max(a,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&THREE.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.attributes;if(t.position){var e=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(e.length),3));else for(var i=t.normal.array,r=0,n=i.length;n>r;r++)i[r]=0;var s,a,o,i=t.normal.array,h=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;if(t.index)for(var p=t.index.array,f=0<this.offsets.length?this.offsets:[{start:0,count:p.length,index:0}],m=0,g=f.length;g>m;++m){n=f[m].start,s=f[m].count;for(var E=f[m].index,r=n,n=n+s;n>r;r+=3)s=3*(E+p[r]),a=3*(E+p[r+1]),o=3*(E+p[r+2]),h.fromArray(e,s),l.fromArray(e,a),u.fromArray(e,o),c.subVectors(u,l),d.subVectors(h,l),c.cross(d),i[s]+=c.x,i[s+1]+=c.y,i[s+2]+=c.z,i[a]+=c.x,i[a+1]+=c.y,i[a+2]+=c.z,i[o]+=c.x,i[o+1]+=c.y,i[o+2]+=c.z}else for(r=0,n=e.length;n>r;r+=9)h.fromArray(e,r),l.fromArray(e,r+3),u.fromArray(e,r+6),c.subVectors(u,l),d.subVectors(h,l),c.cross(d),i[r]=c.x,i[r+1]=c.y,i[r+2]=c.z,i[r+3]=c.x,i[r+4]=c.y,i[r+5]=c.z,i[r+6]=c.x,i[r+7]=c.y,i[r+8]=c.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},computeTangents:function(){function t(t,e,i){S.fromArray(r,3*t),M.fromArray(r,3*e),C.fromArray(r,3*i),A.fromArray(s,2*t),P.fromArray(s,2*e),L.fromArray(s,2*i),c=M.x-S.x,d=C.x-S.x,p=M.y-S.y,f=C.y-S.y,m=M.z-S.z,g=C.z-S.z,E=P.x-A.x,v=L.x-A.x,_=P.y-A.y,y=L.y-A.y,T=1/(E*y-v*_),O.set((y*c-_*d)*T,(y*p-_*f)*T,(y*m-_*g)*T),D.set((E*d-v*c)*T,(E*f-v*p)*T,(E*g-v*m)*T),h[t].add(O),h[e].add(O),h[i].add(O),l[t].add(D),l[e].add(D),l[i].add(D)}function e(t){z.fromArray(n,3*t),V.copy(z),F=h[t],B.copy(F),B.sub(z.multiplyScalar(z.dot(F))).normalize(),U.crossVectors(V,F),j=U.dot(l[t]),N=0>j?-1:1,o[4*t]=B.x,o[4*t+1]=B.y,o[4*t+2]=B.z,o[4*t+3]=N}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)THREE.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var i=this.attributes.index.array,r=this.attributes.position.array,n=this.attributes.normal.array,s=this.attributes.uv.array,a=r.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*a),4));for(var o=this.attributes.tangent.array,h=[],l=[],u=0;a>u;u++)h[u]=new THREE.Vector3,l[u]=new THREE.Vector3;var c,d,p,f,m,g,E,v,_,y,T,x,R,b,w,H,S=new THREE.Vector3,M=new THREE.Vector3,C=new THREE.Vector3,A=new THREE.Vector2,P=new THREE.Vector2,L=new THREE.Vector2,O=new THREE.Vector3,D=new THREE.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,i.length,0);var k=this.drawcalls,u=0;for(R=k.length;R>u;++u){x=k[u].start,b=k[u].count;var I=k[u].index,a=x;for(x+=b;x>a;a+=3)b=I+i[a],w=I+i[a+1],H=I+i[a+2],t(b,w,H)}var N,F,j,B=new THREE.Vector3,U=new THREE.Vector3,z=new THREE.Vector3,V=new THREE.Vector3,u=0;for(R=k.length;R>u;++u)for(x=k[u].start,b=k[u].count,I=k[u].index,a=x,x+=b;x>a;a+=3)b=I+i[a],w=I+i[a+1],H=I+i[a+2],e(b),e(w),e(H)}},computeOffsets:function(t){void 0===t&&(t=65535);for(var e=this.attributes.index.array,i=this.attributes.position.array,r=e.length/3,n=new Uint16Array(e.length),s=0,a=0,o=[{start:0,count:0,index:0}],h=o[0],l=0,u=0,c=new Int32Array(6),d=new Int32Array(i.length),p=new Int32Array(i.length),f=0;f<i.length;f++)d[f]=-1,p[f]=-1;for(i=0;r>i;i++){for(var m=u=0;3>m;m++)f=e[3*i+m],-1==d[f]?(c[2*m]=f,c[2*m+1]=-1,u++):d[f]<h.index?(c[2*m]=f,c[2*m+1]=-1,l++):(c[2*m]=f,c[2*m+1]=d[f]);if(a+u>h.index+t)for(h={start:s,count:0,index:a},o.push(h),u=0;6>u;u+=2)m=c[u+1],m>-1&&m<h.index&&(c[u+1]=-1);for(u=0;6>u;u+=2)f=c[u],m=c[u+1],-1===m&&(m=a++),d[f]=m,p[m]=f,n[s++]=m-h.index,h.count++}return this.reorderBuffers(n,p,a),this.drawcalls=this.offsets=o},merge:function(t,e){if(!1!=t instanceof THREE.BufferGeometry){void 0===e&&(e=0);var i,r=this.attributes;for(i in r)if(void 0!==t.attributes[i])for(var n=r[i].array,s=t.attributes[i],a=s.array,o=0,s=s.itemSize*e;o<a.length;o++,s++)n[s]=a[o];return this}THREE.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t,e,i,r=this.attributes.normal.array,n=0,s=r.length;s>n;n+=3)t=r[n],e=r[n+1],i=r[n+2],t=1/Math.sqrt(t*t+e*e+i*i),r[n]*=t,r[n+1]*=t,r[n+2]*=t},reorderBuffers:function(t,e,i){var r,n={};for(r in this.attributes)"index"!=r&&(n[r]=new this.attributes[r].array.constructor(this.attributes[r].itemSize*i));for(var s=0;i>s;s++){var a=e[s];for(r in this.attributes)if("index"!=r)for(var o=this.attributes[r].array,h=this.attributes[r].itemSize,l=n[r],u=0;h>u;u++)l[s*h+u]=o[a*h+u]}this.attributes.index.array=t;for(r in this.attributes)"index"!=r&&(this.attributes[r].array=n[r],this.attributes[r].numItems=this.attributes[r].itemSize*i)},toJSON:function(){var t,e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},i=this.attributes,r=this.offsets,n=this.boundingSphere;for(t in i){var s=i[t],a=Array.prototype.slice.call(s.array);e.data.attributes[t]={itemSize:s.itemSize,type:s.array.constructor.name,array:a}}return 0<r.length&&(e.data.offsets=JSON.parse(JSON.stringify(r))),null!==n&&(e.data.boundingSphere={center:n.center.toArray(),radius:n.radius}),e},clone:function(){var t,e=new THREE.BufferGeometry;for(t in this.attributes)e.addAttribute(t,this.attributes[t].clone());t=0;for(var i=this.offsets.length;i>t;t++){var r=this.offsets[t];e.offsets.push({start:r.start,index:r.index,count:r.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.hasTangents=!1,this.dynamic=!0,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(t){for(var e=(new THREE.Matrix3).getNormalMatrix(t),i=0,r=this.vertices.length;r>i;i++)this.vertices[i].applyMatrix4(t);for(i=0,r=this.faces.length;r>i;i++){t=this.faces[i],t.normal.applyMatrix3(e).normalize();for(var n=0,s=t.vertexNormals.length;s>n;n++)t.vertexNormals[n].applyMatrix3(e).normalize()}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0},fromBufferGeometry:function(t){for(var e=this,i=t.attributes,r=i.position.array,n=void 0!==i.index?i.index.array:void 0,s=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,o=void 0!==i.uv?i.uv.array:void 0,h=[],l=[],u=i=0;i<r.length;i+=3,u+=2)e.vertices.push(new THREE.Vector3(r[i],r[i+1],r[i+2])),void 0!==s&&h.push(new THREE.Vector3(s[i],s[i+1],s[i+2])),void 0!==a&&e.colors.push(new THREE.Color(a[i],a[i+1],a[i+2])),void 0!==o&&l.push(new THREE.Vector2(o[u],o[u+1]));var c=function(t,i,r){var n=void 0!==s?[h[t].clone(),h[i].clone(),h[r].clone()]:[],u=void 0!==a?[e.colors[t].clone(),e.colors[i].clone(),e.colors[r].clone()]:[];e.faces.push(new THREE.Face3(t,i,r,n,u)),void 0!==o&&e.faceVertexUvs[0].push([l[t].clone(),l[i].clone(),l[r].clone()])};if(void 0!==n)if(r=t.drawcalls,0<r.length)for(i=0;i<r.length;i++)for(var u=r[i],d=u.start,p=u.count,f=u.index,u=d,d=d+p;d>u;u+=3)c(f+n[u],f+n[u+1],f+n[u+2]);else for(i=0;i<n.length;i+=3)c(n[i],n[i+1],n[i+2]);else for(i=0;i<r.length/3;i+=3)c(i,i+1,i+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.applyMatrix((new THREE.Matrix4).setPosition(t)),t},computeFaceNormals:function(){for(var t=new THREE.Vector3,e=new THREE.Vector3,i=0,r=this.faces.length;r>i;i++){var n=this.faces[i],s=this.vertices[n.a],a=this.vertices[n.b];t.subVectors(this.vertices[n.c],a),e.subVectors(s,a),t.cross(e),t.normalize(),n.normal.copy(t)}},computeVertexNormals:function(t){var e,i,r;for(r=Array(this.vertices.length),e=0,i=this.vertices.length;i>e;e++)r[e]=new THREE.Vector3;if(t){var n,s,a,o=new THREE.Vector3,h=new THREE.Vector3;for(t=0,e=this.faces.length;e>t;t++)i=this.faces[t],n=this.vertices[i.a],s=this.vertices[i.b],a=this.vertices[i.c],o.subVectors(a,s),h.subVectors(n,s),o.cross(h),r[i.a].add(o),r[i.b].add(o),r[i.c].add(o)}else for(t=0,e=this.faces.length;e>t;t++)i=this.faces[t],r[i.a].add(i.normal),r[i.b].add(i.normal),r[i.c].add(i.normal);for(e=0,i=this.vertices.length;i>e;e++)r[e].normalize();for(t=0,e=this.faces.length;e>t;t++)i=this.faces[t],i.vertexNormals[0]=r[i.a].clone(),i.vertexNormals[1]=r[i.b].clone(),i.vertexNormals[2]=r[i.c].clone()},computeMorphNormals:function(){var t,e,i,r,n;for(i=0,r=this.faces.length;r>i;i++)for(n=this.faces[i],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),t=0,e=n.vertexNormals.length;e>t;t++)n.__originalVertexNormals[t]?n.__originalVertexNormals[t].copy(n.vertexNormals[t]):n.__originalVertexNormals[t]=n.vertexNormals[t].clone();var s=new THREE.Geometry;for(s.faces=this.faces,t=0,e=this.morphTargets.length;e>t;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[],n=this.morphNormals[t].faceNormals;var a,o,h=this.morphNormals[t].vertexNormals;for(i=0,r=this.faces.length;r>i;i++)a=new THREE.Vector3,o={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},n.push(a),h.push(o)}for(h=this.morphNormals[t],s.vertices=this.morphTargets[t].vertices,s.computeFaceNormals(),s.computeVertexNormals(),i=0,r=this.faces.length;r>i;i++)n=this.faces[i],a=h.faceNormals[i],o=h.vertexNormals[i],a.copy(n.normal),o.a.copy(n.vertexNormals[0]),o.b.copy(n.vertexNormals[1]),o.c.copy(n.vertexNormals[2])}for(i=0,r=this.faces.length;r>i;i++)n=this.faces[i],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeTangents:function(){var t,e,i,r,n,s,a,o,h,l,u,c,d,p,f,m,g,E=[],v=[];i=new THREE.Vector3;var _=new THREE.Vector3,y=new THREE.Vector3,T=new THREE.Vector3,x=new THREE.Vector3;for(t=0,e=this.vertices.length;e>t;t++)E[t]=new THREE.Vector3,v[t]=new THREE.Vector3;for(t=0,e=this.faces.length;e>t;t++)n=this.faces[t],s=this.faceVertexUvs[0][t],r=n.a,g=n.b,n=n.c,a=this.vertices[r],o=this.vertices[g],h=this.vertices[n],l=s[0],u=s[1],c=s[2],s=o.x-a.x,d=h.x-a.x,p=o.y-a.y,f=h.y-a.y,o=o.z-a.z,a=h.z-a.z,h=u.x-l.x,m=c.x-l.x,u=u.y-l.y,l=c.y-l.y,c=1/(h*l-m*u),i.set((l*s-u*d)*c,(l*p-u*f)*c,(l*o-u*a)*c),_.set((h*d-m*s)*c,(h*f-m*p)*c,(h*a-m*o)*c),E[r].add(i),E[g].add(i),E[n].add(i),v[r].add(_),v[g].add(_),v[n].add(_);for(_=["a","b","c","d"],t=0,e=this.faces.length;e>t;t++)for(n=this.faces[t],i=0;i<Math.min(n.vertexNormals.length,3);i++)x.copy(n.vertexNormals[i]),r=n[_[i]],g=E[r],y.copy(g),y.sub(x.multiplyScalar(x.dot(g))).normalize(),T.crossVectors(n.vertexNormals[i],g),r=T.dot(v[r]),r=0>r?-1:1,n.vertexTangents[i]=new THREE.Vector4(y.x,y.y,y.z,r);this.hasTangents=!0},computeLineDistances:function(){for(var t=0,e=this.vertices,i=0,r=e.length;r>i;i++)i>0&&(t+=e[i].distanceTo(e[i-1])),this.lineDistances[i]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(!1==t instanceof THREE.Geometry)THREE.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);else{var r,n=this.vertices.length,s=this.vertices,a=t.vertices,o=this.faces,h=t.faces,l=this.faceVertexUvs[0];t=t.faceVertexUvs[0],void 0===i&&(i=0),void 0!==e&&(r=(new THREE.Matrix3).getNormalMatrix(e));for(var u=0,c=a.length;c>u;u++){var d=a[u].clone();void 0!==e&&d.applyMatrix4(e),s.push(d)}for(u=0,c=h.length;c>u;u++){var p,a=h[u],f=a.vertexNormals,m=a.vertexColors,d=new THREE.Face3(a.a+n,a.b+n,a.c+n);for(d.normal.copy(a.normal),void 0!==r&&d.normal.applyMatrix3(r).normalize(),e=0,s=f.length;s>e;e++)p=f[e].clone(),void 0!==r&&p.applyMatrix3(r).normalize(),d.vertexNormals.push(p);for(d.color.copy(a.color),e=0,s=m.length;s>e;e++)p=m[e],d.vertexColors.push(p.clone());d.materialIndex=a.materialIndex+i,o.push(d)}for(u=0,c=t.length;c>u;u++)if(i=t[u],r=[],void 0!==i){for(e=0,s=i.length;s>e;e++)r.push(i[e].clone());l.push(r)}}},mergeMesh:function(t){!1==t instanceof THREE.Mesh?THREE.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,i,r={},n=[],s=[],a=Math.pow(10,4);for(e=0,i=this.vertices.length;i>e;e++)t=this.vertices[e],t=Math.round(t.x*a)+"_"+Math.round(t.y*a)+"_"+Math.round(t.z*a),void 0===r[t]?(r[t]=e,n.push(this.vertices[e]),s[e]=n.length-1):s[e]=s[r[t]];for(r=[],e=0,i=this.faces.length;i>e;e++)for(a=this.faces[e],a.a=s[a.a],a.b=s[a.b],a.c=s[a.c],a=[a.a,a.b,a.c],t=0;3>t;t++)if(a[t]==a[(t+1)%3]){r.push(e);break}for(e=r.length-1;e>=0;e--)for(a=r[e],this.faces.splice(a,1),s=0,i=this.faceVertexUvs.length;i>s;s++)this.faceVertexUvs[s].splice(a,1);return e=this.vertices.length-n.length,this.vertices=n,e},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]?l[e]:(l[e]=h.length/3,h.push(t.x,t.y,t.z),l[e])}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]?c[e]:(c[e]=u.length,u.push(t.getHex()),c[e])}function r(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]?p[e]:(p[e]=d.length/2,d.push(t.x,t.y),p[e])}var n={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(n.name=this.name),void 0!==this.parameters){var s,a=this.parameters;for(s in a)void 0!==a[s]&&(n[s]=a[s]);return n}for(a=[],s=0;s<this.vertices.length;s++){var o=this.vertices[s];a.push(o.x,o.y,o.z)}var o=[],h=[],l={},u=[],c={},d=[],p={};for(s=0;s<this.faces.length;s++){var f=this.faces[s],m=void 0!==this.faceVertexUvs[0][s],g=0<f.normal.length(),E=0<f.vertexNormals.length,v=1!==f.color.r||1!==f.color.g||1!==f.color.b,_=0<f.vertexColors.length,y=0,y=t(y,0,0),y=t(y,1,!1),y=t(y,2,!1),y=t(y,3,m),y=t(y,4,g),y=t(y,5,E),y=t(y,6,v),y=t(y,7,_);o.push(y),o.push(f.a,f.b,f.c),m&&(m=this.faceVertexUvs[0][s],o.push(r(m[0]),r(m[1]),r(m[2]))),g&&o.push(e(f.normal)),E&&(g=f.vertexNormals,o.push(e(g[0]),e(g[1]),e(g[2]))),v&&o.push(i(f.color)),_&&(f=f.vertexColors,o.push(i(f[0]),i(f[1]),i(f[2])))}return n.data={},n.data.vertices=a,n.data.normals=h,0<u.length&&(n.data.colors=u),0<d.length&&(n.data.uvs=[d]),n.data.faces=o,n},clone:function(){for(var t=new THREE.Geometry,e=this.vertices,i=0,r=e.length;r>i;i++)t.vertices.push(e[i].clone());for(e=this.faces,i=0,r=e.length;r>i;i++)t.faces.push(e[i].clone());for(i=0,r=this.faceVertexUvs.length;r>i;i++){e=this.faceVertexUvs[i],void 0===t.faceVertexUvs[i]&&(t.faceVertexUvs[i]=[]);for(var n=0,s=e.length;s>n;n++){for(var a=e[n],o=[],h=0,l=a.length;l>h;h++)o.push(a[h].clone());t.faceVertexUvs[i].push(o)}}return t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Camera=function(){THREE.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.getWorldDirection=function(){var t=new THREE.Quaternion;return function(e){return e=e||new THREE.Vector3,this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),THREE.Camera.prototype.lookAt=function(){var t=new THREE.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),THREE.Camera.prototype.clone=function(t){return void 0===t&&(t=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,t),t.matrixWorldInverse.copy(this.matrixWorldInverse),t.projectionMatrix.copy(this.projectionMatrix),t},THREE.CubeCamera=function(t,e,i){THREE.Object3D.call(this),this.type="CubeCamera";var r=new THREE.PerspectiveCamera(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new THREE.Vector3(1,0,0)),this.add(r);var n=new THREE.PerspectiveCamera(90,1,t,e);n.up.set(0,-1,0),n.lookAt(new THREE.Vector3(-1,0,0)),this.add(n);var s=new THREE.PerspectiveCamera(90,1,t,e);s.up.set(0,0,1),s.lookAt(new THREE.Vector3(0,1,0)),this.add(s);var a=new THREE.PerspectiveCamera(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new THREE.Vector3(0,-1,0)),this.add(a);var o=new THREE.PerspectiveCamera(90,1,t,e);o.up.set(0,-1,0),o.lookAt(new THREE.Vector3(0,0,1)),this.add(o);var h=new THREE.PerspectiveCamera(90,1,t,e);h.up.set(0,-1,0),h.lookAt(new THREE.Vector3(0,0,-1)),this.add(h),this.renderTarget=new THREE.WebGLRenderTargetCube(i,i,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(t,e){var i=this.renderTarget,l=i.generateMipmaps;i.generateMipmaps=!1,i.activeCubeFace=0,t.render(e,r,i),i.activeCubeFace=1,t.render(e,n,i),i.activeCubeFace=2,t.render(e,s,i),i.activeCubeFace=3,t.render(e,a,i),i.activeCubeFace=4,t.render(e,o,i),i.generateMipmaps=l,i.activeCubeFace=5,t.render(e,h,i)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CubeCamera.prototype.constructor=THREE.CubeCamera,THREE.OrthographicCamera=function(t,e,i,r,n,s){THREE.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=void 0!==n?n:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(i-t,i+t,r+e,r-e,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var t=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,t),t.zoom=this.zoom,t.left=this.left,t.right=this.right,t.top=this.top,t.bottom=this.bottom,t.near=this.near,t.far=this.far,t.projectionMatrix.copy(this.projectionMatrix),t},THREE.PerspectiveCamera=function(t,e,i,r){THREE.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==t?t:50,this.aspect=void 0!==e?e:1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(t,e){void 0===e&&(e=24),this.fov=2*THREE.Math.radToDeg(Math.atan(e/(2*t))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(t,e,i,r,n,s){this.fullWidth=t,this.fullHeight=e,this.x=i,this.y=r,this.width=n,this.height=s,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var t=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));
if(this.fullWidth){var e=this.fullWidth/this.fullHeight,t=Math.tan(THREE.Math.degToRad(.5*t))*this.near,i=-t,r=e*i,e=Math.abs(e*t-r),i=Math.abs(t-i);this.projectionMatrix.makeFrustum(r+this.x*e/this.fullWidth,r+(this.x+this.width)*e/this.fullWidth,t-(this.y+this.height)*i/this.fullHeight,t-this.y*i/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(t,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var t=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,t),t.zoom=this.zoom,t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t.projectionMatrix.copy(this.projectionMatrix),t},THREE.Light=function(t){THREE.Object3D.call(this),this.type="Light",this.color=new THREE.Color(t)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.constructor=THREE.Light,THREE.Light.prototype.clone=function(t){return void 0===t&&(t=new THREE.Light),THREE.Object3D.prototype.clone.call(this,t),t.color.copy(this.color),t},THREE.AmbientLight=function(t){THREE.Light.call(this,t),this.type="AmbientLight"},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.AmbientLight.prototype.clone=function(){var t=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,t),t},THREE.AreaLight=function(t,e){THREE.Light.call(this,t),this.type="AreaLight",this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==e?e:1,this.height=this.width=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.AreaLight.prototype.constructor=THREE.AreaLight,THREE.DirectionalLight=function(t,e){THREE.Light.call(this,t),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==e?e:1,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraTop=this.shadowCameraRight=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.DirectionalLight.prototype.clone=function(){var t=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,t),t.target=this.target.clone(),t.intensity=this.intensity,t.castShadow=this.castShadow,t.onlyShadow=this.onlyShadow,t.shadowCameraNear=this.shadowCameraNear,t.shadowCameraFar=this.shadowCameraFar,t.shadowCameraLeft=this.shadowCameraLeft,t.shadowCameraRight=this.shadowCameraRight,t.shadowCameraTop=this.shadowCameraTop,t.shadowCameraBottom=this.shadowCameraBottom,t.shadowCameraVisible=this.shadowCameraVisible,t.shadowBias=this.shadowBias,t.shadowDarkness=this.shadowDarkness,t.shadowMapWidth=this.shadowMapWidth,t.shadowMapHeight=this.shadowMapHeight,t.shadowCascade=this.shadowCascade,t.shadowCascadeOffset.copy(this.shadowCascadeOffset),t.shadowCascadeCount=this.shadowCascadeCount,t.shadowCascadeBias=this.shadowCascadeBias.slice(0),t.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),t.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),t.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),t.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),t},THREE.HemisphereLight=function(t,e,i){THREE.Light.call(this,t),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new THREE.Color(e),this.intensity=void 0!==i?i:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight,THREE.HemisphereLight.prototype.clone=function(){var t=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,t),t.groundColor.copy(this.groundColor),t.intensity=this.intensity,t},THREE.PointLight=function(t,e,i,r){THREE.Light.call(this,t),this.type="PointLight",this.intensity=void 0!==e?e:1,this.distance=void 0!==i?i:0,this.decay=void 0!==r?r:1},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.PointLight.prototype.clone=function(){var t=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,t),t.intensity=this.intensity,t.distance=this.distance,t.decay=this.decay,t},THREE.SpotLight=function(t,e,i,r,n,s){THREE.Light.call(this,t),this.type="SpotLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==e?e:1,this.distance=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==n?n:10,this.decay=void 0!==s?s:1,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.constructor=THREE.SpotLight,THREE.SpotLight.prototype.clone=function(){var t=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,t),t.target=this.target.clone(),t.intensity=this.intensity,t.distance=this.distance,t.angle=this.angle,t.exponent=this.exponent,t.decay=this.decay,t.castShadow=this.castShadow,t.onlyShadow=this.onlyShadow,t.shadowCameraNear=this.shadowCameraNear,t.shadowCameraFar=this.shadowCameraFar,t.shadowCameraFov=this.shadowCameraFov,t.shadowCameraVisible=this.shadowCameraVisible,t.shadowBias=this.shadowBias,t.shadowDarkness=this.shadowDarkness,t.shadowMapWidth=this.shadowMapWidth,t.shadowMapHeight=this.shadowMapHeight,t},THREE.Cache={files:{},add:function(t,e){this.files[t]=e},get:function(t){return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},THREE.Loader=function(t){this.statusDomElement=(this.showStatus=t)?THREE.Loader.prototype.addStatusElement():null,this.imageLoader=new THREE.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var t=document.createElement("div");return t.style.position="absolute",t.style.right="0px",t.style.top="0px",t.style.fontSize="0.8em",t.style.textAlign="left",t.style.background="rgba(0,0,0,0.25)",t.style.color="#fff",t.style.width="120px",t.style.padding="0.5em 0.5em 0.5em 0.5em",t.style.zIndex=1e3,t.innerHTML="Loading ...",t},updateProgress:function(t){var e="Loaded ",e=t.total?e+((100*t.loaded/t.total).toFixed(0)+"%"):e+((t.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=e},extractUrlBase:function(t){return t=t.split("/"),1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(t,e){for(var i=[],r=0;r<t.length;++r)i[r]=this.createMaterial(t[r],e);return i},needsTangents:function(t){for(var e=0,i=t.length;i>e;e++)if(t[e]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(t,e){function i(t){return t=Math.log(t)/Math.LN2,Math.pow(2,Math.round(t))}function r(t,r,n,a,o,h,l){var u,c=e+n,d=THREE.Loader.Handlers.get(c);null!==d?u=d.load(c):(u=new THREE.Texture,d=s.imageLoader,d.crossOrigin=s.crossOrigin,d.load(c,function(t){if(!1===THREE.Math.isPowerOfTwo(t.width)||!1===THREE.Math.isPowerOfTwo(t.height)){var e=i(t.width),r=i(t.height),n=document.createElement("canvas");n.width=e,n.height=r,n.getContext("2d").drawImage(t,0,0,e,r),u.image=n}else u.image=t;u.needsUpdate=!0})),u.sourceFile=n,a&&(u.repeat.set(a[0],a[1]),1!==a[0]&&(u.wrapS=THREE.RepeatWrapping),1!==a[1]&&(u.wrapT=THREE.RepeatWrapping)),o&&u.offset.set(o[0],o[1]),h&&(n={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==n[h[0]]&&(u.wrapS=n[h[0]]),void 0!==n[h[1]]&&(u.wrapT=n[h[1]])),l&&(u.anisotropy=l),t[r]=u}function n(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]}var s=this,a="MeshLambertMaterial",o={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(t.shading){var h=t.shading.toLowerCase();"phong"===h?a="MeshPhongMaterial":"basic"===h&&(a="MeshBasicMaterial")}return void 0!==t.blending&&void 0!==THREE[t.blending]&&(o.blending=THREE[t.blending]),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.opacity&&1>t.opacity&&(o.transparent=!0),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.flipSided&&(o.side=THREE.BackSide),void 0!==t.doubleSided&&(o.side=THREE.DoubleSide),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.vertexColors&&("face"===t.vertexColors?o.vertexColors=THREE.FaceColors:t.vertexColors&&(o.vertexColors=THREE.VertexColors)),t.colorDiffuse?o.color=n(t.colorDiffuse):t.DbgColor&&(o.color=t.DbgColor),t.colorSpecular&&(o.specular=n(t.colorSpecular)),t.colorEmissive&&(o.emissive=n(t.colorEmissive)),void 0!==t.transparency&&(console.warn("THREE.Loader: transparency has been renamed to opacity"),t.opacity=t.transparency),void 0!==t.opacity&&(o.opacity=t.opacity),t.specularCoef&&(o.shininess=t.specularCoef),t.mapDiffuse&&e&&r(o,"map",t.mapDiffuse,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy),t.mapLight&&e&&r(o,"lightMap",t.mapLight,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy),t.mapBump&&e&&r(o,"bumpMap",t.mapBump,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy),t.mapNormal&&e&&r(o,"normalMap",t.mapNormal,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy),t.mapSpecular&&e&&r(o,"specularMap",t.mapSpecular,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy),t.mapAlpha&&e&&r(o,"alphaMap",t.mapAlpha,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy),t.mapBumpScale&&(o.bumpScale=t.mapBumpScale),t.mapNormalFactor&&(o.normalScale=new THREE.Vector2(t.mapNormalFactor,t.mapNormalFactor)),a=new THREE[a](o),void 0!==t.DbgName&&(a.name=t.DbgName),a}},THREE.Loader.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=0,i=this.handlers.length;i>e;e+=2){var r=this.handlers[e+1];if(this.handlers[e].test(t))return r}return null}},THREE.XHRLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(t,e,i,r){var n=this,s=THREE.Cache.get(t);void 0!==s?e&&e(s):(s=new XMLHttpRequest,s.open("GET",t,!0),s.addEventListener("load",function(){THREE.Cache.add(t,this.response),e&&e(this.response),n.manager.itemEnd(t)},!1),void 0!==i&&s.addEventListener("progress",function(t){i(t)},!1),void 0!==r&&s.addEventListener("error",function(t){r(t)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(s.responseType=this.responseType),s.send(null),n.manager.itemStart(t))},setResponseType:function(t){this.responseType=t},setCrossOrigin:function(t){this.crossOrigin=t}},THREE.ImageLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(t,e,i,r){var n=this,s=THREE.Cache.get(t);return void 0===s?(s=document.createElement("img"),s.addEventListener("load",function(){THREE.Cache.add(t,this),e&&e(this),n.manager.itemEnd(t)},!1),void 0!==i&&s.addEventListener("progress",function(t){i(t)},!1),void 0!==r&&s.addEventListener("error",function(t){r(t)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),s.src=t,n.manager.itemStart(t),s):void e(s)},setCrossOrigin:function(t){this.crossOrigin=t}},THREE.JSONLoader=function(t){THREE.Loader.call(this,t),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.constructor=THREE.JSONLoader,THREE.JSONLoader.prototype.load=function(t,e,i){i=i&&"string"==typeof i?i:this.extractUrlBase(t),this.onLoadStart(),this.loadAjaxJSON(this,t,e,i)},THREE.JSONLoader.prototype.loadAjaxJSON=function(t,e,i,r,n){var s=new XMLHttpRequest,a=0;s.onreadystatechange=function(){if(s.readyState===s.DONE)if(200===s.status||0===s.status){if(s.responseText){var o=JSON.parse(s.responseText),h=o.metadata;if(void 0!==h){if("object"===h.type)return void THREE.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===h.type)return void THREE.error("THREE.JSONLoader: "+e+" seems to be a Scene. Use THREE.SceneLoader instead.")}o=t.parse(o,r),i(o.geometry,o.materials)}else THREE.error("THREE.JSONLoader: "+e+" seems to be unreachable or the file is empty.");t.onLoadComplete()}else THREE.error("THREE.JSONLoader: Couldn't load "+e+" ("+s.status+")");else s.readyState===s.LOADING?n&&(0===a&&(a=s.getResponseHeader("Content-Length")),n({total:a,loaded:s.responseText.length})):s.readyState===s.HEADERS_RECEIVED&&void 0!==n&&(a=s.getResponseHeader("Content-Length"))},s.open("GET",e,!0),s.withCredentials=this.withCredentials,s.send(null)},THREE.JSONLoader.prototype.parse=function(t,e){var i=new THREE.Geometry,r=void 0!==t.scale?1/t.scale:1;return function(e){var r,n,s,a,o,h,l,u,c,d,p,f,m,g=t.faces;h=t.vertices;var E=t.normals,v=t.colors,_=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&_++;for(r=0;_>r;r++)i.faceVertexUvs[r]=[]}for(a=0,o=h.length;o>a;)r=new THREE.Vector3,r.x=h[a++]*e,r.y=h[a++]*e,r.z=h[a++]*e,i.vertices.push(r);for(a=0,o=g.length;o>a;)if(e=g[a++],c=1&e,s=2&e,r=8&e,l=16&e,d=32&e,h=64&e,e&=128,c){if(c=new THREE.Face3,c.a=g[a],c.b=g[a+1],c.c=g[a+3],p=new THREE.Face3,p.a=g[a+1],p.b=g[a+2],p.c=g[a+3],a+=4,s&&(s=g[a++],c.materialIndex=s,p.materialIndex=s),s=i.faces.length,r)for(r=0;_>r;r++)for(f=t.uvs[r],i.faceVertexUvs[r][s]=[],i.faceVertexUvs[r][s+1]=[],n=0;4>n;n++)u=g[a++],m=f[2*u],u=f[2*u+1],m=new THREE.Vector2(m,u),2!==n&&i.faceVertexUvs[r][s].push(m),0!==n&&i.faceVertexUvs[r][s+1].push(m);if(l&&(l=3*g[a++],c.normal.set(E[l++],E[l++],E[l]),p.normal.copy(c.normal)),d)for(r=0;4>r;r++)l=3*g[a++],d=new THREE.Vector3(E[l++],E[l++],E[l]),2!==r&&c.vertexNormals.push(d),0!==r&&p.vertexNormals.push(d);if(h&&(h=g[a++],h=v[h],c.color.setHex(h),p.color.setHex(h)),e)for(r=0;4>r;r++)h=g[a++],h=v[h],2!==r&&c.vertexColors.push(new THREE.Color(h)),0!==r&&p.vertexColors.push(new THREE.Color(h));i.faces.push(c),i.faces.push(p)}else{if(c=new THREE.Face3,c.a=g[a++],c.b=g[a++],c.c=g[a++],s&&(s=g[a++],c.materialIndex=s),s=i.faces.length,r)for(r=0;_>r;r++)for(f=t.uvs[r],i.faceVertexUvs[r][s]=[],n=0;3>n;n++)u=g[a++],m=f[2*u],u=f[2*u+1],m=new THREE.Vector2(m,u),i.faceVertexUvs[r][s].push(m);if(l&&(l=3*g[a++],c.normal.set(E[l++],E[l++],E[l])),d)for(r=0;3>r;r++)l=3*g[a++],d=new THREE.Vector3(E[l++],E[l++],E[l]),c.vertexNormals.push(d);if(h&&(h=g[a++],c.color.setHex(v[h])),e)for(r=0;3>r;r++)h=g[a++],c.vertexColors.push(new THREE.Color(v[h]));i.faces.push(c)}}(r),function(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var r=0,n=t.skinWeights.length;n>r;r+=e)i.skinWeights.push(new THREE.Vector4(t.skinWeights[r],e>1?t.skinWeights[r+1]:0,e>2?t.skinWeights[r+2]:0,e>3?t.skinWeights[r+3]:0));if(t.skinIndices)for(r=0,n=t.skinIndices.length;n>r;r+=e)i.skinIndices.push(new THREE.Vector4(t.skinIndices[r],e>1?t.skinIndices[r+1]:0,e>2?t.skinIndices[r+2]:0,e>3?t.skinIndices[r+3]:0));i.bones=t.bones,i.bones&&0<i.bones.length&&(i.skinWeights.length!==i.skinIndices.length||i.skinIndices.length!==i.vertices.length)&&THREE.warn("THREE.JSONLoader: When skinning, number of vertices ("+i.vertices.length+"), skinIndices ("+i.skinIndices.length+"), and skinWeights ("+i.skinWeights.length+") should match."),i.animation=t.animation,i.animations=t.animations}(),function(e){if(void 0!==t.morphTargets){var r,n,s,a,o,h;for(r=0,n=t.morphTargets.length;n>r;r++)for(i.morphTargets[r]={},i.morphTargets[r].name=t.morphTargets[r].name,i.morphTargets[r].vertices=[],o=i.morphTargets[r].vertices,h=t.morphTargets[r].vertices,s=0,a=h.length;a>s;s+=3){var l=new THREE.Vector3;l.x=h[s]*e,l.y=h[s+1]*e,l.z=h[s+2]*e,o.push(l)}}if(void 0!==t.morphColors)for(r=0,n=t.morphColors.length;n>r;r++)for(i.morphColors[r]={},i.morphColors[r].name=t.morphColors[r].name,i.morphColors[r].colors=[],a=i.morphColors[r].colors,o=t.morphColors[r].colors,e=0,s=o.length;s>e;e+=3)h=new THREE.Color(16755200),h.setRGB(o[e],o[e+1],o[e+2]),a.push(h)}(r),i.computeFaceNormals(),i.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:i}:(r=this.initMaterials(t.materials,e),this.needsTangents(r)&&i.computeTangents(),{geometry:i,materials:r})},THREE.LoadingManager=function(t,e,i){var r=this,n=0,s=0;this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(){s++},this.itemEnd=function(t){n++,void 0!==r.onProgress&&r.onProgress(t,n,s),n===s&&void 0!==r.onLoad&&r.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(t,e,i,r){var n=this,s=new THREE.XHRLoader(n.manager);s.setCrossOrigin(this.crossOrigin),s.load(t,function(t){e(n.parse(JSON.parse(t)))},i,r)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e,i=new THREE.BufferGeometry,r=t.data.attributes;for(e in r){var n=r[e],s=new self[n.type](n.array);i.addAttribute(e,new THREE.BufferAttribute(s,n.itemSize))}return r=t.data.offsets,void 0!==r&&(i.offsets=JSON.parse(JSON.stringify(r))),t=t.data.boundingSphere,void 0!==t&&(r=new THREE.Vector3,void 0!==t.center&&r.fromArray(t.center),i.boundingSphere=new THREE.Sphere(r,t.radius)),i}},THREE.MaterialLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(t,e,i,r){var n=this,s=new THREE.XHRLoader(n.manager);s.setCrossOrigin(this.crossOrigin),s.load(t,function(t){e(n.parse(JSON.parse(t)))},i,r)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e=new THREE[t.type];if(void 0!==t.color&&e.color.setHex(t.color),void 0!==t.emissive&&e.emissive.setHex(t.emissive),void 0!==t.specular&&e.specular.setHex(t.specular),void 0!==t.shininess&&(e.shininess=t.shininess),void 0!==t.uniforms&&(e.uniforms=t.uniforms),void 0!==t.vertexShader&&(e.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(e.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(e.vertexColors=t.vertexColors),void 0!==t.shading&&(e.shading=t.shading),void 0!==t.blending&&(e.blending=t.blending),void 0!==t.side&&(e.side=t.side),void 0!==t.opacity&&(e.opacity=t.opacity),void 0!==t.transparent&&(e.transparent=t.transparent),void 0!==t.wireframe&&(e.wireframe=t.wireframe),void 0!==t.size&&(e.size=t.size),void 0!==t.sizeAttenuation&&(e.sizeAttenuation=t.sizeAttenuation),void 0!==t.materials)for(var i=0,r=t.materials.length;r>i;i++)e.materials.push(this.parse(t.materials[i]));return e}},THREE.ObjectLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager,this.texturePath=""},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(t,e,i,r){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var n=this,s=new THREE.XHRLoader(n.manager);s.setCrossOrigin(this.crossOrigin),s.load(t,function(t){n.parse(JSON.parse(t),e)},i,r)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var i=this.parseGeometries(t.geometries),r=this.parseImages(t.images,function(){void 0!==e&&e(n)}),r=this.parseTextures(t.textures,r),r=this.parseMaterials(t.materials,r),n=this.parseObject(t.object,i,r);return void 0!==t.images&&0!==t.images.length||void 0===e||e(n),n},parseGeometries:function(t){var e={};if(void 0!==t)for(var i=new THREE.JSONLoader,r=new THREE.BufferGeometryLoader,n=0,s=t.length;s>n;n++){var a,o=t[n];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new THREE[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"CubeGeometry":a=new THREE.BoxGeometry(o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":a=new THREE.CircleGeometry(o.radius,o.segments);break;case"CylinderGeometry":a=new THREE.CylinderGeometry(o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded);break;case"SphereGeometry":a=new THREE.SphereGeometry(o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"IcosahedronGeometry":a=new THREE.IcosahedronGeometry(o.radius,o.detail);break;case"TorusGeometry":a=new THREE.TorusGeometry(o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":a=new THREE.TorusKnotGeometry(o.radius,o.tube,o.radialSegments,o.tubularSegments,o.p,o.q,o.heightScale);break;case"BufferGeometry":a=r.parse(o);break;case"Geometry":a=i.parse(o.data).geometry}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),e[o.uuid]=a}return e},parseMaterials:function(t,e){var i={};if(void 0!==t)for(var r=function(t){return void 0===e[t]&&THREE.warn("THREE.ObjectLoader: Undefined texture",t),e[t]},n=new THREE.MaterialLoader,s=0,a=t.length;a>s;s++){var o=t[s],h=n.parse(o);h.uuid=o.uuid,void 0!==o.name&&(h.name=o.name),void 0!==o.map&&(h.map=r(o.map)),void 0!==o.bumpMap&&(h.bumpMap=r(o.bumpMap),o.bumpScale&&(h.bumpScale=new THREE.Vector2(o.bumpScale,o.bumpScale))),void 0!==o.alphaMap&&(h.alphaMap=r(o.alphaMap)),void 0!==o.envMap&&(h.envMap=r(o.envMap)),void 0!==o.normalMap&&(h.normalMap=r(o.normalMap),o.normalScale&&(h.normalScale=new THREE.Vector2(o.normalScale,o.normalScale))),void 0!==o.lightMap&&(h.lightMap=r(o.lightMap)),void 0!==o.specularMap&&(h.specularMap=r(o.specularMap)),i[o.uuid]=h}return i},parseImages:function(t,e){var i=this,r={};if(void 0!==t&&0<t.length){var n=new THREE.LoadingManager(e),s=new THREE.ImageLoader(n);s.setCrossOrigin(this.crossOrigin);for(var n=function(t){return i.manager.itemStart(t),s.load(t,function(){i.manager.itemEnd(t)})},a=0,o=t.length;o>a;a++){var h=t[a],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:i.texturePath+h.url;r[h.uuid]=n(l)}}return r},parseTextures:function(t,e){var i={};if(void 0!==t)for(var r=0,n=t.length;n>r;r++){var s=t[r];void 0===s.image&&THREE.warn('THREE.ObjectLoader: No "image" speficied for',s.uuid),void 0===e[s.image]&&THREE.warn("THREE.ObjectLoader: Undefined image",s.image);var a=new THREE.Texture(e[s.image]);a.needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.repeat&&(a.repeat=new THREE.Vector2(s.repeat[0],s.repeat[1])),void 0!==s.minFilter&&(a.minFilter=THREE[s.minFilter]),void 0!==s.magFilter&&(a.magFilter=THREE[s.magFilter]),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),s.wrap instanceof Array&&(a.wrapS=THREE[s.wrap[0]],a.wrapT=THREE[s.wrap[1]]),i[s.uuid]=a}return i},parseObject:function(){var t=new THREE.Matrix4;return function(e,i,r){var n;n=function(t){return void 0===i[t]&&THREE.warn("THREE.ObjectLoader: Undefined geometry",t),i[t]};var s=function(t){return void 0===r[t]&&THREE.warn("THREE.ObjectLoader: Undefined material",t),r[t]};switch(e.type){case"Scene":n=new THREE.Scene;break;case"PerspectiveCamera":n=new THREE.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);break;case"OrthographicCamera":n=new THREE.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":n=new THREE.AmbientLight(e.color);break;case"DirectionalLight":n=new THREE.DirectionalLight(e.color,e.intensity);break;case"PointLight":n=new THREE.PointLight(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":n=new THREE.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent,e.decay);break;case"HemisphereLight":n=new THREE.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":n=new THREE.Mesh(n(e.geometry),s(e.material));break;case"Line":n=new THREE.Line(n(e.geometry),s(e.material),e.mode);break;case"PointCloud":n=new THREE.PointCloud(n(e.geometry),s(e.material));break;case"Sprite":n=new THREE.Sprite(s(e.material));break;case"Group":n=new THREE.Group;break;default:n=new THREE.Object3D}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.children)for(var a in e.children)n.add(this.parseObject(e.children[a],i,r));return n}}()},THREE.TextureLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(t,e,i,r){var n=new THREE.ImageLoader(this.manager);n.setCrossOrigin(this.crossOrigin),n.load(t,function(t){t=new THREE.Texture(t),t.needsUpdate=!0,void 0!==e&&e(t)},i,r)},setCrossOrigin:function(t){this.crossOrigin=t}},THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(){this._parser=null},THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(t,e,i,r){var n=this,s=new THREE.DataTexture,a=new THREE.XHRLoader;return a.setResponseType("arraybuffer"),a.load(t,function(t){(t=n._parser(t))&&(void 0!==t.image?s.image=t.image:void 0!==t.data&&(s.image.width=t.width,s.image.height=t.height,s.image.data=t.data),s.wrapS=void 0!==t.wrapS?t.wrapS:THREE.ClampToEdgeWrapping,s.wrapT=void 0!==t.wrapT?t.wrapT:THREE.ClampToEdgeWrapping,s.magFilter=void 0!==t.magFilter?t.magFilter:THREE.LinearFilter,s.minFilter=void 0!==t.minFilter?t.minFilter:THREE.LinearMipMapLinearFilter,s.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(s.format=t.format),void 0!==t.type&&(s.type=t.type),void 0!==t.mipmaps&&(s.mipmaps=t.mipmaps),1===t.mipmapCount&&(s.minFilter=THREE.LinearFilter),s.needsUpdate=!0,e&&e(s,t))},i,r),s}},THREE.CompressedTextureLoader=function(){this._parser=null},THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(t,e,i){var r=this,n=[],s=new THREE.CompressedTexture;s.image=n;var a=new THREE.XHRLoader;if(a.setResponseType("arraybuffer"),t instanceof Array){var o=0;i=function(i){a.load(t[i],function(t){t=r._parser(t,!0),n[i]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},o+=1,6===o&&(1==t.mipmapCount&&(s.minFilter=THREE.LinearFilter),s.format=t.format,s.needsUpdate=!0,e&&e(s))})};for(var h=0,l=t.length;l>h;++h)i(h)}else a.load(t,function(t){if(t=r._parser(t,!0),t.isCubemap)for(var i=t.mipmaps.length/t.mipmapCount,a=0;i>a;a++){n[a]={mipmaps:[]};for(var o=0;o<t.mipmapCount;o++)n[a].mipmaps.push(t.mipmaps[a*t.mipmapCount+o]),n[a].format=t.format,n[a].width=t.width,n[a].height=t.height}else s.image.width=t.width,s.image.height=t.height,s.mipmaps=t.mipmaps;1===t.mipmapCount&&(s.minFilter=THREE.LinearFilter),s.format=t.format,s.needsUpdate=!0,e&&e(s)});return s}},THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Material",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.colorWrite=this.depthWrite=this.depthTest=!0,this.polygonOffset=!1,this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this._needsUpdate=this.visible=!0},THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0===i)THREE.warn("THREE.Material: '"+e+"' parameter is undefined.");else if(e in this){var r=this[e];r instanceof THREE.Color?r.set(i):r instanceof THREE.Vector3&&i instanceof THREE.Vector3?r.copy(i):this[e]="overdraw"==e?Number(i):i}}},toJSON:function(){var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(t.name=this.name),this instanceof THREE.MeshBasicMaterial?(t.color=this.color.getHex(),this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshLambertMaterial?(t.color=this.color.getHex(),t.emissive=this.emissive.getHex(),this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),this.shading!==THREE.SmoothShading&&(t.shading=this.shading),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshPhongMaterial?(t.color=this.color.getHex(),t.emissive=this.emissive.getHex(),t.specular=this.specular.getHex(),t.shininess=this.shininess,this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),this.shading!==THREE.SmoothShading&&(t.shading=this.shading),this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshNormalMaterial?(this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.MeshDepthMaterial?(this.blending!==THREE.NormalBlending&&(t.blending=this.blending),this.side!==THREE.FrontSide&&(t.side=this.side)):this instanceof THREE.PointCloudMaterial?(t.size=this.size,t.sizeAttenuation=this.sizeAttenuation,t.color=this.color.getHex(),this.vertexColors!==THREE.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(t.blending=this.blending)):this instanceof THREE.ShaderMaterial?(t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader):this instanceof THREE.SpriteMaterial&&(t.color=this.color.getHex()),1>this.opacity&&(t.opacity=this.opacity),!1!==this.transparent&&(t.transparent=this.transparent),!1!==this.wireframe&&(t.wireframe=this.wireframe),t},clone:function(t){return void 0===t&&(t=new THREE.Material),t.name=this.name,t.side=this.side,t.opacity=this.opacity,t.transparent=this.transparent,t.blending=this.blending,t.blendSrc=this.blendSrc,t.blendDst=this.blendDst,t.blendEquation=this.blendEquation,t.blendSrcAlpha=this.blendSrcAlpha,t.blendDstAlpha=this.blendDstAlpha,t.blendEquationAlpha=this.blendEquationAlpha,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.polygonOffset=this.polygonOffset,t.polygonOffsetFactor=this.polygonOffsetFactor,t.polygonOffsetUnits=this.polygonOffsetUnits,t.alphaTest=this.alphaTest,t.overdraw=this.overdraw,t.visible=this.visible,t},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(t){THREE.Material.call(this),this.type="LineBasicMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(t)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.LineBasicMaterial.prototype.clone=function(){var t=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.linecap=this.linecap,t.linejoin=this.linejoin,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.LineDashedMaterial=function(t){THREE.Material.call(this),this.type="LineDashedMaterial",this.color=new THREE.Color(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(t)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial,THREE.LineDashedMaterial.prototype.clone=function(){var t=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.scale=this.scale,t.dashSize=this.dashSize,t.gapSize=this.gapSize,t.vertexColors=this.vertexColors,t.fog=this.fog,t
},THREE.MeshBasicMaterial=function(t){THREE.Material.call(this),this.type="MeshBasicMaterial",this.color=new THREE.Color(16777215),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphTargets=this.skinning=!1,this.setValues(t)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshBasicMaterial.prototype.clone=function(){var t=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.lightMap=this.lightMap,t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t},THREE.MeshLambertMaterial=function(t){THREE.Material.call(this),this.type="MeshLambertMaterial",this.color=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshLambertMaterial.prototype.clone=function(){var t=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.emissive.copy(this.emissive),t.wrapAround=this.wrapAround,t.wrapRGB.copy(this.wrapRGB),t.map=this.map,t.lightMap=this.lightMap,t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.MeshPhongMaterial=function(t){THREE.Material.call(this),this.type="MeshPhongMaterial",this.color=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.wrapAround=this.metal=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.bumpMap=this.lightMap=this.map=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.envMap=this.alphaMap=this.specularMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshPhongMaterial.prototype.clone=function(){var t=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.emissive.copy(this.emissive),t.specular.copy(this.specular),t.shininess=this.shininess,t.metal=this.metal,t.wrapAround=this.wrapAround,t.wrapRGB.copy(this.wrapRGB),t.map=this.map,t.lightMap=this.lightMap,t.bumpMap=this.bumpMap,t.bumpScale=this.bumpScale,t.normalMap=this.normalMap,t.normalScale.copy(this.normalScale),t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.MeshDepthMaterial=function(t){THREE.Material.call(this),this.type="MeshDepthMaterial",this.wireframe=this.morphTargets=!1,this.wireframeLinewidth=1,this.setValues(t)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshDepthMaterial.prototype.clone=function(){var t=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,t),t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t},THREE.MeshNormalMaterial=function(t){THREE.Material.call(this,t),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(t)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshNormalMaterial.prototype.clone=function(){var t=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,t),t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t},THREE.MeshFaceMaterial=function(t){this.uuid=THREE.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=t instanceof Array?t:[]},THREE.MeshFaceMaterial.prototype={constructor:THREE.MeshFaceMaterial,toJSON:function(){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},e=0,i=this.materials.length;i>e;e++)t.materials.push(this.materials[e].toJSON());return t},clone:function(){for(var t=new THREE.MeshFaceMaterial,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t}},THREE.PointCloudMaterial=function(t){THREE.Material.call(this),this.type="PointCloudMaterial",this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(t)},THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype),THREE.PointCloudMaterial.prototype.constructor=THREE.PointCloudMaterial,THREE.PointCloudMaterial.prototype.clone=function(){var t=new THREE.PointCloudMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.size=this.size,t.sizeAttenuation=this.sizeAttenuation,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.ParticleBasicMaterial=function(t){return THREE.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(t)},THREE.ParticleSystemMaterial=function(t){return THREE.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(t)},THREE.ShaderMaterial=function(t){THREE.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(t)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial,THREE.ShaderMaterial.prototype.clone=function(){var t=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,t),t.fragmentShader=this.fragmentShader,t.vertexShader=this.vertexShader,t.uniforms=THREE.UniformsUtils.clone(this.uniforms),t.attributes=this.attributes,t.defines=this.defines,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.fog=this.fog,t.lights=this.lights,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.RawShaderMaterial=function(t){THREE.ShaderMaterial.call(this,t),this.type="RawShaderMaterial"},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial,THREE.RawShaderMaterial.prototype.clone=function(){var t=new THREE.RawShaderMaterial;return THREE.ShaderMaterial.prototype.clone.call(this,t),t},THREE.SpriteMaterial=function(t){THREE.Material.call(this),this.type="SpriteMaterial",this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(t)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial,THREE.SpriteMaterial.prototype.clone=function(){var t=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.rotation=this.rotation,t.fog=this.fog,t},THREE.Texture=function(t,e,i,r,n,s,a,o,h){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++}),this.uuid=THREE.Math.generateUUID(),this.sourceFile=this.name="",this.image=void 0!==t?t:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:THREE.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n?n:THREE.LinearFilter,this.minFilter=void 0!==s?s:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==h?h:1,this.format=void 0!==a?a:THREE.RGBAFormat,this.type=void 0!==o?o:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=void 0,THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping,THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t},clone:function(t){return void 0===t&&(t=new THREE.Texture),t.image=this.image,t.mipmaps=this.mipmaps.slice(0),t.mapping=this.mapping,t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.magFilter=this.magFilter,t.minFilter=this.minFilter,t.anisotropy=this.anisotropy,t.format=this.format,t.type=this.type,t.offset.copy(this.offset),t.repeat.copy(this.repeat),t.generateMipmaps=this.generateMipmaps,t.premultiplyAlpha=this.premultiplyAlpha,t.flipY=this.flipY,t.unpackAlignment=this.unpackAlignment,t},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CubeTexture=function(t,e,i,r,n,s,a,o,h){e=void 0!==e?e:THREE.CubeReflectionMapping,THREE.Texture.call(this,t,e,i,r,n,s,a,o,h),this.images=t},THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CubeTexture.prototype.constructor=THREE.CubeTexture,THREE.CubeTexture.clone=function(t){return void 0===t&&(t=new THREE.CubeTexture),THREE.Texture.prototype.clone.call(this,t),t.images=this.images,t},THREE.CompressedTexture=function(t,e,i,r,n,s,a,o,h,l,u){THREE.Texture.call(this,null,s,a,o,h,l,r,n,u),this.image={width:e,height:i},this.mipmaps=t,this.generateMipmaps=this.flipY=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture,THREE.CompressedTexture.prototype.clone=function(){var t=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,t),t},THREE.DataTexture=function(t,e,i,r,n,s,a,o,h,l,u){THREE.Texture.call(this,null,s,a,o,h,l,r,n,u),this.image={data:t,width:e,height:i}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.constructor=THREE.DataTexture,THREE.DataTexture.prototype.clone=function(){var t=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,t),t},THREE.VideoTexture=function(t,e,i,r,n,s,a,o,h){THREE.Texture.call(this,t,e,i,r,n,s,a,o,h),this.generateMipmaps=!1;var l=this,u=function(){requestAnimationFrame(u),t.readyState===t.HAVE_ENOUGH_DATA&&(l.needsUpdate=!0)};u()},THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype),THREE.VideoTexture.prototype.constructor=THREE.VideoTexture,THREE.Group=function(){THREE.Object3D.call(this),this.type="Group"},THREE.Group.prototype=Object.create(THREE.Object3D.prototype),THREE.Group.prototype.constructor=THREE.Group,THREE.PointCloud=function(t,e){THREE.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.PointCloudMaterial({color:16777215*Math.random()})},THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud.prototype.constructor=THREE.PointCloud,THREE.PointCloud.prototype.raycast=function(){var t=new THREE.Matrix4,e=new THREE.Ray;return function(i,r){var n=this,s=n.geometry,a=i.params.PointCloud.threshold;if(t.getInverse(this.matrixWorld),e.copy(i.ray).applyMatrix4(t),null===s.boundingBox||!1!==e.isIntersectionBox(s.boundingBox)){var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=new THREE.Vector3,a=function(t,s){var a=e.distanceToPoint(t);if(o>a){var h=e.closestPointToPoint(t);h.applyMatrix4(n.matrixWorld);var l=i.ray.origin.distanceTo(h);r.push({distance:l,distanceToRay:a,point:h.clone(),index:s,face:null,object:n})}};if(s instanceof THREE.BufferGeometry){var l=s.attributes,u=l.position.array;if(void 0!==l.index){var l=l.index.array,c=s.offsets;0===c.length&&(c=[{start:0,count:l.length,index:0}]);for(var d=0,p=c.length;p>d;++d)for(var f=c[d].start,m=c[d].index,s=f,f=f+c[d].count;f>s;s++){var g=m+l[s];h.fromArray(u,3*g),a(h,g)}}else for(l=u.length/3,s=0;l>s;s++)h.set(u[3*s],u[3*s+1],u[3*s+2]),a(h,s)}else for(h=this.geometry.vertices,s=0;s<h.length;s++)a(h[s],s)}}}(),THREE.PointCloud.prototype.clone=function(t){return void 0===t&&(t=new THREE.PointCloud(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,t),t},THREE.ParticleSystem=function(t,e){return THREE.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new THREE.PointCloud(t,e)},THREE.Line=function(t,e,i){THREE.Object3D.call(this),this.type="Line",this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==i?i:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.constructor=THREE.Line,THREE.Line.prototype.raycast=function(){var t=new THREE.Matrix4,e=new THREE.Ray,i=new THREE.Sphere;return function(r,n){var s=r.linePrecision,s=s*s,a=this.geometry;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(this.matrixWorld),!1!==r.ray.isIntersectionSphere(i)){t.getInverse(this.matrixWorld),e.copy(r.ray).applyMatrix4(t);var o=new THREE.Vector3,h=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector3,c=this.mode===THREE.LineStrip?1:2;if(a instanceof THREE.BufferGeometry){var d=a.attributes;if(void 0!==d.index){var p=d.index.array,d=d.position.array,f=a.offsets;0===f.length&&(f=[{start:0,count:p.length,index:0}]);for(var m=0;m<f.length;m++)for(var g=f[m].start,E=f[m].count,v=f[m].index,a=g;g+E-1>a;a+=c){var _=v+p[a+1];o.fromArray(d,3*(v+p[a])),h.fromArray(d,3*_),_=e.distanceSqToSegment(o,h,u,l),_>s||(_=e.origin.distanceTo(u),_<r.near||_>r.far||n.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:a,offsetIndex:m,face:null,faceIndex:null,object:this}))}}else for(d=d.position.array,a=0;a<d.length/3-1;a+=c)o.fromArray(d,3*a),h.fromArray(d,3*a+3),_=e.distanceSqToSegment(o,h,u,l),_>s||(_=e.origin.distanceTo(u),_<r.near||_>r.far||n.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}else if(a instanceof THREE.Geometry)for(o=a.vertices,h=o.length,a=0;h-1>a;a+=c)_=e.distanceSqToSegment(o[a],o[a+1],u,l),_>s||(_=e.origin.distanceTo(u),_<r.near||_>r.far||n.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}}}(),THREE.Line.prototype.clone=function(t){return void 0===t&&(t=new THREE.Line(this.geometry,this.material,this.mode)),THREE.Object3D.prototype.clone.call(this,t),t},THREE.Mesh=function(t,e){THREE.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;e>t;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:(THREE.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.raycast=function(){var t=new THREE.Matrix4,e=new THREE.Ray,i=new THREE.Sphere,r=new THREE.Vector3,n=new THREE.Vector3,s=new THREE.Vector3;return function(a,o){var h=this.geometry;if(null===h.boundingSphere&&h.computeBoundingSphere(),i.copy(h.boundingSphere),i.applyMatrix4(this.matrixWorld),!1!==a.ray.isIntersectionSphere(i)&&(t.getInverse(this.matrixWorld),e.copy(a.ray).applyMatrix4(t),null===h.boundingBox||!1!==e.isIntersectionBox(h.boundingBox)))if(h instanceof THREE.BufferGeometry){var l=this.material;if(void 0!==l){var u,c,d=h.attributes,p=a.precision;if(void 0!==d.index){var f=d.index.array,m=d.position.array,g=h.offsets;0===g.length&&(g=[{start:0,count:f.length,index:0}]);for(var E=0,v=g.length;v>E;++E)for(var d=g[E].start,_=g[E].index,h=d,y=d+g[E].count;y>h;h+=3){d=_+f[h],u=_+f[h+1],c=_+f[h+2],r.fromArray(m,3*d),n.fromArray(m,3*u),s.fromArray(m,3*c);var T=l.side===THREE.BackSide?e.intersectTriangle(s,n,r,!0):e.intersectTriangle(r,n,s,l.side!==THREE.DoubleSide);if(null!==T){T.applyMatrix4(this.matrixWorld);var x=a.ray.origin.distanceTo(T);p>x||x<a.near||x>a.far||o.push({distance:x,point:T,face:new THREE.Face3(d,u,c,THREE.Triangle.normal(r,n,s)),faceIndex:null,object:this})}}}else for(m=d.position.array,f=h=0,y=m.length;y>h;h+=3,f+=9)d=h,u=h+1,c=h+2,r.fromArray(m,f),n.fromArray(m,f+3),s.fromArray(m,f+6),T=l.side===THREE.BackSide?e.intersectTriangle(s,n,r,!0):e.intersectTriangle(r,n,s,l.side!==THREE.DoubleSide),null!==T&&(T.applyMatrix4(this.matrixWorld),x=a.ray.origin.distanceTo(T),p>x||x<a.near||x>a.far||o.push({distance:x,point:T,face:new THREE.Face3(d,u,c,THREE.Triangle.normal(r,n,s)),faceIndex:null,object:this}))}}else if(h instanceof THREE.Geometry)for(f=this.material instanceof THREE.MeshFaceMaterial,m=!0===f?this.material.materials:null,p=a.precision,g=h.vertices,E=0,v=h.faces.length;v>E;E++)if(_=h.faces[E],l=!0===f?m[_.materialIndex]:this.material,void 0!==l){if(d=g[_.a],u=g[_.b],c=g[_.c],!0===l.morphTargets){T=h.morphTargets,x=this.morphTargetInfluences,r.set(0,0,0),n.set(0,0,0),s.set(0,0,0);for(var y=0,R=T.length;R>y;y++){var b=x[y];if(0!==b){var w=T[y].vertices;r.x+=(w[_.a].x-d.x)*b,r.y+=(w[_.a].y-d.y)*b,r.z+=(w[_.a].z-d.z)*b,n.x+=(w[_.b].x-u.x)*b,n.y+=(w[_.b].y-u.y)*b,n.z+=(w[_.b].z-u.z)*b,s.x+=(w[_.c].x-c.x)*b,s.y+=(w[_.c].y-c.y)*b,s.z+=(w[_.c].z-c.z)*b}}r.add(d),n.add(u),s.add(c),d=r,u=n,c=s}T=l.side===THREE.BackSide?e.intersectTriangle(c,u,d,!0):e.intersectTriangle(d,u,c,l.side!==THREE.DoubleSide),null!==T&&(T.applyMatrix4(this.matrixWorld),x=a.ray.origin.distanceTo(T),p>x||x<a.near||x>a.far||o.push({distance:x,point:T,face:_,faceIndex:E,object:this}))}}}(),THREE.Mesh.prototype.clone=function(t,e){return void 0===t&&(t=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,t,e),t},THREE.Bone=function(t){THREE.Object3D.call(this),this.type="Bone",this.skin=t},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.constructor=THREE.Bone,THREE.Skeleton=function(t,e,i){if(this.useVertexTexture=void 0!==i?i:!0,this.identityMatrix=new THREE.Matrix4,t=t||[],this.bones=t.slice(0),this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=t=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(THREE.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;t>e;e++)this.boneInverses.push(new THREE.Matrix4)},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var t=0,e=this.bones.length;e>t;t++){var i=new THREE.Matrix4;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},THREE.Skeleton.prototype.pose=function(){for(var t,e=0,i=this.bones.length;i>e;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,i=this.bones.length;i>e;e++)(t=this.bones[e])&&(t.parent?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},THREE.Skeleton.prototype.update=function(){var t=new THREE.Matrix4;return function(){for(var e=0,i=this.bones.length;i>e;e++)t.multiplyMatrices(this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix,this.boneInverses[e]),t.flattenToArrayOffset(this.boneMatrices,16*e);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh=function(t,e,i){if(THREE.Mesh.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4,t=[],this.geometry&&void 0!==this.geometry.bones){for(var r,n,s,a,o=0,h=this.geometry.bones.length;h>o;++o)r=this.geometry.bones[o],n=r.pos,s=r.rotq,a=r.scl,e=new THREE.Bone(this),t.push(e),e.name=r.name,e.position.set(n[0],n[1],n[2]),e.quaternion.set(s[0],s[1],s[2],s[3]),void 0!==a?e.scale.set(a[0],a[1],a[2]):e.scale.set(1,1,1);for(o=0,h=this.geometry.bones.length;h>o;++o)r=this.geometry.bones[o],-1!==r.parent?t[r.parent].add(t[o]):this.add(t[o])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(t,void 0,i))},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh,THREE.SkinnedMesh.prototype.bind=function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var t=0;t<this.geometry.skinIndices.length;t++){var e=this.geometry.skinWeights[t],i=1/e.lengthManhattan();1/0!==i?e.multiplyScalar(i):e.set(1)}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):THREE.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},THREE.SkinnedMesh.prototype.clone=function(t){return void 0===t&&(t=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,t),t},THREE.MorphAnimMesh=function(t,e){THREE.Mesh.call(this,t,e),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.currentKeyframe=this.lastKeyframe=this.time=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.constructor=THREE.MorphAnimMesh,THREE.MorphAnimMesh.prototype.setFrameRange=function(t,e){this.startKeyframe=t,this.endKeyframe=e,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var t=this.geometry;t.animations||(t.animations={});for(var e,i=t.animations,r=/([a-z]+)_?(\d+)/,n=0,s=t.morphTargets.length;s>n;n++){var a=t.morphTargets[n].name.match(r);if(a&&1<a.length){a=a[1],i[a]||(i[a]={start:1/0,end:-1/0});var o=i[a];n<o.start&&(o.start=n),n>o.end&&(o.end=n),e||(e=a)}}t.firstAnimation=e},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(t,e,i){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[t]={start:e,end:i}},THREE.MorphAnimMesh.prototype.playAnimation=function(t,e){var i=this.geometry.animations[t];i?(this.setFrameRange(i.start,i.end),this.duration=(i.end-i.start)/e*1e3,this.time=0):THREE.warn("THREE.MorphAnimMesh: animation["+t+"] undefined in .playAnimation()")},THREE.MorphAnimMesh.prototype.updateAnimation=function(t){var e=this.duration/this.length;this.time+=this.direction*t,this.mirroredLoop?(this.time>this.duration||0>this.time)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)):(this.time%=this.duration,0>this.time&&(this.time+=this.duration)),t=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/e),0,this.length-1),t!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[t]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=t),e=this.time%e/e,this.directionBackwards&&(e=1-e),this.morphTargetInfluences[this.currentKeyframe]=e,this.morphTargetInfluences[this.lastKeyframe]=1-e},THREE.MorphAnimMesh.prototype.interpolateTargets=function(t,e,i){for(var r=this.morphTargetInfluences,n=0,s=r.length;s>n;n++)r[n]=0;t>-1&&(r[t]=1-i),e>-1&&(r[e]=i)},THREE.MorphAnimMesh.prototype.clone=function(t){return void 0===t&&(t=new THREE.MorphAnimMesh(this.geometry,this.material)),t.duration=this.duration,t.mirroredLoop=this.mirroredLoop,t.time=this.time,t.lastKeyframe=this.lastKeyframe,t.currentKeyframe=this.currentKeyframe,t.direction=this.direction,t.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,t),t},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.constructor=THREE.LOD,THREE.LOD.prototype.addLevel=function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=0;i<this.objects.length&&!(e<this.objects[i].distance);i++);this.objects.splice(i,0,{distance:e,object:t}),this.add(t)},THREE.LOD.prototype.getObjectForDistance=function(t){for(var e=1,i=this.objects.length;i>e&&!(t<this.objects[e].distance);e++);return this.objects[e-1].object},THREE.LOD.prototype.raycast=function(){var t=new THREE.Vector3;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(t);this.getObjectForDistance(r).raycast(e,i)}}(),THREE.LOD.prototype.update=function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i){if(1<this.objects.length){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld),i=t.distanceTo(e),this.objects[0].object.visible=!0;for(var r=1,n=this.objects.length;n>r&&i>=this.objects[r].distance;r++)this.objects[r-1].object.visible=!1,this.objects[r].object.visible=!0;for(;n>r;r++)this.objects[r].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(t){void 0===t&&(t=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,t);for(var e=0,i=this.objects.length;i>e;e++){var r=this.objects[e].object.clone();r.visible=0===e,t.addLevel(r,this.objects[e].distance)}return t},THREE.Sprite=function(){var t=new Uint16Array([0,1,2,0,2,3]),e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),i=new Float32Array([0,0,1,0,1,1,0,1]),r=new THREE.BufferGeometry;return r.addAttribute("index",new THREE.BufferAttribute(t,1)),r.addAttribute("position",new THREE.BufferAttribute(e,3)),r.addAttribute("uv",new THREE.BufferAttribute(i,2)),function(t){THREE.Object3D.call(this),this.type="Sprite",this.geometry=r,this.material=void 0!==t?t:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.raycast=function(){var t=new THREE.Vector3;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.distanceToPoint(t);r>this.scale.x||i.push({distance:r,point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.clone=function(t){return void 0===t&&(t=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,t),t},THREE.Particle=THREE.Sprite,THREE.LensFlare=function(t,e,i,r,n){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,i,r,n)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.constructor=THREE.LensFlare,THREE.LensFlare.prototype.add=function(t,e,i,r,n,s){void 0===e&&(e=-1),void 0===i&&(i=0),void 0===s&&(s=1),void 0===n&&(n=new THREE.Color(16777215)),void 0===r&&(r=THREE.NormalBlending),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:t,size:e,distance:i,x:0,y:0,z:0,scale:1,rotation:1,opacity:s,color:n,blending:r})},THREE.LensFlare.prototype.updateLensFlares=function(){var t,e,i=this.lensFlares.length,r=2*-this.positionScreen.x,n=2*-this.positionScreen.y;for(t=0;i>t;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+r*e.distance,e.y=this.positionScreen.y+n*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)},THREE.Scene=function(){THREE.Object3D.call(this),this.type="Scene",this.overrideMaterial=this.fog=null,this.autoUpdate=!0},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.clone=function(t){return void 0===t&&(t=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,t),null!==this.fog&&(t.fog=this.fog.clone()),null!==this.overrideMaterial&&(t.overrideMaterial=this.overrideMaterial.clone()),t.autoUpdate=this.autoUpdate,t.matrixAutoUpdate=this.matrixAutoUpdate,t},THREE.Fog=function(t,e,i){this.name="",this.color=new THREE.Color(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(t,e){this.name="",this.color=new THREE.Color(t),this.density=void 0!==e?e:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.ShaderChunk={},THREE.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\nfloat square( in float a ) { return a*a; }\nvec2  square( in vec2 a )  { return vec2( a.x*a.x, a.y*a.y ); }\nvec3  square( in vec3 a )  { return vec3( a.x*a.x, a.y*a.y, a.z*a.z ); }\nvec4  square( in vec4 a )  { return vec4( a.x*a.x, a.y*a.y, a.z*a.z, a.w*a.w ); }\nfloat saturate( in float a ) { return clamp( a, 0.0, 1.0 ); }\nvec2  saturate( in vec2 a )  { return clamp( a, 0.0, 1.0 ); }\nvec3  saturate( in vec3 a )  { return clamp( a, 0.0, 1.0 ); }\nvec4  saturate( in vec4 a )  { return clamp( a, 0.0, 1.0 ); }\nfloat average( in float a ) { return a; }\nfloat average( in vec2 a )  { return ( a.x + a.y) * 0.5; }\nfloat average( in vec3 a )  { return ( a.x + a.y + a.z) / 3.0; }\nfloat average( in vec4 a )  { return ( a.x + a.y + a.z + a.w) * 0.25; }\nfloat whiteCompliment( in float a ) { return saturate( 1.0 - a ); }\nvec2  whiteCompliment( in vec2 a )  { return saturate( vec2(1.0) - a ); }\nvec3  whiteCompliment( in vec3 a )  { return saturate( vec3(1.0) - a ); }\nvec4  whiteCompliment( in vec4 a )  { return saturate( vec4(1.0) - a ); }\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n}\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal) {\n	float distance = dot( planeNormal, point-pointOnPlane );\n	return point - distance * planeNormal;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return pointOnLine + lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) );\n}\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n	if ( decayExponent > 0.0 ) {\n	  return pow( saturate( 1.0 - lightDistance / cutoffDistance ), decayExponent );\n	}\n	return 1.0;\n}\n\nvec3 inputToLinear( in vec3 a ) {\n#ifdef GAMMA_INPUT\n	return pow( a, vec3( float( GAMMA_FACTOR ) ) );\n#else\n	return a;\n#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n#ifdef GAMMA_OUTPUT\n	return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n#else\n	return a;\n#endif\n}\n",THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * attenuation;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * attenuation;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * attenuation * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * attenuation * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack += ambientLightColor;\n\n#endif\n",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n\n#endif\n",THREE.ShaderChunk.default_vertex="#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.lights_phong_fragment="#ifndef FLAT_SHADED\n\n	vec3 normal = normalize( vNormal );\n\n	#ifdef DOUBLE_SIDED\n\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n	#endif\n\n#else\n\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		totalDiffuseLight += pointLightColor[ i ] * pointDiffuseWeight * attenuation;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		totalSpecularLight += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * attenuation * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			totalDiffuseLight += spotLightColor[ i ] * spotDiffuseWeight * attenuation * spotEffect;\n\n			// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			totalSpecularLight += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * attenuation * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n		// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		totalDiffuseLight += directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		totalSpecularLight += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		totalDiffuseLight += hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		totalSpecularLight += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\n#ifdef METAL\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) * specular + totalSpecularLight + emissive;\n\n#else\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) + totalSpecularLight + emissive;\n\n#endif\n",THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n	// Per-Pixel Tangent Space Normal Mapping\n	// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	texelColor.xyz = inputToLinear( texelColor.xyz );\n\n	diffuseColor *= texelColor;\n\n#endif",THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	vColor.xyz = inputToLinear( color.xyz );\n\n#endif",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="\n	outgoingLight = linearToOutput( outgoingLight );\n",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// Transforming Normal Vectors with the Inverse Transformation\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	envColor.xyz = inputToLinear( envColor.xyz );\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		float fogFactor = exp2( - square( fogDensity ) * square( depth ) * LOG2 );\n		fogFactor = whiteCompliment( fogFactor );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	outgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n	// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n	// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n	// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif\n",THREE.ShaderChunk.defaultnormal_vertex="#ifdef USE_SKINNING\n\n	vec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n	vec3 objectNormal = morphedNormal;\n\n#else\n\n	vec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n	varying vec3 vNormal;\n\n#endif\n",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	outgoingLight *= diffuseColor.xyz * texture2D( lightMap, vUv2 ).xyz;\n\n#endif",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	diffuseColor.rgb *= vColor;\n\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) outgoingLight *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	// NOTE: I am unsure if this is correct in linear space.  -bhouston, Dec 29, 2014\n	shadowColor = inputToLinear( shadowColor );\n\n	outgoingLight = outgoingLight * shadowColor;\n\n#endif\n",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#elif defined( USE_MORPHTARGETS )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",THREE.UniformsUtils={merge:function(t){for(var e={},i=0;i<t.length;i++){var r,n=this.clone(t[i]);
for(r in n)e[r]=n[r]}return e},clone:function(t){var e,i={};for(e in t){i[e]={};for(var r in t[e]){var n=t[e][r];i[e][r]=n instanceof THREE.Color||n instanceof THREE.Vector2||n instanceof THREE.Vector3||n instanceof THREE.Vector4||n instanceof THREE.Matrix4||n instanceof THREE.Texture?n.clone():n instanceof Array?n.slice():n}}return i}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED\n		if ( gl_FrontFacing )\n			outgoingLight += diffuseColor.rgb * vLightFront + emissive;\n		else\n			outgoingLight += diffuseColor.rgb * vLightBack + emissive;\n	#else\n		outgoingLight += diffuseColor.rgb * vLightFront + emissive;\n	#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n	#else\n		gl_PointSize = size;\n	#endif\n	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphatest_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	float color = 1.0 - smoothstep( mNear, mFar, depth );\n	gl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\nsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bit_mask;\n	return res;\n}\nvoid main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT\n		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n	#else\n		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n	#endif\n}"].join("\n")}},THREE.WebGLRenderer=function(t){function e(t){var e=t.geometry;t=t.material;var i=e.vertices.length;if(t.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var r in t.attributes){var n=t.attributes[r];if(!n.__webglInitialized||n.createUniqueBuffers){n.__webglInitialized=!0;var s=1;"v2"===n.type?s=2:"v3"===n.type?s=3:"v4"===n.type?s=4:"c"===n.type&&(s=3),n.size=s,n.array=new Float32Array(i*s),n.buffer=X.createBuffer(),n.buffer.belongsToAttribute=r,n.needsUpdate=!0}e.__webglCustomAttributesList.push(n)}}}function i(t,e){return t.material instanceof THREE.MeshFaceMaterial?t.material.materials[e.materialIndex]:t.material}function r(t,e,i,r){i=i.attributes;var n=e.attributes;e=e.attributesKeys;for(var s=0,a=e.length;a>s;s++){var o=e[s],h=n[o];if(h>=0){var l=i[o];void 0!==l?(o=l.itemSize,X.bindBuffer(X.ARRAY_BUFFER,l.buffer),Ee.enableAttribute(h),X.vertexAttribPointer(h,o,X.FLOAT,!1,0,r*o*4)):void 0!==t.defaultAttributeValues&&(2===t.defaultAttributeValues[o].length?X.vertexAttrib2fv(h,t.defaultAttributeValues[o]):3===t.defaultAttributeValues[o].length&&X.vertexAttrib3fv(h,t.defaultAttributeValues[o]))}}Ee.disableUnusedAttributes()}function n(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function s(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function a(t,e){return e[0]-t[0]}function o(t){if(!1!==t.visible){if(!(t instanceof THREE.Scene||t instanceof THREE.Group)){void 0===t.__webglInit&&(t.__webglInit=!0,t._modelViewMatrix=new THREE.Matrix4,t._normalMatrix=new THREE.Matrix3,t.addEventListener("removed",Fe));var i=t.geometry;if(void 0!==i&&void 0===i.__webglInit)if(i.__webglInit=!0,i.addEventListener("dispose",je),i instanceof THREE.BufferGeometry)Y.info.memory.geometries++;else if(t instanceof THREE.Mesh)c(t,i);else if(t instanceof THREE.Line){if(void 0===i.__webglVertexBuffer){i.__webglVertexBuffer=X.createBuffer(),i.__webglColorBuffer=X.createBuffer(),i.__webglLineDistanceBuffer=X.createBuffer(),Y.info.memory.geometries++;var r=i.vertices.length;i.__vertexArray=new Float32Array(3*r),i.__colorArray=new Float32Array(3*r),i.__lineDistanceArray=new Float32Array(1*r),i.__webglLineCount=r,e(t),i.verticesNeedUpdate=!0,i.colorsNeedUpdate=!0,i.lineDistancesNeedUpdate=!0}}else t instanceof THREE.PointCloud&&void 0===i.__webglVertexBuffer&&(i.__webglVertexBuffer=X.createBuffer(),i.__webglColorBuffer=X.createBuffer(),Y.info.memory.geometries++,r=i.vertices.length,i.__vertexArray=new Float32Array(3*r),i.__colorArray=new Float32Array(3*r),i.__webglParticleCount=r,e(t),i.verticesNeedUpdate=!0,i.colorsNeedUpdate=!0);if(void 0===t.__webglActive)if(t.__webglActive=!0,t instanceof THREE.Mesh){if(i instanceof THREE.BufferGeometry)d(z,i,t);else if(i instanceof THREE.Geometry)for(var i=Ge[i.id],r=0,n=i.length;n>r;r++)d(z,i[r],t)}else t instanceof THREE.Line||t instanceof THREE.PointCloud?d(z,i,t):(t instanceof THREE.ImmediateRenderObject||t.immediateRenderCallback)&&V.push({id:null,object:t,opaque:null,transparent:null,z:0});if(t instanceof THREE.Light)U.push(t);else if(t instanceof THREE.Sprite)W.push(t);else if(t instanceof THREE.LensFlare)q.push(t);else if((i=z[t.id])&&(!1===t.frustumCulled||!0===le.intersectsObject(t)))for(r=0,n=i.length;n>r;r++){var s=i[r],a=s,h=a.object,l=a.buffer,u=h.geometry,h=h.material;h instanceof THREE.MeshFaceMaterial?(h=h.materials[u instanceof THREE.BufferGeometry?0:l.materialIndex],a.material=h,h.transparent?G.push(a):$.push(a)):h&&(a.material=h,h.transparent?G.push(a):$.push(a)),s.render=!0,!0===Y.sortObjects&&(ce.setFromMatrixPosition(t.matrixWorld),ce.applyProjection(ue),s.z=ce.z)}}for(r=0,n=t.children.length;n>r;r++)o(t.children[r])}}function h(t,e,i,r,n){for(var s,a=0,o=t.length;o>a;a++){s=t[a];var h=s.object,l=s.buffer;if(y(h,e),n)s=n;else{if(s=s.material,!s)continue;g(s)}Y.setMaterialFaces(s),l instanceof THREE.BufferGeometry?Y.renderBufferDirect(e,i,r,s,l,h):Y.renderBuffer(e,i,r,s,l,h)}}function l(t,e,i,r,n,s){for(var a,o=0,h=t.length;h>o;o++){a=t[o];var l=a.object;if(l.visible){if(s)a=s;else{if(a=a[e],!a)continue;g(a)}Y.renderImmediateObject(i,r,n,a,l)}}}function u(t){var e=t.object.material;e.transparent?(t.transparent=e,t.opaque=null):(t.opaque=e,t.transparent=null)}function c(t,e){var r=t.material,n=!1;if(void 0===Ge[e.id]||!0===e.groupsNeedUpdate){delete z[t.id];for(var s,a,o=Ge,h=e.id,r=r instanceof THREE.MeshFaceMaterial,l=ve.get("OES_element_index_uint")?4294967296:65535,n={},u=e.morphTargets.length,c=e.morphNormals.length,p={},f=[],m=0,g=e.faces.length;g>m;m++){s=e.faces[m];var E=r?s.materialIndex:0;E in n||(n[E]={hash:E,counter:0}),s=n[E].hash+"_"+n[E].counter,s in p||(a={id:We++,faces3:[],materialIndex:E,vertices:0,numMorphTargets:u,numMorphNormals:c},p[s]=a,f.push(a)),p[s].vertices+3>l&&(n[E].counter+=1,s=n[E].hash+"_"+n[E].counter,s in p||(a={id:We++,faces3:[],materialIndex:E,vertices:0,numMorphTargets:u,numMorphNormals:c},p[s]=a,f.push(a))),p[s].faces3.push(m),p[s].vertices+=3}o[h]=f,e.groupsNeedUpdate=!1}for(o=Ge[e.id],h=0,r=o.length;r>h;h++){if(l=o[h],void 0===l.__webglVertexBuffer){if(n=l,n.__webglVertexBuffer=X.createBuffer(),n.__webglNormalBuffer=X.createBuffer(),n.__webglTangentBuffer=X.createBuffer(),n.__webglColorBuffer=X.createBuffer(),n.__webglUVBuffer=X.createBuffer(),n.__webglUV2Buffer=X.createBuffer(),n.__webglSkinIndicesBuffer=X.createBuffer(),n.__webglSkinWeightsBuffer=X.createBuffer(),n.__webglFaceBuffer=X.createBuffer(),n.__webglLineBuffer=X.createBuffer(),c=n.numMorphTargets)for(n.__webglMorphTargetsBuffers=[],u=0;c>u;u++)n.__webglMorphTargetsBuffers.push(X.createBuffer());if(c=n.numMorphNormals)for(n.__webglMorphNormalsBuffers=[],u=0;c>u;u++)n.__webglMorphNormalsBuffers.push(X.createBuffer());if(Y.info.memory.geometries++,n=l,m=t,g=m.geometry,c=n.faces3,u=3*c.length,p=1*c.length,f=3*c.length,c=i(m,n),n.__vertexArray=new Float32Array(3*u),n.__normalArray=new Float32Array(3*u),n.__colorArray=new Float32Array(3*u),n.__uvArray=new Float32Array(2*u),1<g.faceVertexUvs.length&&(n.__uv2Array=new Float32Array(2*u)),g.hasTangents&&(n.__tangentArray=new Float32Array(4*u)),m.geometry.skinWeights.length&&m.geometry.skinIndices.length&&(n.__skinIndexArray=new Float32Array(4*u),n.__skinWeightArray=new Float32Array(4*u)),m=null!==ve.get("OES_element_index_uint")&&p>21845?Uint32Array:Uint16Array,n.__typeArray=m,n.__faceArray=new m(3*p),n.__lineArray=new m(2*f),g=n.numMorphTargets)for(n.__morphTargetsArrays=[],m=0;g>m;m++)n.__morphTargetsArrays.push(new Float32Array(3*u));if(g=n.numMorphNormals)for(n.__morphNormalsArrays=[],m=0;g>m;m++)n.__morphNormalsArrays.push(new Float32Array(3*u));if(n.__webglFaceCount=3*p,n.__webglLineCount=2*f,c.attributes)for(p in void 0===n.__webglCustomAttributesList&&(n.__webglCustomAttributesList=[]),p=void 0,c.attributes){var v,f=c.attributes[p],m={};for(v in f)m[v]=f[v];(!m.__webglInitialized||m.createUniqueBuffers)&&(m.__webglInitialized=!0,g=1,"v2"===m.type?g=2:"v3"===m.type?g=3:"v4"===m.type?g=4:"c"===m.type&&(g=3),m.size=g,m.array=new Float32Array(u*g),m.buffer=X.createBuffer(),m.buffer.belongsToAttribute=p,f.needsUpdate=!0,m.__original=f),n.__webglCustomAttributesList.push(m)}n.__inittedArrays=!0,e.verticesNeedUpdate=!0,e.morphTargetsNeedUpdate=!0,e.elementsNeedUpdate=!0,e.uvsNeedUpdate=!0,e.normalsNeedUpdate=!0,e.tangentsNeedUpdate=!0,n=e.colorsNeedUpdate=!0}else n=!1;(n||void 0===t.__webglActive)&&d(z,l,t)}t.__webglActive=!0}function d(t,e,i){var r=i.id;t[r]=t[r]||[],t[r].push({id:r,buffer:e,object:i,material:null,z:0})}function p(t){var e=t.geometry;if(e instanceof THREE.BufferGeometry)for(var r=e.attributes,n=e.attributesKeys,s=0,a=n.length;a>s;s++){var o=n[s],h=r[o],l="index"===o?X.ELEMENT_ARRAY_BUFFER:X.ARRAY_BUFFER;void 0===h.buffer?(h.buffer=X.createBuffer(),X.bindBuffer(l,h.buffer),X.bufferData(l,h.array,h instanceof THREE.DynamicBufferAttribute?X.DYNAMIC_DRAW:X.STATIC_DRAW),h.needsUpdate=!1):!0===h.needsUpdate&&(X.bindBuffer(l,h.buffer),void 0===h.updateRange||-1===h.updateRange.count?X.bufferSubData(l,0,h.array):0===h.updateRange.count?console.error("THREE.WebGLRenderer.updateObject: using updateRange for THREE.DynamicBufferAttribute and marked as needsUpdate but count is 0, ensure you are using set methods or updating manually."):(X.bufferSubData(l,h.updateRange.offset*h.array.BYTES_PER_ELEMENT,h.array.subarray(h.updateRange.offset,h.updateRange.offset+h.updateRange.count)),h.updateRange.count=0),h.needsUpdate=!1)}else if(t instanceof THREE.Mesh){!0===e.groupsNeedUpdate&&c(t,e);for(var u=Ge[e.id],s=0,d=u.length;d>s;s++){var p=u[s],g=i(t,p),E=g.attributes&&f(g);if(e.verticesNeedUpdate||e.morphTargetsNeedUpdate||e.elementsNeedUpdate||e.uvsNeedUpdate||e.normalsNeedUpdate||e.colorsNeedUpdate||e.tangentsNeedUpdate||E){var v=p,_=t,y=X.DYNAMIC_DRAW,T=!e.dynamic,x=g;if(v.__inittedArrays){var R=!1==x instanceof THREE.MeshPhongMaterial&&x.shading===THREE.FlatShading,b=void 0,w=void 0,H=void 0,S=void 0,M=void 0,C=void 0,A=void 0,P=void 0,L=void 0,O=void 0,D=void 0,k=void 0,I=void 0,N=void 0,F=void 0,j=void 0,B=void 0,U=void 0,z=void 0,V=void 0,$=void 0,G=void 0,W=void 0,q=void 0,Y=void 0,Q=void 0,K=void 0,Z=void 0,J=void 0,te=void 0,ee=void 0,ie=void 0,re=void 0,ne=void 0,se=void 0,ae=void 0,oe=void 0,he=void 0,le=void 0,ue=void 0,ce=0,de=0,pe=0,fe=0,me=0,ge=0,Ee=0,ve=0,_e=0,ye=0,Te=0,xe=0,Re=void 0,be=v.__vertexArray,we=v.__uvArray,He=v.__uv2Array,Se=v.__normalArray,Me=v.__tangentArray,Ce=v.__colorArray,Ae=v.__skinIndexArray,Pe=v.__skinWeightArray,Le=v.__morphTargetsArrays,Oe=v.__morphNormalsArrays,De=v.__webglCustomAttributesList,ke=void 0,Ie=v.__faceArray,Ne=v.__lineArray,Fe=_.geometry,je=Fe.elementsNeedUpdate,Be=Fe.uvsNeedUpdate,Ue=Fe.normalsNeedUpdate,ze=Fe.tangentsNeedUpdate,Ve=Fe.colorsNeedUpdate,$e=Fe.morphTargetsNeedUpdate,We=Fe.vertices,qe=v.faces3,Xe=Fe.faces,Ye=Fe.faceVertexUvs[0],Qe=Fe.faceVertexUvs[1],Ke=Fe.skinIndices,Ze=Fe.skinWeights,Je=Fe.morphTargets,ti=Fe.morphNormals;if(Fe.verticesNeedUpdate){for(b=0,w=qe.length;w>b;b++)S=Xe[qe[b]],k=We[S.a],I=We[S.b],N=We[S.c],be[de]=k.x,be[de+1]=k.y,be[de+2]=k.z,be[de+3]=I.x,be[de+4]=I.y,be[de+5]=I.z,be[de+6]=N.x,be[de+7]=N.y,be[de+8]=N.z,de+=9;X.bindBuffer(X.ARRAY_BUFFER,v.__webglVertexBuffer),X.bufferData(X.ARRAY_BUFFER,be,y)}if($e)for(se=0,ae=Je.length;ae>se;se++){for(b=Te=0,w=qe.length;w>b;b++)le=qe[b],S=Xe[le],k=Je[se].vertices[S.a],I=Je[se].vertices[S.b],N=Je[se].vertices[S.c],oe=Le[se],oe[Te]=k.x,oe[Te+1]=k.y,oe[Te+2]=k.z,oe[Te+3]=I.x,oe[Te+4]=I.y,oe[Te+5]=I.z,oe[Te+6]=N.x,oe[Te+7]=N.y,oe[Te+8]=N.z,x.morphNormals&&(R?V=z=U=ti[se].faceNormals[le]:(ue=ti[se].vertexNormals[le],U=ue.a,z=ue.b,V=ue.c),he=Oe[se],he[Te]=U.x,he[Te+1]=U.y,he[Te+2]=U.z,he[Te+3]=z.x,he[Te+4]=z.y,he[Te+5]=z.z,he[Te+6]=V.x,he[Te+7]=V.y,he[Te+8]=V.z),Te+=9;X.bindBuffer(X.ARRAY_BUFFER,v.__webglMorphTargetsBuffers[se]),X.bufferData(X.ARRAY_BUFFER,Le[se],y),x.morphNormals&&(X.bindBuffer(X.ARRAY_BUFFER,v.__webglMorphNormalsBuffers[se]),X.bufferData(X.ARRAY_BUFFER,Oe[se],y))}if(Ze.length){for(b=0,w=qe.length;w>b;b++)S=Xe[qe[b]],q=Ze[S.a],Y=Ze[S.b],Q=Ze[S.c],Pe[ye]=q.x,Pe[ye+1]=q.y,Pe[ye+2]=q.z,Pe[ye+3]=q.w,Pe[ye+4]=Y.x,Pe[ye+5]=Y.y,Pe[ye+6]=Y.z,Pe[ye+7]=Y.w,Pe[ye+8]=Q.x,Pe[ye+9]=Q.y,Pe[ye+10]=Q.z,Pe[ye+11]=Q.w,K=Ke[S.a],Z=Ke[S.b],J=Ke[S.c],Ae[ye]=K.x,Ae[ye+1]=K.y,Ae[ye+2]=K.z,Ae[ye+3]=K.w,Ae[ye+4]=Z.x,Ae[ye+5]=Z.y,Ae[ye+6]=Z.z,Ae[ye+7]=Z.w,Ae[ye+8]=J.x,Ae[ye+9]=J.y,Ae[ye+10]=J.z,Ae[ye+11]=J.w,ye+=12;ye>0&&(X.bindBuffer(X.ARRAY_BUFFER,v.__webglSkinIndicesBuffer),X.bufferData(X.ARRAY_BUFFER,Ae,y),X.bindBuffer(X.ARRAY_BUFFER,v.__webglSkinWeightsBuffer),X.bufferData(X.ARRAY_BUFFER,Pe,y))}if(Ve){for(b=0,w=qe.length;w>b;b++)S=Xe[qe[b]],A=S.vertexColors,P=S.color,3===A.length&&x.vertexColors===THREE.VertexColors?($=A[0],G=A[1],W=A[2]):W=G=$=P,Ce[_e]=$.r,Ce[_e+1]=$.g,Ce[_e+2]=$.b,Ce[_e+3]=G.r,Ce[_e+4]=G.g,Ce[_e+5]=G.b,Ce[_e+6]=W.r,Ce[_e+7]=W.g,Ce[_e+8]=W.b,_e+=9;_e>0&&(X.bindBuffer(X.ARRAY_BUFFER,v.__webglColorBuffer),X.bufferData(X.ARRAY_BUFFER,Ce,y))}if(ze&&Fe.hasTangents){for(b=0,w=qe.length;w>b;b++)S=Xe[qe[b]],L=S.vertexTangents,F=L[0],j=L[1],B=L[2],Me[Ee]=F.x,Me[Ee+1]=F.y,Me[Ee+2]=F.z,Me[Ee+3]=F.w,Me[Ee+4]=j.x,Me[Ee+5]=j.y,Me[Ee+6]=j.z,Me[Ee+7]=j.w,Me[Ee+8]=B.x,Me[Ee+9]=B.y,Me[Ee+10]=B.z,Me[Ee+11]=B.w,Ee+=12;X.bindBuffer(X.ARRAY_BUFFER,v.__webglTangentBuffer),X.bufferData(X.ARRAY_BUFFER,Me,y)}if(Ue){for(b=0,w=qe.length;w>b;b++)if(S=Xe[qe[b]],M=S.vertexNormals,C=S.normal,3===M.length&&!1===R)for(te=0;3>te;te++)ie=M[te],Se[ge]=ie.x,Se[ge+1]=ie.y,Se[ge+2]=ie.z,ge+=3;else for(te=0;3>te;te++)Se[ge]=C.x,Se[ge+1]=C.y,Se[ge+2]=C.z,ge+=3;X.bindBuffer(X.ARRAY_BUFFER,v.__webglNormalBuffer),X.bufferData(X.ARRAY_BUFFER,Se,y)}if(Be&&Ye){for(b=0,w=qe.length;w>b;b++)if(H=qe[b],O=Ye[H],void 0!==O)for(te=0;3>te;te++)re=O[te],we[pe]=re.x,we[pe+1]=re.y,pe+=2;pe>0&&(X.bindBuffer(X.ARRAY_BUFFER,v.__webglUVBuffer),X.bufferData(X.ARRAY_BUFFER,we,y))}if(Be&&Qe){for(b=0,w=qe.length;w>b;b++)if(H=qe[b],D=Qe[H],void 0!==D)for(te=0;3>te;te++)ne=D[te],He[fe]=ne.x,He[fe+1]=ne.y,fe+=2;fe>0&&(X.bindBuffer(X.ARRAY_BUFFER,v.__webglUV2Buffer),X.bufferData(X.ARRAY_BUFFER,He,y))}if(je){for(b=0,w=qe.length;w>b;b++)Ie[me]=ce,Ie[me+1]=ce+1,Ie[me+2]=ce+2,me+=3,Ne[ve]=ce,Ne[ve+1]=ce+1,Ne[ve+2]=ce,Ne[ve+3]=ce+2,Ne[ve+4]=ce+1,Ne[ve+5]=ce+2,ve+=6,ce+=3;X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,v.__webglFaceBuffer),X.bufferData(X.ELEMENT_ARRAY_BUFFER,Ie,y),X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,v.__webglLineBuffer),X.bufferData(X.ELEMENT_ARRAY_BUFFER,Ne,y)}if(De)for(te=0,ee=De.length;ee>te;te++)if(ke=De[te],ke.__original.needsUpdate){if(xe=0,1===ke.size){if(void 0===ke.boundTo||"vertices"===ke.boundTo)for(b=0,w=qe.length;w>b;b++)S=Xe[qe[b]],ke.array[xe]=ke.value[S.a],ke.array[xe+1]=ke.value[S.b],ke.array[xe+2]=ke.value[S.c],xe+=3;else if("faces"===ke.boundTo)for(b=0,w=qe.length;w>b;b++)Re=ke.value[qe[b]],ke.array[xe]=Re,ke.array[xe+1]=Re,ke.array[xe+2]=Re,xe+=3}else if(2===ke.size){if(void 0===ke.boundTo||"vertices"===ke.boundTo)for(b=0,w=qe.length;w>b;b++)S=Xe[qe[b]],k=ke.value[S.a],I=ke.value[S.b],N=ke.value[S.c],ke.array[xe]=k.x,ke.array[xe+1]=k.y,ke.array[xe+2]=I.x,ke.array[xe+3]=I.y,ke.array[xe+4]=N.x,ke.array[xe+5]=N.y,xe+=6;else if("faces"===ke.boundTo)for(b=0,w=qe.length;w>b;b++)N=I=k=Re=ke.value[qe[b]],ke.array[xe]=k.x,ke.array[xe+1]=k.y,ke.array[xe+2]=I.x,ke.array[xe+3]=I.y,ke.array[xe+4]=N.x,ke.array[xe+5]=N.y,xe+=6}else if(3===ke.size){var ei;if(ei="c"===ke.type?["r","g","b"]:["x","y","z"],void 0===ke.boundTo||"vertices"===ke.boundTo)for(b=0,w=qe.length;w>b;b++)S=Xe[qe[b]],k=ke.value[S.a],I=ke.value[S.b],N=ke.value[S.c],ke.array[xe]=k[ei[0]],ke.array[xe+1]=k[ei[1]],ke.array[xe+2]=k[ei[2]],ke.array[xe+3]=I[ei[0]],ke.array[xe+4]=I[ei[1]],ke.array[xe+5]=I[ei[2]],ke.array[xe+6]=N[ei[0]],ke.array[xe+7]=N[ei[1]],ke.array[xe+8]=N[ei[2]],xe+=9;else if("faces"===ke.boundTo)for(b=0,w=qe.length;w>b;b++)N=I=k=Re=ke.value[qe[b]],ke.array[xe]=k[ei[0]],ke.array[xe+1]=k[ei[1]],ke.array[xe+2]=k[ei[2]],ke.array[xe+3]=I[ei[0]],ke.array[xe+4]=I[ei[1]],ke.array[xe+5]=I[ei[2]],ke.array[xe+6]=N[ei[0]],ke.array[xe+7]=N[ei[1]],ke.array[xe+8]=N[ei[2]],xe+=9;else if("faceVertices"===ke.boundTo)for(b=0,w=qe.length;w>b;b++)Re=ke.value[qe[b]],k=Re[0],I=Re[1],N=Re[2],ke.array[xe]=k[ei[0]],ke.array[xe+1]=k[ei[1]],ke.array[xe+2]=k[ei[2]],ke.array[xe+3]=I[ei[0]],ke.array[xe+4]=I[ei[1]],ke.array[xe+5]=I[ei[2]],ke.array[xe+6]=N[ei[0]],ke.array[xe+7]=N[ei[1]],ke.array[xe+8]=N[ei[2]],xe+=9}else if(4===ke.size)if(void 0===ke.boundTo||"vertices"===ke.boundTo)for(b=0,w=qe.length;w>b;b++)S=Xe[qe[b]],k=ke.value[S.a],I=ke.value[S.b],N=ke.value[S.c],ke.array[xe]=k.x,ke.array[xe+1]=k.y,ke.array[xe+2]=k.z,ke.array[xe+3]=k.w,ke.array[xe+4]=I.x,ke.array[xe+5]=I.y,ke.array[xe+6]=I.z,ke.array[xe+7]=I.w,ke.array[xe+8]=N.x,ke.array[xe+9]=N.y,ke.array[xe+10]=N.z,ke.array[xe+11]=N.w,xe+=12;else if("faces"===ke.boundTo)for(b=0,w=qe.length;w>b;b++)N=I=k=Re=ke.value[qe[b]],ke.array[xe]=k.x,ke.array[xe+1]=k.y,ke.array[xe+2]=k.z,ke.array[xe+3]=k.w,ke.array[xe+4]=I.x,ke.array[xe+5]=I.y,ke.array[xe+6]=I.z,ke.array[xe+7]=I.w,ke.array[xe+8]=N.x,ke.array[xe+9]=N.y,ke.array[xe+10]=N.z,ke.array[xe+11]=N.w,xe+=12;
else if("faceVertices"===ke.boundTo)for(b=0,w=qe.length;w>b;b++)Re=ke.value[qe[b]],k=Re[0],I=Re[1],N=Re[2],ke.array[xe]=k.x,ke.array[xe+1]=k.y,ke.array[xe+2]=k.z,ke.array[xe+3]=k.w,ke.array[xe+4]=I.x,ke.array[xe+5]=I.y,ke.array[xe+6]=I.z,ke.array[xe+7]=I.w,ke.array[xe+8]=N.x,ke.array[xe+9]=N.y,ke.array[xe+10]=N.z,ke.array[xe+11]=N.w,xe+=12;X.bindBuffer(X.ARRAY_BUFFER,ke.buffer),X.bufferData(X.ARRAY_BUFFER,ke.array,y)}T&&(delete v.__inittedArrays,delete v.__colorArray,delete v.__normalArray,delete v.__tangentArray,delete v.__uvArray,delete v.__uv2Array,delete v.__faceArray,delete v.__vertexArray,delete v.__lineArray,delete v.__skinIndexArray,delete v.__skinWeightArray)}}}e.verticesNeedUpdate=!1,e.morphTargetsNeedUpdate=!1,e.elementsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.tangentsNeedUpdate=!1,g.attributes&&m(g)}else if(t instanceof THREE.Line){if(g=i(t,e),E=g.attributes&&f(g),e.verticesNeedUpdate||e.colorsNeedUpdate||e.lineDistancesNeedUpdate||E){var ii,ri,ni,si,ai,oi,hi,li,ui,ci,di,pi,fi=X.DYNAMIC_DRAW,mi=e.vertices,gi=e.colors,Ei=e.lineDistances,vi=mi.length,_i=gi.length,yi=Ei.length,Ti=e.__vertexArray,xi=e.__colorArray,Ri=e.__lineDistanceArray,bi=e.colorsNeedUpdate,wi=e.lineDistancesNeedUpdate,Hi=e.__webglCustomAttributesList;if(e.verticesNeedUpdate){for(ii=0;vi>ii;ii++)si=mi[ii],ai=3*ii,Ti[ai]=si.x,Ti[ai+1]=si.y,Ti[ai+2]=si.z;X.bindBuffer(X.ARRAY_BUFFER,e.__webglVertexBuffer),X.bufferData(X.ARRAY_BUFFER,Ti,fi)}if(bi){for(ri=0;_i>ri;ri++)oi=gi[ri],ai=3*ri,xi[ai]=oi.r,xi[ai+1]=oi.g,xi[ai+2]=oi.b;X.bindBuffer(X.ARRAY_BUFFER,e.__webglColorBuffer),X.bufferData(X.ARRAY_BUFFER,xi,fi)}if(wi){for(ni=0;yi>ni;ni++)Ri[ni]=Ei[ni];X.bindBuffer(X.ARRAY_BUFFER,e.__webglLineDistanceBuffer),X.bufferData(X.ARRAY_BUFFER,Ri,fi)}if(Hi)for(hi=0,li=Hi.length;li>hi;hi++)if(pi=Hi[hi],pi.needsUpdate&&(void 0===pi.boundTo||"vertices"===pi.boundTo)){if(ai=0,ci=pi.value.length,1===pi.size)for(ui=0;ci>ui;ui++)pi.array[ui]=pi.value[ui];else if(2===pi.size)for(ui=0;ci>ui;ui++)di=pi.value[ui],pi.array[ai]=di.x,pi.array[ai+1]=di.y,ai+=2;else if(3===pi.size)if("c"===pi.type)for(ui=0;ci>ui;ui++)di=pi.value[ui],pi.array[ai]=di.r,pi.array[ai+1]=di.g,pi.array[ai+2]=di.b,ai+=3;else for(ui=0;ci>ui;ui++)di=pi.value[ui],pi.array[ai]=di.x,pi.array[ai+1]=di.y,pi.array[ai+2]=di.z,ai+=3;else if(4===pi.size)for(ui=0;ci>ui;ui++)di=pi.value[ui],pi.array[ai]=di.x,pi.array[ai+1]=di.y,pi.array[ai+2]=di.z,pi.array[ai+3]=di.w,ai+=4;X.bindBuffer(X.ARRAY_BUFFER,pi.buffer),X.bufferData(X.ARRAY_BUFFER,pi.array,fi),pi.needsUpdate=!1}}e.verticesNeedUpdate=!1,e.colorsNeedUpdate=!1,e.lineDistancesNeedUpdate=!1,g.attributes&&m(g)}else if(t instanceof THREE.PointCloud){if(g=i(t,e),E=g.attributes&&f(g),e.verticesNeedUpdate||e.colorsNeedUpdate||E){var Si,Mi,Ci,Ai,Pi,Li,Oi,Di,ki,Ii,Ni,Fi=X.DYNAMIC_DRAW,ji=e.vertices,Bi=ji.length,Ui=e.colors,zi=Ui.length,Vi=e.__vertexArray,$i=e.__colorArray,Gi=e.colorsNeedUpdate,Wi=e.__webglCustomAttributesList;if(e.verticesNeedUpdate){for(Si=0;Bi>Si;Si++)Ci=ji[Si],Ai=3*Si,Vi[Ai]=Ci.x,Vi[Ai+1]=Ci.y,Vi[Ai+2]=Ci.z;X.bindBuffer(X.ARRAY_BUFFER,e.__webglVertexBuffer),X.bufferData(X.ARRAY_BUFFER,Vi,Fi)}if(Gi){for(Mi=0;zi>Mi;Mi++)Pi=Ui[Mi],Ai=3*Mi,$i[Ai]=Pi.r,$i[Ai+1]=Pi.g,$i[Ai+2]=Pi.b;X.bindBuffer(X.ARRAY_BUFFER,e.__webglColorBuffer),X.bufferData(X.ARRAY_BUFFER,$i,Fi)}if(Wi)for(Li=0,Oi=Wi.length;Oi>Li;Li++){if(Ni=Wi[Li],Ni.needsUpdate&&(void 0===Ni.boundTo||"vertices"===Ni.boundTo))if(ki=Ni.value.length,Ai=0,1===Ni.size)for(Di=0;ki>Di;Di++)Ni.array[Di]=Ni.value[Di];else if(2===Ni.size)for(Di=0;ki>Di;Di++)Ii=Ni.value[Di],Ni.array[Ai]=Ii.x,Ni.array[Ai+1]=Ii.y,Ai+=2;else if(3===Ni.size)if("c"===Ni.type)for(Di=0;ki>Di;Di++)Ii=Ni.value[Di],Ni.array[Ai]=Ii.r,Ni.array[Ai+1]=Ii.g,Ni.array[Ai+2]=Ii.b,Ai+=3;else for(Di=0;ki>Di;Di++)Ii=Ni.value[Di],Ni.array[Ai]=Ii.x,Ni.array[Ai+1]=Ii.y,Ni.array[Ai+2]=Ii.z,Ai+=3;else if(4===Ni.size)for(Di=0;ki>Di;Di++)Ii=Ni.value[Di],Ni.array[Ai]=Ii.x,Ni.array[Ai+1]=Ii.y,Ni.array[Ai+2]=Ii.z,Ni.array[Ai+3]=Ii.w,Ai+=4;X.bindBuffer(X.ARRAY_BUFFER,Ni.buffer),X.bufferData(X.ARRAY_BUFFER,Ni.array,Fi),Ni.needsUpdate=!1}}e.verticesNeedUpdate=!1,e.colorsNeedUpdate=!1,g.attributes&&m(g)}}function f(t){for(var e in t.attributes)if(t.attributes[e].needsUpdate)return!0;return!1}function m(t){for(var e in t.attributes)t.attributes[e].needsUpdate=!1}function g(t){!0===t.transparent?Ee.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha):Ee.setBlending(THREE.NoBlending),Ee.setDepthTest(t.depthTest),Ee.setDepthWrite(t.depthWrite),Ee.setColorWrite(t.colorWrite),Ee.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function E(t,e,i,r,n){var s,a,o,h;if(ie=0,r.needsUpdate){r.program&&$e(r),r.addEventListener("dispose",ze);var l=qe[r.type];if(l){var u=THREE.ShaderLib[l];r.__webglShader={uniforms:THREE.UniformsUtils.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else r.__webglShader={uniforms:r.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader};for(var c=0,d=0,p=0,f=0,m=0,g=e.length;g>m;m++){var E=e[m];E.onlyShadow||!1===E.visible||(E instanceof THREE.DirectionalLight&&c++,E instanceof THREE.PointLight&&d++,E instanceof THREE.SpotLight&&p++,E instanceof THREE.HemisphereLight&&f++)}s=c,a=d,o=p,h=f;for(var y,b=0,w=0,H=e.length;H>w;w++){var C=e[w];C.castShadow&&(C instanceof THREE.SpotLight&&b++,C instanceof THREE.DirectionalLight&&!C.shadowCascade&&b++)}y=b;var A;if(Se&&n&&n.skeleton&&n.skeleton.useVertexTexture)A=1024;else{var L=X.getParameter(X.MAX_VERTEX_UNIFORM_VECTORS),O=Math.floor((L-20)/4);void 0!==n&&n instanceof THREE.SkinnedMesh&&(O=Math.min(n.skeleton.bones.length,O),O<n.skeleton.bones.length&&THREE.warn("WebGLRenderer: too many bones - "+n.skeleton.bones.length+", this GPU supports just "+O+" (try OpenGL instead of ANGLE)")),A=O}var D={precision:P,supportsVertexTextures:He,map:!!r.map,envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,lightMap:!!r.lightMap,bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,combine:r.combine,vertexColors:r.vertexColors,fog:i,useFog:r.fog,fogExp:i instanceof THREE.FogExp2,flatShading:r.shading===THREE.FlatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:F,skinning:r.skinning,maxBones:A,useVertexTexture:Se&&n&&n.skeleton&&n.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:Y.maxMorphTargets,maxMorphNormals:Y.maxMorphNormals,maxDirLights:s,maxPointLights:a,maxSpotLights:o,maxHemiLights:h,maxShadows:y,shadowMapEnabled:Y.shadowMapEnabled&&n.receiveShadow&&y>0,shadowMapType:Y.shadowMapType,shadowMapDebug:Y.shadowMapDebug,shadowMapCascade:Y.shadowMapCascade,alphaTest:r.alphaTest,metal:r.metal,wrapAround:r.wrapAround,doubleSided:r.side===THREE.DoubleSide,flipSided:r.side===THREE.BackSide},k=[];if(l?k.push(l):(k.push(r.fragmentShader),k.push(r.vertexShader)),void 0!==r.defines)for(var I in r.defines)k.push(I),k.push(r.defines[I]);for(I in D)k.push(I),k.push(D[I]);for(var N,j=k.join(),B=0,U=Q.length;U>B;B++){var z=Q[B];if(z.code===j){N=z,N.usedTimes++;break}}void 0===N&&(N=new THREE.WebGLProgram(Y,j,r,D),Q.push(N),Y.info.memory.programs=Q.length),r.program=N;var V=N.attributes;if(r.morphTargets){r.numSupportedMorphTargets=0;for(var $,G="morphTarget",W=0;W<Y.maxMorphTargets;W++)$=G+W,0<=V[$]&&r.numSupportedMorphTargets++}if(r.morphNormals)for(r.numSupportedMorphNormals=0,G="morphNormal",W=0;W<Y.maxMorphNormals;W++)$=G+W,0<=V[$]&&r.numSupportedMorphNormals++;r.uniformsList=[];for(var q in r.__webglShader.uniforms){var Z=r.program.uniforms[q];Z&&r.uniformsList.push([r.__webglShader.uniforms[q],Z])}r.needsUpdate=!1}r.morphTargets&&!n.__webglMorphTargetInfluences&&(n.__webglMorphTargetInfluences=new Float32Array(Y.maxMorphTargets));var te=!1,re=!1,ne=!1,se=r.program,ae=se.uniforms,oe=r.__webglShader.uniforms;if(se.id!==K&&(X.useProgram(se.program),K=se.id,ne=re=te=!0),r.id!==J&&(-1===J&&(ne=!0),J=r.id,re=!0),(te||t!==ee)&&(X.uniformMatrix4fv(ae.projectionMatrix,!1,t.projectionMatrix.elements),F&&X.uniform1f(ae.logDepthBufFC,2/(Math.log(t.far+1)/Math.LN2)),t!==ee&&(ee=t),(r instanceof THREE.ShaderMaterial||r instanceof THREE.MeshPhongMaterial||r.envMap)&&null!==ae.cameraPosition&&(ce.setFromMatrixPosition(t.matrixWorld),X.uniform3f(ae.cameraPosition,ce.x,ce.y,ce.z)),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshBasicMaterial||r instanceof THREE.ShaderMaterial||r.skinning)&&null!==ae.viewMatrix&&X.uniformMatrix4fv(ae.viewMatrix,!1,t.matrixWorldInverse.elements)),r.skinning)if(n.bindMatrix&&null!==ae.bindMatrix&&X.uniformMatrix4fv(ae.bindMatrix,!1,n.bindMatrix.elements),n.bindMatrixInverse&&null!==ae.bindMatrixInverse&&X.uniformMatrix4fv(ae.bindMatrixInverse,!1,n.bindMatrixInverse.elements),Se&&n.skeleton&&n.skeleton.useVertexTexture){if(null!==ae.boneTexture){var he=_();X.uniform1i(ae.boneTexture,he),Y.setTexture(n.skeleton.boneTexture,he)}null!==ae.boneTextureWidth&&X.uniform1i(ae.boneTextureWidth,n.skeleton.boneTextureWidth),null!==ae.boneTextureHeight&&X.uniform1i(ae.boneTextureHeight,n.skeleton.boneTextureHeight)}else n.skeleton&&n.skeleton.boneMatrices&&null!==ae.boneGlobalMatrices&&X.uniformMatrix4fv(ae.boneGlobalMatrices,!1,n.skeleton.boneMatrices);if(re){if(i&&r.fog&&(oe.fogColor.value=i.color,i instanceof THREE.Fog?(oe.fogNear.value=i.near,oe.fogFar.value=i.far):i instanceof THREE.FogExp2&&(oe.fogDensity.value=i.density)),r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r.lights){if(pe){var le,ue,me,ge,Ee,ve,_e,ye,ne=!0,Te=0,xe=0,Re=0,be=fe,Me=be.directional.colors,Ce=be.directional.positions,Ae=be.point.colors,Pe=be.point.positions,Oe=be.point.distances,De=be.point.decays,ke=be.spot.colors,Ie=be.spot.positions,Ne=be.spot.distances,Fe=be.spot.directions,je=be.spot.anglesCos,Ue=be.spot.exponents,Ve=be.spot.decays,Ge=be.hemi.skyColors,We=be.hemi.groundColors,Xe=be.hemi.positions,Ye=0,Qe=0,Ke=0,Ze=0,Je=0,ti=0,ei=0,ii=0,ri=0,ni=0,si=0,ai=0;for(le=0,ue=e.length;ue>le;le++)me=e[le],me.onlyShadow||(ge=me.color,_e=me.intensity,ye=me.distance,me instanceof THREE.AmbientLight?me.visible&&(Te+=ge.r,xe+=ge.g,Re+=ge.b):me instanceof THREE.DirectionalLight?(Je+=1,me.visible&&(de.setFromMatrixPosition(me.matrixWorld),ce.setFromMatrixPosition(me.target.matrixWorld),de.sub(ce),de.normalize(),ri=3*Ye,Ce[ri]=de.x,Ce[ri+1]=de.y,Ce[ri+2]=de.z,T(Me,ri,ge,_e),Ye+=1)):me instanceof THREE.PointLight?(ti+=1,me.visible&&(ni=3*Qe,T(Ae,ni,ge,_e),ce.setFromMatrixPosition(me.matrixWorld),Pe[ni]=ce.x,Pe[ni+1]=ce.y,Pe[ni+2]=ce.z,Oe[Qe]=ye,De[Qe]=0===me.distance?0:me.decay,Qe+=1)):me instanceof THREE.SpotLight?(ei+=1,me.visible&&(si=3*Ke,T(ke,si,ge,_e),de.setFromMatrixPosition(me.matrixWorld),Ie[si]=de.x,Ie[si+1]=de.y,Ie[si+2]=de.z,Ne[Ke]=ye,ce.setFromMatrixPosition(me.target.matrixWorld),de.sub(ce),de.normalize(),Fe[si]=de.x,Fe[si+1]=de.y,Fe[si+2]=de.z,je[Ke]=Math.cos(me.angle),Ue[Ke]=me.exponent,Ve[Ke]=0===me.distance?0:me.decay,Ke+=1)):me instanceof THREE.HemisphereLight&&(ii+=1,me.visible&&(de.setFromMatrixPosition(me.matrixWorld),de.normalize(),ai=3*Ze,Xe[ai]=de.x,Xe[ai+1]=de.y,Xe[ai+2]=de.z,Ee=me.color,ve=me.groundColor,T(Ge,ai,Ee,_e),T(We,ai,ve,_e),Ze+=1)));for(le=3*Ye,ue=Math.max(Me.length,3*Je);ue>le;le++)Me[le]=0;for(le=3*Qe,ue=Math.max(Ae.length,3*ti);ue>le;le++)Ae[le]=0;for(le=3*Ke,ue=Math.max(ke.length,3*ei);ue>le;le++)ke[le]=0;for(le=3*Ze,ue=Math.max(Ge.length,3*ii);ue>le;le++)Ge[le]=0;for(le=3*Ze,ue=Math.max(We.length,3*ii);ue>le;le++)We[le]=0;be.directional.length=Ye,be.point.length=Qe,be.spot.length=Ke,be.hemi.length=Ze,be.ambient[0]=Te,be.ambient[1]=xe,be.ambient[2]=Re,pe=!1}if(ne){var oi=fe;oe.ambientLightColor.value=oi.ambient,oe.directionalLightColor.value=oi.directional.colors,oe.directionalLightDirection.value=oi.directional.positions,oe.pointLightColor.value=oi.point.colors,oe.pointLightPosition.value=oi.point.positions,oe.pointLightDistance.value=oi.point.distances,oe.pointLightDecay.value=oi.point.decays,oe.spotLightColor.value=oi.spot.colors,oe.spotLightPosition.value=oi.spot.positions,oe.spotLightDistance.value=oi.spot.distances,oe.spotLightDirection.value=oi.spot.directions,oe.spotLightAngleCos.value=oi.spot.anglesCos,oe.spotLightExponent.value=oi.spot.exponents,oe.spotLightDecay.value=oi.spot.decays,oe.hemisphereLightSkyColor.value=oi.hemi.skyColors,oe.hemisphereLightGroundColor.value=oi.hemi.groundColors,oe.hemisphereLightDirection.value=oi.hemi.positions,v(oe,!0)}else v(oe,!1)}if(r instanceof THREE.MeshBasicMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial){oe.opacity.value=r.opacity,oe.diffuse.value=r.color,oe.map.value=r.map,oe.lightMap.value=r.lightMap,oe.specularMap.value=r.specularMap,oe.alphaMap.value=r.alphaMap,r.bumpMap&&(oe.bumpMap.value=r.bumpMap,oe.bumpScale.value=r.bumpScale),r.normalMap&&(oe.normalMap.value=r.normalMap,oe.normalScale.value.copy(r.normalScale));var hi;if(r.map?hi=r.map:r.specularMap?hi=r.specularMap:r.normalMap?hi=r.normalMap:r.bumpMap?hi=r.bumpMap:r.alphaMap&&(hi=r.alphaMap),void 0!==hi){var li=hi.offset,ui=hi.repeat;oe.offsetRepeat.value.set(li.x,li.y,ui.x,ui.y)}oe.envMap.value=r.envMap,oe.flipEnvMap.value=r.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,oe.reflectivity.value=r.reflectivity,oe.refractionRatio.value=r.refractionRatio}if(r instanceof THREE.LineBasicMaterial)oe.diffuse.value=r.color,oe.opacity.value=r.opacity;else if(r instanceof THREE.LineDashedMaterial)oe.diffuse.value=r.color,oe.opacity.value=r.opacity,oe.dashSize.value=r.dashSize,oe.totalSize.value=r.dashSize+r.gapSize,oe.scale.value=r.scale;else if(r instanceof THREE.PointCloudMaterial){if(oe.psColor.value=r.color,oe.opacity.value=r.opacity,oe.size.value=r.size,oe.scale.value=M.height/2,oe.map.value=r.map,null!==r.map){var ci=r.map.offset,di=r.map.repeat;oe.offsetRepeat.value.set(ci.x,ci.y,di.x,di.y)}}else r instanceof THREE.MeshPhongMaterial?(oe.shininess.value=r.shininess,oe.emissive.value=r.emissive,oe.specular.value=r.specular,r.wrapAround&&oe.wrapRGB.value.copy(r.wrapRGB)):r instanceof THREE.MeshLambertMaterial?(oe.emissive.value=r.emissive,r.wrapAround&&oe.wrapRGB.value.copy(r.wrapRGB)):r instanceof THREE.MeshDepthMaterial?(oe.mNear.value=t.near,oe.mFar.value=t.far,oe.opacity.value=r.opacity):r instanceof THREE.MeshNormalMaterial&&(oe.opacity.value=r.opacity);if(n.receiveShadow&&!r._shadowPass&&oe.shadowMatrix)for(var pi=0,fi=0,mi=e.length;mi>fi;fi++){var gi=e[fi];gi.castShadow&&(gi instanceof THREE.SpotLight||gi instanceof THREE.DirectionalLight&&!gi.shadowCascade)&&(oe.shadowMap.value[pi]=gi.shadowMap,oe.shadowMapSize.value[pi]=gi.shadowMapSize,oe.shadowMatrix.value[pi]=gi.shadowMatrix,oe.shadowDarkness.value[pi]=gi.shadowDarkness,oe.shadowBias.value[pi]=gi.shadowBias,pi++)}for(var Ei,vi,_i,yi=r.uniformsList,Ti=0,xi=yi.length;xi>Ti;Ti++){var Ri=yi[Ti][0];if(!1!==Ri.needsUpdate){var bi=Ri.type,wi=Ri.value,Hi=yi[Ti][1];switch(bi){case"1i":X.uniform1i(Hi,wi);break;case"1f":X.uniform1f(Hi,wi);break;case"2f":X.uniform2f(Hi,wi[0],wi[1]);break;case"3f":X.uniform3f(Hi,wi[0],wi[1],wi[2]);break;case"4f":X.uniform4f(Hi,wi[0],wi[1],wi[2],wi[3]);break;case"1iv":X.uniform1iv(Hi,wi);break;case"3iv":X.uniform3iv(Hi,wi);break;case"1fv":X.uniform1fv(Hi,wi);break;case"2fv":X.uniform2fv(Hi,wi);break;case"3fv":X.uniform3fv(Hi,wi);break;case"4fv":X.uniform4fv(Hi,wi);break;case"Matrix3fv":X.uniformMatrix3fv(Hi,!1,wi);break;case"Matrix4fv":X.uniformMatrix4fv(Hi,!1,wi);break;case"i":X.uniform1i(Hi,wi);break;case"f":X.uniform1f(Hi,wi);break;case"v2":X.uniform2f(Hi,wi.x,wi.y);break;case"v3":X.uniform3f(Hi,wi.x,wi.y,wi.z);break;case"v4":X.uniform4f(Hi,wi.x,wi.y,wi.z,wi.w);break;case"c":X.uniform3f(Hi,wi.r,wi.g,wi.b);break;case"iv1":X.uniform1iv(Hi,wi);break;case"iv":X.uniform3iv(Hi,wi);break;case"fv1":X.uniform1fv(Hi,wi);break;case"fv":X.uniform3fv(Hi,wi);break;case"v2v":void 0===Ri._array&&(Ri._array=new Float32Array(2*wi.length));for(var Si=0,Mi=wi.length;Mi>Si;Si++)_i=2*Si,Ri._array[_i]=wi[Si].x,Ri._array[_i+1]=wi[Si].y;X.uniform2fv(Hi,Ri._array);break;case"v3v":for(void 0===Ri._array&&(Ri._array=new Float32Array(3*wi.length)),Si=0,Mi=wi.length;Mi>Si;Si++)_i=3*Si,Ri._array[_i]=wi[Si].x,Ri._array[_i+1]=wi[Si].y,Ri._array[_i+2]=wi[Si].z;X.uniform3fv(Hi,Ri._array);break;case"v4v":for(void 0===Ri._array&&(Ri._array=new Float32Array(4*wi.length)),Si=0,Mi=wi.length;Mi>Si;Si++)_i=4*Si,Ri._array[_i]=wi[Si].x,Ri._array[_i+1]=wi[Si].y,Ri._array[_i+2]=wi[Si].z,Ri._array[_i+3]=wi[Si].w;X.uniform4fv(Hi,Ri._array);break;case"m3":X.uniformMatrix3fv(Hi,!1,wi.elements);break;case"m3v":for(void 0===Ri._array&&(Ri._array=new Float32Array(9*wi.length)),Si=0,Mi=wi.length;Mi>Si;Si++)wi[Si].flattenToArrayOffset(Ri._array,9*Si);X.uniformMatrix3fv(Hi,!1,Ri._array);break;case"m4":X.uniformMatrix4fv(Hi,!1,wi.elements);break;case"m4v":for(void 0===Ri._array&&(Ri._array=new Float32Array(16*wi.length)),Si=0,Mi=wi.length;Mi>Si;Si++)wi[Si].flattenToArrayOffset(Ri._array,16*Si);X.uniformMatrix4fv(Hi,!1,Ri._array);break;case"t":if(Ei=wi,vi=_(),X.uniform1i(Hi,vi),!Ei)continue;if(Ei instanceof THREE.CubeTexture||Ei.image instanceof Array&&6===Ei.image.length){var Ci=Ei,Ai=vi;if(6===Ci.image.length)if(Ci.needsUpdate){Ci.image.__webglTextureCube||(Ci.addEventListener("dispose",Be),Ci.image.__webglTextureCube=X.createTexture(),Y.info.memory.textures++),X.activeTexture(X.TEXTURE0+Ai),X.bindTexture(X.TEXTURE_CUBE_MAP,Ci.image.__webglTextureCube),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,Ci.flipY);for(var Pi=Ci instanceof THREE.CompressedTexture,Li=Ci.image[0]instanceof THREE.DataTexture,Oi=[],Di=0;6>Di;Di++)Oi[Di]=!Y.autoScaleCubemaps||Pi||Li?Li?Ci.image[Di].image:Ci.image[Di]:R(Ci.image[Di],we);var ki=Oi[0],Ii=THREE.Math.isPowerOfTwo(ki.width)&&THREE.Math.isPowerOfTwo(ki.height),Ni=S(Ci.format),Fi=S(Ci.type);for(x(X.TEXTURE_CUBE_MAP,Ci,Ii),Di=0;6>Di;Di++)if(Pi)for(var ji,Bi=Oi[Di].mipmaps,Ui=0,zi=Bi.length;zi>Ui;Ui++)ji=Bi[Ui],Ci.format!==THREE.RGBAFormat&&Ci.format!==THREE.RGBFormat?-1<Le().indexOf(Ni)?X.compressedTexImage2D(X.TEXTURE_CUBE_MAP_POSITIVE_X+Di,Ui,Ni,ji.width,ji.height,0,ji.data):THREE.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):X.texImage2D(X.TEXTURE_CUBE_MAP_POSITIVE_X+Di,Ui,Ni,ji.width,ji.height,0,Ni,Fi,ji.data);else Li?X.texImage2D(X.TEXTURE_CUBE_MAP_POSITIVE_X+Di,0,Ni,Oi[Di].width,Oi[Di].height,0,Ni,Fi,Oi[Di].data):X.texImage2D(X.TEXTURE_CUBE_MAP_POSITIVE_X+Di,0,Ni,Ni,Fi,Oi[Di]);Ci.generateMipmaps&&Ii&&X.generateMipmap(X.TEXTURE_CUBE_MAP),Ci.needsUpdate=!1,Ci.onUpdate&&Ci.onUpdate()}else X.activeTexture(X.TEXTURE0+Ai),X.bindTexture(X.TEXTURE_CUBE_MAP,Ci.image.__webglTextureCube)}else if(Ei instanceof THREE.WebGLRenderTargetCube){var Vi=Ei;X.activeTexture(X.TEXTURE0+vi),X.bindTexture(X.TEXTURE_CUBE_MAP,Vi.__webglTexture)}else Y.setTexture(Ei,vi);break;case"tv":for(void 0===Ri._array&&(Ri._array=[]),Si=0,Mi=Ri.value.length;Mi>Si;Si++)Ri._array[Si]=_();for(X.uniform1iv(Hi,Ri._array),Si=0,Mi=Ri.value.length;Mi>Si;Si++)Ei=Ri.value[Si],vi=Ri._array[Si],Ei&&Y.setTexture(Ei,vi);break;default:THREE.warn("THREE.WebGLRenderer: Unknown uniform type: "+bi)}}}}return X.uniformMatrix4fv(ae.modelViewMatrix,!1,n._modelViewMatrix.elements),ae.normalMatrix&&X.uniformMatrix3fv(ae.normalMatrix,!1,n._normalMatrix.elements),null!==ae.modelMatrix&&X.uniformMatrix4fv(ae.modelMatrix,!1,n.matrixWorld.elements),se}function v(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLightColor.needsUpdate=e,t.directionalLightDirection.needsUpdate=e,t.pointLightColor.needsUpdate=e,t.pointLightPosition.needsUpdate=e,t.pointLightDistance.needsUpdate=e,t.pointLightDecay.needsUpdate=e,t.spotLightColor.needsUpdate=e,t.spotLightPosition.needsUpdate=e,t.spotLightDistance.needsUpdate=e,t.spotLightDirection.needsUpdate=e,t.spotLightAngleCos.needsUpdate=e,t.spotLightExponent.needsUpdate=e,t.spotLightDecay.needsUpdate=e,t.hemisphereLightSkyColor.needsUpdate=e,t.hemisphereLightGroundColor.needsUpdate=e,t.hemisphereLightDirection.needsUpdate=e}function _(){var t=ie;return t>=xe&&THREE.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+xe),ie+=1,t}function y(t,e){t._modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,t.matrixWorld),t._normalMatrix.getNormalMatrix(t._modelViewMatrix)}function T(t,e,i,r){t[e]=i.r*r,t[e+1]=i.g*r,t[e+2]=i.b*r}function x(t,e,i){i?(X.texParameteri(t,X.TEXTURE_WRAP_S,S(e.wrapS)),X.texParameteri(t,X.TEXTURE_WRAP_T,S(e.wrapT)),X.texParameteri(t,X.TEXTURE_MAG_FILTER,S(e.magFilter)),X.texParameteri(t,X.TEXTURE_MIN_FILTER,S(e.minFilter))):(X.texParameteri(t,X.TEXTURE_WRAP_S,X.CLAMP_TO_EDGE),X.texParameteri(t,X.TEXTURE_WRAP_T,X.CLAMP_TO_EDGE),e.wrapS===THREE.ClampToEdgeWrapping&&e.wrapT===THREE.ClampToEdgeWrapping||THREE.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( "+e.sourceFile+" )"),X.texParameteri(t,X.TEXTURE_MAG_FILTER,H(e.magFilter)),X.texParameteri(t,X.TEXTURE_MIN_FILTER,H(e.minFilter)),e.minFilter!==THREE.NearestFilter&&e.minFilter!==THREE.LinearFilter&&THREE.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( "+e.sourceFile+" )")),(i=ve.get("EXT_texture_filter_anisotropic"))&&e.type!==THREE.FloatType&&e.type!==THREE.HalfFloatType&&(1<e.anisotropy||e.__currentAnisotropy)&&(X.texParameterf(t,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,Y.getMaxAnisotropy())),e.__currentAnisotropy=e.anisotropy)}function R(t,e){if(t.width>e||t.height>e){var i=e/Math.max(t.width,t.height),r=document.createElement("canvas");return r.width=Math.floor(t.width*i),r.height=Math.floor(t.height*i),r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),THREE.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height,t),r}return t}function b(t,e){X.bindRenderbuffer(X.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer?(X.renderbufferStorage(X.RENDERBUFFER,X.DEPTH_COMPONENT16,e.width,e.height),X.framebufferRenderbuffer(X.FRAMEBUFFER,X.DEPTH_ATTACHMENT,X.RENDERBUFFER,t)):e.depthBuffer&&e.stencilBuffer?(X.renderbufferStorage(X.RENDERBUFFER,X.DEPTH_STENCIL,e.width,e.height),X.framebufferRenderbuffer(X.FRAMEBUFFER,X.DEPTH_STENCIL_ATTACHMENT,X.RENDERBUFFER,t)):X.renderbufferStorage(X.RENDERBUFFER,X.RGBA4,e.width,e.height)}function w(t){t instanceof THREE.WebGLRenderTargetCube?(X.bindTexture(X.TEXTURE_CUBE_MAP,t.__webglTexture),X.generateMipmap(X.TEXTURE_CUBE_MAP),X.bindTexture(X.TEXTURE_CUBE_MAP,null)):(X.bindTexture(X.TEXTURE_2D,t.__webglTexture),X.generateMipmap(X.TEXTURE_2D),X.bindTexture(X.TEXTURE_2D,null))}function H(t){return t===THREE.NearestFilter||t===THREE.NearestMipMapNearestFilter||t===THREE.NearestMipMapLinearFilter?X.NEAREST:X.LINEAR}function S(t){var e;if(t===THREE.RepeatWrapping)return X.REPEAT;if(t===THREE.ClampToEdgeWrapping)return X.CLAMP_TO_EDGE;if(t===THREE.MirroredRepeatWrapping)return X.MIRRORED_REPEAT;if(t===THREE.NearestFilter)return X.NEAREST;if(t===THREE.NearestMipMapNearestFilter)return X.NEAREST_MIPMAP_NEAREST;if(t===THREE.NearestMipMapLinearFilter)return X.NEAREST_MIPMAP_LINEAR;if(t===THREE.LinearFilter)return X.LINEAR;if(t===THREE.LinearMipMapNearestFilter)return X.LINEAR_MIPMAP_NEAREST;if(t===THREE.LinearMipMapLinearFilter)return X.LINEAR_MIPMAP_LINEAR;if(t===THREE.UnsignedByteType)return X.UNSIGNED_BYTE;if(t===THREE.UnsignedShort4444Type)return X.UNSIGNED_SHORT_4_4_4_4;if(t===THREE.UnsignedShort5551Type)return X.UNSIGNED_SHORT_5_5_5_1;if(t===THREE.UnsignedShort565Type)return X.UNSIGNED_SHORT_5_6_5;if(t===THREE.ByteType)return X.BYTE;if(t===THREE.ShortType)return X.SHORT;if(t===THREE.UnsignedShortType)return X.UNSIGNED_SHORT;if(t===THREE.IntType)return X.INT;if(t===THREE.UnsignedIntType)return X.UNSIGNED_INT;if(t===THREE.FloatType)return X.FLOAT;if(e=ve.get("OES_texture_half_float"),null!==e&&t===THREE.HalfFloatType)return e.HALF_FLOAT_OES;if(t===THREE.AlphaFormat)return X.ALPHA;if(t===THREE.RGBFormat)return X.RGB;if(t===THREE.RGBAFormat)return X.RGBA;if(t===THREE.LuminanceFormat)return X.LUMINANCE;if(t===THREE.LuminanceAlphaFormat)return X.LUMINANCE_ALPHA;if(t===THREE.AddEquation)return X.FUNC_ADD;if(t===THREE.SubtractEquation)return X.FUNC_SUBTRACT;if(t===THREE.ReverseSubtractEquation)return X.FUNC_REVERSE_SUBTRACT;if(t===THREE.ZeroFactor)return X.ZERO;if(t===THREE.OneFactor)return X.ONE;if(t===THREE.SrcColorFactor)return X.SRC_COLOR;if(t===THREE.OneMinusSrcColorFactor)return X.ONE_MINUS_SRC_COLOR;if(t===THREE.SrcAlphaFactor)return X.SRC_ALPHA;if(t===THREE.OneMinusSrcAlphaFactor)return X.ONE_MINUS_SRC_ALPHA;if(t===THREE.DstAlphaFactor)return X.DST_ALPHA;if(t===THREE.OneMinusDstAlphaFactor)return X.ONE_MINUS_DST_ALPHA;if(t===THREE.DstColorFactor)return X.DST_COLOR;if(t===THREE.OneMinusDstColorFactor)return X.ONE_MINUS_DST_COLOR;if(t===THREE.SrcAlphaSaturateFactor)return X.SRC_ALPHA_SATURATE;if(e=ve.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===THREE.RGB_S3TC_DXT1_Format)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===THREE.RGBA_S3TC_DXT1_Format)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===THREE.RGBA_S3TC_DXT3_Format)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===THREE.RGBA_S3TC_DXT5_Format)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=ve.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===THREE.RGB_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===THREE.RGB_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===THREE.RGBA_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===THREE.RGBA_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e=ve.get("EXT_blend_minmax"),null!==e){if(t===THREE.MinEquation)return e.MIN_EXT;if(t===THREE.MaxEquation)return e.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION),t=t||{};var M=void 0!==t.canvas?t.canvas:document.createElement("canvas"),C=void 0!==t.context?t.context:null,A=1,P=void 0!==t.precision?t.precision:"highp",L=void 0!==t.alpha?t.alpha:!1,O=void 0!==t.depth?t.depth:!0,D=void 0!==t.stencil?t.stencil:!0,k=void 0!==t.antialias?t.antialias:!1,I=void 0!==t.premultipliedAlpha?t.premultipliedAlpha:!0,N=void 0!==t.preserveDrawingBuffer?t.preserveDrawingBuffer:!1,F=void 0!==t.logarithmicDepthBuffer?t.logarithmicDepthBuffer:!1,j=new THREE.Color(0),B=0,U=[],z={},V=[],$=[],G=[],W=[],q=[];this.domElement=M,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.gammaFactor=2,this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapCascade=this.shadowMapDebug=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var X,Y=this,Q=[],K=null,Z=null,J=-1,te="",ee=null,ie=0,re=0,ne=0,se=M.width,ae=M.height,oe=0,he=0,le=new THREE.Frustum,ue=new THREE.Matrix4,ce=new THREE.Vector3,de=new THREE.Vector3,pe=!0,fe={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var me={alpha:L,depth:O,stencil:D,antialias:k,premultipliedAlpha:I,preserveDrawingBuffer:N};if(X=C||M.getContext("webgl",me)||M.getContext("experimental-webgl",me),null===X){if(null!==M.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context."}M.addEventListener("webglcontextlost",function(t){t.preventDefault(),Te(),ye(),z={}},!1)}catch(ge){THREE.error("THREE.WebGLRenderer: "+ge)}var Ee=new THREE.WebGLState(X,S);void 0===X.getShaderPrecisionFormat&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var ve=new THREE.WebGLExtensions(X);ve.get("OES_texture_float"),ve.get("OES_texture_float_linear"),ve.get("OES_texture_half_float"),ve.get("OES_texture_half_float_linear"),ve.get("OES_standard_derivatives"),F&&ve.get("EXT_frag_depth");var _e=function(t,e,i,r){!0===I&&(t*=r,e*=r,i*=r),X.clearColor(t,e,i,r)},ye=function(){X.clearColor(0,0,0,1),X.clearDepth(1),X.clearStencil(0),X.enable(X.DEPTH_TEST),X.depthFunc(X.LEQUAL),X.frontFace(X.CCW),X.cullFace(X.BACK),X.enable(X.CULL_FACE),X.enable(X.BLEND),X.blendEquation(X.FUNC_ADD),X.blendFunc(X.SRC_ALPHA,X.ONE_MINUS_SRC_ALPHA),X.viewport(re,ne,se,ae),_e(j.r,j.g,j.b,B)},Te=function(){ee=K=null,te="",J=-1,pe=!0,Ee.reset()};ye(),this.context=X,this.state=Ee;var xe=X.getParameter(X.MAX_TEXTURE_IMAGE_UNITS),Re=X.getParameter(X.MAX_VERTEX_TEXTURE_IMAGE_UNITS),be=X.getParameter(X.MAX_TEXTURE_SIZE),we=X.getParameter(X.MAX_CUBE_MAP_TEXTURE_SIZE),He=Re>0,Se=He&&ve.get("OES_texture_float"),Me=X.getShaderPrecisionFormat(X.VERTEX_SHADER,X.HIGH_FLOAT),Ce=X.getShaderPrecisionFormat(X.VERTEX_SHADER,X.MEDIUM_FLOAT),Ae=X.getShaderPrecisionFormat(X.FRAGMENT_SHADER,X.HIGH_FLOAT),Pe=X.getShaderPrecisionFormat(X.FRAGMENT_SHADER,X.MEDIUM_FLOAT),Le=function(){var t;return function(){if(void 0!==t)return t;if(t=[],ve.get("WEBGL_compressed_texture_pvrtc")||ve.get("WEBGL_compressed_texture_s3tc"))for(var e=X.getParameter(X.COMPRESSED_TEXTURE_FORMATS),i=0;i<e.length;i++)t.push(e[i]);return t}}(),Oe=0<Me.precision&&0<Ae.precision,De=0<Ce.precision&&0<Pe.precision;"highp"!==P||Oe||(De?(P="mediump",THREE.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(P="lowp",THREE.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==P||De||(P="lowp",THREE.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var ke=new THREE.ShadowMapPlugin(this,U,z,V),Ie=new THREE.SpritePlugin(this,W),Ne=new THREE.LensFlarePlugin(this,q);this.getContext=function(){return X},this.forceContextLoss=function(){ve.get("WEBGL_lose_context").loseContext()},this.supportsVertexTextures=function(){return He},this.supportsFloatTextures=function(){return ve.get("OES_texture_float")},this.supportsHalfFloatTextures=function(){return ve.get("OES_texture_half_float")},this.supportsStandardDerivatives=function(){return ve.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return ve.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return ve.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return ve.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var t;return function(){if(void 0!==t)return t;var e=ve.get("EXT_texture_filter_anisotropic");return t=null!==e?X.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return P},this.getPixelRatio=function(){return A},this.setPixelRatio=function(t){A=t},this.setSize=function(t,e,i){M.width=t*A,M.height=e*A,!1!==i&&(M.style.width=t+"px",M.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,i,r){re=t*A,ne=e*A,se=i*A,ae=r*A,X.viewport(re,ne,se,ae)},this.setScissor=function(t,e,i,r){X.scissor(t*A,e*A,i*A,r*A)},this.enableScissorTest=function(t){t?X.enable(X.SCISSOR_TEST):X.disable(X.SCISSOR_TEST)},this.getClearColor=function(){return j},this.setClearColor=function(t,e){j.set(t),B=void 0!==e?e:1,_e(j.r,j.g,j.b,B)},this.getClearAlpha=function(){return B},this.setClearAlpha=function(t){B=t,_e(j.r,j.g,j.b,B)},this.clear=function(t,e,i){var r=0;(void 0===t||t)&&(r|=X.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=X.DEPTH_BUFFER_BIT),(void 0===i||i)&&(r|=X.STENCIL_BUFFER_BIT),X.clear(r)},this.clearColor=function(){X.clear(X.COLOR_BUFFER_BIT)},this.clearDepth=function(){X.clear(X.DEPTH_BUFFER_BIT)},this.clearStencil=function(){X.clear(X.STENCIL_BUFFER_BIT)},this.clearTarget=function(t,e,i,r){this.setRenderTarget(t),this.clear(e,i,r)},this.resetGLState=Te;var Fe=function(t){t.target.traverse(function(t){if(t.removeEventListener("remove",Fe),t instanceof THREE.Mesh||t instanceof THREE.PointCloud||t instanceof THREE.Line)delete z[t.id];else if(t instanceof THREE.ImmediateRenderObject||t.immediateRenderCallback)for(var e=V,i=e.length-1;i>=0;i--)e[i].object===t&&e.splice(i,1);delete t.__webglInit,delete t._modelViewMatrix,delete t._normalMatrix,delete t.__webglActive})},je=function(t){if(t=t.target,t.removeEventListener("dispose",je),delete t.__webglInit,t instanceof THREE.BufferGeometry){for(var e in t.attributes){var i=t.attributes[e];void 0!==i.buffer&&(X.deleteBuffer(i.buffer),delete i.buffer)}Y.info.memory.geometries--}else if(e=Ge[t.id],void 0!==e){for(var i=0,r=e.length;r>i;i++){var n=e[i];if(void 0!==n.numMorphTargets){for(var s=0,a=n.numMorphTargets;a>s;s++)X.deleteBuffer(n.__webglMorphTargetsBuffers[s]);
delete n.__webglMorphTargetsBuffers}if(void 0!==n.numMorphNormals){for(s=0,a=n.numMorphNormals;a>s;s++)X.deleteBuffer(n.__webglMorphNormalsBuffers[s]);delete n.__webglMorphNormalsBuffers}Ve(n)}delete Ge[t.id]}else Ve(t);te=""},Be=function(t){t=t.target,t.removeEventListener("dispose",Be),t.image&&t.image.__webglTextureCube?(X.deleteTexture(t.image.__webglTextureCube),delete t.image.__webglTextureCube):void 0!==t.__webglInit&&(X.deleteTexture(t.__webglTexture),delete t.__webglTexture,delete t.__webglInit),Y.info.memory.textures--},Ue=function(t){if(t=t.target,t.removeEventListener("dispose",Ue),t&&void 0!==t.__webglTexture){if(X.deleteTexture(t.__webglTexture),delete t.__webglTexture,t instanceof THREE.WebGLRenderTargetCube)for(var e=0;6>e;e++)X.deleteFramebuffer(t.__webglFramebuffer[e]),X.deleteRenderbuffer(t.__webglRenderbuffer[e]);else X.deleteFramebuffer(t.__webglFramebuffer),X.deleteRenderbuffer(t.__webglRenderbuffer);delete t.__webglFramebuffer,delete t.__webglRenderbuffer}Y.info.memory.textures--},ze=function(t){t=t.target,t.removeEventListener("dispose",ze),$e(t)},Ve=function(t){for(var e="__webglVertexBuffer __webglNormalBuffer __webglTangentBuffer __webglColorBuffer __webglUVBuffer __webglUV2Buffer __webglSkinIndicesBuffer __webglSkinWeightsBuffer __webglFaceBuffer __webglLineBuffer __webglLineDistanceBuffer".split(" "),i=0,r=e.length;r>i;i++){var n=e[i];void 0!==t[n]&&(X.deleteBuffer(t[n]),delete t[n])}if(void 0!==t.__webglCustomAttributesList){for(n in t.__webglCustomAttributesList)X.deleteBuffer(t.__webglCustomAttributesList[n].buffer);delete t.__webglCustomAttributesList}Y.info.memory.geometries--},$e=function(t){var e=t.program.program;if(void 0!==e){t.program=void 0;var i,r,n=!1;for(t=0,i=Q.length;i>t;t++)if(r=Q[t],r.program===e){r.usedTimes--,0===r.usedTimes&&(n=!0);break}if(!0===n){for(n=[],t=0,i=Q.length;i>t;t++)r=Q[t],r.program!==e&&n.push(r);Q=n,X.deleteProgram(e),Y.info.memory.programs--}}};this.renderBufferImmediate=function(t,e,i){if(Ee.initAttributes(),t.hasPositions&&!t.__webglVertexBuffer&&(t.__webglVertexBuffer=X.createBuffer()),t.hasNormals&&!t.__webglNormalBuffer&&(t.__webglNormalBuffer=X.createBuffer()),t.hasUvs&&!t.__webglUvBuffer&&(t.__webglUvBuffer=X.createBuffer()),t.hasColors&&!t.__webglColorBuffer&&(t.__webglColorBuffer=X.createBuffer()),t.hasPositions&&(X.bindBuffer(X.ARRAY_BUFFER,t.__webglVertexBuffer),X.bufferData(X.ARRAY_BUFFER,t.positionArray,X.DYNAMIC_DRAW),Ee.enableAttribute(e.attributes.position),X.vertexAttribPointer(e.attributes.position,3,X.FLOAT,!1,0,0)),t.hasNormals){if(X.bindBuffer(X.ARRAY_BUFFER,t.__webglNormalBuffer),!1==i instanceof THREE.MeshPhongMaterial&&i.shading===THREE.FlatShading){var r,n,s,a,o,h,l,u,c,d,p,f=3*t.count;for(p=0;f>p;p+=9)d=t.normalArray,r=d[p],n=d[p+1],s=d[p+2],a=d[p+3],h=d[p+4],u=d[p+5],o=d[p+6],l=d[p+7],c=d[p+8],r=(r+a+o)/3,n=(n+h+l)/3,s=(s+u+c)/3,d[p]=r,d[p+1]=n,d[p+2]=s,d[p+3]=r,d[p+4]=n,d[p+5]=s,d[p+6]=r,d[p+7]=n,d[p+8]=s}X.bufferData(X.ARRAY_BUFFER,t.normalArray,X.DYNAMIC_DRAW),Ee.enableAttribute(e.attributes.normal),X.vertexAttribPointer(e.attributes.normal,3,X.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(X.bindBuffer(X.ARRAY_BUFFER,t.__webglUvBuffer),X.bufferData(X.ARRAY_BUFFER,t.uvArray,X.DYNAMIC_DRAW),Ee.enableAttribute(e.attributes.uv),X.vertexAttribPointer(e.attributes.uv,2,X.FLOAT,!1,0,0)),t.hasColors&&i.vertexColors!==THREE.NoColors&&(X.bindBuffer(X.ARRAY_BUFFER,t.__webglColorBuffer),X.bufferData(X.ARRAY_BUFFER,t.colorArray,X.DYNAMIC_DRAW),Ee.enableAttribute(e.attributes.color),X.vertexAttribPointer(e.attributes.color,3,X.FLOAT,!1,0,0)),Ee.disableUnusedAttributes(),X.drawArrays(X.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,n,s,a){if(!1!==n.visible)if(p(a),t=E(t,e,i,n,a),e=!1,i="direct_"+s.id+"_"+t.id+"_"+(n.wireframe?1:0),i!==te&&(te=i,e=!0),e&&Ee.initAttributes(),a instanceof THREE.Mesh){a=!0===n.wireframe?X.LINES:X.TRIANGLES;var o=s.attributes.index;if(o){var h,l;if(o.array instanceof Uint32Array&&ve.get("OES_element_index_uint")?(h=X.UNSIGNED_INT,l=4):(h=X.UNSIGNED_SHORT,l=2),i=s.offsets,0===i.length)e&&(r(n,t,s,0),X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,o.buffer)),X.drawElements(a,o.array.length,h,0),Y.info.render.calls++,Y.info.render.vertices+=o.array.length,Y.info.render.faces+=o.array.length/3;else{e=!0;for(var u=0,c=i.length;c>u;u++){var d=i[u].index;e&&(r(n,t,s,d),X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,o.buffer)),X.drawElements(a,i[u].count,h,i[u].start*l),Y.info.render.calls++,Y.info.render.vertices+=i[u].count,Y.info.render.faces+=i[u].count/3}}}else e&&r(n,t,s,0),n=s.attributes.position,X.drawArrays(a,0,n.array.length/n.itemSize),Y.info.render.calls++,Y.info.render.vertices+=n.array.length/n.itemSize,Y.info.render.faces+=n.array.length/(3*n.itemSize)}else if(a instanceof THREE.PointCloud)if(a=X.POINTS,o=s.attributes.index)if(o.array instanceof Uint32Array&&ve.get("OES_element_index_uint")?(h=X.UNSIGNED_INT,l=4):(h=X.UNSIGNED_SHORT,l=2),i=s.offsets,0===i.length)e&&(r(n,t,s,0),X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,o.buffer)),X.drawElements(a,o.array.length,h,0),Y.info.render.calls++,Y.info.render.points+=o.array.length;else for(1<i.length&&(e=!0),u=0,c=i.length;c>u;u++)d=i[u].index,e&&(r(n,t,s,d),X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,o.buffer)),X.drawElements(a,i[u].count,h,i[u].start*l),Y.info.render.calls++,Y.info.render.points+=i[u].count;else if(e&&r(n,t,s,0),n=s.attributes.position,i=s.offsets,0===i.length)X.drawArrays(a,0,n.array.length/3),Y.info.render.calls++,Y.info.render.points+=n.array.length/3;else for(u=0,c=i.length;c>u;u++)X.drawArrays(a,i[u].index,i[u].count),Y.info.render.calls++,Y.info.render.points+=i[u].count;else if(a instanceof THREE.Line)if(a=a.mode===THREE.LineStrip?X.LINE_STRIP:X.LINES,Ee.setLineWidth(n.linewidth*A),o=s.attributes.index)if(o.array instanceof Uint32Array?(h=X.UNSIGNED_INT,l=4):(h=X.UNSIGNED_SHORT,l=2),i=s.offsets,0===i.length)e&&(r(n,t,s,0),X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,o.buffer)),X.drawElements(a,o.array.length,h,0),Y.info.render.calls++,Y.info.render.vertices+=o.array.length;else for(1<i.length&&(e=!0),u=0,c=i.length;c>u;u++)d=i[u].index,e&&(r(n,t,s,d),X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,o.buffer)),X.drawElements(a,i[u].count,h,i[u].start*l),Y.info.render.calls++,Y.info.render.vertices+=i[u].count;else if(e&&r(n,t,s,0),n=s.attributes.position,i=s.offsets,0===i.length)X.drawArrays(a,0,n.array.length/3),Y.info.render.calls++,Y.info.render.vertices+=n.array.length/3;else for(u=0,c=i.length;c>u;u++)X.drawArrays(a,i[u].index,i[u].count),Y.info.render.calls++,Y.info.render.vertices+=i[u].count},this.renderBuffer=function(t,e,i,r,n,s){if(!1!==r.visible){if(p(s),i=E(t,e,i,r,s),e=i.attributes,t=!1,i=n.id+"_"+i.id+"_"+(r.wireframe?1:0),i!==te&&(te=i,t=!0),t&&Ee.initAttributes(),!r.morphTargets&&0<=e.position)t&&(X.bindBuffer(X.ARRAY_BUFFER,n.__webglVertexBuffer),Ee.enableAttribute(e.position),X.vertexAttribPointer(e.position,3,X.FLOAT,!1,0,0));else if(s.morphTargetBase){if(i=r.program.attributes,-1!==s.morphTargetBase&&0<=i.position?(X.bindBuffer(X.ARRAY_BUFFER,n.__webglMorphTargetsBuffers[s.morphTargetBase]),Ee.enableAttribute(i.position),X.vertexAttribPointer(i.position,3,X.FLOAT,!1,0,0)):0<=i.position&&(X.bindBuffer(X.ARRAY_BUFFER,n.__webglVertexBuffer),Ee.enableAttribute(i.position),X.vertexAttribPointer(i.position,3,X.FLOAT,!1,0,0)),s.morphTargetForcedOrder.length)for(var o,h=0,l=s.morphTargetForcedOrder,u=s.morphTargetInfluences;h<r.numSupportedMorphTargets&&h<l.length;)o=i["morphTarget"+h],o>=0&&(X.bindBuffer(X.ARRAY_BUFFER,n.__webglMorphTargetsBuffers[l[h]]),Ee.enableAttribute(o),X.vertexAttribPointer(o,3,X.FLOAT,!1,0,0)),o=i["morphNormal"+h],o>=0&&r.morphNormals&&(X.bindBuffer(X.ARRAY_BUFFER,n.__webglMorphNormalsBuffers[l[h]]),Ee.enableAttribute(o),X.vertexAttribPointer(o,3,X.FLOAT,!1,0,0)),s.__webglMorphTargetInfluences[h]=u[l[h]],h++;else{for(l=[],u=s.morphTargetInfluences,h=s.geometry.morphTargets,u.length>h.length&&(console.warn("THREE.WebGLRenderer: Influences array is bigger than morphTargets array."),u.length=h.length),h=0,o=u.length;o>h;h++)l.push([u[h],h]);l.length>r.numSupportedMorphTargets?(l.sort(a),l.length=r.numSupportedMorphTargets):l.length>r.numSupportedMorphNormals?l.sort(a):0===l.length&&l.push([0,0]);for(var h=0,c=r.numSupportedMorphTargets;c>h;h++)if(l[h]){var d=l[h][1];o=i["morphTarget"+h],o>=0&&(X.bindBuffer(X.ARRAY_BUFFER,n.__webglMorphTargetsBuffers[d]),Ee.enableAttribute(o),X.vertexAttribPointer(o,3,X.FLOAT,!1,0,0)),o=i["morphNormal"+h],o>=0&&r.morphNormals&&(X.bindBuffer(X.ARRAY_BUFFER,n.__webglMorphNormalsBuffers[d]),Ee.enableAttribute(o),X.vertexAttribPointer(o,3,X.FLOAT,!1,0,0)),s.__webglMorphTargetInfluences[h]=u[d]}else s.__webglMorphTargetInfluences[h]=0}null!==r.program.uniforms.morphTargetInfluences&&X.uniform1fv(r.program.uniforms.morphTargetInfluences,s.__webglMorphTargetInfluences)}if(t){if(n.__webglCustomAttributesList)for(i=0,u=n.__webglCustomAttributesList.length;u>i;i++)l=n.__webglCustomAttributesList[i],0<=e[l.buffer.belongsToAttribute]&&(X.bindBuffer(X.ARRAY_BUFFER,l.buffer),Ee.enableAttribute(e[l.buffer.belongsToAttribute]),X.vertexAttribPointer(e[l.buffer.belongsToAttribute],l.size,X.FLOAT,!1,0,0));0<=e.color&&(0<s.geometry.colors.length||0<s.geometry.faces.length?(X.bindBuffer(X.ARRAY_BUFFER,n.__webglColorBuffer),Ee.enableAttribute(e.color),X.vertexAttribPointer(e.color,3,X.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&X.vertexAttrib3fv(e.color,r.defaultAttributeValues.color)),0<=e.normal&&(X.bindBuffer(X.ARRAY_BUFFER,n.__webglNormalBuffer),Ee.enableAttribute(e.normal),X.vertexAttribPointer(e.normal,3,X.FLOAT,!1,0,0)),0<=e.tangent&&(X.bindBuffer(X.ARRAY_BUFFER,n.__webglTangentBuffer),Ee.enableAttribute(e.tangent),X.vertexAttribPointer(e.tangent,4,X.FLOAT,!1,0,0)),0<=e.uv&&(s.geometry.faceVertexUvs[0]?(X.bindBuffer(X.ARRAY_BUFFER,n.__webglUVBuffer),Ee.enableAttribute(e.uv),X.vertexAttribPointer(e.uv,2,X.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&X.vertexAttrib2fv(e.uv,r.defaultAttributeValues.uv)),0<=e.uv2&&(s.geometry.faceVertexUvs[1]?(X.bindBuffer(X.ARRAY_BUFFER,n.__webglUV2Buffer),Ee.enableAttribute(e.uv2),X.vertexAttribPointer(e.uv2,2,X.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&X.vertexAttrib2fv(e.uv2,r.defaultAttributeValues.uv2)),r.skinning&&0<=e.skinIndex&&0<=e.skinWeight&&(X.bindBuffer(X.ARRAY_BUFFER,n.__webglSkinIndicesBuffer),Ee.enableAttribute(e.skinIndex),X.vertexAttribPointer(e.skinIndex,4,X.FLOAT,!1,0,0),X.bindBuffer(X.ARRAY_BUFFER,n.__webglSkinWeightsBuffer),Ee.enableAttribute(e.skinWeight),X.vertexAttribPointer(e.skinWeight,4,X.FLOAT,!1,0,0)),0<=e.lineDistance&&(X.bindBuffer(X.ARRAY_BUFFER,n.__webglLineDistanceBuffer),Ee.enableAttribute(e.lineDistance),X.vertexAttribPointer(e.lineDistance,1,X.FLOAT,!1,0,0))}Ee.disableUnusedAttributes(),s instanceof THREE.Mesh?(s=n.__typeArray===Uint32Array?X.UNSIGNED_INT:X.UNSIGNED_SHORT,r.wireframe?(Ee.setLineWidth(r.wireframeLinewidth*A),t&&X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,n.__webglLineBuffer),X.drawElements(X.LINES,n.__webglLineCount,s,0)):(t&&X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,n.__webglFaceBuffer),X.drawElements(X.TRIANGLES,n.__webglFaceCount,s,0)),Y.info.render.calls++,Y.info.render.vertices+=n.__webglFaceCount,Y.info.render.faces+=n.__webglFaceCount/3):s instanceof THREE.Line?(s=s.mode===THREE.LineStrip?X.LINE_STRIP:X.LINES,Ee.setLineWidth(r.linewidth*A),X.drawArrays(s,0,n.__webglLineCount),Y.info.render.calls++):s instanceof THREE.PointCloud&&(X.drawArrays(X.POINTS,0,n.__webglParticleCount),Y.info.render.calls++,Y.info.render.points+=n.__webglParticleCount)}},this.render=function(t,e,i,r){if(!1==e instanceof THREE.Camera)THREE.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var a=t.fog;te="",J=-1,ee=null,pe=!0,!0===t.autoUpdate&&t.updateMatrixWorld(),void 0===e.parent&&e.updateMatrixWorld(),t.traverse(function(t){t instanceof THREE.SkinnedMesh&&t.skeleton.update()}),e.matrixWorldInverse.getInverse(e.matrixWorld),ue.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),le.setFromMatrix(ue),U.length=0,$.length=0,G.length=0,W.length=0,q.length=0,o(t),!0===Y.sortObjects&&($.sort(n),G.sort(s)),ke.render(t,e),Y.info.render.calls=0,Y.info.render.vertices=0,Y.info.render.faces=0,Y.info.render.points=0,this.setRenderTarget(i),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r=0;for(var c=V.length;c>r;r++){var d=V[r],p=d.object;p.visible&&(y(p,e),u(d))}t.overrideMaterial?(r=t.overrideMaterial,g(r),h($,e,U,a,r),h(G,e,U,a,r),l(V,"",e,U,a,r)):(Ee.setBlending(THREE.NoBlending),h($,e,U,a,null),l(V,"opaque",e,U,a,null),h(G,e,U,a,null),l(V,"transparent",e,U,a,null)),Ie.render(t,e),Ne.render(t,e,oe,he),i&&i.generateMipmaps&&i.minFilter!==THREE.NearestFilter&&i.minFilter!==THREE.LinearFilter&&w(i),Ee.setDepthTest(!0),Ee.setDepthWrite(!0),Ee.setColorWrite(!0)}},this.renderImmediateObject=function(t,e,i,r,n){var s=E(t,e,i,r,n);te="",Y.setMaterialFaces(r),n.immediateRenderCallback?n.immediateRenderCallback(s,X,le):n.render(function(t){Y.renderBufferImmediate(t,s,r)})};var Ge={},We=0,qe={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointCloudMaterial:"particle_basic"};this.setFaceCulling=function(t,e){t===THREE.CullFaceNone?X.disable(X.CULL_FACE):(X.frontFace(e===THREE.FrontFaceDirectionCW?X.CW:X.CCW),X.cullFace(t===THREE.CullFaceBack?X.BACK:t===THREE.CullFaceFront?X.FRONT:X.FRONT_AND_BACK),X.enable(X.CULL_FACE))},this.setMaterialFaces=function(t){Ee.setDoubleSided(t.side===THREE.DoubleSide),Ee.setFlipSided(t.side===THREE.BackSide)},this.uploadTexture=function(t){void 0===t.__webglInit&&(t.__webglInit=!0,t.addEventListener("dispose",Be),t.__webglTexture=X.createTexture(),Y.info.memory.textures++),X.bindTexture(X.TEXTURE_2D,t.__webglTexture),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,t.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,t.unpackAlignment),t.image=R(t.image,be);var e=t.image,i=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height),r=S(t.format),n=S(t.type);x(X.TEXTURE_2D,t,i);var s=t.mipmaps;if(t instanceof THREE.DataTexture)if(0<s.length&&i){for(var a=0,o=s.length;o>a;a++)e=s[a],X.texImage2D(X.TEXTURE_2D,a,r,e.width,e.height,0,r,n,e.data);t.generateMipmaps=!1}else X.texImage2D(X.TEXTURE_2D,0,r,e.width,e.height,0,r,n,e.data);else if(t instanceof THREE.CompressedTexture)for(a=0,o=s.length;o>a;a++)e=s[a],t.format!==THREE.RGBAFormat&&t.format!==THREE.RGBFormat?-1<Le().indexOf(r)?X.compressedTexImage2D(X.TEXTURE_2D,a,r,e.width,e.height,0,e.data):THREE.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):X.texImage2D(X.TEXTURE_2D,a,r,e.width,e.height,0,r,n,e.data);else if(0<s.length&&i){for(a=0,o=s.length;o>a;a++)e=s[a],X.texImage2D(X.TEXTURE_2D,a,r,r,n,e);t.generateMipmaps=!1}else X.texImage2D(X.TEXTURE_2D,0,r,r,n,t.image);t.generateMipmaps&&i&&X.generateMipmap(X.TEXTURE_2D),t.needsUpdate=!1,t.onUpdate&&t.onUpdate()},this.setTexture=function(t,e){X.activeTexture(X.TEXTURE0+e),t.needsUpdate?Y.uploadTexture(t):X.bindTexture(X.TEXTURE_2D,t.__webglTexture)},this.setRenderTarget=function(t){var e=t instanceof THREE.WebGLRenderTargetCube;if(t&&void 0===t.__webglFramebuffer){void 0===t.depthBuffer&&(t.depthBuffer=!0),void 0===t.stencilBuffer&&(t.stencilBuffer=!0),t.addEventListener("dispose",Ue),t.__webglTexture=X.createTexture(),Y.info.memory.textures++;var i=THREE.Math.isPowerOfTwo(t.width)&&THREE.Math.isPowerOfTwo(t.height),r=S(t.format),n=S(t.type);if(e){t.__webglFramebuffer=[],t.__webglRenderbuffer=[],X.bindTexture(X.TEXTURE_CUBE_MAP,t.__webglTexture),x(X.TEXTURE_CUBE_MAP,t,i);for(var s=0;6>s;s++){t.__webglFramebuffer[s]=X.createFramebuffer(),t.__webglRenderbuffer[s]=X.createRenderbuffer(),X.texImage2D(X.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,r,t.width,t.height,0,r,n,null);var a=t,o=X.TEXTURE_CUBE_MAP_POSITIVE_X+s;X.bindFramebuffer(X.FRAMEBUFFER,t.__webglFramebuffer[s]),X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,o,a.__webglTexture,0),b(t.__webglRenderbuffer[s],t)}i&&X.generateMipmap(X.TEXTURE_CUBE_MAP)}else t.__webglFramebuffer=X.createFramebuffer(),t.__webglRenderbuffer=t.shareDepthFrom?t.shareDepthFrom.__webglRenderbuffer:X.createRenderbuffer(),X.bindTexture(X.TEXTURE_2D,t.__webglTexture),x(X.TEXTURE_2D,t,i),X.texImage2D(X.TEXTURE_2D,0,r,t.width,t.height,0,r,n,null),r=X.TEXTURE_2D,X.bindFramebuffer(X.FRAMEBUFFER,t.__webglFramebuffer),X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,r,t.__webglTexture,0),t.shareDepthFrom?t.depthBuffer&&!t.stencilBuffer?X.framebufferRenderbuffer(X.FRAMEBUFFER,X.DEPTH_ATTACHMENT,X.RENDERBUFFER,t.__webglRenderbuffer):t.depthBuffer&&t.stencilBuffer&&X.framebufferRenderbuffer(X.FRAMEBUFFER,X.DEPTH_STENCIL_ATTACHMENT,X.RENDERBUFFER,t.__webglRenderbuffer):b(t.__webglRenderbuffer,t),i&&X.generateMipmap(X.TEXTURE_2D);e?X.bindTexture(X.TEXTURE_CUBE_MAP,null):X.bindTexture(X.TEXTURE_2D,null),X.bindRenderbuffer(X.RENDERBUFFER,null),X.bindFramebuffer(X.FRAMEBUFFER,null)}t?(e=e?t.__webglFramebuffer[t.activeCubeFace]:t.__webglFramebuffer,i=t.width,t=t.height,n=r=0):(e=null,i=se,t=ae,r=re,n=ne),e!==Z&&(X.bindFramebuffer(X.FRAMEBUFFER,e),X.viewport(r,n,i,t),Z=e),oe=i,he=t},this.readRenderTargetPixels=function(t,e,i,r,n,s){if(t instanceof THREE.WebGLRenderTarget){if(t.__webglFramebuffer)if(t.format!==THREE.RGBAFormat)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");else{var a=!1;t.__webglFramebuffer!==Z&&(X.bindFramebuffer(X.FRAMEBUFFER,t.__webglFramebuffer),a=!0),X.checkFramebufferStatus(X.FRAMEBUFFER)===X.FRAMEBUFFER_COMPLETE?X.readPixels(e,i,r,n,X.RGBA,X.UNSIGNED_BYTE,s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."),a&&X.bindFramebuffer(X.FRAMEBUFFER,Z)}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.initMaterial=function(){THREE.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){THREE.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){THREE.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){THREE.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},THREE.WebGLRenderTarget=function(t,e,i){this.width=t,this.height=e,i=i||{},this.wrapS=void 0!==i.wrapS?i.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==i.wrapT?i.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==i.magFilter?i.magFilter:THREE.LinearFilter,this.minFilter=void 0!==i.minFilter?i.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==i.format?i.format:THREE.RGBAFormat,this.type=void 0!==i.type?i.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==i.depthBuffer?i.depthBuffer:!0,this.stencilBuffer=void 0!==i.stencilBuffer?i.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=void 0!==i.shareDepthFrom?i.shareDepthFrom:null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(t,e){this.width=t,this.height=e},clone:function(){var t=new THREE.WebGLRenderTarget(this.width,this.height);return t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.magFilter=this.magFilter,t.minFilter=this.minFilter,t.anisotropy=this.anisotropy,t.offset.copy(this.offset),t.repeat.copy(this.repeat),t.format=this.format,t.type=this.type,t.depthBuffer=this.depthBuffer,t.stencilBuffer=this.stencilBuffer,t.generateMipmaps=this.generateMipmaps,t.shareDepthFrom=this.shareDepthFrom,t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(t,e,i){THREE.WebGLRenderTarget.call(this,t,e,i),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube,THREE.WebGLExtensions=function(t){var e={};this.get=function(i){if(void 0!==e[i])return e[i];var r;switch(i){case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return null===r&&THREE.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=r}},THREE.WebGLProgram=function(){var t=0;return function(e,i,r,n){var s=e.context,a=r.defines,o=r.__webglShader.uniforms,h=r.attributes,l=r.__webglShader.vertexShader,u=r.__webglShader.fragmentShader,c=r.index0AttributeName;void 0===c&&!0===n.morphTargets&&(c="position");var d="SHADOWMAP_TYPE_BASIC";n.shadowMapType===THREE.PCFShadowMap?d="SHADOWMAP_TYPE_PCF":n.shadowMapType===THREE.PCFSoftShadowMap&&(d="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(r.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:p="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:p="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:p="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case THREE.MultiplyOperation:m="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:m="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:m="ENVMAP_BLENDING_ADD"}}var g,E,v=0<e.gammaFactor?e.gammaFactor:1;g=[];for(var _ in a)E=a[_],!1!==E&&(E="#define "+_+" "+E,g.push(E));g=g.join("\n"),a=s.createProgram(),r instanceof THREE.RawShaderMaterial?e=r="":(r=["precision "+n.precision+" float;","precision "+n.precision+" int;",g,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.gammaInput?"#define GAMMA_INPUT":"",e.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+v,"#define MAX_DIR_LIGHTS "+n.maxDirLights,"#define MAX_POINT_LIGHTS "+n.maxPointLights,"#define MAX_SPOT_LIGHTS "+n.maxSpotLights,"#define MAX_HEMI_LIGHTS "+n.maxHemiLights,"#define MAX_SHADOWS "+n.maxShadows,"#define MAX_BONES "+n.maxBones,n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals?"#define USE_MORPHNORMALS":"",n.wrapAround?"#define WRAP_AROUND":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",n.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n	attribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n	attribute vec3 morphTarget0;\n	attribute vec3 morphTarget1;\n	attribute vec3 morphTarget2;\n	attribute vec3 morphTarget3;\n	#ifdef USE_MORPHNORMALS\n		attribute vec3 morphNormal0;\n		attribute vec3 morphNormal1;\n		attribute vec3 morphNormal2;\n		attribute vec3 morphNormal3;\n	#else\n		attribute vec3 morphTarget4;\n		attribute vec3 morphTarget5;\n		attribute vec3 morphTarget6;\n		attribute vec3 morphTarget7;\n	#endif\n#endif\n#ifdef USE_SKINNING\n	attribute vec4 skinIndex;\n	attribute vec4 skinWeight;\n#endif\n"].join("\n"),e=["precision "+n.precision+" float;","precision "+n.precision+" int;",n.bumpMap||n.normalMap||n.flatShading?"#extension GL_OES_standard_derivatives : enable":"",g,"#define MAX_DIR_LIGHTS "+n.maxDirLights,"#define MAX_POINT_LIGHTS "+n.maxPointLights,"#define MAX_SPOT_LIGHTS "+n.maxSpotLights,"#define MAX_HEMI_LIGHTS "+n.maxHemiLights,"#define MAX_SHADOWS "+n.maxShadows,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"",e.gammaInput?"#define GAMMA_INPUT":"",e.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.envMap?"#define "+f:"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.metal?"#define METAL":"",n.wrapAround?"#define WRAP_AROUND":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",n.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n")),l=new THREE.WebGLShader(s,s.VERTEX_SHADER,r+l),u=new THREE.WebGLShader(s,s.FRAGMENT_SHADER,e+u),s.attachShader(a,l),s.attachShader(a,u),void 0!==c&&s.bindAttribLocation(a,0,c),s.linkProgram(a),c=s.getProgramInfoLog(a),!1===s.getProgramParameter(a,s.LINK_STATUS)&&THREE.error("THREE.WebGLProgram: shader error: "+s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(a,s.VALIDATE_STATUS),"gl.getPRogramInfoLog",c),""!==c&&THREE.warn("THREE.WebGLProgram: gl.getProgramInfoLog()"+c),s.deleteShader(l),s.deleteShader(u),c="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" "),n.useVertexTexture?(c.push("boneTexture"),c.push("boneTextureWidth"),c.push("boneTextureHeight")):c.push("boneGlobalMatrices"),n.logarithmicDepthBuffer&&c.push("logDepthBufFC");for(var y in o)c.push(y);for(o=c,y={},c=0,e=o.length;e>c;c++)d=o[c],y[d]=s.getUniformLocation(a,d);for(this.uniforms=y,c="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" "),o=0;o<n.maxMorphTargets;o++)c.push("morphTarget"+o);for(o=0;o<n.maxMorphNormals;o++)c.push("morphNormal"+o);for(var T in h)c.push(T);for(n=c,h={},T=0,o=n.length;o>T;T++)y=n[T],h[y]=s.getAttribLocation(a,y);return this.attributes=h,this.attributesKeys=Object.keys(this.attributes),this.id=t++,this.code=i,this.usedTimes=1,this.program=a,this.vertexShader=l,this.fragmentShader=u,this}}(),THREE.WebGLShader=function(){var t=function(t){t=t.split("\n");for(var e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")};return function(e,i,r){return i=e.createShader(i),e.shaderSource(i,r),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&THREE.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&THREE.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e.getShaderInfoLog(i),t(r)),i}}(),THREE.WebGLState=function(t,e){var i=new Uint8Array(16),r=new Uint8Array(16),n=null,s=null,a=null,o=null,h=null,l=null,u=null,c=null,d=null,p=null,f=null,m=null,g=null,E=null,v=null,_=null;this.initAttributes=function(){for(var t=0,e=i.length;e>t;t++)i[t]=0},this.enableAttribute=function(e){i[e]=1,0===r[e]&&(t.enableVertexAttribArray(e),r[e]=1)},this.disableUnusedAttributes=function(){for(var e=0,n=r.length;n>e;e++)r[e]!==i[e]&&(t.disableVertexAttribArray(e),r[e]=0)},this.setBlending=function(i,r,c,d,p,f,m){i!==n&&(i===THREE.NoBlending?t.disable(t.BLEND):i===THREE.AdditiveBlending?(t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):i===THREE.SubtractiveBlending?(t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):i===THREE.MultiplyBlending?(t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):i===THREE.CustomBlending?t.enable(t.BLEND):(t.enable(t.BLEND),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),n=i),i===THREE.CustomBlending?(p=p||r,f=f||c,m=m||d,(r!==s||p!==h)&&(t.blendEquationSeparate(e(r),e(p)),s=r,h=p),(c!==a||d!==o||f!==l||m!==u)&&(t.blendFuncSeparate(e(c),e(d),e(f),e(m)),a=c,o=d,l=f,u=m)):u=l=h=o=a=s=null},this.setDepthTest=function(e){c!==e&&(e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),c=e)},this.setDepthWrite=function(e){d!==e&&(t.depthMask(e),d=e)},this.setColorWrite=function(e){p!==e&&(t.colorMask(e,e,e,e),p=e)},this.setDoubleSided=function(e){f!==e&&(e?t.disable(t.CULL_FACE):t.enable(t.CULL_FACE),f=e)},this.setFlipSided=function(e){m!==e&&(t.frontFace(e?t.CW:t.CCW),m=e)},this.setLineWidth=function(e){e!==g&&(t.lineWidth(e),g=e)},this.setPolygonOffset=function(e,i,r){E!==e&&(e?t.enable(t.POLYGON_OFFSET_FILL):t.disable(t.POLYGON_OFFSET_FILL),E=e),!e||v===i&&_===r||(t.polygonOffset(i,r),v=i,_=r)},this.reset=function(){for(var t=0;t<r.length;t++)r[t]=0;m=f=p=d=c=n=null}},THREE.LensFlarePlugin=function(t,e){var i,r,n,s,a,o,h,l,u,c,d,p,f,m,g,E,v=t.context;this.render=function(_,y,T,x){if(0!==e.length){_=new THREE.Vector3;var R=x/T,b=.5*T,w=.5*x,H=16/x,S=new THREE.Vector2(H*R,H),M=new THREE.Vector3(1,1,0),C=new THREE.Vector2(1,1);if(void 0===f){var H=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),A=new Uint16Array([0,1,2,0,2,3]);d=v.createBuffer(),p=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,d),v.bufferData(v.ARRAY_BUFFER,H,v.STATIC_DRAW),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,p),v.bufferData(v.ELEMENT_ARRAY_BUFFER,A,v.STATIC_DRAW),g=v.createTexture(),E=v.createTexture(),v.bindTexture(v.TEXTURE_2D,g),v.texImage2D(v.TEXTURE_2D,0,v.RGB,16,16,0,v.RGB,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.bindTexture(v.TEXTURE_2D,E),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,16,16,0,v.RGBA,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST);var H=(m=0<v.getParameter(v.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},A=v.createProgram(),P=v.createShader(v.FRAGMENT_SHADER),L=v.createShader(v.VERTEX_SHADER),O="precision "+t.getPrecision()+" float;\n";
v.shaderSource(P,O+H.fragmentShader),v.shaderSource(L,O+H.vertexShader),v.compileShader(P),v.compileShader(L),v.attachShader(A,P),v.attachShader(A,L),v.linkProgram(A),f=A,u=v.getAttribLocation(f,"position"),c=v.getAttribLocation(f,"uv"),i=v.getUniformLocation(f,"renderType"),r=v.getUniformLocation(f,"map"),n=v.getUniformLocation(f,"occlusionMap"),s=v.getUniformLocation(f,"opacity"),a=v.getUniformLocation(f,"color"),o=v.getUniformLocation(f,"scale"),h=v.getUniformLocation(f,"rotation"),l=v.getUniformLocation(f,"screenPosition")}for(v.useProgram(f),v.enableVertexAttribArray(u),v.enableVertexAttribArray(c),v.uniform1i(n,0),v.uniform1i(r,1),v.bindBuffer(v.ARRAY_BUFFER,d),v.vertexAttribPointer(u,2,v.FLOAT,!1,16,0),v.vertexAttribPointer(c,2,v.FLOAT,!1,16,8),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,p),v.disable(v.CULL_FACE),v.depthMask(!1),A=0,P=e.length;P>A;A++)if(H=16/x,S.set(H*R,H),L=e[A],_.set(L.matrixWorld.elements[12],L.matrixWorld.elements[13],L.matrixWorld.elements[14]),_.applyMatrix4(y.matrixWorldInverse),_.applyProjection(y.projectionMatrix),M.copy(_),C.x=M.x*b+b,C.y=M.y*w+w,m||0<C.x&&C.x<T&&0<C.y&&C.y<x){v.activeTexture(v.TEXTURE1),v.bindTexture(v.TEXTURE_2D,g),v.copyTexImage2D(v.TEXTURE_2D,0,v.RGB,C.x-8,C.y-8,16,16,0),v.uniform1i(i,0),v.uniform2f(o,S.x,S.y),v.uniform3f(l,M.x,M.y,M.z),v.disable(v.BLEND),v.enable(v.DEPTH_TEST),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,E),v.copyTexImage2D(v.TEXTURE_2D,0,v.RGBA,C.x-8,C.y-8,16,16,0),v.uniform1i(i,1),v.disable(v.DEPTH_TEST),v.activeTexture(v.TEXTURE1),v.bindTexture(v.TEXTURE_2D,g),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0),L.positionScreen.copy(M),L.customUpdateCallback?L.customUpdateCallback(L):L.updateLensFlares(),v.uniform1i(i,2),v.enable(v.BLEND);for(var O=0,D=L.lensFlares.length;D>O;O++){var k=L.lensFlares[O];.001<k.opacity&&.001<k.scale&&(M.x=k.x,M.y=k.y,M.z=k.z,H=k.size*k.scale/x,S.x=H*R,S.y=H,v.uniform3f(l,M.x,M.y,M.z),v.uniform2f(o,S.x,S.y),v.uniform1f(h,k.rotation),v.uniform1f(s,k.opacity),v.uniform3f(a,k.color.r,k.color.g,k.color.b),t.state.setBlending(k.blending,k.blendEquation,k.blendSrc,k.blendDst),t.setTexture(k.texture,1),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0))}}v.enable(v.CULL_FACE),v.enable(v.DEPTH_TEST),v.depthMask(!0),t.resetGLState()}}},THREE.ShadowMapPlugin=function(t,e,i,r){function n(t,e,r){if(e.visible){var s=i[e.id];if(s&&e.castShadow&&(!1===e.frustumCulled||!0===u.intersectsObject(e)))for(var a=0,o=s.length;o>a;a++){var h=s[a];e._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),m.push(h)}for(a=0,o=e.children.length;o>a;a++)n(t,e.children[a],r)}}var s,a,o,h,l=t.context,u=new THREE.Frustum,c=new THREE.Matrix4,d=new THREE.Vector3,p=new THREE.Vector3,f=new THREE.Vector3,m=[],g=THREE.ShaderLib.depthRGBA,E=THREE.UniformsUtils.clone(g.uniforms);s=new THREE.ShaderMaterial({uniforms:E,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader}),a=new THREE.ShaderMaterial({uniforms:E,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,morphTargets:!0}),o=new THREE.ShaderMaterial({uniforms:E,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,skinning:!0}),h=new THREE.ShaderMaterial({uniforms:E,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,morphTargets:!0,skinning:!0}),s._shadowPass=!0,a._shadowPass=!0,o._shadowPass=!0,h._shadowPass=!0,this.render=function(i,g){if(!1!==t.shadowMapEnabled){var E,v,_,y,T,x,R,b,w=[];for(y=0,l.clearColor(1,1,1,1),l.disable(l.BLEND),l.enable(l.CULL_FACE),l.frontFace(l.CCW),l.cullFace(t.shadowMapCullFace===THREE.CullFaceFront?l.FRONT:l.BACK),t.state.setDepthTest(!0),E=0,v=e.length;v>E;E++)if(_=e[E],_.castShadow)if(_ instanceof THREE.DirectionalLight&&_.shadowCascade)for(T=0;T<_.shadowCascadeCount;T++){var H;if(_.shadowCascadeArray[T])H=_.shadowCascadeArray[T];else{R=_;var S=T;H=new THREE.DirectionalLight,H.isVirtual=!0,H.onlyShadow=!0,H.castShadow=!0,H.shadowCameraNear=R.shadowCameraNear,H.shadowCameraFar=R.shadowCameraFar,H.shadowCameraLeft=R.shadowCameraLeft,H.shadowCameraRight=R.shadowCameraRight,H.shadowCameraBottom=R.shadowCameraBottom,H.shadowCameraTop=R.shadowCameraTop,H.shadowCameraVisible=R.shadowCameraVisible,H.shadowDarkness=R.shadowDarkness,H.shadowBias=R.shadowCascadeBias[S],H.shadowMapWidth=R.shadowCascadeWidth[S],H.shadowMapHeight=R.shadowCascadeHeight[S],H.pointsWorld=[],H.pointsFrustum=[],b=H.pointsWorld,x=H.pointsFrustum;for(var M=0;8>M;M++)b[M]=new THREE.Vector3,x[M]=new THREE.Vector3;b=R.shadowCascadeNearZ[S],R=R.shadowCascadeFarZ[S],x[0].set(-1,-1,b),x[1].set(1,-1,b),x[2].set(-1,1,b),x[3].set(1,1,b),x[4].set(-1,-1,R),x[5].set(1,-1,R),x[6].set(-1,1,R),x[7].set(1,1,R),H.originalCamera=g,x=new THREE.Gyroscope,x.position.copy(_.shadowCascadeOffset),x.add(H),x.add(H.target),g.add(x),_.shadowCascadeArray[T]=H}S=_,b=T,R=S.shadowCascadeArray[b],R.position.copy(S.position),R.target.position.copy(S.target.position),R.lookAt(R.target),R.shadowCameraVisible=S.shadowCameraVisible,R.shadowDarkness=S.shadowDarkness,R.shadowBias=S.shadowCascadeBias[b],x=S.shadowCascadeNearZ[b],S=S.shadowCascadeFarZ[b],R=R.pointsFrustum,R[0].z=x,R[1].z=x,R[2].z=x,R[3].z=x,R[4].z=S,R[5].z=S,R[6].z=S,R[7].z=S,w[y]=H,y++}else w[y]=_,y++;for(E=0,v=w.length;v>E;E++){if(_=w[E],_.shadowMap||(T=THREE.LinearFilter,t.shadowMapType===THREE.PCFSoftShadowMap&&(T=THREE.NearestFilter),_.shadowMap=new THREE.WebGLRenderTarget(_.shadowMapWidth,_.shadowMapHeight,{minFilter:T,magFilter:T,format:THREE.RGBAFormat}),_.shadowMapSize=new THREE.Vector2(_.shadowMapWidth,_.shadowMapHeight),_.shadowMatrix=new THREE.Matrix4),!_.shadowCamera){if(_ instanceof THREE.SpotLight)_.shadowCamera=new THREE.PerspectiveCamera(_.shadowCameraFov,_.shadowMapWidth/_.shadowMapHeight,_.shadowCameraNear,_.shadowCameraFar);else{if(!(_ instanceof THREE.DirectionalLight)){THREE.error("THREE.ShadowMapPlugin: Unsupported light type for shadow",_);continue}_.shadowCamera=new THREE.OrthographicCamera(_.shadowCameraLeft,_.shadowCameraRight,_.shadowCameraTop,_.shadowCameraBottom,_.shadowCameraNear,_.shadowCameraFar)}i.add(_.shadowCamera),!0===i.autoUpdate&&i.updateMatrixWorld()}if(_.shadowCameraVisible&&!_.cameraHelper&&(_.cameraHelper=new THREE.CameraHelper(_.shadowCamera),i.add(_.cameraHelper)),_.isVirtual&&H.originalCamera==g){for(T=g,y=_.shadowCamera,x=_.pointsFrustum,R=_.pointsWorld,d.set(1/0,1/0,1/0),p.set(-1/0,-1/0,-1/0),S=0;8>S;S++)b=R[S],b.copy(x[S]),b.unproject(T),b.applyMatrix4(y.matrixWorldInverse),b.x<d.x&&(d.x=b.x),b.x>p.x&&(p.x=b.x),b.y<d.y&&(d.y=b.y),b.y>p.y&&(p.y=b.y),b.z<d.z&&(d.z=b.z),b.z>p.z&&(p.z=b.z);y.left=d.x,y.right=p.x,y.top=p.y,y.bottom=d.y,y.updateProjectionMatrix()}for(y=_.shadowMap,x=_.shadowMatrix,T=_.shadowCamera,T.position.setFromMatrixPosition(_.matrixWorld),f.setFromMatrixPosition(_.target.matrixWorld),T.lookAt(f),T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),_.cameraHelper&&(_.cameraHelper.visible=_.shadowCameraVisible),_.shadowCameraVisible&&_.cameraHelper.update(),x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(T.projectionMatrix),x.multiply(T.matrixWorldInverse),c.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),u.setFromMatrix(c),t.setRenderTarget(y),t.clear(),m.length=0,n(i,i,T),_=0,y=m.length;y>_;_++)R=m[_],x=R.object,R=R.buffer,S=x.material instanceof THREE.MeshFaceMaterial?x.material.materials[0]:x.material,b=void 0!==x.geometry.morphTargets&&0<x.geometry.morphTargets.length&&S.morphTargets,M=x instanceof THREE.SkinnedMesh&&S.skinning,b=x.customDepthMaterial?x.customDepthMaterial:M?b?h:o:b?a:s,t.setMaterialFaces(S),R instanceof THREE.BufferGeometry?t.renderBufferDirect(T,e,null,b,R,x):t.renderBuffer(T,e,null,b,R,x);for(_=0,y=r.length;y>_;_++)R=r[_],x=R.object,x.visible&&x.castShadow&&(x._modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,x.matrixWorld),t.renderImmediateObject(T,e,null,s,x))}E=t.getClearColor(),v=t.getClearAlpha(),l.clearColor(E.r,E.g,E.b,v),l.enable(l.BLEND),t.shadowMapCullFace===THREE.CullFaceFront&&l.cullFace(l.BACK),t.resetGLState()}}},THREE.SpritePlugin=function(t,e){function i(t,e){return t.z!==e.z?e.z-t.z:e.id-t.id}var r,n,s,a,o,h,l,u,c,d,p,f,m,g,E,v,_,y,T,x,R,b=t.context,w=new THREE.Vector3,H=new THREE.Quaternion,S=new THREE.Vector3;this.render=function(M,C){if(0!==e.length){if(void 0===x){var A=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),P=new Uint16Array([0,1,2,0,2,3]);y=b.createBuffer(),T=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,y),b.bufferData(b.ARRAY_BUFFER,A,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,T),b.bufferData(b.ELEMENT_ARRAY_BUFFER,P,b.STATIC_DRAW);var A=b.createProgram(),P=b.createShader(b.VERTEX_SHADER),L=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(P,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),b.shaderSource(L,["precision "+t.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),b.compileShader(P),b.compileShader(L),b.attachShader(A,P),b.attachShader(A,L),b.linkProgram(A),x=A,v=b.getAttribLocation(x,"position"),_=b.getAttribLocation(x,"uv"),r=b.getUniformLocation(x,"uvOffset"),n=b.getUniformLocation(x,"uvScale"),s=b.getUniformLocation(x,"rotation"),a=b.getUniformLocation(x,"scale"),o=b.getUniformLocation(x,"color"),h=b.getUniformLocation(x,"map"),l=b.getUniformLocation(x,"opacity"),u=b.getUniformLocation(x,"modelViewMatrix"),c=b.getUniformLocation(x,"projectionMatrix"),d=b.getUniformLocation(x,"fogType"),p=b.getUniformLocation(x,"fogDensity"),f=b.getUniformLocation(x,"fogNear"),m=b.getUniformLocation(x,"fogFar"),g=b.getUniformLocation(x,"fogColor"),E=b.getUniformLocation(x,"alphaTest"),A=document.createElement("canvas"),A.width=8,A.height=8,P=A.getContext("2d"),P.fillStyle="white",P.fillRect(0,0,8,8),R=new THREE.Texture(A),R.needsUpdate=!0}b.useProgram(x),b.enableVertexAttribArray(v),b.enableVertexAttribArray(_),b.disable(b.CULL_FACE),b.enable(b.BLEND),b.bindBuffer(b.ARRAY_BUFFER,y),b.vertexAttribPointer(v,2,b.FLOAT,!1,16,0),b.vertexAttribPointer(_,2,b.FLOAT,!1,16,8),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,T),b.uniformMatrix4fv(c,!1,C.projectionMatrix.elements),b.activeTexture(b.TEXTURE0),b.uniform1i(h,0),P=A=0,(L=M.fog)?(b.uniform3f(g,L.color.r,L.color.g,L.color.b),L instanceof THREE.Fog?(b.uniform1f(f,L.near),b.uniform1f(m,L.far),b.uniform1i(d,1),P=A=1):L instanceof THREE.FogExp2&&(b.uniform1f(p,L.density),b.uniform1i(d,2),P=A=2)):(b.uniform1i(d,0),P=A=0);for(var L=0,O=e.length;O>L;L++){var D=e[L];D._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,D.matrixWorld),D.z=-D._modelViewMatrix.elements[14]}e.sort(i);for(var k=[],L=0,O=e.length;O>L;L++){var D=e[L],I=D.material;b.uniform1f(E,I.alphaTest),b.uniformMatrix4fv(u,!1,D._modelViewMatrix.elements),D.matrixWorld.decompose(w,H,S),k[0]=S.x,k[1]=S.y,D=0,M.fog&&I.fog&&(D=P),A!==D&&(b.uniform1i(d,D),A=D),null!==I.map?(b.uniform2f(r,I.map.offset.x,I.map.offset.y),b.uniform2f(n,I.map.repeat.x,I.map.repeat.y)):(b.uniform2f(r,0,0),b.uniform2f(n,1,1)),b.uniform1f(l,I.opacity),b.uniform3f(o,I.color.r,I.color.g,I.color.b),b.uniform1f(s,I.rotation),b.uniform2fv(a,k),t.state.setBlending(I.blending,I.blendEquation,I.blendSrc,I.blendDst),t.state.setDepthTest(I.depthTest),t.state.setDepthWrite(I.depthWrite),I.map&&I.map.image&&I.map.image.width?t.setTexture(I.map,0):t.setTexture(R,0),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)}b.enable(b.CULL_FACE),t.resetGLState()}}},THREE.GeometryUtils={merge:function(t,e,i){THREE.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;e instanceof THREE.Mesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,i)},center:function(t){return THREE.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,i,r){var n=new THREE.ImageLoader;n.crossOrigin=this.crossOrigin;var s=new THREE.Texture(void 0,e);return n.load(t,function(t){s.image=t,s.needsUpdate=!0,i&&i(s)},void 0,function(t){r&&r(t)}),s.sourceFile=t,s},loadTextureCube:function(t,e,i,r){var n=new THREE.ImageLoader;n.crossOrigin=this.crossOrigin;var s=new THREE.CubeTexture([],e);s.flipY=!1;var a=0;e=function(e){n.load(t[e],function(t){s.images[e]=t,a+=1,6===a&&(s.needsUpdate=!0,i&&i(s))},void 0,r)};for(var o=0,h=t.length;h>o;++o)e(o);return s},loadCompressedTexture:function(){THREE.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){THREE.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(t,e){var i=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[t[0]/e,t[1]/e,t[2]/e]};e|=1;var r=t.width,n=t.height,s=document.createElement("canvas");s.width=r,s.height=n;var a=s.getContext("2d");a.drawImage(t,0,0);for(var o=a.getImageData(0,0,r,n).data,h=a.createImageData(r,n),l=h.data,u=0;r>u;u++)for(var c=0;n>c;c++){var d=0>c-1?0:c-1,p=c+1>n-1?n-1:c+1,f=0>u-1?0:u-1,m=u+1>r-1?r-1:u+1,g=[],E=[0,0,o[4*(c*r+u)]/255*e];for(g.push([-1,0,o[4*(c*r+f)]/255*e]),g.push([-1,-1,o[4*(d*r+f)]/255*e]),g.push([0,-1,o[4*(d*r+u)]/255*e]),g.push([1,-1,o[4*(d*r+m)]/255*e]),g.push([1,0,o[4*(c*r+m)]/255*e]),g.push([1,1,o[4*(p*r+m)]/255*e]),g.push([0,1,o[4*(p*r+u)]/255*e]),g.push([-1,1,o[4*(p*r+f)]/255*e]),d=[],f=g.length,p=0;f>p;p++){var m=g[p],v=g[(p+1)%f],m=[m[0]-E[0],m[1]-E[1],m[2]-E[2]],v=[v[0]-E[0],v[1]-E[1],v[2]-E[2]];d.push(i([m[1]*v[2]-m[2]*v[1],m[2]*v[0]-m[0]*v[2],m[0]*v[1]-m[1]*v[0]]))}for(g=[0,0,0],p=0;p<d.length;p++)g[0]+=d[p][0],g[1]+=d[p][1],g[2]+=d[p][2];g[0]/=d.length,g[1]/=d.length,g[2]/=d.length,E=4*(c*r+u),l[E]=(g[0]+1)/2*255|0,l[E+1]=(g[1]+1)/2*255|0,l[E+2]=255*g[2]|0,l[E+3]=255}return a.putImageData(h,0,0),s},generateDataTexture:function(t,e,i){var r=t*e,n=new Uint8Array(3*r),s=Math.floor(255*i.r),a=Math.floor(255*i.g);i=Math.floor(255*i.b);for(var o=0;r>o;o++)n[3*o]=s,n[3*o+1]=a,n[3*o+2]=i;return t=new THREE.DataTexture(n,t,e,THREE.RGBFormat),t.needsUpdate=!0,t}},THREE.SceneUtils={createMultiMaterialObject:function(t,e){for(var i=new THREE.Object3D,r=0,n=e.length;n>r;r++)i.add(new THREE.Mesh(t,e[r]));return i},detach:function(t,e,i){t.applyMatrix(e.matrixWorld),e.remove(t),i.add(t)},attach:function(t,e,i){var r=new THREE.Matrix4;r.getInverse(i.matrixWorld),t.applyMatrix(r),e.remove(t),i.add(t)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(t){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(t){var e=t.familyName.toLowerCase();return this.faces[e]=this.faces[e]||{},this.faces[e][t.cssFontWeight]=this.faces[e][t.cssFontWeight]||{},this.faces[e][t.cssFontWeight][t.cssFontStyle]=t,this.faces[e][t.cssFontWeight][t.cssFontStyle]=t},drawText:function(t){var e=this.getFace(),i=this.size/e.resolution,r=0,n=String(t).split(""),s=n.length,a=[];for(t=0;s>t;t++){var o=new THREE.Path,o=this.extractGlyphPoints(n[t],e,i,r,o),r=r+o.offset;a.push(o.path)}return{paths:a,offset:r/2}},extractGlyphPoints:function(t,e,i,r,n){var s,a,o,h,l,u,c,d,p,f,m,g=[],E=e.glyphs[t]||e.glyphs["?"];if(E){if(E.o)for(e=E._cachedOutline||(E._cachedOutline=E.o.split(" ")),h=e.length,t=0;h>t;)switch(o=e[t++]){case"m":o=e[t++]*i+r,l=e[t++]*i,n.moveTo(o,l);break;case"l":o=e[t++]*i+r,l=e[t++]*i,n.lineTo(o,l);break;case"q":if(o=e[t++]*i+r,l=e[t++]*i,d=e[t++]*i+r,p=e[t++]*i,n.quadraticCurveTo(d,p,o,l),s=g[g.length-1])for(u=s.x,c=s.y,s=1,a=this.divisions;a>=s;s++){var v=s/a;THREE.Shape.Utils.b2(v,u,d,o),THREE.Shape.Utils.b2(v,c,p,l)}break;case"b":if(o=e[t++]*i+r,l=e[t++]*i,d=e[t++]*i+r,p=e[t++]*i,f=e[t++]*i+r,m=e[t++]*i,n.bezierCurveTo(d,p,f,m,o,l),s=g[g.length-1])for(u=s.x,c=s.y,s=1,a=this.divisions;a>=s;s++)v=s/a,THREE.Shape.Utils.b3(v,u,d,f,o),THREE.Shape.Utils.b3(v,c,p,m,l)}return{offset:E.ha*i,path:n}}}},THREE.FontUtils.generateShapes=function(t,e){e=e||{};var i=void 0!==e.curveSegments?e.curveSegments:4,r=void 0!==e.font?e.font:"helvetiker",n=void 0!==e.weight?e.weight:"normal",s=void 0!==e.style?e.style:"normal";for(THREE.FontUtils.size=void 0!==e.size?e.size:100,THREE.FontUtils.divisions=i,THREE.FontUtils.face=r,THREE.FontUtils.weight=n,THREE.FontUtils.style=s,i=THREE.FontUtils.drawText(t).paths,r=[],n=0,s=i.length;s>n;n++)Array.prototype.push.apply(r,i[n].toShapes());return r},function(t){var e=function(t){for(var e=t.length,i=0,r=e-1,n=0;e>n;r=n++)i+=t[r].x*t[n].y-t[n].x*t[r].y;return.5*i};return t.Triangulate=function(t,i){var r=t.length;if(3>r)return null;var n,s,a,o=[],h=[],l=[];if(0<e(t))for(s=0;r>s;s++)h[s]=s;else for(s=0;r>s;s++)h[s]=r-1-s;var u=2*r;for(s=r-1;r>2;){if(0>=u--){THREE.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()");break}n=s,n>=r&&(n=0),s=n+1,s>=r&&(s=0),a=s+1,a>=r&&(a=0);var c;t:{var d=c=void 0,p=void 0,f=void 0,m=void 0,g=void 0,E=void 0,v=void 0,_=void 0,d=t[h[n]].x,p=t[h[n]].y,f=t[h[s]].x,m=t[h[s]].y,g=t[h[a]].x,E=t[h[a]].y;if(1e-10>(f-d)*(E-p)-(m-p)*(g-d))c=!1;else{var y=void 0,T=void 0,x=void 0,R=void 0,b=void 0,w=void 0,H=void 0,S=void 0,M=void 0,C=void 0,M=S=H=_=v=void 0,y=g-f,T=E-m,x=d-g,R=p-E,b=f-d,w=m-p;for(c=0;r>c;c++)if(v=t[h[c]].x,_=t[h[c]].y,!(v===d&&_===p||v===f&&_===m||v===g&&_===E)&&(H=v-d,S=_-p,M=v-f,C=_-m,v-=g,_-=E,M=y*C-T*M,H=b*S-w*H,S=x*_-R*v,M>=-1e-10&&S>=-1e-10&&H>=-1e-10)){c=!1;break t}c=!0}}if(c){for(o.push([t[h[n]],t[h[s]],t[h[a]]]),l.push([h[n],h[s],h[a]]),n=s,a=s+1;r>a;n++,a++)h[n]=h[a];r--,u=2*r}}return i?l:o},t.Triangulate.area=e,t}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Audio=function(t){THREE.Object3D.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain),this.autoplay=!1,this.startTime=0,this.isPlaying=!1},THREE.Audio.prototype=Object.create(THREE.Object3D.prototype),THREE.Audio.prototype.constructor=THREE.Audio,THREE.Audio.prototype.load=function(t){var e=this,i=new XMLHttpRequest;return i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){e.context.decodeAudioData(this.response,function(t){e.source.buffer=t,e.autoplay&&e.play()})},i.send(),this},THREE.Audio.prototype.play=function(){if(!0===this.isPlaying)THREE.warn("THREE.Audio: Audio is already playing.");else{var t=this.context.createBufferSource();t.buffer=this.source.buffer,t.loop=this.source.loop,t.onended=this.source.onended,t.connect(this.panner),t.start(0,this.startTime),this.isPlaying=!0,this.source=t}},THREE.Audio.prototype.pause=function(){this.source.stop(),this.startTime=this.context.currentTime},THREE.Audio.prototype.stop=function(){this.source.stop(),this.startTime=0},THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1},THREE.Audio.prototype.setLoop=function(t){this.source.loop=t},THREE.Audio.prototype.setRefDistance=function(t){this.panner.refDistance=t},THREE.Audio.prototype.setRolloffFactor=function(t){this.panner.rolloffFactor=t},THREE.Audio.prototype.setVolume=function(t){this.gain.gain.value=t},THREE.Audio.prototype.updateMatrixWorld=function(){var t=new THREE.Vector3;return function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}(),THREE.AudioListener=function(){THREE.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype),THREE.AudioListener.prototype.constructor=THREE.AudioListener,THREE.AudioListener.prototype.updateMatrixWorld=function(){var t=new THREE.Vector3,e=new THREE.Quaternion,i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector3,s=new THREE.Vector3;return function(a){THREE.Object3D.prototype.updateMatrixWorld.call(this,a),a=this.context.listener;var o=this.up;this.matrixWorld.decompose(t,e,i),r.set(0,0,-1).applyQuaternion(e),n.subVectors(t,s),a.setPosition(t.x,t.y,t.z),a.setOrientation(r.x,r.y,r.z,o.x,o.y,o.z),a.setVelocity(n.x,n.y,n.z),s.copy(t)}}(),THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(){return THREE.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(t){return t=this.getUtoTmapping(t),this.getPoint(t)},THREE.Curve.prototype.getPoints=function(t){t||(t=5);var e,i=[];for(e=0;t>=e;e++)i.push(this.getPoint(e/t));return i},THREE.Curve.prototype.getSpacedPoints=function(t){t||(t=5);var e,i=[];for(e=0;t>=e;e++)i.push(this.getPointAt(e/t));return i},THREE.Curve.prototype.getLength=function(){var t=this.getLengths();return t[t.length-1]},THREE.Curve.prototype.getLengths=function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,r=[],n=this.getPoint(0),s=0;for(r.push(0),i=1;t>=i;i++)e=this.getPoint(i/t),s+=e.distanceTo(n),r.push(s),n=e;return this.cacheArcLengths=r},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(t,e){var i,r=this.getLengths(),n=0,s=r.length;i=e?e:t*r[s-1];for(var a,o=0,h=s-1;h>=o;)if(n=Math.floor(o+(h-o)/2),a=r[n]-i,0>a)o=n+1;else{if(!(a>0)){h=n;break}h=n-1}return n=h,r[n]==i?n/(s-1):(o=r[n],r=(n+(i-o)/(r[n+1]-o))/(s-1))},THREE.Curve.prototype.getTangent=function(t){var e=t-1e-4;return t+=1e-4,0>e&&(e=0),t>1&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},THREE.Curve.prototype.getTangentAt=function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},THREE.Curve.Utils={tangentQuadraticBezier:function(t,e,i,r){return 2*(1-t)*(i-e)+2*t*(r-i)},tangentCubicBezier:function(t,e,i,r,n){return-3*e*(1-t)*(1-t)+3*i*(1-t)*(1-t)-6*t*i*(1-t)+6*t*r*(1-t)-3*t*t*r+3*t*t*n},tangentSpline:function(t){return 6*t*t-6*t+(3*t*t-4*t+1)+(-6*t*t+6*t)+(3*t*t-2*t)},interpolate:function(t,e,i,r,n){t=.5*(i-t),r=.5*(r-e);var s=n*n;return(2*e-2*i+t+r)*n*s+(-3*e+3*i-2*t-r)*s+t*n+e}},THREE.Curve.create=function(t,e){return t.prototype=Object.create(THREE.Curve.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.constructor=THREE.CurvePath,THREE.CurvePath.prototype.add=function(t){this.curves.push(t)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new THREE.LineCurve(e,t))},THREE.CurvePath.prototype.getPoint=function(t){var e=t*this.getLength(),i=this.getCurveLengths();for(t=0;t<i.length;){if(i[t]>=e)return e=i[t]-e,t=this.curves[t],e=1-e/t.getLength(),t.getPointAt(e);t++}return null},THREE.CurvePath.prototype.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var t,e=[],i=0,r=this.curves.length;for(t=0;r>t;t++)i+=this.curves[t].getLength(),e.push(i);return this.cacheLengths=e},THREE.CurvePath.prototype.getBoundingBox=function(){var t,e,i,r,n,s,a=this.getPoints();t=e=Number.NEGATIVE_INFINITY,r=n=Number.POSITIVE_INFINITY;var o,h,l,u,c=a[0]instanceof THREE.Vector3;for(u=c?new THREE.Vector3:new THREE.Vector2,h=0,l=a.length;l>h;h++)o=a[h],o.x>t?t=o.x:o.x<r&&(r=o.x),o.y>e?e=o.y:o.y<n&&(n=o.y),c&&(o.z>i?i=o.z:o.z<s&&(s=o.z)),u.add(o);return a={minX:r,minY:n,maxX:t,maxY:e},c&&(a.maxZ=i,a.minZ=s),a},THREE.CurvePath.prototype.createPointsGeometry=function(t){return t=this.getPoints(t,!0),this.createGeometry(t)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(t){return t=this.getSpacedPoints(t,!0),this.createGeometry(t)},THREE.CurvePath.prototype.createGeometry=function(t){for(var e=new THREE.Geometry,i=0;i<t.length;i++)e.vertices.push(new THREE.Vector3(t[i].x,t[i].y,t[i].z||0));return e},THREE.CurvePath.prototype.addWrapPath=function(t){this.bends.push(t)},THREE.CurvePath.prototype.getTransformedPoints=function(t,e){var i,r,n=this.getPoints(t);for(e||(e=this.bends),i=0,r=e.length;r>i;i++)n=this.getWrapPoints(n,e[i]);return n},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(t,e){var i,r,n=this.getSpacedPoints(t);for(e||(e=this.bends),i=0,r=e.length;r>i;i++)n=this.getWrapPoints(n,e[i]);return n},THREE.CurvePath.prototype.getWrapPoints=function(t,e){var i,r,n,s,a,o,h=this.getBoundingBox();for(i=0,r=t.length;r>i;i++)n=t[i],s=n.x,a=n.y,o=s/h.maxX,o=e.getUtoTmapping(o,s),s=e.getPoint(o),o=e.getTangent(o),o.set(-o.y,o.x).multiplyScalar(a),n.x=s.x+o.x,n.y=s.y+o.y;return t},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.constructor=THREE.Gyroscope,THREE.Gyroscope.prototype.updateMatrixWorld=function(){var t=new THREE.Vector3,e=new THREE.Quaternion,i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Quaternion,s=new THREE.Vector3;return function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(r,n,s),this.matrix.decompose(t,e,i),this.matrixWorld.compose(r,e,s)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var o=0,h=this.children.length;h>o;o++)this.children[o].updateMatrixWorld(a)}}(),THREE.Path=function(t){THREE.CurvePath.call(this),this.actions=[],t&&this.fromPoints(t)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.Path.prototype.constructor=THREE.Path,THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;i>e;e++)this.lineTo(t[e].x,t[e].y)},THREE.Path.prototype.moveTo=function(){var t=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:t})},THREE.Path.prototype.lineTo=function(t,e){var i=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,r=new THREE.LineCurve(new THREE.Vector2(r[r.length-2],r[r.length-1]),new THREE.Vector2(t,e));this.curves.push(r),this.actions.push({action:THREE.PathActions.LINE_TO,args:i})},THREE.Path.prototype.quadraticCurveTo=function(t,e,i,r){var n=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,s=new THREE.QuadraticBezierCurve(new THREE.Vector2(s[s.length-2],s[s.length-1]),new THREE.Vector2(t,e),new THREE.Vector2(i,r));this.curves.push(s),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:n})},THREE.Path.prototype.bezierCurveTo=function(t,e,i,r,n,s){var a=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,o=new THREE.CubicBezierCurve(new THREE.Vector2(o[o.length-2],o[o.length-1]),new THREE.Vector2(t,e),new THREE.Vector2(i,r),new THREE.Vector2(n,s));this.curves.push(o),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:a})},THREE.Path.prototype.splineThru=function(t){var e=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,i=[new THREE.Vector2(i[i.length-2],i[i.length-1])];Array.prototype.push.apply(i,t),i=new THREE.SplineCurve(i),this.curves.push(i),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:e})},THREE.Path.prototype.arc=function(t,e,i,r,n,s){var a=this.actions[this.actions.length-1].args;this.absarc(t+a[a.length-2],e+a[a.length-1],i,r,n,s)},THREE.Path.prototype.absarc=function(t,e,i,r,n,s){this.absellipse(t,e,i,i,r,n,s)},THREE.Path.prototype.ellipse=function(t,e,i,r,n,s,a){var o=this.actions[this.actions.length-1].args;this.absellipse(t+o[o.length-2],e+o[o.length-1],i,r,n,s,a)},THREE.Path.prototype.absellipse=function(t,e,i,r,n,s,a){var o=Array.prototype.slice.call(arguments),h=new THREE.EllipseCurve(t,e,i,r,n,s,a);this.curves.push(h),h=h.getPoint(1),o.push(h.x),o.push(h.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:o})},THREE.Path.prototype.getSpacedPoints=function(t){t||(t=40);for(var e=[],i=0;t>i;i++)e.push(this.getPoint(i/t));return e},THREE.Path.prototype.getPoints=function(t,e){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(t,e);t=t||12;var i,r,n,s,a,o,h,l,u,c,d,p,f,m=[];for(i=0,r=this.actions.length;r>i;i++)switch(n=this.actions[i],s=n.action,n=n.args,s){case THREE.PathActions.MOVE_TO:m.push(new THREE.Vector2(n[0],n[1]));break;case THREE.PathActions.LINE_TO:m.push(new THREE.Vector2(n[0],n[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(a=n[2],o=n[3],u=n[0],c=n[1],0<m.length?(s=m[m.length-1],d=s.x,p=s.y):(s=this.actions[i-1].args,d=s[s.length-2],p=s[s.length-1]),n=1;t>=n;n++)f=n/t,s=THREE.Shape.Utils.b2(f,d,u,a),f=THREE.Shape.Utils.b2(f,p,c,o),m.push(new THREE.Vector2(s,f));break;case THREE.PathActions.BEZIER_CURVE_TO:for(a=n[4],o=n[5],u=n[0],c=n[1],h=n[2],l=n[3],0<m.length?(s=m[m.length-1],d=s.x,p=s.y):(s=this.actions[i-1].args,d=s[s.length-2],p=s[s.length-1]),n=1;t>=n;n++)f=n/t,s=THREE.Shape.Utils.b3(f,d,u,h,a),f=THREE.Shape.Utils.b3(f,p,c,l,o),m.push(new THREE.Vector2(s,f));break;case THREE.PathActions.CSPLINE_THRU:for(s=this.actions[i-1].args,f=[new THREE.Vector2(s[s.length-2],s[s.length-1])],s=t*n[0].length,f=f.concat(n[0]),f=new THREE.SplineCurve(f),n=1;s>=n;n++)m.push(f.getPointAt(n/s));break;case THREE.PathActions.ARC:for(a=n[0],o=n[1],c=n[2],h=n[3],s=n[4],u=!!n[5],d=s-h,p=2*t,n=1;p>=n;n++)f=n/p,u||(f=1-f),f=h+f*d,s=a+c*Math.cos(f),f=o+c*Math.sin(f),m.push(new THREE.Vector2(s,f));break;case THREE.PathActions.ELLIPSE:for(a=n[0],o=n[1],c=n[2],l=n[3],h=n[4],s=n[5],u=!!n[6],d=s-h,p=2*t,n=1;p>=n;n++)f=n/p,u||(f=1-f),f=h+f*d,s=a+c*Math.cos(f),f=o+l*Math.sin(f),m.push(new THREE.Vector2(s,f))}return i=m[m.length-1],1e-10>Math.abs(i.x-m[0].x)&&1e-10>Math.abs(i.y-m[0].y)&&m.splice(m.length-1,1),e&&m.push(m[0]),m},THREE.Path.prototype.toShapes=function(t,e){function i(t){for(var e=[],i=0,r=t.length;r>i;i++){var n=t[i],s=new THREE.Shape;s.actions=n.actions,s.curves=n.curves,e.push(s)}return e}function r(t,e){for(var i=e.length,r=!1,n=i-1,s=0;i>s;n=s++){var a=e[n],o=e[s],h=o.x-a.x,l=o.y-a.y;if(1e-10<Math.abs(l)){if(0>l&&(a=e[s],h=-h,o=e[n],l=-l),!(t.y<a.y||t.y>o.y))if(t.y==a.y){if(t.x==a.x)return!0}else{if(n=l*(t.x-a.x)-h*(t.y-a.y),0==n)return!0;0>n||(r=!r)}}else if(t.y==a.y&&(o.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=o.x))return!0}return r}var n=function(t){var e,i,r,n,s=[],a=new THREE.Path;for(e=0,i=t.length;i>e;e++)r=t[e],n=r.args,r=r.action,r==THREE.PathActions.MOVE_TO&&0!=a.actions.length&&(s.push(a),a=new THREE.Path),a[r].apply(a,n);return 0!=a.actions.length&&s.push(a),s}(this.actions);if(0==n.length)return[];
if(!0===e)return i(n);var s,a,o,h=[];if(1==n.length)return a=n[0],o=new THREE.Shape,o.actions=a.actions,o.curves=a.curves,h.push(o),h;var l=!THREE.Shape.Utils.isClockWise(n[0].getPoints()),l=t?!l:l;o=[];var u,c=[],d=[],p=0;c[p]=void 0,d[p]=[];var f,m;for(f=0,m=n.length;m>f;f++)a=n[f],u=a.getPoints(),s=THREE.Shape.Utils.isClockWise(u),(s=t?!s:s)?(!l&&c[p]&&p++,c[p]={s:new THREE.Shape,p:u},c[p].s.actions=a.actions,c[p].s.curves=a.curves,l&&p++,d[p]=[]):d[p].push({h:a,p:u[0]});if(!c[0])return i(n);if(1<c.length){for(f=!1,m=[],a=0,n=c.length;n>a;a++)o[a]=[];for(a=0,n=c.length;n>a;a++)for(s=d[a],l=0;l<s.length;l++){p=s[l],u=!0;for(var g=0;g<c.length;g++)r(p.p,c[g].p)&&(a!=g&&m.push({froms:a,tos:g,hole:l}),u?(u=!1,o[g].push(p)):f=!0);u&&o[a].push(p)}0<m.length&&(f||(d=o))}for(f=0,m=c.length;m>f;f++)for(o=c[f].s,h.push(o),a=d[f],n=0,s=a.length;s>n;n++)o.holes.push(a[n].h);return h},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.constructor=THREE.Shape,THREE.Shape.prototype.extrude=function(t){return new THREE.ExtrudeGeometry(this,t)},THREE.Shape.prototype.makeGeometry=function(t){return new THREE.ShapeGeometry(this,t)},THREE.Shape.prototype.getPointsHoles=function(t){var e,i=this.holes.length,r=[];for(e=0;i>e;e++)r[e]=this.holes[e].getTransformedPoints(t,this.bends);return r},THREE.Shape.prototype.getSpacedPointsHoles=function(t){var e,i=this.holes.length,r=[];for(e=0;i>e;e++)r[e]=this.holes[e].getTransformedSpacedPoints(t,this.bends);return r},THREE.Shape.prototype.extractAllPoints=function(t){return{shape:this.getTransformedPoints(t),holes:this.getPointsHoles(t)}},THREE.Shape.prototype.extractPoints=function(t){return this.useSpacedPoints?this.extractAllSpacedPoints(t):this.extractAllPoints(t)},THREE.Shape.prototype.extractAllSpacedPoints=function(t){return{shape:this.getTransformedSpacedPoints(t),holes:this.getSpacedPointsHoles(t)}},THREE.Shape.Utils={triangulateShape:function(t,e){function i(t,e,i){return t.x!=e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function r(t,e,r,n,s){var a=e.x-t.x,o=e.y-t.y,h=n.x-r.x,l=n.y-r.y,u=t.x-r.x,c=t.y-r.y,d=o*h-a*l,p=o*u-a*c;if(1e-10<Math.abs(d)){if(d>0){if(0>p||p>d)return[];if(h=l*u-h*c,0>h||h>d)return[]}else{if(p>0||d>p)return[];if(h=l*u-h*c,h>0||d>h)return[]}return 0==h?!s||0!=p&&p!=d?[t]:[]:h==d?!s||0!=p&&p!=d?[e]:[]:0==p?[r]:p==d?[n]:(s=h/d,[{x:t.x+s*a,y:t.y+s*o}])}return 0!=p||l*u!=h*c?[]:(o=0==a&&0==o,h=0==h&&0==l,o&&h?t.x!=r.x||t.y!=r.y?[]:[t]:o?i(r,n,t)?[t]:[]:h?i(t,e,r)?[r]:[]:(0!=a?(t.x<e.x?(a=t,h=t.x,o=e,t=e.x):(a=e,h=e.x,o=t,t=t.x),r.x<n.x?(e=r,d=r.x,l=n,r=n.x):(e=n,d=n.x,l=r,r=r.x)):(t.y<e.y?(a=t,h=t.y,o=e,t=e.y):(a=e,h=e.y,o=t,t=t.y),r.y<n.y?(e=r,d=r.y,l=n,r=n.y):(e=n,d=n.y,l=r,r=r.y)),d>=h?d>t?[]:t==d?s?[]:[e]:r>=t?[e,o]:[e,l]:h>r?[]:h==r?s?[]:[a]:r>=t?[a,o]:[a,l]))}function n(t,e,i,r){var n=e.x-t.x,s=e.y-t.y;e=i.x-t.x,i=i.y-t.y;var a=r.x-t.x;return r=r.y-t.y,t=n*i-s*e,n=n*r-s*a,1e-10<Math.abs(t)?(e=a*i-r*e,t>0?n>=0&&e>=0:n>=0||e>=0):n>0}var s,a,o,h,l,u={};for(o=t.concat(),s=0,a=e.length;a>s;s++)Array.prototype.push.apply(o,e[s]);for(s=0,a=o.length;a>s;s++)l=o[s].x+":"+o[s].y,void 0!==u[l]&&THREE.warn("THREE.Shape: Duplicate point",l),u[l]=s;s=function(t,e){function i(t,e){var i=g.length-1,r=t-1;0>r&&(r=i);var s=t+1;return s>i&&(s=0),(i=n(g[t],g[r],g[s],o[e]))?(i=o.length-1,r=e-1,0>r&&(r=i),s=e+1,s>i&&(s=0),(i=n(o[e],o[r],o[s],g[t]))?!0:!1):!1}function s(t,e){var i,n;for(i=0;i<g.length;i++)if(n=i+1,n%=g.length,n=r(t,e,g[i],g[n],!0),0<n.length)return!0;return!1}function a(t,i){var n,s,a,o;for(n=0;n<E.length;n++)for(s=e[E[n]],a=0;a<s.length;a++)if(o=a+1,o%=s.length,o=r(t,i,s[a],s[o],!0),0<o.length)return!0;return!1}var o,h,l,u,c,d,p,f,m,g=t.concat(),E=[],v=[],_=0;for(h=e.length;h>_;_++)E.push(_);p=0;for(var y=2*E.length;0<E.length;){if(y--,0>y){console.log("Infinite Loop! Holes left:"+E.length+", Probably Hole outside Shape!");break}for(l=p;l<g.length;l++){for(u=g[l],h=-1,_=0;_<E.length;_++)if(c=E[_],d=u.x+":"+u.y+":"+c,void 0===v[d]){for(o=e[c],f=0;f<o.length;f++)if(c=o[f],i(l,f)&&!s(u,c)&&!a(u,c)){h=f,E.splice(_,1),p=g.slice(0,l+1),c=g.slice(l),f=o.slice(h),m=o.slice(0,h+1),g=p.concat(f).concat(m).concat(c),p=l;break}if(h>=0)break;v[d]=!0}if(h>=0)break}}return g}(t,e);var c=THREE.FontUtils.Triangulate(s,!1);for(s=0,a=c.length;a>s;s++)for(h=c[s],o=0;3>o;o++)l=h[o].x+":"+h[o].y,l=u[l],void 0!==l&&(h[o]=l);return c.concat()},isClockWise:function(t){return 0>THREE.FontUtils.Triangulate.area(t)},b2p0:function(t,e){var i=1-t;return i*i*e},b2p1:function(t,e){return 2*(1-t)*t*e},b2p2:function(t,e){return t*t*e},b2:function(t,e,i,r){return this.b2p0(t,e)+this.b2p1(t,i)+this.b2p2(t,r)},b3p0:function(t,e){var i=1-t;return i*i*i*e},b3p1:function(t,e){var i=1-t;return 3*i*i*t*e},b3p2:function(t,e){return 3*(1-t)*t*t*e},b3p3:function(t,e){return t*t*t*e},b3:function(t,e,i,r,n){return this.b3p0(t,e)+this.b3p1(t,i)+this.b3p2(t,r)+this.b3p3(t,n)}},THREE.LineCurve=function(t,e){this.v1=t,this.v2=e},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.constructor=THREE.LineCurve,THREE.LineCurve.prototype.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},THREE.LineCurve.prototype.getPointAt=function(t){return this.getPoint(t)},THREE.LineCurve.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},THREE.QuadraticBezierCurve=function(t,e,i){this.v0=t,this.v1=e,this.v2=i},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve,THREE.QuadraticBezierCurve.prototype.getPoint=function(t){var e=new THREE.Vector2;return e.x=THREE.Shape.Utils.b2(t,this.v0.x,this.v1.x,this.v2.x),e.y=THREE.Shape.Utils.b2(t,this.v0.y,this.v1.y,this.v2.y),e},THREE.QuadraticBezierCurve.prototype.getTangent=function(t){var e=new THREE.Vector2;return e.x=THREE.Curve.Utils.tangentQuadraticBezier(t,this.v0.x,this.v1.x,this.v2.x),e.y=THREE.Curve.Utils.tangentQuadraticBezier(t,this.v0.y,this.v1.y,this.v2.y),e.normalize()},THREE.CubicBezierCurve=function(t,e,i,r){this.v0=t,this.v1=e,this.v2=i,this.v3=r},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve,THREE.CubicBezierCurve.prototype.getPoint=function(t){var e;return e=THREE.Shape.Utils.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t=THREE.Shape.Utils.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(e,t)},THREE.CubicBezierCurve.prototype.getTangent=function(t){var e;return e=THREE.Curve.Utils.tangentCubicBezier(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t=THREE.Curve.Utils.tangentCubicBezier(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e=new THREE.Vector2(e,t),e.normalize(),e},THREE.SplineCurve=function(t){this.points=void 0==t?[]:t},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.constructor=THREE.SplineCurve,THREE.SplineCurve.prototype.getPoint=function(t){var e=this.points;t*=e.length-1;var i=Math.floor(t);t-=i;var r=e[0==i?i:i-1],n=e[i],s=e[i>e.length-2?e.length-1:i+1],e=e[i>e.length-3?e.length-1:i+2],i=new THREE.Vector2;return i.x=THREE.Curve.Utils.interpolate(r.x,n.x,s.x,e.x,t),i.y=THREE.Curve.Utils.interpolate(r.y,n.y,s.y,e.y,t),i},THREE.EllipseCurve=function(t,e,i,r,n,s,a){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=a},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve,THREE.EllipseCurve.prototype.getPoint=function(t){var e=this.aEndAngle-this.aStartAngle;return 0>e&&(e+=2*Math.PI),e>2*Math.PI&&(e-=2*Math.PI),t=!0===this.aClockwise?this.aEndAngle+(1-t)*(2*Math.PI-e):this.aStartAngle+t*e,e=new THREE.Vector2,e.x=this.aX+this.xRadius*Math.cos(t),e.y=this.aY+this.yRadius*Math.sin(t),e},THREE.ArcCurve=function(t,e,i,r,n,s){THREE.EllipseCurve.call(this,t,e,i,i,r,n,s)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.ArcCurve.prototype.constructor=THREE.ArcCurve,THREE.LineCurve3=THREE.Curve.create(function(t,e){this.v1=t,this.v2=e},function(t){var e=new THREE.Vector3;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(t,e,i){this.v0=t,this.v1=e,this.v2=i},function(t){var e=new THREE.Vector3;return e.x=THREE.Shape.Utils.b2(t,this.v0.x,this.v1.x,this.v2.x),e.y=THREE.Shape.Utils.b2(t,this.v0.y,this.v1.y,this.v2.y),e.z=THREE.Shape.Utils.b2(t,this.v0.z,this.v1.z,this.v2.z),e}),THREE.CubicBezierCurve3=THREE.Curve.create(function(t,e,i,r){this.v0=t,this.v1=e,this.v2=i,this.v3=r},function(t){var e=new THREE.Vector3;return e.x=THREE.Shape.Utils.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e.y=THREE.Shape.Utils.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e.z=THREE.Shape.Utils.b3(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z),e}),THREE.SplineCurve3=THREE.Curve.create(function(t){this.points=void 0==t?[]:t},function(t){var e=this.points;t*=e.length-1;var i=Math.floor(t);t-=i;var r=e[0==i?i:i-1],n=e[i],s=e[i>e.length-2?e.length-1:i+1],e=e[i>e.length-3?e.length-1:i+2],i=new THREE.Vector3;return i.x=THREE.Curve.Utils.interpolate(r.x,n.x,s.x,e.x,t),i.y=THREE.Curve.Utils.interpolate(r.y,n.y,s.y,e.y,t),i.z=THREE.Curve.Utils.interpolate(r.z,n.z,s.z,e.z,t),i}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(t){this.points=void 0==t?[]:t},function(t){var e=this.points;t*=e.length-0;var i=Math.floor(t);t-=i;var i=i+(i>0?0:(Math.floor(Math.abs(i)/e.length)+1)*e.length),r=e[(i-1)%e.length],n=e[i%e.length],s=e[(i+1)%e.length],e=e[(i+2)%e.length],i=new THREE.Vector3;return i.x=THREE.Curve.Utils.interpolate(r.x,n.x,s.x,e.x,t),i.y=THREE.Curve.Utils.interpolate(r.y,n.y,s.y,e.y,t),i.z=THREE.Curve.Utils.interpolate(r.z,n.z,s.z,e.z,t),i}),THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){THREE.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){THREE.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){THREE.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(t){if(!0===t.initialized)return t;for(var e=0;e<t.hierarchy.length;e++){for(var i=0;i<t.hierarchy[e].keys.length;i++)if(0>t.hierarchy[e].keys[i].time&&(t.hierarchy[e].keys[i].time=0),void 0!==t.hierarchy[e].keys[i].rot&&!(t.hierarchy[e].keys[i].rot instanceof THREE.Quaternion)){var r=t.hierarchy[e].keys[i].rot;t.hierarchy[e].keys[i].rot=(new THREE.Quaternion).fromArray(r)}if(t.hierarchy[e].keys.length&&void 0!==t.hierarchy[e].keys[0].morphTargets){for(r={},i=0;i<t.hierarchy[e].keys.length;i++)for(var n=0;n<t.hierarchy[e].keys[i].morphTargets.length;n++){var s=t.hierarchy[e].keys[i].morphTargets[n];r[s]=-1}for(t.hierarchy[e].usedMorphTargets=r,i=0;i<t.hierarchy[e].keys.length;i++){var a={};for(s in r){for(n=0;n<t.hierarchy[e].keys[i].morphTargets.length;n++)if(t.hierarchy[e].keys[i].morphTargets[n]===s){a[s]=t.hierarchy[e].keys[i].morphTargetsInfluences[n];break}n===t.hierarchy[e].keys[i].morphTargets.length&&(a[s]=0)}t.hierarchy[e].keys[i].morphTargetsInfluences=a}}for(i=1;i<t.hierarchy[e].keys.length;i++)t.hierarchy[e].keys[i].time===t.hierarchy[e].keys[i-1].time&&(t.hierarchy[e].keys.splice(i,1),i--);for(i=0;i<t.hierarchy[e].keys.length;i++)t.hierarchy[e].keys[i].index=i}return t.initialized=!0,t},parse:function(t){var e=function(t,i){i.push(t);for(var r=0;r<t.children.length;r++)e(t.children[r],i)},i=[];if(t instanceof THREE.SkinnedMesh)for(var r=0;r<t.skeleton.bones.length;r++)i.push(t.skeleton.bones[r]);else e(t,i);return i},play:function(t){-1===this.animations.indexOf(t)&&this.animations.push(t)},stop:function(t){t=this.animations.indexOf(t),-1!==t&&this.animations.splice(t,1)},update:function(t){for(var e=0;e<this.animations.length;e++)this.animations[e].resetBlendWeights();for(e=0;e<this.animations.length;e++)this.animations[e].update(t)}},THREE.Animation=function(t,e){this.root=t,this.data=THREE.AnimationHandler.init(e),this.hierarchy=THREE.AnimationHandler.parse(t),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=THREE.AnimationHandler.LINEAR},THREE.Animation.prototype={constructor:THREE.Animation,keyTypes:["pos","rot","scl"],play:function(t,e){this.currentTime=void 0!==t?t:0,this.weight=void 0!==e?e:1,this.isPlaying=!0,this.reset(),THREE.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1,THREE.AnimationHandler.stop(this)},reset:function(){for(var t=0,e=this.hierarchy.length;e>t;t++){var i=this.hierarchy[t];void 0===i.animationCache&&(i.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}});var r=this.data.name,n=i.animationCache.animations,s=n[r];for(void 0===s&&(s={prevKey:{pos:0,rot:0,scl:0},nextKey:{pos:0,rot:0,scl:0},originalMatrix:i.matrix},n[r]=s),i=0;3>i;i++){for(var r=this.keyTypes[i],n=this.data.hierarchy[t].keys[0],a=this.getNextKeyWith(r,t,1);a.time<this.currentTime&&a.index>n.index;)n=a,a=this.getNextKeyWith(r,t,a.index+1);s.prevKey[r]=n,s.nextKey[r]=a}}},resetBlendWeights:function(){for(var t=0,e=this.hierarchy.length;e>t;t++){var i=this.hierarchy[t].animationCache;void 0!==i&&(i=i.blending,i.positionWeight=0,i.quaternionWeight=0,i.scaleWeight=0)}},update:function(){var t=[],e=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Quaternion,n=function(t,e){var i,r,n,a,o,h,l=[],u=[];return i=(t.length-1)*e,r=Math.floor(i),i-=r,l[0]=0===r?r:r-1,l[1]=r,l[2]=r>t.length-2?r:r+1,l[3]=r>t.length-3?r:r+2,r=t[l[0]],a=t[l[1]],o=t[l[2]],h=t[l[3]],l=i*i,n=i*l,u[0]=s(r[0],a[0],o[0],h[0],i,l,n),u[1]=s(r[1],a[1],o[1],h[1],i,l,n),u[2]=s(r[2],a[2],o[2],h[2],i,l,n),u},s=function(t,e,i,r,n,s,a){return t=.5*(i-t),r=.5*(r-e),(2*(e-i)+t+r)*a+(-3*(e-i)-2*t-r)*s+t*n+e};return function(s){if(!1!==this.isPlaying&&(this.currentTime+=s*this.timeScale,0!==this.weight)){s=this.data.length,(this.currentTime>s||0>this.currentTime)&&(this.loop?(this.currentTime%=s,0>this.currentTime&&(this.currentTime+=s),this.reset()):this.stop()),s=0;for(var a=this.hierarchy.length;a>s;s++)for(var o=this.hierarchy[s],h=o.animationCache.animations[this.data.name],l=o.animationCache.blending,u=0;3>u;u++){var c=this.keyTypes[u],d=h.prevKey[c],p=h.nextKey[c];if(0<this.timeScale&&p.time<=this.currentTime||0>this.timeScale&&d.time>=this.currentTime){for(d=this.data.hierarchy[s].keys[0],p=this.getNextKeyWith(c,s,1);p.time<this.currentTime&&p.index>d.index;)d=p,p=this.getNextKeyWith(c,s,p.index+1);h.prevKey[c]=d,h.nextKey[c]=p}var f=(this.currentTime-d.time)/(p.time-d.time),m=d[c],g=p[c];0>f&&(f=0),f>1&&(f=1),"pos"===c?this.interpolationType===THREE.AnimationHandler.LINEAR?(i.x=m[0]+(g[0]-m[0])*f,i.y=m[1]+(g[1]-m[1])*f,i.z=m[2]+(g[2]-m[2])*f,d=this.weight/(this.weight+l.positionWeight),o.position.lerp(i,d),l.positionWeight+=this.weight):(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)&&(t[0]=this.getPrevKeyWith("pos",s,d.index-1).pos,t[1]=m,t[2]=g,t[3]=this.getNextKeyWith("pos",s,p.index+1).pos,f=.33*f+.33,p=n(t,f),d=this.weight/(this.weight+l.positionWeight),l.positionWeight+=this.weight,c=o.position,c.x+=(p[0]-c.x)*d,c.y+=(p[1]-c.y)*d,c.z+=(p[2]-c.z)*d,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(f=n(t,1.01*f),e.set(f[0],f[1],f[2]),e.sub(c),e.y=0,e.normalize(),f=Math.atan2(e.x,e.z),o.rotation.set(0,f,0))):"rot"===c?(THREE.Quaternion.slerp(m,g,r,f),0===l.quaternionWeight?(o.quaternion.copy(r),l.quaternionWeight=this.weight):(d=this.weight/(this.weight+l.quaternionWeight),THREE.Quaternion.slerp(o.quaternion,r,o.quaternion,d),l.quaternionWeight+=this.weight)):"scl"===c&&(i.x=m[0]+(g[0]-m[0])*f,i.y=m[1]+(g[1]-m[1])*f,i.z=m[2]+(g[2]-m[2])*f,d=this.weight/(this.weight+l.scaleWeight),o.scale.lerp(i,d),l.scaleWeight+=this.weight)}return!0}}}(),getNextKeyWith:function(t,e,i){var r=this.data.hierarchy[e].keys;for(i=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i<r.length-1?i:r.length-1:i%r.length;i<r.length;i++)if(void 0!==r[i][t])return r[i];return this.data.hierarchy[e].keys[0]},getPrevKeyWith:function(t,e,i){var r=this.data.hierarchy[e].keys;for(i=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i>0?i:0:i>=0?i:i+r.length;i>=0;i--)if(void 0!==r[i][t])return r[i];return this.data.hierarchy[e].keys[r.length-1]}},THREE.KeyFrameAnimation=function(t){this.root=t.node,this.data=THREE.AnimationHandler.init(t),this.hierarchy=THREE.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.loop=this.isPaused=!0,t=0;for(var e=this.hierarchy.length;e>t;t++){var i=this.data.hierarchy[t].sids,r=this.hierarchy[t];if(this.data.hierarchy[t].keys.length&&i){for(var n=0;n<i.length;n++){var s=i[n],a=this.getNextKeyWith(s,t,0);a&&a.apply(s)}r.matrixAutoUpdate=!1,this.data.hierarchy[t].node.updateMatrix(),r.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype={constructor:THREE.KeyFrameAnimation,play:function(t){if(this.currentTime=void 0!==t?t:0,!1===this.isPlaying){this.isPlaying=!0;var e,i,r=this.hierarchy.length;for(t=0;r>t;t++)e=this.hierarchy[t],i=this.data.hierarchy[t],void 0===i.animationCache&&(i.animationCache={},i.animationCache.prevKey=null,i.animationCache.nextKey=null,i.animationCache.originalMatrix=e.matrix),e=this.data.hierarchy[t].keys,e.length&&(i.animationCache.prevKey=e[0],i.animationCache.nextKey=e[1],this.startTime=Math.min(e[0].time,this.startTime),this.endTime=Math.max(e[e.length-1].time,this.endTime));this.update(0)}this.isPaused=!1,THREE.AnimationHandler.play(this)},stop:function(){this.isPaused=this.isPlaying=!1,THREE.AnimationHandler.stop(this);for(var t=0;t<this.data.hierarchy.length;t++){var e=this.hierarchy[t],i=this.data.hierarchy[t];if(void 0!==i.animationCache){var r=i.animationCache.originalMatrix;r.copy(e.matrix),e.matrix=r,delete i.animationCache}}},update:function(t){if(!1!==this.isPlaying){this.currentTime+=t*this.timeScale,t=this.data.length,!0===this.loop&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t),t=0;for(var e=this.hierarchy.length;e>t;t++){var i=this.hierarchy[t],r=this.data.hierarchy[t],n=r.keys,r=r.animationCache;if(n.length){var s=r.prevKey,a=r.nextKey;if(a.time<=this.currentTime){for(;a.time<this.currentTime&&a.index>s.index;)s=a,a=n[s.index+1];r.prevKey=s,r.nextKey=a}a.time>=this.currentTime?s.interpolate(a,this.currentTime):s.interpolate(a,a.time),this.data.hierarchy[t].node.updateMatrix(),i.matrixWorldNeedsUpdate=!0}}}},getNextKeyWith:function(t,e,i){for(e=this.data.hierarchy[e].keys,i%=e.length;i<e.length;i++)if(e[i].hasTarget(t))return e[i];return e[0]},getPrevKeyWith:function(t,e,i){for(e=this.data.hierarchy[e].keys,i=i>=0?i:i+e.length;i>=0;i--)if(e[i].hasTarget(t))return e[i];return e[e.length-1]}},THREE.MorphAnimation=function(t){this.mesh=t,this.frames=t.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.currentFrame=this.lastFrame=0,this.isPlaying=!1},THREE.MorphAnimation.prototype={constructor:THREE.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(t){if(!1!==this.isPlaying){this.currentTime+=t,!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration),t=this.duration/this.frames;var e=Math.floor(this.currentTime/t),i=this.mesh.morphTargetInfluences;e!=this.currentFrame&&(i[this.lastFrame]=0,i[this.currentFrame]=1,i[e]=0,this.lastFrame=this.currentFrame,this.currentFrame=e),i[e]=this.currentTime%t/t,i[this.lastFrame]=1-i[e]}}},THREE.BoxGeometry=function(t,e,i,r,n,s){function a(t,e,i,r,n,s,a,h){var l,u=o.widthSegments,c=o.heightSegments,d=n/2,p=s/2,f=o.vertices.length;"x"===t&&"y"===e||"y"===t&&"x"===e?l="z":"x"===t&&"z"===e||"z"===t&&"x"===e?(l="y",c=o.depthSegments):("z"===t&&"y"===e||"y"===t&&"z"===e)&&(l="x",u=o.depthSegments);var m=u+1,g=c+1,E=n/u,v=s/c,_=new THREE.Vector3;for(_[l]=a>0?1:-1,n=0;g>n;n++)for(s=0;m>s;s++){var y=new THREE.Vector3;y[t]=(s*E-d)*i,y[e]=(n*v-p)*r,y[l]=a,o.vertices.push(y)}for(n=0;c>n;n++)for(s=0;u>s;s++)p=s+m*n,t=s+m*(n+1),e=s+1+m*(n+1),i=s+1+m*n,r=new THREE.Vector2(s/u,1-n/c),a=new THREE.Vector2(s/u,1-(n+1)/c),l=new THREE.Vector2((s+1)/u,1-(n+1)/c),d=new THREE.Vector2((s+1)/u,1-n/c),p=new THREE.Face3(p+f,t+f,i+f),p.normal.copy(_),p.vertexNormals.push(_.clone(),_.clone(),_.clone()),p.materialIndex=h,o.faces.push(p),o.faceVertexUvs[0].push([r,a,d]),p=new THREE.Face3(t+f,e+f,i+f),p.normal.copy(_),p.vertexNormals.push(_.clone(),_.clone(),_.clone()),p.materialIndex=h,o.faces.push(p),o.faceVertexUvs[0].push([a.clone(),l,d.clone()])}THREE.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:n,depthSegments:s},this.widthSegments=r||1,this.heightSegments=n||1,this.depthSegments=s||1;var o=this;r=t/2,n=e/2,s=i/2,a("z","y",-1,-1,i,e,r,0),a("z","y",1,-1,i,e,-r,1),a("x","z",1,1,t,i,n,2),a("x","z",1,-1,t,i,-n,3),a("x","y",1,-1,t,e,s,4),a("x","y",-1,-1,t,e,-s,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry,THREE.CircleGeometry=function(t,e,i,r){THREE.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},t=t||50,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var n,s=[];n=new THREE.Vector3;var a=new THREE.Vector2(.5,.5);for(this.vertices.push(n),s.push(a),n=0;e>=n;n++){var o=new THREE.Vector3,h=i+n/e*r;o.x=t*Math.cos(h),o.y=t*Math.sin(h),this.vertices.push(o),s.push(new THREE.Vector2((o.x/t+1)/2,(o.y/t+1)/2))}for(i=new THREE.Vector3(0,0,1),n=1;e>=n;n++)this.faces.push(new THREE.Face3(n,n+1,0,[i.clone(),i.clone(),i.clone()])),this.faceVertexUvs[0].push([s[n].clone(),s[n+1].clone(),a.clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,t)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry,THREE.CubeGeometry=function(t,e,i,r,n,s){return THREE.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new THREE.BoxGeometry(t,e,i,r,n,s)},THREE.CylinderGeometry=function(t,e,i,r,n,s,a,o){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:n,openEnded:s,thetaStart:a,thetaLength:o},t=void 0!==t?t:20,e=void 0!==e?e:20,i=void 0!==i?i:100,r=r||8,n=n||1,s=void 0!==s?s:!1,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI;var h,l,u=i/2,c=[],d=[];for(l=0;n>=l;l++){var p=[],f=[],m=l/n,g=m*(e-t)+t;for(h=0;r>=h;h++){var E=h/r,v=new THREE.Vector3;v.x=g*Math.sin(E*o+a),v.y=-m*i+u,v.z=g*Math.cos(E*o+a),this.vertices.push(v),p.push(this.vertices.length-1),f.push(new THREE.Vector2(E,1-m))}c.push(p),d.push(f)}for(i=(e-t)/i,h=0;r>h;h++)for(0!==t?(a=this.vertices[c[0][h]].clone(),o=this.vertices[c[0][h+1]].clone()):(a=this.vertices[c[1][h]].clone(),o=this.vertices[c[1][h+1]].clone()),a.setY(Math.sqrt(a.x*a.x+a.z*a.z)*i).normalize(),o.setY(Math.sqrt(o.x*o.x+o.z*o.z)*i).normalize(),l=0;n>l;l++){var p=c[l][h],f=c[l+1][h],m=c[l+1][h+1],g=c[l][h+1],E=a.clone(),v=a.clone(),_=o.clone(),y=o.clone(),T=d[l][h].clone(),x=d[l+1][h].clone(),R=d[l+1][h+1].clone(),b=d[l][h+1].clone();this.faces.push(new THREE.Face3(p,f,g,[E,v,y])),this.faceVertexUvs[0].push([T,x,b]),this.faces.push(new THREE.Face3(f,m,g,[v.clone(),_,y.clone()])),this.faceVertexUvs[0].push([x.clone(),R,b.clone()])}if(!1===s&&t>0)for(this.vertices.push(new THREE.Vector3(0,u,0)),h=0;r>h;h++)p=c[0][h],f=c[0][h+1],m=this.vertices.length-1,E=new THREE.Vector3(0,1,0),v=new THREE.Vector3(0,1,0),_=new THREE.Vector3(0,1,0),T=d[0][h].clone(),x=d[0][h+1].clone(),R=new THREE.Vector2(x.x,0),this.faces.push(new THREE.Face3(p,f,m,[E,v,_])),this.faceVertexUvs[0].push([T,x,R]);if(!1===s&&e>0)for(this.vertices.push(new THREE.Vector3(0,-u,0)),h=0;r>h;h++)p=c[n][h+1],f=c[n][h],m=this.vertices.length-1,E=new THREE.Vector3(0,-1,0),v=new THREE.Vector3(0,-1,0),_=new THREE.Vector3(0,-1,0),T=d[n][h+1].clone(),x=d[n][h].clone(),R=new THREE.Vector2(x.x,1),this.faces.push(new THREE.Face3(p,f,m,[E,v,_])),this.faceVertexUvs[0].push([T,x,R]);this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry,THREE.ExtrudeGeometry=function(t,e){"undefined"!=typeof t&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",t=t instanceof Array?t:[t],this.addShapeList(t,e),this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry,THREE.ExtrudeGeometry.prototype.addShapeList=function(t,e){for(var i=t.length,r=0;i>r;r++)this.addShape(t[r],e)},THREE.ExtrudeGeometry.prototype.addShape=function(t,e){function i(t,e,i){return e||THREE.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function r(t,e,i){var r=1,r=t.x-e.x,n=t.y-e.y,s=i.x-t.x,a=i.y-t.y,o=r*r+n*n;if(1e-10<Math.abs(r*a-n*s)){var h=Math.sqrt(o),l=Math.sqrt(s*s+a*a),o=e.x-n/h;if(e=e.y+r/h,s=((i.x-a/l-o)*a-(i.y+s/l-e)*s)/(r*a-n*s),i=o+r*s-t.x,t=e+n*s-t.y,r=i*i+t*t,2>=r)return new THREE.Vector2(i,t);r=Math.sqrt(r/2)}else t=!1,r>1e-10?s>1e-10&&(t=!0):-1e-10>r?-1e-10>s&&(t=!0):Math.sign(n)==Math.sign(a)&&(t=!0),t?(i=-n,t=r,r=Math.sqrt(o)):(i=r,t=n,r=Math.sqrt(o/2));return new THREE.Vector2(i/r,t/r)}function n(t,e){var i,r;for(B=t.length;0<=--B;){i=B,r=B-1,0>r&&(r=t.length-1);for(var n=0,s=v+2*m,n=0;s>n;n++){var a=F*n,o=F*(n+1),h=e+i+a,a=e+r+a,l=e+r+o,o=e+i+o,h=h+M,a=a+M,l=l+M,o=o+M;S.faces.push(new THREE.Face3(h,a,o,null,null,x)),S.faces.push(new THREE.Face3(a,l,o,null,null,x)),h=R.generateSideWallUV(S,h,a,l,o),S.faceVertexUvs[0].push([h[0],h[1],h[3]]),S.faceVertexUvs[0].push([h[1],h[2],h[3]])}}}function s(t,e,i){S.vertices.push(new THREE.Vector3(t,e,i))}function a(t,e,i){t+=M,e+=M,i+=M,S.faces.push(new THREE.Face3(t,e,i,null,null,T)),t=R.generateTopUV(S,t,e,i),S.faceVertexUvs[0].push(t)}var o,h,l,u,c,d=void 0!==e.amount?e.amount:100,p=void 0!==e.bevelThickness?e.bevelThickness:6,f=void 0!==e.bevelSize?e.bevelSize:p-2,m=void 0!==e.bevelSegments?e.bevelSegments:3,g=void 0!==e.bevelEnabled?e.bevelEnabled:!0,E=void 0!==e.curveSegments?e.curveSegments:12,v=void 0!==e.steps?e.steps:1,_=e.extrudePath,y=!1,T=e.material,x=e.extrudeMaterial,R=void 0!==e.UVGenerator?e.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;_&&(o=_.getSpacedPoints(v),y=!0,g=!1,h=void 0!==e.frames?e.frames:new THREE.TubeGeometry.FrenetFrames(_,v,!1),l=new THREE.Vector3,u=new THREE.Vector3,c=new THREE.Vector3),g||(f=p=m=0);var b,w,H,S=this,M=this.vertices.length,_=t.extractPoints(E),E=_.shape,C=_.holes;if(_=!THREE.Shape.Utils.isClockWise(E)){for(E=E.reverse(),w=0,H=C.length;H>w;w++)b=C[w],THREE.Shape.Utils.isClockWise(b)&&(C[w]=b.reverse());_=!1}var A=THREE.Shape.Utils.triangulateShape(E,C),P=E;for(w=0,H=C.length;H>w;w++)b=C[w],E=E.concat(b);var L,O,D,k,I,N,F=E.length,j=A.length,_=[],B=0;for(D=P.length,L=D-1,O=B+1;D>B;B++,L++,O++)L===D&&(L=0),O===D&&(O=0),_[B]=r(P[B],P[L],P[O]);var U,z=[],V=_.concat();for(w=0,H=C.length;H>w;w++){for(b=C[w],U=[],B=0,D=b.length,L=D-1,O=B+1;D>B;B++,L++,O++)L===D&&(L=0),O===D&&(O=0),U[B]=r(b[B],b[L],b[O]);z.push(U),V=V.concat(U)}for(L=0;m>L;L++){for(D=L/m,k=p*(1-D),O=f*Math.sin(D*Math.PI/2),B=0,D=P.length;D>B;B++)I=i(P[B],_[B],O),s(I.x,I.y,-k);for(w=0,H=C.length;H>w;w++)for(b=C[w],U=z[w],B=0,D=b.length;D>B;B++)I=i(b[B],U[B],O),s(I.x,I.y,-k)}for(O=f,B=0;F>B;B++)I=g?i(E[B],V[B],O):E[B],y?(u.copy(h.normals[0]).multiplyScalar(I.x),l.copy(h.binormals[0]).multiplyScalar(I.y),c.copy(o[0]).add(u).add(l),s(c.x,c.y,c.z)):s(I.x,I.y,0);for(D=1;v>=D;D++)for(B=0;F>B;B++)I=g?i(E[B],V[B],O):E[B],y?(u.copy(h.normals[D]).multiplyScalar(I.x),l.copy(h.binormals[D]).multiplyScalar(I.y),c.copy(o[D]).add(u).add(l),s(c.x,c.y,c.z)):s(I.x,I.y,d/v*D);for(L=m-1;L>=0;L--){for(D=L/m,k=p*(1-D),O=f*Math.sin(D*Math.PI/2),B=0,D=P.length;D>B;B++)I=i(P[B],_[B],O),s(I.x,I.y,d+k);for(w=0,H=C.length;H>w;w++)for(b=C[w],U=z[w],B=0,D=b.length;D>B;B++)I=i(b[B],U[B],O),y?s(I.x,I.y+o[v-1].y,o[v-1].x+k):s(I.x,I.y,d+k)}!function(){if(g){var t;for(t=0*F,B=0;j>B;B++)N=A[B],a(N[2]+t,N[1]+t,N[0]+t);for(t=v+2*m,t*=F,B=0;j>B;B++)N=A[B],a(N[0]+t,N[1]+t,N[2]+t)}else{for(B=0;j>B;B++)N=A[B],a(N[2],N[1],N[0]);for(B=0;j>B;B++)N=A[B],a(N[0]+F*v,N[1]+F*v,N[2]+F*v)}}(),function(){var t=0;for(n(P,t),t+=P.length,w=0,H=C.length;H>w;w++)b=C[w],n(b,t),t+=b.length}()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(t,e,i,r){return t=t.vertices,e=t[e],i=t[i],r=t[r],[new THREE.Vector2(e.x,e.y),new THREE.Vector2(i.x,i.y),new THREE.Vector2(r.x,r.y)]},generateSideWallUV:function(t,e,i,r,n){return t=t.vertices,e=t[e],i=t[i],r=t[r],n=t[n],.01>Math.abs(e.y-i.y)?[new THREE.Vector2(e.x,1-e.z),new THREE.Vector2(i.x,1-i.z),new THREE.Vector2(r.x,1-r.z),new THREE.Vector2(n.x,1-n.z)]:[new THREE.Vector2(e.y,1-e.z),new THREE.Vector2(i.y,1-i.z),new THREE.Vector2(r.y,1-r.z),new THREE.Vector2(n.y,1-n.z)]}},THREE.ShapeGeometry=function(t,e){THREE.Geometry.call(this),this.type="ShapeGeometry",!1==t instanceof Array&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry,THREE.ShapeGeometry.prototype.addShapeList=function(t,e){for(var i=0,r=t.length;r>i;i++)this.addShape(t[i],e);return this},THREE.ShapeGeometry.prototype.addShape=function(t,e){void 0===e&&(e={});var i,r,n,s=e.material,a=void 0===e.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:e.UVGenerator,o=this.vertices.length;i=t.extractPoints(void 0!==e.curveSegments?e.curveSegments:12);var h=i.shape,l=i.holes;if(!THREE.Shape.Utils.isClockWise(h))for(h=h.reverse(),i=0,r=l.length;r>i;i++)n=l[i],THREE.Shape.Utils.isClockWise(n)&&(l[i]=n.reverse());var u=THREE.Shape.Utils.triangulateShape(h,l);for(i=0,r=l.length;r>i;i++)n=l[i],h=h.concat(n);for(l=h.length,r=u.length,i=0;l>i;i++)n=h[i],this.vertices.push(new THREE.Vector3(n.x,n.y,0));for(i=0;r>i;i++)l=u[i],h=l[0]+o,n=l[1]+o,l=l[2]+o,this.faces.push(new THREE.Face3(h,n,l,null,null,s)),this.faceVertexUvs[0].push(a.generateTopUV(this,h,n,l))},THREE.LatheGeometry=function(t,e,i,r){THREE.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=e||12,i=i||0,r=r||2*Math.PI;for(var n=1/(t.length-1),s=1/e,a=0,o=e;o>=a;a++)for(var h=i+a*s*r,l=Math.cos(h),u=Math.sin(h),h=0,c=t.length;c>h;h++){var d=t[h],p=new THREE.Vector3;p.x=l*d.x-u*d.y,p.y=u*d.x+l*d.y,p.z=d.z,this.vertices.push(p)}for(i=t.length,a=0,o=e;o>a;a++)for(h=0,c=t.length-1;c>h;h++){e=u=h+i*a,r=u+i;var l=u+1+i,u=u+1,d=a*s,p=h*n,f=d+s,m=p+n;this.faces.push(new THREE.Face3(e,r,u)),this.faceVertexUvs[0].push([new THREE.Vector2(d,p),new THREE.Vector2(f,p),new THREE.Vector2(d,m)]),this.faces.push(new THREE.Face3(r,l,u)),this.faceVertexUvs[0].push([new THREE.Vector2(f,p),new THREE.Vector2(f,m),new THREE.Vector2(d,m)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry,THREE.PlaneGeometry=function(t,e,i,r){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),THREE.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new THREE.PlaneBufferGeometry(t,e,i,r))},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry,THREE.PlaneBufferGeometry=function(t,e,i,r){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};var n=t/2,s=e/2;i=i||1,r=r||1;var a=i+1,o=r+1,h=t/i,l=e/r;e=new Float32Array(a*o*3),t=new Float32Array(a*o*3);for(var u=new Float32Array(a*o*2),c=0,d=0,p=0;o>p;p++)for(var f=p*l-s,m=0;a>m;m++)e[c]=m*h-n,e[c+1]=-f,t[c+2]=1,u[d]=m/i,u[d+1]=1-p/r,c+=3,d+=2;for(c=0,n=new(65535<e.length/3?Uint32Array:Uint16Array)(i*r*6),p=0;r>p;p++)for(m=0;i>m;m++)s=m+a*(p+1),o=m+1+a*(p+1),h=m+1+a*p,n[c]=m+a*p,n[c+1]=s,n[c+2]=h,n[c+3]=s,n[c+4]=o,n[c+5]=h,c+=6;this.addAttribute("index",new THREE.BufferAttribute(n,1)),this.addAttribute("position",new THREE.BufferAttribute(e,3)),this.addAttribute("normal",new THREE.BufferAttribute(t,3)),this.addAttribute("uv",new THREE.BufferAttribute(u,2))
},THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry,THREE.RingGeometry=function(t,e,i,r,n,s){THREE.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:s},t=t||0,e=e||50,n=void 0!==n?n:0,s=void 0!==s?s:2*Math.PI,i=void 0!==i?Math.max(3,i):8,r=void 0!==r?Math.max(1,r):8;var a,o=[],h=t,l=(e-t)/r;for(t=0;r+1>t;t++){for(a=0;i+1>a;a++){var u=new THREE.Vector3,c=n+a/i*s;u.x=h*Math.cos(c),u.y=h*Math.sin(c),this.vertices.push(u),o.push(new THREE.Vector2((u.x/e+1)/2,(u.y/e+1)/2))}h+=l}for(e=new THREE.Vector3(0,0,1),t=0;r>t;t++)for(n=t*(i+1),a=0;i>a;a++)s=c=a+n,l=c+i+1,u=c+i+2,this.faces.push(new THREE.Face3(s,l,u,[e.clone(),e.clone(),e.clone()])),this.faceVertexUvs[0].push([o[s].clone(),o[l].clone(),o[u].clone()]),s=c,l=c+i+2,u=c+1,this.faces.push(new THREE.Face3(s,l,u,[e.clone(),e.clone(),e.clone()])),this.faceVertexUvs[0].push([o[s].clone(),o[l].clone(),o[u].clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,h)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry.prototype.constructor=THREE.RingGeometry,THREE.SphereGeometry=function(t,e,i,r,n,s,a){THREE.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:n,thetaStart:s,thetaLength:a},t=t||50,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI,s=void 0!==s?s:0,a=void 0!==a?a:Math.PI;var o,h,l=[],u=[];for(h=0;i>=h;h++){var c=[],d=[];for(o=0;e>=o;o++){var p=o/e,f=h/i,m=new THREE.Vector3;m.x=-t*Math.cos(r+p*n)*Math.sin(s+f*a),m.y=t*Math.cos(s+f*a),m.z=t*Math.sin(r+p*n)*Math.sin(s+f*a),this.vertices.push(m),c.push(this.vertices.length-1),d.push(new THREE.Vector2(p,1-f))}l.push(c),u.push(d)}for(h=0;i>h;h++)for(o=0;e>o;o++){r=l[h][o+1],n=l[h][o],s=l[h+1][o],a=l[h+1][o+1];var c=this.vertices[r].clone().normalize(),d=this.vertices[n].clone().normalize(),p=this.vertices[s].clone().normalize(),f=this.vertices[a].clone().normalize(),m=u[h][o+1].clone(),g=u[h][o].clone(),E=u[h+1][o].clone(),v=u[h+1][o+1].clone();Math.abs(this.vertices[r].y)===t?(m.x=(m.x+g.x)/2,this.faces.push(new THREE.Face3(r,s,a,[c,p,f])),this.faceVertexUvs[0].push([m,E,v])):Math.abs(this.vertices[s].y)===t?(E.x=(E.x+v.x)/2,this.faces.push(new THREE.Face3(r,n,s,[c,d,p])),this.faceVertexUvs[0].push([m,g,E])):(this.faces.push(new THREE.Face3(r,n,a,[c,d,f])),this.faceVertexUvs[0].push([m,g,v]),this.faces.push(new THREE.Face3(n,s,a,[d.clone(),p,f.clone()])),this.faceVertexUvs[0].push([g.clone(),E,v.clone()]))}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,t)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry,THREE.TextGeometry=function(t,e){e=e||{};var i=THREE.FontUtils.generateShapes(t,e);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,i,e),this.type="TextGeometry"},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TextGeometry.prototype.constructor=THREE.TextGeometry,THREE.TorusGeometry=function(t,e,i,r,n){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:r,arc:n},t=t||100,e=e||40,i=i||8,r=r||6,n=n||2*Math.PI;for(var s=new THREE.Vector3,a=[],o=[],h=0;i>=h;h++)for(var l=0;r>=l;l++){var u=l/r*n,c=h/i*Math.PI*2;s.x=t*Math.cos(u),s.y=t*Math.sin(u);var d=new THREE.Vector3;d.x=(t+e*Math.cos(c))*Math.cos(u),d.y=(t+e*Math.cos(c))*Math.sin(u),d.z=e*Math.sin(c),this.vertices.push(d),a.push(new THREE.Vector2(l/r,h/i)),o.push(d.clone().sub(s).normalize())}for(h=1;i>=h;h++)for(l=1;r>=l;l++)t=(r+1)*h+l-1,e=(r+1)*(h-1)+l-1,n=(r+1)*(h-1)+l,s=(r+1)*h+l,u=new THREE.Face3(t,e,s,[o[t].clone(),o[e].clone(),o[s].clone()]),this.faces.push(u),this.faceVertexUvs[0].push([a[t].clone(),a[e].clone(),a[s].clone()]),u=new THREE.Face3(e,n,s,[o[e].clone(),o[n].clone(),o[s].clone()]),this.faces.push(u),this.faceVertexUvs[0].push([a[e].clone(),a[n].clone(),a[s].clone()]);this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry,THREE.TorusKnotGeometry=function(t,e,i,r,n,s,a){function o(t,e,i,r,n){var s=Math.cos(t),a=Math.sin(t);return t*=e/i,e=Math.cos(t),s*=r*(2+e)*.5,a=r*(2+e)*a*.5,r=n*r*Math.sin(t)*.5,new THREE.Vector3(s,a,r)}THREE.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:r,p:n,q:s,heightScale:a},t=t||100,e=e||40,i=i||64,r=r||8,n=n||2,s=s||3,a=a||1;for(var h=Array(i),l=new THREE.Vector3,u=new THREE.Vector3,c=new THREE.Vector3,d=0;i>d;++d){h[d]=Array(r);var p=d/i*2*n*Math.PI,f=o(p,s,n,t,a),p=o(p+.01,s,n,t,a);for(l.subVectors(p,f),u.addVectors(p,f),c.crossVectors(l,u),u.crossVectors(c,l),c.normalize(),u.normalize(),p=0;r>p;++p){var m=p/r*2*Math.PI,g=-e*Math.cos(m),m=e*Math.sin(m),E=new THREE.Vector3;E.x=f.x+g*u.x+m*c.x,E.y=f.y+g*u.y+m*c.y,E.z=f.z+g*u.z+m*c.z,h[d][p]=this.vertices.push(E)-1}}for(d=0;i>d;++d)for(p=0;r>p;++p)n=(d+1)%i,s=(p+1)%r,t=h[d][p],e=h[n][p],n=h[n][s],s=h[d][s],a=new THREE.Vector2(d/i,p/r),l=new THREE.Vector2((d+1)/i,p/r),u=new THREE.Vector2((d+1)/i,(p+1)/r),c=new THREE.Vector2(d/i,(p+1)/r),this.faces.push(new THREE.Face3(t,e,s)),this.faceVertexUvs[0].push([a,l,c]),this.faces.push(new THREE.Face3(e,n,s)),this.faceVertexUvs[0].push([l.clone(),u,c.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry,THREE.TubeGeometry=function(t,e,i,r,n,s){THREE.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:t,segments:e,radius:i,radialSegments:r,closed:n},e=e||64,i=i||1,r=r||8,n=n||!1,s=s||THREE.TubeGeometry.NoTaper;var a,o,h,l,u,c,d,p,f,m,g=[],E=e+1,v=new THREE.Vector3;for(p=new THREE.TubeGeometry.FrenetFrames(t,e,n),f=p.normals,m=p.binormals,this.tangents=p.tangents,this.normals=f,this.binormals=m,p=0;E>p;p++)for(g[p]=[],h=p/(E-1),d=t.getPointAt(h),a=f[p],o=m[p],u=i*s(h),h=0;r>h;h++)l=h/r*2*Math.PI,c=-u*Math.cos(l),l=u*Math.sin(l),v.copy(d),v.x+=c*a.x+l*o.x,v.y+=c*a.y+l*o.y,v.z+=c*a.z+l*o.z,g[p][h]=this.vertices.push(new THREE.Vector3(v.x,v.y,v.z))-1;for(p=0;e>p;p++)for(h=0;r>h;h++)s=n?(p+1)%e:p+1,E=(h+1)%r,t=g[p][h],i=g[s][h],s=g[s][E],E=g[p][E],v=new THREE.Vector2(p/e,h/r),f=new THREE.Vector2((p+1)/e,h/r),m=new THREE.Vector2((p+1)/e,(h+1)/r),a=new THREE.Vector2(p/e,(h+1)/r),this.faces.push(new THREE.Face3(t,i,E)),this.faceVertexUvs[0].push([v,f,a]),this.faces.push(new THREE.Face3(i,s,E)),this.faceVertexUvs[0].push([f.clone(),m,a.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry,THREE.TubeGeometry.NoTaper=function(){return 1},THREE.TubeGeometry.SinusoidalTaper=function(t){return Math.sin(Math.PI*t)},THREE.TubeGeometry.FrenetFrames=function(t,e,i){var r=new THREE.Vector3,n=[],s=[],a=[],o=new THREE.Vector3,h=new THREE.Matrix4;e+=1;var l,u,c;for(this.tangents=n,this.normals=s,this.binormals=a,l=0;e>l;l++)u=l/(e-1),n[l]=t.getTangentAt(u),n[l].normalize();for(s[0]=new THREE.Vector3,a[0]=new THREE.Vector3,t=Number.MAX_VALUE,l=Math.abs(n[0].x),u=Math.abs(n[0].y),c=Math.abs(n[0].z),t>=l&&(t=l,r.set(1,0,0)),t>=u&&(t=u,r.set(0,1,0)),t>=c&&r.set(0,0,1),o.crossVectors(n[0],r).normalize(),s[0].crossVectors(n[0],o),a[0].crossVectors(n[0],s[0]),l=1;e>l;l++)s[l]=s[l-1].clone(),a[l]=a[l-1].clone(),o.crossVectors(n[l-1],n[l]),1e-4<o.length()&&(o.normalize(),r=Math.acos(THREE.Math.clamp(n[l-1].dot(n[l]),-1,1)),s[l].applyMatrix4(h.makeRotationAxis(o,r))),a[l].crossVectors(n[l],s[l]);if(i)for(r=Math.acos(THREE.Math.clamp(s[0].dot(s[e-1]),-1,1)),r/=e-1,0<n[0].dot(o.crossVectors(s[0],s[e-1]))&&(r=-r),l=1;e>l;l++)s[l].applyMatrix4(h.makeRotationAxis(n[l],r*l)),a[l].crossVectors(n[l],s[l])},THREE.PolyhedronGeometry=function(t,e,i,r){function n(t){var e=t.normalize().clone();e.index=h.vertices.push(e)-1;var i=Math.atan2(t.z,-t.x)/2/Math.PI+.5;return t=Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5,e.uv=new THREE.Vector2(i,1-t),e}function s(t,e,i){var r=new THREE.Face3(t.index,e.index,i.index,[t.clone(),e.clone(),i.clone()]);h.faces.push(r),g.copy(t).add(e).add(i).divideScalar(3),r=Math.atan2(g.z,-g.x),h.faceVertexUvs[0].push([o(t.uv,t,r),o(e.uv,e,r),o(i.uv,i,r)])}function a(t,e){for(var i=Math.pow(2,e),r=n(h.vertices[t.a]),a=n(h.vertices[t.b]),o=n(h.vertices[t.c]),l=[],u=0;i>=u;u++){l[u]=[];for(var c=n(r.clone().lerp(o,u/i)),d=n(a.clone().lerp(o,u/i)),p=i-u,f=0;p>=f;f++)l[u][f]=0==f&&u==i?c:n(c.clone().lerp(d,f/p))}for(u=0;i>u;u++)for(f=0;2*(i-u)-1>f;f++)r=Math.floor(f/2),0==f%2?s(l[u][r+1],l[u+1][r],l[u][r]):s(l[u][r+1],l[u+1][r+1],l[u+1][r])}function o(t,e,i){return 0>i&&1===t.x&&(t=new THREE.Vector2(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new THREE.Vector2(i/2/Math.PI+.5,t.y)),t.clone()}THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r},i=i||1,r=r||0;for(var h=this,l=0,u=t.length;u>l;l+=3)n(new THREE.Vector3(t[l],t[l+1],t[l+2]));t=this.vertices;for(var c=[],d=l=0,u=e.length;u>l;l+=3,d++){var p=t[e[l]],f=t[e[l+1]],m=t[e[l+2]];c[d]=new THREE.Face3(p.index,f.index,m.index,[p.clone(),f.clone(),m.clone()])}for(var g=new THREE.Vector3,l=0,u=c.length;u>l;l++)a(c[l],r);for(l=0,u=this.faceVertexUvs[0].length;u>l;l++)e=this.faceVertexUvs[0][l],r=e[0].x,t=e[1].x,c=e[2].x,d=Math.max(r,Math.max(t,c)),p=Math.min(r,Math.min(t,c)),d>.9&&.1>p&&(.2>r&&(e[0].x+=1),.2>t&&(e[1].x+=1),.2>c&&(e[2].x+=1));for(l=0,u=this.vertices.length;u>l;l++)this.vertices[l].multiplyScalar(i);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,i)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry,THREE.DodecahedronGeometry=function(t,e){this.parameters={radius:t,detail:e};var i=(1+Math.sqrt(5))/2,r=1/i;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e)},THREE.DodecahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry,THREE.IcosahedronGeometry=function(t,e){var i=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry,THREE.OctahedronGeometry=function(t,e){this.parameters={radius:t,detail:e},THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry,THREE.TetrahedronGeometry=function(t,e){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry,THREE.ParametricGeometry=function(t,e,i){THREE.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i};var r,n,s,a,o=this.vertices,h=this.faces,l=this.faceVertexUvs[0],u=e+1;for(r=0;i>=r;r++)for(a=r/i,n=0;e>=n;n++)s=n/e,s=t(s,a),o.push(s);var c,d,p,f;for(r=0;i>r;r++)for(n=0;e>n;n++)t=r*u+n,o=r*u+n+1,a=(r+1)*u+n+1,s=(r+1)*u+n,c=new THREE.Vector2(n/e,r/i),d=new THREE.Vector2((n+1)/e,r/i),p=new THREE.Vector2((n+1)/e,(r+1)/i),f=new THREE.Vector2(n/e,(r+1)/i),h.push(new THREE.Face3(t,o,s)),l.push([c,d,f]),h.push(new THREE.Face3(o,a,s)),l.push([d.clone(),p,f.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry,THREE.AxisHelper=function(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),i=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);t=new THREE.BufferGeometry,t.addAttribute("position",new THREE.BufferAttribute(e,3)),t.addAttribute("color",new THREE.BufferAttribute(i,3)),e=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors}),THREE.Line.call(this,t,e,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.AxisHelper.prototype.constructor=THREE.AxisHelper,THREE.ArrowHelper=function(){var t=new THREE.Geometry;t.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var e=new THREE.CylinderGeometry(0,.5,1,5,1);return e.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),function(i,r,n,s,a,o){THREE.Object3D.call(this),void 0===s&&(s=16776960),void 0===n&&(n=1),void 0===a&&(a=.2*n),void 0===o&&(o=.2*a),this.position.copy(r),this.line=new THREE.Line(t,new THREE.LineBasicMaterial({color:s})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new THREE.Mesh(e,new THREE.MeshBasicMaterial({color:s})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(i),this.setLength(n,a,o)}}(),THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper,THREE.ArrowHelper.prototype.setDirection=function(){var t,e=new THREE.Vector3;return function(i){.99999<i.y?this.quaternion.set(0,0,0,1):-.99999>i.y?this.quaternion.set(1,0,0,0):(e.set(i.z,0,-i.x).normalize(),t=Math.acos(i.y),this.quaternion.setFromAxisAngle(e,t))}}(),THREE.ArrowHelper.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,t-e,1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},THREE.BoxHelper=function(t){var e=new THREE.BufferGeometry;e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3)),THREE.Line.call(this,e,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==t&&this.update(t)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.constructor=THREE.BoxHelper,THREE.BoxHelper.prototype.update=function(t){var e=t.geometry;null===e.boundingBox&&e.computeBoundingBox();var i=e.boundingBox.min,e=e.boundingBox.max,r=this.geometry.attributes.position.array;r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=i.x,r[4]=e.y,r[5]=e.z,r[6]=i.x,r[7]=e.y,r[8]=e.z,r[9]=i.x,r[10]=i.y,r[11]=e.z,r[12]=i.x,r[13]=i.y,r[14]=e.z,r[15]=e.x,r[16]=i.y,r[17]=e.z,r[18]=e.x,r[19]=i.y,r[20]=e.z,r[21]=e.x,r[22]=e.y,r[23]=e.z,r[24]=e.x,r[25]=e.y,r[26]=i.z,r[27]=i.x,r[28]=e.y,r[29]=i.z,r[30]=i.x,r[31]=e.y,r[32]=i.z,r[33]=i.x,r[34]=i.y,r[35]=i.z,r[36]=i.x,r[37]=i.y,r[38]=i.z,r[39]=e.x,r[40]=i.y,r[41]=i.z,r[42]=e.x,r[43]=i.y,r[44]=i.z,r[45]=e.x,r[46]=e.y,r[47]=i.z,r[48]=e.x,r[49]=e.y,r[50]=e.z,r[51]=e.x,r[52]=e.y,r[53]=i.z,r[54]=i.x,r[55]=e.y,r[56]=e.z,r[57]=i.x,r[58]=e.y,r[59]=i.z,r[60]=i.x,r[61]=i.y,r[62]=e.z,r[63]=i.x,r[64]=i.y,r[65]=i.z,r[66]=e.x,r[67]=i.y,r[68]=e.z,r[69]=e.x,r[70]=i.y,r[71]=i.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},THREE.BoundingBoxHelper=function(t,e){var i=void 0!==e?e:8947848;this.object=t,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:i,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper,THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(t){function e(t,e,r){i(t,r),i(e,r)}function i(t,e){r.vertices.push(new THREE.Vector3),r.colors.push(new THREE.Color(e)),void 0===s[t]&&(s[t]=[]),s[t].push(r.vertices.length-1)}var r=new THREE.Geometry,n=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),s={};e("n1","n2",16755200),e("n2","n4",16755200),e("n4","n3",16755200),e("n3","n1",16755200),e("f1","f2",16755200),e("f2","f4",16755200),e("f4","f3",16755200),e("f3","f1",16755200),e("n1","f1",16755200),e("n2","f2",16755200),e("n3","f3",16755200),e("n4","f4",16755200),e("p","n1",16711680),e("p","n2",16711680),e("p","n3",16711680),e("p","n4",16711680),e("u1","u2",43775),e("u2","u3",43775),e("u3","u1",43775),e("c","t",16777215),e("p","c",3355443),e("cn1","cn2",3355443),e("cn3","cn4",3355443),e("cf1","cf2",3355443),e("cf3","cf4",3355443),THREE.Line.call(this,r,n,THREE.LinePieces),this.camera=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.constructor=THREE.CameraHelper,THREE.CameraHelper.prototype.update=function(){var t,e,i=new THREE.Vector3,r=new THREE.Camera,n=function(n,s,a,o){if(i.set(s,a,o).unproject(r),n=e[n],void 0!==n)for(s=0,a=n.length;a>s;s++)t.vertices[n[s]].copy(i)};return function(){t=this.geometry,e=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),n("c",0,0,-1),n("t",0,0,1),n("n1",-1,-1,-1),n("n2",1,-1,-1),n("n3",-1,1,-1),n("n4",1,1,-1),n("f1",-1,-1,1),n("f2",1,-1,1),n("f3",-1,1,1),n("f4",1,1,1),n("u1",.7,1.1,-1),n("u2",-.7,1.1,-1),n("u3",0,2,-1),n("cf1",-1,0,1),n("cf2",1,0,1),n("cf3",0,-1,1),n("cf4",0,1,1),n("cn1",-1,0,-1),n("cn2",1,0,-1),n("cn3",0,-1,-1),n("cn4",0,1,-1),t.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(t,e){THREE.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,e=e||1;var i=new THREE.Geometry;i.vertices.push(new THREE.Vector3(-e,e,0),new THREE.Vector3(e,e,0),new THREE.Vector3(e,-e,0),new THREE.Vector3(-e,-e,0),new THREE.Vector3(-e,e,0));var r=new THREE.LineBasicMaterial({fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(i,r),this.add(this.lightPlane),i=new THREE.Geometry,i.vertices.push(new THREE.Vector3,new THREE.Vector3),r=new THREE.LineBasicMaterial({fog:!1}),r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(i,r),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper,THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(e,t),this.lightPlane.lookAt(i),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(i),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(t,e,i){e=void 0!==e?e:16777215,i=Math.cos(THREE.Math.degToRad(void 0!==i?i:1));var r,n=[0,0],s={},a=function(t,e){return t-e},o=["a","b","c"],h=new THREE.BufferGeometry;t.geometry instanceof THREE.BufferGeometry?(r=new THREE.Geometry,r.fromBufferGeometry(t.geometry)):r=t.geometry.clone(),r.mergeVertices(),r.computeFaceNormals();var l=r.vertices;r=r.faces;for(var u=0,c=0,d=r.length;d>c;c++)for(var p=r[c],f=0;3>f;f++){n[0]=p[o[f]],n[1]=p[o[(f+1)%3]],n.sort(a);var m=n.toString();void 0===s[m]?(s[m]={vert1:n[0],vert2:n[1],face1:c,face2:void 0},u++):s[m].face2=c}n=new Float32Array(6*u),a=0;for(m in s)o=s[m],(void 0===o.face2||r[o.face1].normal.dot(r[o.face2].normal)<=i)&&(u=l[o.vert1],n[a++]=u.x,n[a++]=u.y,n[a++]=u.z,u=l[o.vert2],n[a++]=u.x,n[a++]=u.y,n[a++]=u.z);h.addAttribute("position",new THREE.BufferAttribute(n,3)),THREE.Line.call(this,h,new THREE.LineBasicMaterial({color:e}),THREE.LinePieces),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype),THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper,THREE.FaceNormalsHelper=function(t,e,i,r){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16776960,r=void 0!==r?r:1,e=new THREE.Geometry,i=0;for(var n=this.object.geometry.faces.length;n>i;i++)e.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,e,new THREE.LineBasicMaterial({color:t,linewidth:r}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper,THREE.FaceNormalsHelper.prototype.update=function(){var t=this.geometry.vertices,e=this.object,i=e.geometry.vertices,r=e.geometry.faces,n=e.matrixWorld;e.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(n);for(var s=e=0,a=r.length;a>e;e++,s+=2){var o=r[e];t[s].copy(i[o.a]).add(i[o.b]).add(i[o.c]).divideScalar(3).applyMatrix4(n),t[s+1].copy(o.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(t[s])}return this.geometry.verticesNeedUpdate=!0,this},THREE.GridHelper=function(t,e){var i=new THREE.Geometry,r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var n=-t;t>=n;n+=e){i.vertices.push(new THREE.Vector3(-t,0,n),new THREE.Vector3(t,0,n),new THREE.Vector3(n,0,-t),new THREE.Vector3(n,0,t));var s=0===n?this.color1:this.color2;i.colors.push(s,s,s,s)}THREE.Line.call(this,i,r,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.constructor=THREE.GridHelper,THREE.GridHelper.prototype.setColors=function(t,e){this.color1.set(t),this.color2.set(e),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(t,e){THREE.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var i=new THREE.SphereGeometry(e,4,2);i.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var r=0;8>r;r++)i.faces[r].color=this.colors[4>r?0:1];r=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0}),this.lightSphere=new THREE.Mesh(i,r),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper,THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var t=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(t,e){this.light=t,this.light.updateMatrixWorld();var i=new THREE.SphereGeometry(e,4,2),r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper,THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(t){this.bones=this.getBoneList(t);for(var e=new THREE.Geometry,i=0;i<this.bones.length;i++)this.bones[i].parent instanceof THREE.Bone&&(e.vertices.push(new THREE.Vector3),e.vertices.push(new THREE.Vector3),e.colors.push(new THREE.Color(0,0,1)),e.colors.push(new THREE.Color(0,1,0)));i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0}),THREE.Line.call(this,e,i,THREE.LinePieces),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype),THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper,THREE.SkeletonHelper.prototype.getBoneList=function(t){var e=[];t instanceof THREE.Bone&&e.push(t);for(var i=0;i<t.children.length;i++)e.push.apply(e,this.getBoneList(t.children[i]));return e},THREE.SkeletonHelper.prototype.update=function(){for(var t=this.geometry,e=(new THREE.Matrix4).getInverse(this.root.matrixWorld),i=new THREE.Matrix4,r=0,n=0;n<this.bones.length;n++){var s=this.bones[n];s.parent instanceof THREE.Bone&&(i.multiplyMatrices(e,s.matrixWorld),t.vertices[r].setFromMatrixPosition(i),i.multiplyMatrices(e,s.parent.matrixWorld),t.vertices[r+1].setFromMatrixPosition(i),r+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},THREE.SpotLightHelper=function(t){THREE.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,t=new THREE.CylinderGeometry(0,1,1,8,1,!0),t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var e=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(t,e),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper,THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(){var i=this.light.distance?this.light.distance:1e4,r=i*Math.tan(this.light.angle);this.cone.scale.set(r,r,i),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(t,e,i,r){this.object=t,this.size=void 0!==e?e:1,e=void 0!==i?i:16711680,r=void 0!==r?r:1,i=new THREE.Geometry,t=t.geometry.faces;for(var n=0,s=t.length;s>n;n++)for(var a=0,o=t[n].vertexNormals.length;o>a;a++)i.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,i,new THREE.LineBasicMaterial({color:e,linewidth:r}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper,THREE.VertexNormalsHelper.prototype.update=function(){var t=new THREE.Vector3;return function(e){e=["a","b","c","d"],this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var i=this.geometry.vertices,r=this.object.geometry.vertices,n=this.object.geometry.faces,s=this.object.matrixWorld,a=0,o=0,h=n.length;h>o;o++)for(var l=n[o],u=0,c=l.vertexNormals.length;c>u;u++){var d=l.vertexNormals[u];i[a].copy(r[l[e[u]]]).applyMatrix4(s),t.copy(d).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),t.add(i[a]),a+=1,i[a].copy(t),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(t,e,i,r){this.object=t,this.size=void 0!==e?e:1,e=void 0!==i?i:255,r=void 0!==r?r:1,i=new THREE.Geometry,t=t.geometry.faces;for(var n=0,s=t.length;s>n;n++)for(var a=0,o=t[n].vertexTangents.length;o>a;a++)i.vertices.push(new THREE.Vector3),i.vertices.push(new THREE.Vector3);THREE.Line.call(this,i,new THREE.LineBasicMaterial({color:e,linewidth:r}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.constructor=THREE.VertexTangentsHelper,THREE.VertexTangentsHelper.prototype.update=function(){var t=new THREE.Vector3;return function(e){e=["a","b","c","d"],this.object.updateMatrixWorld(!0);for(var i=this.geometry.vertices,r=this.object.geometry.vertices,n=this.object.geometry.faces,s=this.object.matrixWorld,a=0,o=0,h=n.length;h>o;o++)for(var l=n[o],u=0,c=l.vertexTangents.length;c>u;u++){var d=l.vertexTangents[u];i[a].copy(r[l[e[u]]]).applyMatrix4(s),t.copy(d).transformDirection(s).multiplyScalar(this.size),t.add(i[a]),a+=1,i[a].copy(t),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(t,e){var i=void 0!==e?e:16777215,r=[0,0],n={},s=function(t,e){return t-e},a=["a","b","c"],o=new THREE.BufferGeometry;if(t.geometry instanceof THREE.Geometry){for(var h=t.geometry.vertices,l=t.geometry.faces,u=0,c=new Uint32Array(6*l.length),d=0,p=l.length;p>d;d++)for(var f=l[d],m=0;3>m;m++){r[0]=f[a[m]],r[1]=f[a[(m+1)%3]],r.sort(s);var g=r.toString();void 0===n[g]&&(c[2*u]=r[0],c[2*u+1]=r[1],n[g]=!0,u++)}for(r=new Float32Array(6*u),d=0,p=u;p>d;d++)for(m=0;2>m;m++)u=h[c[2*d+m]],a=6*d+3*m,r[a+0]=u.x,r[a+1]=u.y,r[a+2]=u.z;o.addAttribute("position",new THREE.BufferAttribute(r,3))}else if(t.geometry instanceof THREE.BufferGeometry){if(void 0!==t.geometry.attributes.index){h=t.geometry.attributes.position.array,p=t.geometry.attributes.index.array,l=t.geometry.drawcalls,u=0,0===l.length&&(l=[{count:p.length,index:0,start:0}]);for(var c=new Uint32Array(2*p.length),f=0,E=l.length;E>f;++f)for(var m=l[f].start,g=l[f].count,a=l[f].index,d=m,v=m+g;v>d;d+=3)for(m=0;3>m;m++)r[0]=a+p[d+m],r[1]=a+p[d+(m+1)%3],r.sort(s),g=r.toString(),void 0===n[g]&&(c[2*u]=r[0],c[2*u+1]=r[1],n[g]=!0,u++);for(r=new Float32Array(6*u),d=0,p=u;p>d;d++)for(m=0;2>m;m++)a=6*d+3*m,u=3*c[2*d+m],r[a+0]=h[u],r[a+1]=h[u+1],r[a+2]=h[u+2]}else for(h=t.geometry.attributes.position.array,u=h.length/3,c=u/3,r=new Float32Array(6*u),d=0,p=c;p>d;d++)for(m=0;3>m;m++)a=18*d+6*m,c=9*d+3*m,r[a+0]=h[c],r[a+1]=h[c+1],r[a+2]=h[c+2],u=9*d+(m+1)%3*3,r[a+3]=h[u],r[a+4]=h[u+1],r[a+5]=h[u+2];o.addAttribute("position",new THREE.BufferAttribute(r,3))}THREE.Line.call(this,o,new THREE.LineBasicMaterial({color:i}),THREE.LinePieces),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper,THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject,THREE.MorphBlendMesh=function(t,e){THREE.Mesh.call(this,t,e),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length;this.createAnimation("__default",0,i-1,i/1),this.setAnimationWeight("__default",1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh,THREE.MorphBlendMesh.prototype.createAnimation=function(t,e,i,r){e={startFrame:e,endFrame:i,length:i-e+1,fps:r,duration:(i-e)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[t]=e,this.animationsList.push(e)
},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(t){for(var e,i=/([a-z]+)_?(\d+)/,r={},n=this.geometry,s=0,a=n.morphTargets.length;a>s;s++){var o=n.morphTargets[s].name.match(i);if(o&&1<o.length){var h=o[1];r[h]||(r[h]={start:1/0,end:-1/0}),o=r[h],s<o.start&&(o.start=s),s>o.end&&(o.end=s),e||(e=h)}}for(h in r)o=r[h],this.createAnimation(h,o.start,o.end,t);this.firstAnimation=e},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(t){(t=this.animationsMap[t])&&(t.direction=1,t.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(t){(t=this.animationsMap[t])&&(t.direction=-1,t.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(t,e){var i=this.animationsMap[t];i&&(i.fps=e,i.duration=(i.end-i.start)/i.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(t,e){var i=this.animationsMap[t];i&&(i.duration=e,i.fps=(i.end-i.start)/i.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(t,e){var i=this.animationsMap[t];i&&(i.weight=e)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(t,e){var i=this.animationsMap[t];i&&(i.time=e)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(t){var e=0;return(t=this.animationsMap[t])&&(e=t.time),e},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(t){var e=-1;return(t=this.animationsMap[t])&&(e=t.duration),e},THREE.MorphBlendMesh.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):THREE.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},THREE.MorphBlendMesh.prototype.stopAnimation=function(t){(t=this.animationsMap[t])&&(t.active=!1)},THREE.MorphBlendMesh.prototype.update=function(t){for(var e=0,i=this.animationsList.length;i>e;e++){var r=this.animationsList[e];if(r.active){var n=r.duration/r.length;r.time+=r.direction*t,r.mirroredLoop?(r.time>r.duration||0>r.time)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),0>r.time&&(r.time=0,r.directionBackwards=!1)):(r.time%=r.duration,0>r.time&&(r.time+=r.duration));var s=r.startFrame+THREE.Math.clamp(Math.floor(r.time/n),0,r.length-1),a=r.weight;s!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*a,this.morphTargetInfluences[s]=0,r.lastFrame=r.currentFrame,r.currentFrame=s),n=r.time%n/n,r.directionBackwards&&(n=1-n),this.morphTargetInfluences[r.currentFrame]=n*a,this.morphTargetInfluences[r.lastFrame]=(1-n)*a}}},THREE.CSS3DObject=function(t){THREE.Object3D.call(this),this.element=t,this.element.style.position="absolute",this.addEventListener("removed",function(){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})},THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype),THREE.CSS3DObject.prototype.constructor=THREE.CSS3DObject,THREE.CSS3DSprite=function(t){THREE.CSS3DObject.call(this,t)},THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype),THREE.CSS3DSprite.prototype.constructor=THREE.CSS3DSprite,THREE.CSS3DRenderer=function(){console.log("THREE.CSS3DRenderer",THREE.REVISION);var t,e,i,r,n=new THREE.Matrix4,s={camera:{fov:0,style:""},objects:{}},a=document.createElement("div");a.style.overflow="hidden",a.style.WebkitTransformStyle="preserve-3d",a.style.MozTransformStyle="preserve-3d",a.style.oTransformStyle="preserve-3d",a.style.transformStyle="preserve-3d",this.domElement=a;var o=document.createElement("div");o.style.WebkitTransformStyle="preserve-3d",o.style.MozTransformStyle="preserve-3d",o.style.oTransformStyle="preserve-3d",o.style.transformStyle="preserve-3d",a.appendChild(o),this.setClearColor=function(){},this.setSize=function(n,s){t=n,e=s,i=t/2,r=e/2,a.style.width=n+"px",a.style.height=s+"px",o.style.width=n+"px",o.style.height=s+"px"};var h=function(t){return Math.abs(t)<1e-6?0:t},l=function(t){var e=t.elements;return"matrix3d("+h(e[0])+","+h(-e[1])+","+h(e[2])+","+h(e[3])+","+h(e[4])+","+h(-e[5])+","+h(e[6])+","+h(e[7])+","+h(e[8])+","+h(-e[9])+","+h(e[10])+","+h(e[11])+","+h(e[12])+","+h(-e[13])+","+h(e[14])+","+h(e[15])+")"},u=function(t){var e=t.elements;return"translate3d(-50%,-50%,0) matrix3d("+h(e[0])+","+h(e[1])+","+h(e[2])+","+h(e[3])+","+h(-e[4])+","+h(-e[5])+","+h(-e[6])+","+h(-e[7])+","+h(e[8])+","+h(e[9])+","+h(e[10])+","+h(e[11])+","+h(e[12])+","+h(e[13])+","+h(e[14])+","+h(e[15])+")"},c=function(t,e){if(t instanceof THREE.CSS3DObject){var i;t instanceof THREE.CSS3DSprite?(n.copy(e.matrixWorldInverse),n.transpose(),n.copyPosition(t.matrixWorld),n.scale(t.scale),n.elements[3]=0,n.elements[7]=0,n.elements[11]=0,n.elements[15]=1,i=u(n)):i=u(t.matrixWorld);var r=t.element,a=s.objects[t.id];(void 0===a||a!==i)&&(r.style.WebkitTransform=i,r.style.MozTransform=i,r.style.oTransform=i,r.style.transform=i,s.objects[t.id]=i),r.parentNode!==o&&o.appendChild(r)}for(var h=0,l=t.children.length;l>h;h++)c(t.children[h],e)};this.render=function(t,n){var h=.5/Math.tan(THREE.Math.degToRad(.5*n.fov))*e;s.camera.fov!==h&&(a.style.WebkitPerspective=h+"px",a.style.MozPerspective=h+"px",a.style.oPerspective=h+"px",a.style.perspective=h+"px",s.camera.fov=h),t.updateMatrixWorld(),void 0===n.parent&&n.updateMatrixWorld(),n.matrixWorldInverse.getInverse(n.matrixWorld);var u="translate3d(0,0,"+h+"px)"+l(n.matrixWorldInverse)+" translate3d("+i+"px,"+r+"px, 0)";s.camera.style!==u&&(o.style.WebkitTransform=u,o.style.MozTransform=u,o.style.oTransform=u,o.style.transform=u,s.camera.style=u),c(t,n)}};var TWEEN=TWEEN||function(){var t=[];return{REVISION:"7",getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){e=t.indexOf(e),-1!==e&&t.splice(e,1)},update:function(e){if(0===t.length)return!1;for(var i=0,r=t.length,e=void 0!==e?e:Date.now();r>i;)t[i].update(e)?i++:(t.splice(i,1),r--);return!0}}}();TWEEN.Tween=function(t){var e={},i={},r=1e3,n=0,s=null,a=TWEEN.Easing.Linear.None,o=TWEEN.Interpolation.Linear,h=[],l=null,u=!1,c=null,d=null;this.to=function(t,e){return null!==e&&(r=e),i=t,this},this.start=function(r){TWEEN.add(this),u=!1,s=void 0!==r?r:Date.now(),s+=n;for(var a in i)if(null!==t[a]){if(i[a]instanceof Array){if(0===i[a].length)continue;i[a]=[t[a]].concat(i[a])}e[a]=t[a]}return this},this.stop=function(){return TWEEN.remove(this),this},this.delay=function(t){return n=t,this},this.easing=function(t){return a=t,this},this.interpolation=function(t){return o=t,this},this.chain=function(){return h=arguments,this},this.onStart=function(t){return l=t,this},this.onUpdate=function(t){return c=t,this},this.onComplete=function(t){return d=t,this},this.update=function(n){if(s>n)return!0;!1===u&&(null!==l&&l.call(t),u=!0);var p,f=(n-s)/r,f=f>1?1:f,m=a(f);for(p in e){var g=e[p],E=i[p];t[p]=E instanceof Array?o(E,m):g+(E-g)*m}if(null!==c&&c.call(t,m),1==f){for(null!==d&&d.call(t),f=0,m=h.length;m>f;f++)h[f].start(n);return!1}return!0}},TWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return 1>(t*=2)?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return 1>(t*=2)?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return 1>(t*=2)?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return 1>(t*=2)?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:1>(t*=2)?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)))},Out:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/.4)+1)},InOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),1>(t*=2)?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4):.5*i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)+1)}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){return 1>(t*=2)?.5*t*t*(3.5949095*t-2.5949095):.5*((t-=2)*t*(3.5949095*t+2.5949095)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},TWEEN.Interpolation={Linear:function(t,e){var i=t.length-1,r=i*e,n=Math.floor(r),s=TWEEN.Interpolation.Utils.Linear;return 0>e?s(t[0],t[1],r):e>1?s(t[i],t[i-1],i-r):s(t[n],t[n+1>i?i:n+1],r-n)},Bezier:function(t,e){var i,r=0,n=t.length-1,s=Math.pow,a=TWEEN.Interpolation.Utils.Bernstein;for(i=0;n>=i;i++)r+=s(1-e,n-i)*s(e,i)*t[i]*a(n,i);return r},CatmullRom:function(t,e){var i=t.length-1,r=i*e,n=Math.floor(r),s=TWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(0>e&&(n=Math.floor(r=i*(1+e))),s(t[(n-1+i)%i],t[n],t[(n+1)%i],t[(n+2)%i],r-n)):0>e?t[0]-(s(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[i]-(s(t[i],t[i],t[i-1],t[i-1],r-i)-t[i]):s(t[n?n-1:0],t[n],t[n+1>i?i:n+1],t[n+2>i?i:n+2],r-n)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=TWEEN.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:function(){var t=[1];return function(e){var i,r=1;if(t[e])return t[e];for(i=e;i>1;i--)r*=i;return t[e]=r}}(),CatmullRom:function(t,e,i,r,n){var t=.5*(i-t),r=.5*(r-e),s=n*n;return(2*e-2*i+t+r)*n*s+(-3*e+3*i-2*t-r)*s+t*n+e}}},/*!
 * VERSION: 1.17.0
 * DATE: 2015-05-27
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2015, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
function(t,e){"use strict";var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var r,n,s,a,o,h=function(t){var e,r=t.split("."),n=i;for(e=0;r.length>e;e++)n[r[e]]=n=n[r[e]]||{};return n},l=h("com.greensock"),u=1e-10,c=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},d=function(){},p=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),f={},m=function(r,n,s,a){this.sc=f[r]?f[r].sc:[],f[r]=this,this.gsClass=null,this.func=s;var o=[];this.check=function(l){for(var u,c,d,p,g=n.length,E=g;--g>-1;)(u=f[n[g]]||new m(n[g],[])).gsClass?(o[g]=u.gsClass,E--):l&&u.sc.push(this);if(0===E&&s)for(c=("com.greensock."+r).split("."),d=c.pop(),p=h(c.join("."))[d]=this.gsClass=s.apply(s,o),a&&(i[d]=p,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+r.split(".").pop(),[],function(){return p}):r===e&&"undefined"!=typeof module&&module.exports&&(module.exports=p)),g=0;this.sc.length>g;g++)this.sc[g].check()},this.check(!0)},g=t._gsDefine=function(t,e,i,r){return new m(t,e,i,r)},E=l._class=function(t,e,i){return e=e||function(){},g(t,[],function(){return e},i),e};g.globals=i;var v=[0,0,1,1],_=[],y=E("easing.Ease",function(t,e,i,r){this._func=t,this._type=i||0,this._power=r||0,this._params=e?v.concat(e):v},!0),T=y.map={},x=y.register=function(t,e,i,r){for(var n,s,a,o,h=e.split(","),u=h.length,c=(i||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(s=h[u],n=r?E("easing."+s,null,!0):l.easing[s]||{},a=c.length;--a>-1;)o=c[a],T[s+"."+o]=T[o+s]=n[o]=t.getRatio?t:t[o]||new t};for(s=y.prototype,s._calcEnd=!1,s.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,r=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===e?1-r:2===e?r:.5>t?r/2:1-r/2},r=["Linear","Quad","Cubic","Quart","Quint,Strong"],n=r.length;--n>-1;)s=r[n]+",Power"+n,x(new y(null,null,1,n),s,"easeOut",!0),x(new y(null,null,2,n),s,"easeIn"+(0===n?",easeNone":"")),x(new y(null,null,3,n),s,"easeInOut");T.linear=l.easing.Linear.easeIn,T.swing=l.easing.Quad.easeInOut;var R=E("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});s=R.prototype,s.addEventListener=function(t,e,i,r,n){n=n||0;var s,h,l=this._listeners[t],u=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)s=l[h],s.c===e&&s.s===i?l.splice(h,1):0===u&&n>s.pr&&(u=h+1);l.splice(u,0,{c:e,s:i,up:r,pr:n}),this!==a||o||a.wake()},s.removeEventListener=function(t,e){var i,r=this._listeners[t];if(r)for(i=r.length;--i>-1;)if(r[i].c===e)return void r.splice(i,1)},s.dispatchEvent=function(t){var e,i,r,n=this._listeners[t];if(n)for(e=n.length,i=this._eventTarget;--e>-1;)r=n[e],r&&(r.up?r.c.call(r.s||i,{type:t,target:i}):r.c.call(r.s||i))};var b=t.requestAnimationFrame,w=t.cancelAnimationFrame,H=Date.now||function(){return(new Date).getTime()},S=H();for(r=["ms","moz","webkit","o"],n=r.length;--n>-1&&!b;)b=t[r[n]+"RequestAnimationFrame"],w=t[r[n]+"CancelAnimationFrame"]||t[r[n]+"CancelRequestAnimationFrame"];E("Ticker",function(t,e){var i,r,n,s,h,l=this,c=H(),p=e!==!1&&b,f=500,m=33,g="tick",E=function(t){var e,a,o=H()-S;o>f&&(c+=o-m),S+=o,l.time=(S-c)/1e3,e=l.time-h,(!i||e>0||t===!0)&&(l.frame++,h+=e+(e>=s?.004:s-e),a=!0),t!==!0&&(n=r(E)),a&&l.dispatchEvent(g)};R.call(l),l.time=l.frame=0,l.tick=function(){E(!0)},l.lagSmoothing=function(t,e){f=t||1/u,m=Math.min(e,f,0)},l.sleep=function(){null!=n&&(p&&w?w(n):clearTimeout(n),r=d,n=null,l===a&&(o=!1))},l.wake=function(){null!==n?l.sleep():l.frame>10&&(S=H()-f+5),r=0===i?d:p&&b?b:function(t){return setTimeout(t,0|1e3*(h-l.time)+1)},l===a&&(o=!0),E(2)},l.fps=function(t){return arguments.length?(i=t,s=1/(i||60),h=this.time+s,void l.wake()):i},l.useRAF=function(t){return arguments.length?(l.sleep(),p=t,void l.fps(i)):p},l.fps(t),setTimeout(function(){p&&5>l.frame&&l.useRAF(!1)},1500)}),s=l.Ticker.prototype=new l.events.EventDispatcher,s.constructor=l.Ticker;var M=E("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,V){o||a.wake();var i=this.vars.useFrames?z:V;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});a=M.ticker=new l.Ticker,s=M.prototype,s._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var C=function(){o&&H()-S>2e3&&a.wake(),setTimeout(C,2e3)};C(),s.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},s.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},s.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},s.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},s.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},s.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},s.render=function(){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},s.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},s._enabled=function(t,e){return o||a.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(){return this._enabled(!1,!1)},s.kill=function(t,e){return this._kill(t,e),this},s._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},s._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},s._callback=function(t){var e=this.vars;e[t].apply(e[t+"Scope"]||e.callbackScope||this,e[t+"Params"]||_)},s.eventCallback=function(t,e,i,r){if("on"===(t||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[t];null==e?delete n[t]:(n[t]=e,n[t+"Params"]=p(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,n[t+"Scope"]=r),"onUpdate"===t&&(this._onUpdate=e)}return this},s.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},s.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},s.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},s.totalTime=function(t,e,i){if(o||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,n=this._timeline;if(t>r&&!i&&(t=r),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?r-t:t)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),D.length&&G())}return this},s.progress=s.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},s.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},s.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||u,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},s.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(t){if(!arguments.length)return this._paused;var e,i,r=this._timeline;return t!=this._paused&&r&&(o||t||a.wake(),e=r.rawTime(),i=e-this._pauseTime,!t&&r.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&this.render(r.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,!0,!0)),this._gc&&!t&&this._enabled(!0,!1),this};var A=E("core.SimpleTimeline",function(t){M.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});s=A.prototype=new M,s.constructor=A,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(t,e){var i,r;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(r=t._startTime;i&&i._startTime>r;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},s._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(t,e,i){var r,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;n;)r=n._next,(n._active||t>=n._startTime&&!n._paused)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=r},s.rawTime=function(){return o||a.wake(),this._totalTime};var P=E("TweenLite",function(e,i,r){if(M.call(this,i,r),this.render=P.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:P.selector(e)||e;var n,s,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?U[P.defaultOverwrite]:"number"==typeof h?h>>0:U[h],(o||e instanceof Array||e.push&&p(e))&&"number"!=typeof e[0])for(this._targets=a=c(e),this._propLookup=[],this._siblings=[],n=0;a.length>n;n++)s=a[n],s?"string"!=typeof s?s.length&&s!==t&&s[0]&&(s[0]===t||s[0].nodeType&&s[0].style&&!s.nodeType)?(a.splice(n--,1),this._targets=a=a.concat(c(s))):(this._siblings[n]=W(s,this,!1),1===h&&this._siblings[n].length>1&&X(s,this,null,1,this._siblings[n])):(s=a[n--]=P.selector(s),"string"==typeof s&&a.splice(n+1,1)):a.splice(n--,1);else this._propLookup={},this._siblings=W(e,this,!1),1===h&&this._siblings.length>1&&X(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-u,this.render(-this._delay))},!0),L=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},O=function(t,e){var i,r={};for(i in t)B[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!N[i]||N[i]&&N[i]._autoCSS)||(r[i]=t[i],delete t[i]);t.css=r};s=P.prototype=new M,s.constructor=P,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,P.version="1.17.0",P.defaultEase=s._ease=new y(null,null,1,1),P.defaultOverwrite="auto",P.ticker=a,P.autoSleep=120,P.lagSmoothing=function(t,e){a.lagSmoothing(t,e)},P.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(P.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var D=[],k={},I=P._internals={isArray:p,isSelector:L,lazyTweens:D},N=P._plugins={},F=I.tweenLookup={},j=0,B=I.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1},U={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},z=M._rootFramesTimeline=new A,V=M._rootTimeline=new A,$=30,G=I.lazyRender=function(){var t,e=D.length;for(k={};--e>-1;)t=D[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);D.length=0};V._startTime=a.time,z._startTime=a.frame,V._active=z._active=!0,setTimeout(G,1),M._updateRoot=P.render=function(){var t,e,i;if(D.length&&G(),V.render((a.time-V._startTime)*V._timeScale,!1,!1),z.render((a.frame-z._startTime)*z._timeScale,!1,!1),D.length&&G(),a.frame>=$){$=a.frame+(parseInt(P.autoSleep,10)||120);for(i in F){for(e=F[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete F[i]}if(i=V._first,(!i||i._paused)&&P.autoSleep&&!z._first&&1===a._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||a.sleep()}}},a.addEventListener("tick",M._updateRoot);var W=function(t,e,i){var r,n,s=t._gsTweenID;if(F[s||(t._gsTweenID=s="t"+j++)]||(F[s]={target:t,tweens:[]}),e&&(r=F[s].tweens,r[n=r.length]=e,i))for(;--n>-1;)r[n]===e&&r.splice(n,1);return F[s].tweens},q=function(t,e,i,r){var n,s,a=t.vars.onOverwrite;return a&&(n=a(t,e,i,r)),a=P.onOverwrite,a&&(s=a(t,e,i,r)),n!==!1&&s!==!1},X=function(t,e,i,r,n){var s,a,o,h;if(1===r||r>=4){for(h=n.length,s=0;h>s;s++)if((o=n[s])!==e)o._gc||o._kill(null,t,e)&&(a=!0);else if(5===r)break;return a}var l,c=e._startTime+u,d=[],p=0,f=0===e._duration;for(s=n.length;--s>-1;)(o=n[s])===e||o._gc||o._paused||(o._timeline!==e._timeline?(l=l||Y(e,0,f),0===Y(o,l,f)&&(d[p++]=o)):c>=o._startTime&&o._startTime+o.totalDuration()/o._timeScale>c&&((f||!o._initted)&&2e-10>=c-o._startTime||(d[p++]=o)));for(s=p;--s>-1;)if(o=d[s],2===r&&o._kill(i,t,e)&&(a=!0),2!==r||!o._firstPT&&o._initted){if(2!==r&&!q(o,e))continue;o._enabled(!1,!1)&&(a=!0)}return a},Y=function(t,e,i){for(var r=t._timeline,n=r._timeScale,s=t._startTime;r._timeline;){if(s+=r._startTime,n*=r._timeScale,r._paused)return-100;r=r._timeline}return s/=n,s>e?s-e:i&&s===e||!t._initted&&2*u>s-e?u:(s+=t.totalDuration()/t._timeScale/n)>e+u?0:s-e-u};s._init=function(){var t,e,i,r,n,s=this.vars,a=this._overwrittenProps,o=this._duration,h=!!s.immediateRender,l=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={};for(r in s.startAt)n[r]=s.startAt[r];if(n.overwrite=!1,n.immediateRender=!0,n.lazy=h&&s.lazy!==!1,n.startAt=n.delay=null,this._startAt=P.to(this.target,0,n),h)if(this._time>0)this._startAt=null;else if(0!==o)return}else if(s.runBackwards&&0!==o)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(h=!1),i={};for(r in s)B[r]&&"autoCSS"!==r||(i[r]=s[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&s.lazy!==!1,i.immediateRender=h,this._startAt=P.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof y?l:"function"==typeof l?new y(l,s.easeParams):T[l]||P.defaultEase:P.defaultEase,s.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a);if(e&&P._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},s._initProps=function(e,i,r,n){var s,a,o,h,l,u;if(null==e)return!1;k[e._gsTweenID]&&G(),this.vars.css||e.style&&e!==t&&e.nodeType&&N.css&&this.vars.autoCSS!==!1&&O(this.vars,e);for(s in this.vars){if(u=this.vars[s],B[s])u&&(u instanceof Array||u.push&&p(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[s]=u=this._swapSelfInParams(u,this));else if(N[s]&&(h=new N[s])._onInitTween(e,this.vars[s],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:s,pg:!0,pr:h._priority},a=h._overwriteProps.length;--a>-1;)i[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(o=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[s]=l={_next:this._firstPT,t:e,p:s,f:"function"==typeof e[s],n:s,pg:!1,pr:0},l.s=l.f?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(e[s]),l.c="string"==typeof u&&"="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*Number(u.substr(2)):Number(u)-l.s||0;l&&l._next&&(l._next._prev=l)}return n&&this._kill(n,e)?this._initProps(e,i,r,n):this._overwrite>1&&this._firstPT&&r.length>1&&X(e,this,i,this._overwrite,r)?(this._kill(i,e),this._initProps(e,i,r,n)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(k[e._gsTweenID]=!0),o)},s.render=function(t,e,i){var r,n,s,a,o=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>l||l===u&&"isPause"!==this.data)&&l!==t&&(i=!0,l>u&&(n="onReverseComplete")),this._rawPrevTime=a=!e||t||l===t?t:u);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===h&&l>0)&&(n="onReverseComplete",r=this._reversed),0>t&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==u||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!e||t||l===t?t:u)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var c=t/h,d=this._easeType,p=this._easePower;(1===d||3===d&&c>=.5)&&(c=1-c),3===d&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),this.ratio=1===d?1-c:2===d?c:.5>t/h?c/2:1-c/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=l,D.push(this),void(this._lazy=[t,e]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/h):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>t&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==o||r)&&this._callback("onUpdate")),n&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[n]&&this._callback(n),0===h&&this._rawPrevTime===u&&a!==u&&(this._rawPrevTime=0))}},s._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:P.selector(e)||e;var r,n,s,a,o,h,l,u,c,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((p(e)||L(e))&&"number"!=typeof e[0])for(r=e.length;--r>-1;)this._kill(t,e[r],i)&&(h=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(e===this._targets[r]){o=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[r]=t?this._overwrittenProps[r]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,n=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){if(l=t||o,u=t!==n&&"all"!==n&&t!==o&&("object"!=typeof t||!t._tempKill),i&&(P.onOverwrite||this.vars.onOverwrite)){for(s in l)o[s]&&(c||(c=[]),c.push(s));if((c||!t)&&!q(this,i,e,c))return!1}for(s in l)(a=o[s])&&(d&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,h=!0),a.pg&&a.t._kill(l)&&(h=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete o[s]),u&&(n[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},s.invalidate=function(){return this._notifyPluginsOfEnabled&&P._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],M.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-u,this.render(-this._delay)),this},s._enabled=function(t,e){if(o||a.wake(),t&&this._gc){var i,r=this._targets;if(r)for(i=r.length;--i>-1;)this._siblings[i]=W(r[i],this,!0);else this._siblings=W(this.target,this,!0)}return M.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?P._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},P.to=function(t,e,i){return new P(t,e,i)},P.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new P(t,e,i)},P.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new P(t,e,r)},P.delayedCall=function(t,e,i,r,n){return new P(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},P.set=function(t,e){return new P(t,0,e)},P.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:P.selector(t)||t;var i,r,n,s;if((p(t)||L(t))&&"number"!=typeof t[0]){for(i=t.length,r=[];--i>-1;)r=r.concat(P.getTweensOf(t[i],e));for(i=r.length;--i>-1;)for(s=r[i],n=i;--n>-1;)s===r[n]&&r.splice(i,1)}else for(r=W(t).concat(),i=r.length;--i>-1;)(r[i]._gc||e&&!r[i].isActive())&&r.splice(i,1);return r},P.killTweensOf=P.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var r=P.getTweensOf(t,e),n=r.length;--n>-1;)r[n]._kill(i,t)};var Q=E("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=Q.prototype},!0);if(s=Q.prototype,Q.version="1.10.1",Q.API=2,s._firstPT=null,s._addTween=function(t,e,i,r,n,s){var a,o;return null!=r&&(a="number"==typeof r||"="!==r.charAt(1)?Number(r)-Number(i):parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)))?(this._firstPT=o={_next:this._firstPT,t:t,p:e,s:i,c:a,f:"function"==typeof t[e],n:n||e,r:s},o._next&&(o._next._prev=o),o):void 0},s.setRatio=function(t){for(var e,i=this._firstPT,r=1e-6;i;)e=i.c*t+i.s,i.r?e=Math.round(e):r>e&&e>-r&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},s._kill=function(t){var e,i=this._overwriteProps,r=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;r;)null!=t[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},s._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},P._onPluginEvent=function(t,e){var i,r,n,s,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,r=n;r&&r.pr>o.pr;)r=r._next;(o._prev=r?r._prev:s)?o._prev._next=o:n=o,(o._next=r)?r._prev=o:s=o,o=a}o=e._firstPT=n}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},Q.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===Q.API&&(N[(new t[e])._propName]=t[e]);return!0},g.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,r=t.priority||0,n=t.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=E("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){Q.call(this,i,r),this._overwriteProps=n||[]},t.global===!0),o=a.prototype=new Q(i);o.constructor=a,a.API=t.API;for(e in s)"function"==typeof t[e]&&(o[s[e]]=t[e]);return a.version=t.version,Q.activate([a]),a},r=t._gsQueue){for(n=0;r.length>n;n++)r[n]();for(s in f)f[s].func||t.console.log("GSAP encountered missing dependency: com.greensock."+s)}o=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenLite");/*!
 * VERSION: 1.17.0
 * DATE: 2015-05-27
 * UPDATES AND DOCS AT: http://greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2015, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},n=function(t,e,r){i.call(this,t,e,r),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=n.prototype.render},s=1e-10,a=i._internals,o=a.isSelector,h=a.isArray,l=n.prototype=i.to({},.1,{}),u=[];n.version="1.17.0",l.constructor=n,l.kill()._gc=!1,n.killTweensOf=n.killDelayedCallsTo=i.killTweensOf,n.getTweensOf=i.getTweensOf,n.lagSmoothing=i.lagSmoothing,n.ticker=i.ticker,n.render=i.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(t,e){var r,n=this.ratio,s=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(r in t)this.vars[r]=t[r];if(this._initted||s)if(e)this._initted=!1,s&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var a=this._time;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._time>0||s){this._initted=!1,this._init();for(var o,h=1/(1-n),l=this._firstPT;l;)o=l.s+l.c,l.c*=h,l.s=o-l.c,l=l._next}return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,n,o,h,l,u,c,d,p=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._totalTime,g=this._cycle,E=this._duration,v=this._rawPrevTime;if(t>=p?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=E,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===E&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>v||v===s)&&v!==t&&(i=!0,v>s&&(n="onReverseComplete")),this._rawPrevTime=d=!e||t||v===t?t:s)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===E&&v>0)&&(n="onReverseComplete",r=this._reversed),0>t&&(this._active=!1,0===E&&(this._initted||!this.vars.lazy||i)&&(v>=0&&(i=!0),this._rawPrevTime=d=!e||t||v===t?t:s)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=E+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=E-this._time),this._time>E?this._time=E:0>this._time&&(this._time=0)),this._easeType?(l=this._time/E,u=this._easeType,c=this._easePower,(1===u||3===u&&l>=.5)&&(l=1-l),3===u&&(l*=2),1===c?l*=l:2===c?l*=l*l:3===c?l*=l*l*l:4===c&&(l*=l*l*l*l),this.ratio=1===u?1-l:2===u?l:.5>this._time/E?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/E)),f===this._time&&!i&&g===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=f,this._totalTime=m,this._rawPrevTime=v,this._cycle=g,a.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/E):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==f&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===E)&&(e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||r)&&this._callback("onUpdate")),this._cycle!==g&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),n&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[n]&&this._callback(n),0===E&&this._rawPrevTime===s&&d!==s&&(this._rawPrevTime=0))},n.to=function(t,e,i){return new n(t,e,i)},n.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new n(t,e,i)},n.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new n(t,e,r)},n.staggerTo=n.allTo=function(t,e,s,a,l,c,d){a=a||0;var p,f,m,g,E=s.delay||0,v=[],_=function(){s.onComplete&&s.onComplete.apply(s.onCompleteScope||this,arguments),l.apply(d||s.callbackScope||this,c||u)};for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=r(t))),t=t||[],0>a&&(t=r(t),t.reverse(),a*=-1),p=t.length-1,m=0;p>=m;m++){f={};for(g in s)f[g]=s[g];f.delay=E,m===p&&l&&(f.onComplete=_),v[m]=new n(t[m],e,f),E+=a}return v},n.staggerFrom=n.allFrom=function(t,e,i,r,s,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,n.staggerTo(t,e,i,r,s,a,o)},n.staggerFromTo=n.allFromTo=function(t,e,i,r,s,a,o,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,n.staggerTo(t,e,r,s,a,o,h)},n.delayedCall=function(t,e,i,r,s){return new n(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:s,overwrite:0})},n.set=function(t,e){return new n(t,0,e)},n.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var c=function(t,e){for(var r=[],n=0,s=t._first;s;)s instanceof i?r[n++]=s:(e&&(r[n++]=s),r=r.concat(c(s,e)),n=r.length),s=s._next;return r},d=n.getAllTweens=function(e){return c(t._rootTimeline,e).concat(c(t._rootFramesTimeline,e))};n.killAll=function(t,i,r,n){null==i&&(i=!0),null==r&&(r=!0);var s,a,o,h=d(0!=n),l=h.length,u=i&&r&&n;for(o=0;l>o;o++)a=h[o],(u||a instanceof e||(s=a.target===a.vars.onComplete)&&r||i&&!s)&&(t?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},n.killChildTweensOf=function(t,e){if(null!=t){var s,l,u,c,d,p=a.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=r(t)),h(t))for(c=t.length;--c>-1;)n.killChildTweensOf(t[c],e);else{s=[];for(u in p)for(l=p[u].target.parentNode;l;)l===t&&(s=s.concat(p[u].tweens)),l=l.parentNode;for(d=s.length,c=0;d>c;c++)e&&s[c].totalTime(s[c].totalDuration()),s[c]._enabled(!1,!1)}}};var p=function(t,i,r,n){i=i!==!1,r=r!==!1,n=n!==!1;for(var s,a,o=d(n),h=i&&r&&n,l=o.length;--l>-1;)a=o[l],(h||a instanceof e||(s=a.target===a.vars.onComplete)&&r||i&&!s)&&a.paused(t)};return n.pauseAll=function(t,e,i){p(!0,t,e,i)},n.resumeAll=function(t,e,i){p(!1,t,e,i)},n.globalTimeScale=function(e){var r=t._rootTimeline,n=i.ticker.time;return arguments.length?(e=e||s,r._startTime=n-(n-r._startTime)*r._timeScale/e,r=t._rootFramesTimeline,n=i.ticker.frame,r._startTime=n-(n-r._startTime)*r._timeScale/e,r._timeScale=t._rootTimeline._timeScale=e,e):r._timeScale},l.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},n},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,r,n=this.vars;for(r in n)i=n[r],h(i)&&-1!==i.join("").indexOf("{self}")&&(n[r]=this._swapSelfInParams(i));h(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},n=1e-10,s=i._internals,a=r._internals={},o=s.isSelector,h=s.isArray,l=s.lazyTweens,u=s.lazyRender,c=[],d=_gsScope._gsDefine.globals,p=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=a.pauseCallback=function(t,e,i,r){var s,a=t._timeline,o=a._totalTime,h=t._startTime,l=0>t._rawPrevTime||0===t._rawPrevTime&&a._reversed,u=l?0:n,d=l?n:0;if(e||!this._forcingPlayhead){for(a.pause(h),s=t._prev;s&&s._startTime===h;)s._rawPrevTime=d,s=s._prev;for(s=t._next;s&&s._startTime===h;)s._rawPrevTime=u,s=s._next;e&&e.apply(r||a.vars.callbackScope||a,i||c),(this._forcingPlayhead||!a._paused)&&a.seek(o)}},m=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},g=r.prototype=new e;return r.version="1.17.0",g.constructor=r,g.kill()._gc=g._forcingPlayhead=!1,g.to=function(t,e,r,n){var s=r.repeat&&d.TweenMax||i;return e?this.add(new s(t,e,r),n):this.set(t,r,n)},g.from=function(t,e,r,n){return this.add((r.repeat&&d.TweenMax||i).from(t,e,r),n)},g.fromTo=function(t,e,r,n,s){var a=n.repeat&&d.TweenMax||i;return e?this.add(a.fromTo(t,e,r,n),s):this.set(t,n,s)},g.staggerTo=function(t,e,n,s,a,h,l,u){var c,d=new r({onComplete:h,onCompleteParams:l,callbackScope:u,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],o(t)&&(t=m(t)),s=s||0,0>s&&(t=m(t),t.reverse(),s*=-1),c=0;t.length>c;c++)n.startAt&&(n.startAt=p(n.startAt)),d.to(t[c],e,p(n),c*s);return this.add(d,a)},g.staggerFrom=function(t,e,i,r,n,s,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,r,n,s,a,o)},g.staggerFromTo=function(t,e,i,r,n,s,a,o,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,r,n,s,a,o,h)},g.call=function(t,e,r,n){return this.add(i.delayedCall(0,t,e,r),n)},g.set=function(t,e,r){return r=this._parseTimeOrLabel(r,0,!0),null==e.immediateRender&&(e.immediateRender=r===this._time&&!this._paused),this.add(new i(t,0,e),r)},r.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var n,s,a=new r(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,n=o._first;n;)s=n._next,e&&n instanceof i&&n.target===n.vars.onComplete||a.add(n,n._startTime-n._delay),n=s;return o.add(a,0),a},g.add=function(n,s,a,o){var l,u,c,d,p,f;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,n)),!(n instanceof t)){if(n instanceof Array||n&&n.push&&h(n)){for(a=a||"normal",o=o||0,l=s,u=n.length,c=0;u>c;c++)h(d=n[c])&&(d=new r({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===a?l=d._startTime+d.totalDuration()/d._timeScale:"start"===a&&(d._startTime-=d.delay())),l+=o;return this._uncache(!0)}if("string"==typeof n)return this.addLabel(n,s);if("function"!=typeof n)throw"Cannot add "+n+" into the timeline; it is not a tween, timeline, function, or string.";n=i.delayedCall(0,n)}if(e.prototype.add.call(this,n,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,f=p.rawTime()>n._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},g.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&h(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},g._remove=function(t,i){e.prototype._remove.call(this,t,i);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},g.insert=g.insertMultiple=function(t,e,i,r){return this.add(t,e||0,i,r)},g.appendMultiple=function(t,e,i,r){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,r)},g.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},g.addPause=function(t,e,r,n){var s=i.delayedCall(0,f,["{self}",e,r,n],this);return s.data="isPause",this.add(s,t)},g.removeLabel=function(t){return delete this._labels[t],this},g.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},g._parseTimeOrLabel=function(e,i,r,n){var s;if(n instanceof t&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&h(n)))for(s=n.length;--s>-1;)n[s]instanceof t&&n[s].timeline===this&&this.remove(n[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,r&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,r);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(s=e.indexOf("="),-1===s)return null==this._labels[e]?r?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,r):this.duration()}return Number(e)+i},g.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(t,e){return this.play(t,e)},g.gotoAndStop=function(t,e){return this.pause(t,e)},g.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,s,a,o,h,c=this._dirty?this.totalDuration():this._totalDuration,d=this._time,p=this._startTime,f=this._timeScale,m=this._paused;if(t>=c)this._totalTime=this._time=c,this._reversed||this._hasPausedChild()||(s=!0,o="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===n)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>n&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,t=c+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==d||0===this._duration&&this._rawPrevTime!==n&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(o="onReverseComplete",s=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=s=!0,o="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,0===t&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;t=0,this._initted||(h=!0)}else this._totalTime=this._time=this._rawPrevTime=t;if(this._time!==d&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==d&&t>0&&(this._active=!0),0===d&&this.vars.onStart&&0!==this._time&&(e||this._callback("onStart")),this._time>=d)for(r=this._first;r&&(a=r._next,!this._paused||m);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;else for(r=this._last;r&&(a=r._prev,!this._paused||m);)(r._active||d>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;this._onUpdate&&(e||(l.length&&u(),this._callback("onUpdate"))),o&&(this._gc||(p===this._startTime||f!==this._timeScale)&&(0===this._time||c>=this.totalDuration())&&(s&&(l.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o)))}},g._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof r&&t._hasPausedChild())return!0;t=t._next}return!1},g.getChildren=function(t,e,r,n){n=n||-9999999999;for(var s=[],a=this._first,o=0;a;)n>a._startTime||(a instanceof i?e!==!1&&(s[o++]=a):(r!==!1&&(s[o++]=a),t!==!1&&(s=s.concat(a.getChildren(!0,e,r)),o=s.length))),a=a._next;return s},g.getTweensOf=function(t,e){var r,n,s=this._gc,a=[],o=0;for(s&&this._enabled(!0,!0),r=i.getTweensOf(t),n=r.length;--n>-1;)(r[n].timeline===this||e&&this._contains(r[n]))&&(a[o++]=r[n]);return s&&this._enabled(!1,!0),a},g.recent=function(){return this._recent},g._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},g.shiftChildren=function(t,e,i){i=i||0;for(var r,n=this._first,s=this._labels;n;)n._startTime>=i&&(n._startTime+=t),n=n._next;if(e)for(r in s)s[r]>=i&&(s[r]+=t);return this._uncache(!0)},g._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),r=i.length,n=!1;--r>-1;)i[r]._kill(t,e)&&(n=!0);return n},g.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},g._enabled=function(t,i){if(t===this._gc)for(var r=this._first;r;)r._enabled(t,!0),r=r._next;return e.prototype._enabled.call(this,t,i)},g.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},g.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,r=0,n=this._last,s=999999999999;n;)e=n._prev,n._dirty&&n.totalDuration(),n._startTime>s&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):s=n._startTime,0>n._startTime&&!n._paused&&(r-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),s=0),i=n._startTime+n._totalDuration/n._timeScale,i>r&&(r=i),n=e;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},g.paused=function(e){if(!e)for(var i=this._first,r=this._time;i;)i._startTime===r&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},g.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},g.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var r=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},n=1e-10,s=e._internals,a=s.lazyTweens,o=s.lazyRender,h=new i(null,null,1,0),l=r.prototype=new t;return l.constructor=r,l.kill()._gc=!1,r.version="1.17.0",l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},l.addCallback=function(t,i,r,n){return this.add(e.delayedCall(0,t,r,n),i)},l.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),r=i.length,n=this._parseTimeOrLabel(e);--r>-1;)i[r]._startTime===n&&i[r]._enabled(!1,!1);return this},l.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},l.tweenTo=function(t,i){i=i||{};var r,n,s,a={ease:h,useFrames:this.usesFrames(),immediateRender:!1};for(n in i)a[n]=i[n];return a.time=this._parseTimeOrLabel(t),r=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,s=new e(this,r,a),a.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&r===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),i.onStart&&s._callback("onStart")},s},l.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=i.immediateRender!==!1;var r=this.tweenTo(e,i);return r.duration(Math.abs(r.vars.time-t)/this._timeScale||.001)},l.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,s,h,l,u,c,d=this._dirty?this.totalDuration():this._totalDuration,p=this._duration,f=this._time,m=this._totalTime,g=this._startTime,E=this._timeScale,v=this._rawPrevTime,_=this._paused,y=this._cycle;if(t>=d)this._locked||(this._totalTime=d,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(s=!0,l="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>v||v===n)&&v!==t&&this._first&&(u=!0,v>n&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=p,t=p+1e-4);else if(1e-7>t)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==f||0===p&&v!==n&&(v>0||0>t&&v>=0)&&!this._locked)&&(l="onReverseComplete",s=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=s=!0,l="onReverseComplete"):v>=0&&this._first&&(u=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=p||!e||t||this._rawPrevTime===t?t:n,0===t&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;t=0,this._initted||(u=!0)}else 0===p&&0>v&&(u=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(c=p+this._repeatDelay,this._cycle=this._totalTime/c>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!==(1&this._cycle)&&(this._time=p-this._time),this._time>p?(this._time=p,t=p+1e-4):0>this._time?this._time=t=0:t=this._time));if(this._cycle!==y&&!this._locked){var T=this._yoyo&&0!==(1&y),x=T===(this._yoyo&&0!==(1&this._cycle)),R=this._totalTime,b=this._cycle,w=this._rawPrevTime,H=this._time;if(this._totalTime=y*p,y>this._cycle?T=!T:this._totalTime+=p,this._time=f,this._rawPrevTime=0===p?v-1e-4:v,this._cycle=y,this._locked=!0,f=T?0:p,this.render(f,e,0===p),e||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),x&&(f=T?p+1e-4:-1e-4,this.render(f,!0,!1)),this._locked=!1,this._paused&&!_)return;this._time=H,this._totalTime=R,this._cycle=b,this._rawPrevTime=w}if(!(this._time!==f&&this._first||i||u))return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(e||this._callback("onStart")),this._time>=f)for(r=this._first;r&&(h=r._next,!this._paused||_);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=h;else for(r=this._last;r&&(h=r._prev,!this._paused||_);)(r._active||f>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=h;this._onUpdate&&(e||(a.length&&o(),this._callback("onUpdate"))),l&&(this._locked||this._gc||(g===this._startTime||E!==this._timeScale)&&(0===this._time||d>=this.totalDuration())&&(s&&(a.length&&o(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))},l.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var r,n,s=[],a=this.getChildren(t,e,i),o=0,h=a.length;for(r=0;h>r;r++)n=a[r],n.isActive()&&(s[o++]=n);return s},l.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),r=i.length;for(e=0;r>e;e++)if(i[e].time>t)return i[e].name;return null},l.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},l.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},l.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var t=180/Math.PI,e=[],i=[],r=[],n={},s=_gsScope._gsDefine.globals,a=function(t,e,i,r){this.a=t,this.b=e,this.c=i,this.d=r,this.da=r-t,this.ca=i-t,this.ba=e-t},o=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(t,e,i,r){var n={a:t},s={},a={},o={c:r},h=(t+e)/2,l=(e+i)/2,u=(i+r)/2,c=(h+l)/2,d=(l+u)/2,p=(d-c)/8;return n.b=h+(t-h)/4,s.b=c+p,n.c=s.a=(n.b+s.b)/2,s.c=a.a=(c+d)/2,a.b=d-p,o.b=u+(r-u)/4,a.c=o.a=(a.b+o.b)/2,[n,s,a,o]},l=function(t,n,s,a,o){var l,u,c,d,p,f,m,g,E,v,_,y,T,x=t.length-1,R=0,b=t[0].a;for(l=0;x>l;l++)p=t[R],u=p.a,c=p.d,d=t[R+1].d,o?(_=e[l],y=i[l],T=.25*(y+_)*n/(a?.5:r[l]||.5),f=c-(c-u)*(a?.5*n:0!==_?T/_:0),m=c+(d-c)*(a?.5*n:0!==y?T/y:0),g=c-(f+((m-f)*(3*_/(_+y)+.5)/4||0))):(f=c-.5*(c-u)*n,m=c+.5*(d-c)*n,g=c-(f+m)/2),f+=g,m+=g,p.c=E=f,p.b=0!==l?b:b=p.a+.6*(p.c-p.a),p.da=c-u,p.ca=E-u,p.ba=b-u,s?(v=h(u,b,E,c),t.splice(R,1,v[0],v[1],v[2],v[3]),R+=4):R++,b=m;p=t[R],p.b=b,p.c=b+.4*(p.d-b),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=b-p.a,s&&(v=h(p.a,b,p.c,p.d),t.splice(R,1,v[0],v[1],v[2],v[3]))},u=function(t,r,n,s){var o,h,l,u,c,d,p=[];if(s)for(t=[s].concat(t),h=t.length;--h>-1;)"string"==typeof(d=t[h][r])&&"="===d.charAt(1)&&(t[h][r]=s[r]+Number(d.charAt(0)+d.substr(2)));if(o=t.length-2,0>o)return p[0]=new a(t[0][r],0,0,t[-1>o?0:1][r]),p;for(h=0;o>h;h++)l=t[h][r],u=t[h+1][r],p[h]=new a(l,0,0,u),n&&(c=t[h+2][r],e[h]=(e[h]||0)+(u-l)*(u-l),i[h]=(i[h]||0)+(c-u)*(c-u));return p[h]=new a(t[h][r],0,0,t[h+1][r]),p},c=function(t,s,a,h,c,d){var p,f,m,g,E,v,_,y,T={},x=[],R=d||t[0];c="string"==typeof c?","+c+",":o,null==s&&(s=1);for(f in t[0])x.push(f);if(t.length>1){for(y=t[t.length-1],_=!0,p=x.length;--p>-1;)if(f=x[p],Math.abs(R[f]-y[f])>.05){_=!1;break}_&&(t=t.concat(),d&&t.unshift(d),t.push(t[1]),d=t[t.length-3])}for(e.length=i.length=r.length=0,p=x.length;--p>-1;)f=x[p],n[f]=-1!==c.indexOf(","+f+","),T[f]=u(t,f,n[f],d);for(p=e.length;--p>-1;)e[p]=Math.sqrt(e[p]),i[p]=Math.sqrt(i[p]);if(!h){for(p=x.length;--p>-1;)if(n[f])for(m=T[x[p]],v=m.length-1,g=0;v>g;g++)E=m[g+1].da/i[g]+m[g].da/e[g],r[g]=(r[g]||0)+E*E;for(p=r.length;--p>-1;)r[p]=Math.sqrt(r[p])}for(p=x.length,g=a?4:1;--p>-1;)f=x[p],m=T[f],l(m,s,a,h,n[f]),_&&(m.splice(0,g),m.splice(m.length-g,g));return T},d=function(t,e,i){e=e||"soft";var r,n,s,o,h,l,u,c,d,p,f,m={},g="cubic"===e?3:2,E="soft"===e,v=[];if(E&&i&&(t=[i].concat(t)),null==t||g+1>t.length)throw"invalid Bezier data";for(d in t[0])v.push(d);for(l=v.length;--l>-1;){for(d=v[l],m[d]=h=[],p=0,c=t.length,u=0;c>u;u++)r=null==i?t[u][d]:"string"==typeof(f=t[u][d])&&"="===f.charAt(1)?i[d]+Number(f.charAt(0)+f.substr(2)):Number(f),E&&u>1&&c-1>u&&(h[p++]=(r+h[p-2])/2),h[p++]=r;for(c=p-g+1,p=0,u=0;c>u;u+=g)r=h[u],n=h[u+1],s=h[u+2],o=2===g?0:h[u+3],h[p++]=f=3===g?new a(r,n,s,o):new a(r,(2*n+r)/3,(2*n+s)/3,s);h.length=p}return m},p=function(t,e,i){for(var r,n,s,a,o,h,l,u,c,d,p,f=1/i,m=t.length;--m>-1;)for(d=t[m],s=d.a,a=d.d-s,o=d.c-s,h=d.b-s,r=n=0,u=1;i>=u;u++)l=f*u,c=1-l,r=n-(n=(l*l*a+3*c*(l*o+c*h))*l),p=m*i+u-1,e[p]=(e[p]||0)+r*r},f=function(t,e){e=e>>0||6;var i,r,n,s,a=[],o=[],h=0,l=0,u=e-1,c=[],d=[];for(i in t)p(t[i],a,e);for(n=a.length,r=0;n>r;r++)h+=Math.sqrt(a[r]),s=r%e,d[s]=h,s===u&&(l+=h,s=r/e>>0,c[s]=d,o[s]=l,h=0,d=[]);return{length:l,lengths:o,segments:c}},m=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var r,n,s,a,o,h=e.values||[],l={},u=h[0],p=e.autoRotate||i.vars.orientToBezier;this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",p===!0?0:Number(p)||0]]:null;for(r in u)this._props.push(r);for(s=this._props.length;--s>-1;)r=this._props[s],this._overwriteProps.push(r),n=this._func[r]="function"==typeof t[r],l[r]=n?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),o||l[r]!==h[0][r]&&(o=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?c(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):d(h,e.type,l),this._segCount=this._beziers[r].length,this._timeRes){var m=f(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),s=p.length;--s>-1;){for(a=0;3>a;a++)r=p[s][a],this._func[r]="function"==typeof t[r]?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]:!1;r=p[s][2],this._initialRotations[s]=this._func[r]?this._func[r].call(this._target):this._target[r]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,r,n,s,a,o,h,l,u,c,d=this._segCount,p=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(u=this._lengths,c=this._curSeg,e*=this._length,n=this._li,e>this._l2&&d-1>n){for(l=d-1;l>n&&e>=(this._l2=u[++n]););this._l1=u[n-1],this._li=n,this._curSeg=c=this._segments[n],this._s2=c[this._s1=this._si=0]}else if(this._l1>e&&n>0){for(;n>0&&(this._l1=u[--n])>=e;);0===n&&this._l1>e?this._l1=0:n++,this._l2=u[n],this._li=n,this._curSeg=c=this._segments[n],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(i=n,e-=this._l1,n=this._si,e>this._s2&&c.length-1>n){for(l=c.length-1;l>n&&e>=(this._s2=c[++n]););this._s1=c[n-1],this._si=n}else if(this._s1>e&&n>0){for(;n>0&&(this._s1=c[--n])>=e;);0===n&&this._s1>e?this._s1=0:n++,this._s2=c[n],this._si=n}o=(n+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?d-1:d*e>>0,o=(e-i*(1/d))*d;for(r=1-o,n=this._props.length;--n>-1;)s=this._props[n],a=this._beziers[s][i],h=(o*o*a.da+3*r*(o*a.ca+r*a.ba))*o+a.a,this._round[s]&&(h=Math.round(h)),p[s]?f[s](h):f[s]=h;if(this._autoRotate){var g,E,v,_,y,T,x,R=this._autoRotate;for(n=R.length;--n>-1;)s=R[n][2],T=R[n][3]||0,x=R[n][4]===!0?1:t,a=this._beziers[R[n][0]],g=this._beziers[R[n][1]],a&&g&&(a=a[i],g=g[i],E=a.a+(a.b-a.a)*o,_=a.b+(a.c-a.b)*o,E+=(_-E)*o,_+=(a.c+(a.d-a.c)*o-_)*o,v=g.a+(g.b-g.a)*o,y=g.b+(g.c-g.b)*o,v+=(y-v)*o,y+=(g.c+(g.d-g.c)*o-y)*o,h=m?Math.atan2(y-v,_-E)*x+T:this._initialRotations[n],p[s]?f[s](h):f[s]=h)
}}}),g=m.prototype;m.bezierThrough=c,m.cubicToQuadratic=h,m._autoCSS=!0,m.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},m._cssRegister=function(){var t=s.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,r=e._setPluginRatio,n=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,s,a,o,h){e instanceof Array&&(e={values:e}),h=new m;var l,u,c,d=e.values,p=d.length-1,f=[],g={};if(0>p)return o;for(l=0;p>=l;l++)c=i(t,d[l],a,o,h,p!==l),f[l]=c.end;for(u in e)g[u]=e[u];return g.values=f,o=new n(t,"bezier",0,0,c.pt,2),o.data=c,o.plugin=h,o.setRatio=r,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(l=g.autoRotate===!0?0:Number(g.autoRotate),g.autoRotate=null!=c.end.left?[["left","top","rotation",l,!1]]:null!=c.end.x?[["x","y","rotation",l,!1]]:!1),g.autoRotate&&(a._transform||a._enableTransforms(!1),c.autoRotate=a._target._gsTransform),h._onInitTween(c.proxy,g,a._tween),o}})}},g._roundProps=function(t,e){for(var i=this._overwriteProps,r=i.length;--r>-1;)(t[i[r]]||t.bezier||t.bezierThrough)&&(this._round[i[r]]=e)},g._kill=function(t){var e,i,r=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=r.length;--i>-1;)r[i]===e&&r.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,r,n,s,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o=_gsScope._gsDefine.globals,h={},l=a.prototype=new t("css");l.constructor=a,a.version="1.17.0",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,l="px",a.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var u,c,d,p,f,m,g=/(?:\d|\-\d|\.\d|\-\.\d)+/g,E=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,_=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,y=/(?:\d|\-|\+|=|#|\.)*/g,T=/opacity *= *([^)]*)/i,x=/opacity:([^;]*)/i,R=/alpha\(opacity *=.+?\)/i,b=/^(rgb|hsl)/,w=/([A-Z])/g,H=/-([a-z])/gi,S=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,M=function(t,e){return e.toUpperCase()},C=/(?:Left|Right|Width)/i,A=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,P=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,L=/,(?=[^\)]*(?:\(|$))/gi,O=Math.PI/180,D=180/Math.PI,k={},I=document,N=function(t){return I.createElementNS?I.createElementNS("http://www.w3.org/1999/xhtml",t):I.createElement(t)},F=N("div"),j=N("img"),B=a._internals={_specialProps:h},U=navigator.userAgent,z=function(){var t=U.indexOf("Android"),e=N("a");return d=-1!==U.indexOf("Safari")&&-1===U.indexOf("Chrome")&&(-1===t||Number(U.substr(t+8,1))>3),f=d&&6>Number(U.substr(U.indexOf("Version/")+8,1)),p=-1!==U.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(U)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(U))&&(m=parseFloat(RegExp.$1)),e?(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity)):!1}(),V=function(t){return T.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},$=function(t){window.console&&console.log(t)},G="",W="",q=function(t,e){e=e||F;var i,r,n=e.style;if(void 0!==n[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===n[i[r]+t];);return r>=0?(W=3===r?"ms":i[r],G="-"+W.toLowerCase()+"-",W+t):null},X=I.defaultView?I.defaultView.getComputedStyle:function(){},Y=a.getStyle=function(t,e,i,r,n){var s;return z||"opacity"!==e?(!r&&t.style[e]?s=t.style[e]:(i=i||X(t))?s=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(w,"-$1").toLowerCase()):t.currentStyle&&(s=t.currentStyle[e]),null==n||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:n):V(t)},Q=B.convertToPixels=function(t,i,r,n,s){if("px"===n||!n)return r;if("auto"===n||!r)return 0;var o,h,l,u=C.test(i),c=t,d=F.style,p=0>r;if(p&&(r=-r),"%"===n&&-1!==i.indexOf("border"))o=r/100*(u?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+Y(t,"position")+";line-height:0;","%"!==n&&c.appendChild)d[u?"borderLeftWidth":"borderTopWidth"]=r+n;else{if(c=t.parentNode||I.body,h=c._gsCache,l=e.ticker.frame,h&&u&&h.time===l)return h.width*r/100;d[u?"width":"height"]=r+n}c.appendChild(F),o=parseFloat(F[u?"offsetWidth":"offsetHeight"]),c.removeChild(F),u&&"%"===n&&a.cacheWidths!==!1&&(h=c._gsCache=c._gsCache||{},h.time=l,h.width=100*(o/r)),0!==o||s||(o=Q(t,i,r,n,!0))}return p?-o:o},K=B.calculateOffset=function(t,e,i){if("absolute"!==Y(t,"position",i))return 0;var r="left"===e?"Left":"Top",n=Y(t,"margin"+r,i);return t["offset"+r]-(Q(t,e,parseFloat(n),n.replace(y,""))||0)},Z=function(t,e){var i,r,n,s={};if(e=e||X(t,null))if(i=e.length)for(;--i>-1;)n=e[i],(-1===n.indexOf("-transform")||be===n)&&(s[n.replace(H,M)]=e.getPropertyValue(n));else for(i in e)(-1===i.indexOf("Transform")||Re===i)&&(s[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===s[i]&&(s[i.replace(H,M)]=e[i]);return z||(s.opacity=V(t)),r=Ie(t,e,!1),s.rotation=r.rotation,s.skewX=r.skewX,s.scaleX=r.scaleX,s.scaleY=r.scaleY,s.x=r.x,s.y=r.y,He&&(s.z=r.z,s.rotationX=r.rotationX,s.rotationY=r.rotationY,s.scaleZ=r.scaleZ),s.filters&&delete s.filters,s},J=function(t,e,i,r,n){var s,a,o,h={},l=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(s=i[a])||n&&n[a])&&-1===a.indexOf("Origin")&&("number"==typeof s||"string"==typeof s)&&(h[a]="auto"!==s||"left"!==a&&"top"!==a?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof e[a]||""===e[a].replace(_,"")?s:0:K(t,a),void 0!==l[a]&&(o=new pe(l,a,l[a],o)));if(r)for(a in r)"className"!==a&&(h[a]=r[a]);return{difs:h,firstMPT:o}},te={width:["Left","Right"],height:["Top","Bottom"]},ee=["marginLeft","marginRight","marginTop","marginBottom"],ie=function(t,e,i){var r=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),n=te[e],s=n.length;for(i=i||X(t,null);--s>-1;)r-=parseFloat(Y(t,"padding"+n[s],i,!0))||0,r-=parseFloat(Y(t,"border"+n[s]+"Width",i,!0))||0;return r},re=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),r=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],n=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==n?n="center"===r?"50%":"0":"center"===n&&(n="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),t=r+" "+n+(i.length>2?" "+i[2]:""),e&&(e.oxp=-1!==r.indexOf("%"),e.oyp=-1!==n.indexOf("%"),e.oxr="="===r.charAt(1),e.oyr="="===n.charAt(1),e.ox=parseFloat(r.replace(_,"")),e.oy=parseFloat(n.replace(_,"")),e.v=t),e||t},ne=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},se=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},ae=function(t,e,i,r){var n,s,a,o,h,l=1e-6;return null==t?o=e:"number"==typeof t?o=t:(n=360,s=t.split("_"),h="="===t.charAt(1),a=(h?parseInt(t.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(-1===t.indexOf("rad")?1:D)-(h?0:e),s.length&&(r&&(r[i]=e+a),-1!==t.indexOf("short")&&(a%=n,a!==a%(n/2)&&(a=0>a?a+n:a-n)),-1!==t.indexOf("_cw")&&0>a?a=(a+9999999999*n)%n-(0|a/n)*n:-1!==t.indexOf("ccw")&&a>0&&(a=(a-9999999999*n)%n-(0|a/n)*n)),o=e+a),l>o&&o>-l&&(o=0),o},oe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},he=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},le=a.parseColor=function(t){var e,i,r,n,s,a;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),oe[t]?oe[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),r=t.charAt(3),t="#"+e+e+i+i+r+r),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(g),n=Number(t[0])%360/360,s=Number(t[1])/100,a=Number(t[2])/100,i=.5>=a?a*(s+1):a+s-a*s,e=2*a-i,t.length>3&&(t[3]=Number(t[3])),t[0]=he(n+1/3,e,i),t[1]=he(n,e,i),t[2]=he(n-1/3,e,i),t):(t=t.match(g)||oe.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):oe.black},ue="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(l in oe)ue+="|"+l+"\\b";ue=RegExp(ue+")","gi");var ce=function(t,e,i,r){if(null==t)return function(t){return t};var n,s=e?(t.match(ue)||[""])[0]:"",a=t.split(s).join("").match(v)||[],o=t.substr(0,t.indexOf(a[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",u=a.length,c=u>0?a[0].replace(g,""):"";return u?n=e?function(t){var e,d,p,f;if("number"==typeof t)t+=c;else if(r&&L.test(t)){for(f=t.replace(L,"|").split("|"),p=0;f.length>p;p++)f[p]=n(f[p]);return f.join(",")}if(e=(t.match(ue)||[s])[0],d=t.split(e).join("").match(v)||[],p=d.length,u>p--)for(;u>++p;)d[p]=i?d[0|(p-1)/2]:a[p];return o+d.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,s,d;if("number"==typeof t)t+=c;else if(r&&L.test(t)){for(s=t.replace(L,"|").split("|"),d=0;s.length>d;d++)s[d]=n(s[d]);return s.join(",")}if(e=t.match(v)||[],d=e.length,u>d--)for(;u>++d;)e[d]=i?e[0|(d-1)/2]:a[d];return o+e.join(l)+h}:function(t){return t}},de=function(t){return t=t.split(","),function(e,i,r,n,s,a,o){var h,l=(i+"").split(" ");for(o={},h=0;4>h;h++)o[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return n.parse(e,o,s,a)}},pe=(B._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,r,n,s=this.data,a=s.proxy,o=s.firstMPT,h=1e-6;o;)e=a[o.v],o.r?e=Math.round(e):h>e&&e>-h&&(e=0),o.t[o.p]=e,o=o._next;if(s.autoRotate&&(s.autoRotate.rotation=a.rotation),1===t)for(o=s.firstMPT;o;){if(i=o.t,i.type){if(1===i.type){for(n=i.xs0+i.s+i.xs1,r=1;i.l>r;r++)n+=i["xn"+r]+i["xs"+(r+1)];i.e=n}}else i.e=i.s+i.xs0;o=o._next}},function(t,e,i,r,n){this.t=t,this.p=e,this.v=i,this.r=n,r&&(r._prev=this,this._next=r)}),fe=(B._parseToProxy=function(t,e,i,r,n,s){var a,o,h,l,u,c=r,d={},p={},f=i._transform,m=k;for(i._transform=null,k=e,r=u=i.parse(t,e,r,n),k=m,s&&(i._transform=f,c&&(c._prev=null,c._prev&&(c._prev._next=null)));r&&r!==c;){if(1>=r.type&&(o=r.p,p[o]=r.s+r.c,d[o]=r.s,s||(l=new pe(r,"s",o,l,r.r),r.c=0),1===r.type))for(a=r.l;--a>0;)h="xn"+a,o=r.p+"_"+h,p[o]=r.data[h],d[o]=r[h],s||(l=new pe(r,h,o,l,r.rxp[h]));r=r._next}return{proxy:d,end:p,firstMPT:l,pt:u}},B.CSSPropTween=function(t,e,r,n,a,o,h,l,u,c,d){this.t=t,this.p=e,this.s=r,this.c=n,this.n=h||e,t instanceof fe||s.push(this.n),this.r=l,this.type=o||0,u&&(this.pr=u,i=!0),this.b=void 0===c?r:c,this.e=void 0===d?r+n:d,a&&(this._next=a,a._prev=this)}),me=function(t,e,i,r,n,s){var a=new fe(t,e,i,r-i,n,-1,s);return a.b=i,a.e=a.xs0=r,a},ge=a.parseComplex=function(t,e,i,r,n,s,a,o,h,l){i=i||s||"",a=new fe(t,e,0,0,a,l?2:1,null,!1,o,i,r),r+="";var c,d,p,f,m,v,_,y,T,x,R,w,H=i.split(", ").join(",").split(" "),S=r.split(", ").join(",").split(" "),M=H.length,C=u!==!1;for((-1!==r.indexOf(",")||-1!==i.indexOf(","))&&(H=H.join(" ").replace(L,", ").split(" "),S=S.join(" ").replace(L,", ").split(" "),M=H.length),M!==S.length&&(H=(s||"").split(" "),M=H.length),a.plugin=h,a.setRatio=l,c=0;M>c;c++)if(f=H[c],m=S[c],y=parseFloat(f),y||0===y)a.appendXtra("",y,ne(m,y),m.replace(E,""),C&&-1!==m.indexOf("px"),!0);else if(n&&("#"===f.charAt(0)||oe[f]||b.test(f)))w=","===m.charAt(m.length-1)?"),":")",f=le(f),m=le(m),T=f.length+m.length>6,T&&!z&&0===m[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(S[c]).join("transparent")):(z||(T=!1),a.appendXtra(T?"rgba(":"rgb(",f[0],m[0]-f[0],",",!0,!0).appendXtra("",f[1],m[1]-f[1],",",!0).appendXtra("",f[2],m[2]-f[2],T?",":w,!0),T&&(f=4>f.length?1:f[3],a.appendXtra("",f,(4>m.length?1:m[3])-f,w,!1)));else if(v=f.match(g)){if(_=m.match(E),!_||_.length!==v.length)return a;for(p=0,d=0;v.length>d;d++)R=v[d],x=f.indexOf(R,p),a.appendXtra(f.substr(p,x-p),Number(R),ne(_[d],R),"",C&&"px"===f.substr(x+R.length,2),0===d),p=x+R.length;a["xs"+a.l]+=f.substr(p)}else a["xs"+a.l]+=a.l?" "+f:f;if(-1!==r.indexOf("=")&&a.data){for(w=a.xs0+a.data.s,c=1;a.l>c;c++)w+=a["xs"+c]+a.data["xn"+c];a.e=w+a["xs"+c]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},Ee=9;for(l=fe.prototype,l.l=l.pr=0;--Ee>0;)l["xn"+Ee]=0,l["xs"+Ee]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,i,r,n,s){var a=this,o=a.l;return a["xs"+o]+=s&&o?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=r||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=n,a["xn"+o]=e,a.plugin||(a.xfirst=new fe(a,"xn"+o,e,i,a.xfirst||a,0,a.n,n,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=n,a)):(a["xs"+o]+=e+(r||""),a)};var ve=function(t,e){e=e||{},this.p=e.prefix?q(t)||t:t,h[t]=h[this.p]=this,this.format=e.formatter||ce(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},_e=B._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var r,n,s=t.split(","),a=e.defaultValue;for(i=i||[a],r=0;s.length>r;r++)e.prefix=0===r&&e.prefix,e.defaultValue=i[r]||a,n=new ve(s[r],e)},ye=function(t){if(!h[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";_e(t,{parser:function(t,i,r,n,s,a,l){var u=o.com.greensock.plugins[e];return u?(u._cssRegister(),h[r].parse(t,i,r,n,s,a,l)):($("Error: "+e+" js file not loaded."),s)}})}};l=ve.prototype,l.parseComplex=function(t,e,i,r,n,s){var a,o,h,l,u,c,d=this.keyword;if(this.multi&&(L.test(i)||L.test(e)?(o=e.replace(L,"|").split("|"),h=i.replace(L,"|").split("|")):d&&(o=[e],h=[i])),h){for(l=h.length>o.length?h.length:o.length,a=0;l>a;a++)e=o[a]=o[a]||this.dflt,i=h[a]=h[a]||this.dflt,d&&(u=e.indexOf(d),c=i.indexOf(d),u!==c&&(-1===c?o[a]=o[a].split(d).join(""):-1===u&&(o[a]+=" "+d)));e=o.join(", "),i=h.join(", ")}return ge(t,this.p,e,i,this.clrs,this.dflt,r,this.pr,n,s)},l.parse=function(t,e,i,r,s,a){return this.parseComplex(t.style,this.format(Y(t,this.p,n,!1,this.dflt)),this.format(e),s,a)},a.registerSpecialProp=function(t,e,i){_e(t,{parser:function(t,r,n,s,a,o){var h=new fe(t,n,0,0,a,2,n,!1,i);return h.plugin=o,h.setRatio=e(t,r,s._tween,n),h},priority:i})},a.useSVGTransformAttr=d||p;var Te,xe="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Re=q("transform"),be=G+"transform",we=q("transformOrigin"),He=null!==q("perspective"),Se=B.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=a.defaultForce3D!==!1&&He?a.defaultForce3D||"auto":!1},Me=window.SVGElement,Ce=function(t,e,i){var r,n=I.createElementNS("http://www.w3.org/2000/svg",t),s=/([a-z])([A-Z])/g;for(r in i)n.setAttributeNS(null,r.replace(s,"$1-$2").toLowerCase(),i[r]);return e.appendChild(n),n},Ae=I.documentElement,Pe=function(){var t,e,i,r=m||/Android/i.test(U)&&!window.chrome;return I.createElementNS&&!r&&(t=Ce("svg",Ae),e=Ce("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[we]="50% 50%",e.style[Re]="scaleX(0.5)",r=i===e.getBoundingClientRect().width&&!(p&&He),Ae.removeChild(t)),r}(),Le=function(t,e,i,r,n){var s,o,h,l,u,c,d,p,f,m,g,E,v,_,y=t._gsTransform,T=ke(t,!0);y&&(v=y.xOrigin,_=y.yOrigin),(!r||2>(s=r.split(" ")).length)&&(d=t.getBBox(),e=re(e).split(" "),s=[(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*d.width:parseFloat(e[0]))+d.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*d.height:parseFloat(e[1]))+d.y]),i.xOrigin=l=parseFloat(s[0]),i.yOrigin=u=parseFloat(s[1]),r&&T!==De&&(c=T[0],d=T[1],p=T[2],f=T[3],m=T[4],g=T[5],E=c*f-d*p,o=l*(f/E)+u*(-p/E)+(p*g-f*m)/E,h=l*(-d/E)+u*(c/E)-(c*g-d*m)/E,l=i.xOrigin=s[0]=o,u=i.yOrigin=s[1]=h),y&&(n||n!==!1&&a.defaultSmoothOrigin!==!1?(o=l-v,h=u-_,y.xOffset+=o*T[0]+h*T[2]-o,y.yOffset+=o*T[1]+h*T[3]-h):y.xOffset=y.yOffset=0),t.setAttribute("data-svg-origin",s.join(" "))},Oe=function(t){return!!(Me&&"function"==typeof t.getBBox&&t.getCTM&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM))},De=[1,0,0,1,0,0],ke=function(t,e){var i,r,n,s,a,o=t._gsTransform||new Se,h=1e5;if(Re?r=Y(t,be,null,!0):t.currentStyle&&(r=t.currentStyle.filter.match(A),r=r&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),o.x||0,o.y||0].join(","):""),i=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,(o.svg||t.getBBox&&Oe(t))&&(i&&-1!==(t.style[Re]+"").indexOf("matrix")&&(r=t.style[Re],i=0),n=t.getAttribute("transform"),i&&n&&(-1!==n.indexOf("matrix")?(r=n,i=0):-1!==n.indexOf("translate")&&(r="matrix(1,0,0,1,"+n.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return De;for(n=(r||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],Ee=n.length;--Ee>-1;)s=Number(n[Ee]),n[Ee]=(a=s-(s|=0))?(0|a*h+(0>a?-.5:.5))/h+s:s;return e&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},Ie=B.getTransform=function(t,i,r,s){if(t._gsTransform&&r&&!s)return t._gsTransform;var o,h,l,u,c,d,p=r?t._gsTransform||new Se:new Se,f=0>p.scaleX,m=2e-5,g=1e5,E=He?parseFloat(Y(t,we,i,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,v=parseFloat(a.defaultTransformPerspective)||0;if(p.svg=!(!t.getBBox||!Oe(t)),p.svg&&(Le(t,Y(t,we,n,!1,"50% 50%")+"",p,t.getAttribute("data-svg-origin")),Te=a.useSVGTransformAttr||Pe),o=ke(t),o!==De){if(16===o.length){var _,y,T,x,R,b=o[0],w=o[1],H=o[2],S=o[3],M=o[4],C=o[5],A=o[6],P=o[7],L=o[8],O=o[9],k=o[10],I=o[12],N=o[13],F=o[14],j=o[11],B=Math.atan2(A,k);p.zOrigin&&(F=-p.zOrigin,I=L*F-o[12],N=O*F-o[13],F=k*F+p.zOrigin-o[14]),p.rotationX=B*D,B&&(x=Math.cos(-B),R=Math.sin(-B),_=M*x+L*R,y=C*x+O*R,T=A*x+k*R,L=M*-R+L*x,O=C*-R+O*x,k=A*-R+k*x,j=P*-R+j*x,M=_,C=y,A=T),B=Math.atan2(L,k),p.rotationY=B*D,B&&(x=Math.cos(-B),R=Math.sin(-B),_=b*x-L*R,y=w*x-O*R,T=H*x-k*R,O=w*R+O*x,k=H*R+k*x,j=S*R+j*x,b=_,w=y,H=T),B=Math.atan2(w,b),p.rotation=B*D,B&&(x=Math.cos(-B),R=Math.sin(-B),b=b*x+M*R,y=w*x+C*R,C=w*-R+C*x,A=H*-R+A*x,w=y),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY+=180),p.scaleX=(0|Math.sqrt(b*b+w*w)*g+.5)/g,p.scaleY=(0|Math.sqrt(C*C+O*O)*g+.5)/g,p.scaleZ=(0|Math.sqrt(A*A+k*k)*g+.5)/g,p.skewX=0,p.perspective=j?1/(0>j?-j:j):0,p.x=I,p.y=N,p.z=F,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*b-p.yOrigin*M),p.y-=p.yOrigin-(p.yOrigin*w-p.xOrigin*C))}else if(!(He&&!s&&o.length&&p.x===o[4]&&p.y===o[5]&&(p.rotationX||p.rotationY)||void 0!==p.x&&"none"===Y(t,"display",i))){var U=o.length>=6,z=U?o[0]:1,V=o[1]||0,$=o[2]||0,G=U?o[3]:1;p.x=o[4]||0,p.y=o[5]||0,l=Math.sqrt(z*z+V*V),u=Math.sqrt(G*G+$*$),c=z||V?Math.atan2(V,z)*D:p.rotation||0,d=$||G?Math.atan2($,G)*D+c:p.skewX||0,Math.abs(d)>90&&270>Math.abs(d)&&(f?(l*=-1,d+=0>=c?180:-180,c+=0>=c?180:-180):(u*=-1,d+=0>=d?180:-180)),p.scaleX=l,p.scaleY=u,p.rotation=c,p.skewX=d,He&&(p.rotationX=p.rotationY=p.z=0,p.perspective=v,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*z+p.yOrigin*$),p.y-=p.yOrigin-(p.xOrigin*V+p.yOrigin*G))}p.zOrigin=E;for(h in p)m>p[h]&&p[h]>-m&&(p[h]=0)}return r&&(t._gsTransform=p,p.svg&&(Te&&t.style[Re]?e.delayedCall(.001,function(){Be(t.style,Re)}):!Te&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),p},Ne=function(t){var e,i,r=this.data,n=-r.rotation*O,s=n+r.skewX*O,a=1e5,o=(0|Math.cos(n)*r.scaleX*a)/a,h=(0|Math.sin(n)*r.scaleX*a)/a,l=(0|Math.sin(s)*-r.scaleY*a)/a,u=(0|Math.cos(s)*r.scaleY*a)/a,c=this.t.style,d=this.t.currentStyle;if(d){i=h,h=-l,l=-i,e=d.filter,c.filter="";var p,f,g=this.t.offsetWidth,E=this.t.offsetHeight,v="absolute"!==d.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+h+", M21="+l+", M22="+u,x=r.x+g*r.xPercent/100,R=r.y+E*r.yPercent/100;if(null!=r.ox&&(p=(r.oxp?.01*g*r.ox:r.ox)-g/2,f=(r.oyp?.01*E*r.oy:r.oy)-E/2,x+=p-(p*o+f*h),R+=f-(p*l+f*u)),v?(p=g/2,f=E/2,_+=", Dx="+(p-(p*o+f*h)+x)+", Dy="+(f-(p*l+f*u)+R)+")"):_+=", sizingMethod='auto expand')",c.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(P,_):_+" "+e,(0===t||1===t)&&1===o&&0===h&&0===l&&1===u&&(v&&-1===_.indexOf("Dx=0, Dy=0")||T.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient("&&e.indexOf("Alpha"))&&c.removeAttribute("filter")),!v){var b,w,H,S=8>m?1:-1;for(p=r.ieOffsetX||0,f=r.ieOffsetY||0,r.ieOffsetX=Math.round((g-((0>o?-o:o)*g+(0>h?-h:h)*E))/2+x),r.ieOffsetY=Math.round((E-((0>u?-u:u)*E+(0>l?-l:l)*g))/2+R),Ee=0;4>Ee;Ee++)w=ee[Ee],b=d[w],i=-1!==b.indexOf("px")?parseFloat(b):Q(this.t,w,parseFloat(b),b.replace(y,""))||0,H=i!==r[w]?2>Ee?-r.ieOffsetX:-r.ieOffsetY:2>Ee?p-r.ieOffsetX:f-r.ieOffsetY,c[w]=(r[w]=Math.round(i-H*(0===Ee||2===Ee?1:S)))+"px"}}},Fe=B.set3DTransformRatio=B.setTransformRatio=function(t){var e,i,r,n,s,a,o,h,l,u,c,d,f,m,g,E,v,_,y,T,x,R,b,w=this.data,H=this.t.style,S=w.rotation,M=w.rotationX,C=w.rotationY,A=w.scaleX,P=w.scaleY,L=w.scaleZ,D=w.x,k=w.y,I=w.z,N=w.svg,F=w.perspective,j=w.force3D;if(!((1!==t&&0!==t||"auto"!==j||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&j||I||F||C||M)||Te&&N||!He)return void(S||w.skewX||N?(S*=O,R=w.skewX*O,b=1e5,e=Math.cos(S)*A,n=Math.sin(S)*A,i=Math.sin(S-R)*-P,s=Math.cos(S-R)*P,R&&"simple"===w.skewType&&(v=Math.tan(R),v=Math.sqrt(1+v*v),i*=v,s*=v,w.skewY&&(e*=v,n*=v)),N&&(D+=w.xOrigin-(w.xOrigin*e+w.yOrigin*i)+w.xOffset,k+=w.yOrigin-(w.xOrigin*n+w.yOrigin*s)+w.yOffset,Te&&(w.xPercent||w.yPercent)&&(m=this.t.getBBox(),D+=.01*w.xPercent*m.width,k+=.01*w.yPercent*m.height),m=1e-6,m>D&&D>-m&&(D=0),m>k&&k>-m&&(k=0)),y=(0|e*b)/b+","+(0|n*b)/b+","+(0|i*b)/b+","+(0|s*b)/b+","+D+","+k+")",N&&Te?this.t.setAttribute("transform","matrix("+y):H[Re]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+y):H[Re]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+A+",0,0,"+P+","+D+","+k+")");if(p&&(m=1e-4,m>A&&A>-m&&(A=L=2e-5),m>P&&P>-m&&(P=L=2e-5),!F||w.z||w.rotationX||w.rotationY||(F=0)),S||w.skewX)S*=O,g=e=Math.cos(S),E=n=Math.sin(S),w.skewX&&(S-=w.skewX*O,g=Math.cos(S),E=Math.sin(S),"simple"===w.skewType&&(v=Math.tan(w.skewX*O),v=Math.sqrt(1+v*v),g*=v,E*=v,w.skewY&&(e*=v,n*=v))),i=-E,s=g;else{if(!(C||M||1!==L||F||N))return void(H[Re]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) translate3d(":"translate3d(")+D+"px,"+k+"px,"+I+"px)"+(1!==A||1!==P?" scale("+A+","+P+")":""));e=s=1,i=n=0}l=1,r=a=o=h=u=c=0,d=F?-1/F:0,f=w.zOrigin,m=1e-6,T=",",x="0",S=C*O,S&&(g=Math.cos(S),E=Math.sin(S),o=-E,u=d*-E,r=e*E,a=n*E,l=g,d*=g,e*=g,n*=g),S=M*O,S&&(g=Math.cos(S),E=Math.sin(S),v=i*g+r*E,_=s*g+a*E,h=l*E,c=d*E,r=i*-E+r*g,a=s*-E+a*g,l*=g,d*=g,i=v,s=_),1!==L&&(r*=L,a*=L,l*=L,d*=L),1!==P&&(i*=P,s*=P,h*=P,c*=P),1!==A&&(e*=A,n*=A,o*=A,u*=A),(f||N)&&(f&&(D+=r*-f,k+=a*-f,I+=l*-f+f),N&&(D+=w.xOrigin-(w.xOrigin*e+w.yOrigin*i)+w.xOffset,k+=w.yOrigin-(w.xOrigin*n+w.yOrigin*s)+w.yOffset),m>D&&D>-m&&(D=x),m>k&&k>-m&&(k=x),m>I&&I>-m&&(I=0)),y=w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix3d(":"matrix3d(",y+=(m>e&&e>-m?x:e)+T+(m>n&&n>-m?x:n)+T+(m>o&&o>-m?x:o),y+=T+(m>u&&u>-m?x:u)+T+(m>i&&i>-m?x:i)+T+(m>s&&s>-m?x:s),M||C?(y+=T+(m>h&&h>-m?x:h)+T+(m>c&&c>-m?x:c)+T+(m>r&&r>-m?x:r),y+=T+(m>a&&a>-m?x:a)+T+(m>l&&l>-m?x:l)+T+(m>d&&d>-m?x:d)+T):y+=",0,0,0,0,1,0,",y+=D+T+k+T+I+T+(F?1+-I/F:1)+")",H[Re]=y};l=Se.prototype,l.x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=l.xOffset=l.yOffset=0,l.scaleX=l.scaleY=l.scaleZ=1,_e("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,r,s,o,h){if(r._lastParsedTransform===h)return s;r._lastParsedTransform=h;var l,u,c,d,p,f,m,g,E,v=t._gsTransform,_=r._transform=Ie(t,n,!0,h.parseTransform),y=t.style,T=1e-6,x=xe.length,R=h,b={},w="transformOrigin";if("string"==typeof R.transform&&Re)c=F.style,c[Re]=R.transform,c.display="block",c.position="absolute",I.body.appendChild(F),l=Ie(F,null,!1),I.body.removeChild(F),null!=R.xPercent&&(l.xPercent=se(R.xPercent,_.xPercent)),null!=R.yPercent&&(l.yPercent=se(R.yPercent,_.yPercent));else if("object"==typeof R){if(l={scaleX:se(null!=R.scaleX?R.scaleX:R.scale,_.scaleX),scaleY:se(null!=R.scaleY?R.scaleY:R.scale,_.scaleY),scaleZ:se(R.scaleZ,_.scaleZ),x:se(R.x,_.x),y:se(R.y,_.y),z:se(R.z,_.z),xPercent:se(R.xPercent,_.xPercent),yPercent:se(R.yPercent,_.yPercent),perspective:se(R.transformPerspective,_.perspective)},m=R.directionalRotation,null!=m)if("object"==typeof m)for(c in m)R[c]=m[c];else R.rotation=m;"string"==typeof R.x&&-1!==R.x.indexOf("%")&&(l.x=0,l.xPercent=se(R.x,_.xPercent)),"string"==typeof R.y&&-1!==R.y.indexOf("%")&&(l.y=0,l.yPercent=se(R.y,_.yPercent)),l.rotation=ae("rotation"in R?R.rotation:"shortRotation"in R?R.shortRotation+"_short":"rotationZ"in R?R.rotationZ:_.rotation,_.rotation,"rotation",b),He&&(l.rotationX=ae("rotationX"in R?R.rotationX:"shortRotationX"in R?R.shortRotationX+"_short":_.rotationX||0,_.rotationX,"rotationX",b),l.rotationY=ae("rotationY"in R?R.rotationY:"shortRotationY"in R?R.shortRotationY+"_short":_.rotationY||0,_.rotationY,"rotationY",b)),l.skewX=null==R.skewX?_.skewX:ae(R.skewX,_.skewX),l.skewY=null==R.skewY?_.skewY:ae(R.skewY,_.skewY),(u=l.skewY-_.skewY)&&(l.skewX+=u,l.rotation+=u)}for(He&&null!=R.force3D&&(_.force3D=R.force3D,f=!0),_.skewType=R.skewType||_.skewType||a.defaultSkewType,p=_.force3D||_.z||_.rotationX||_.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,p||null==R.scale||(l.scaleZ=1);--x>-1;)i=xe[x],d=l[i]-_[i],(d>T||-T>d||null!=R[i]||null!=k[i])&&(f=!0,s=new fe(_,i,_[i],d,s),i in b&&(s.e=b[i]),s.xs0=0,s.plugin=o,r._overwriteProps.push(s.n));return d=R.transformOrigin,_.svg&&(d||R.svgOrigin)&&(g=_.xOffset,E=_.yOffset,Le(t,re(d),l,R.svgOrigin,R.smoothOrigin),s=me(_,"xOrigin",(v?_:l).xOrigin,l.xOrigin,s,w),s=me(_,"yOrigin",(v?_:l).yOrigin,l.yOrigin,s,w),(g!==_.xOffset||E!==_.yOffset)&&(s=me(_,"xOffset",v?g:_.xOffset,_.xOffset,s,w),s=me(_,"yOffset",v?E:_.yOffset,_.yOffset,s,w)),d=Te?null:"0px 0px"),(d||He&&p&&_.zOrigin)&&(Re?(f=!0,i=we,d=(d||Y(t,i,n,!1,"50% 50%"))+"",s=new fe(y,i,0,0,s,-1,w),s.b=y[i],s.plugin=o,He?(c=_.zOrigin,d=d.split(" "),_.zOrigin=(d.length>2&&(0===c||"0px"!==d[2])?parseFloat(d[2]):c)||0,s.xs0=s.e=d[0]+" "+(d[1]||"50%")+" 0px",s=new fe(_,"zOrigin",0,0,s,-1,s.n),s.b=c,s.xs0=s.e=_.zOrigin):s.xs0=s.e=d):re(d+"",_)),f&&(r._transformType=_.svg&&Te||!p&&3!==this._transformType?2:3),s},prefix:!0}),_e("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),_e("borderRadius",{defaultValue:"0px",parser:function(t,e,i,s,a){e=this.format(e);var o,h,l,u,c,d,p,f,m,g,E,v,_,y,T,x,R=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],b=t.style;for(m=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),o=e.split(" "),h=0;R.length>h;h++)this.p.indexOf("border")&&(R[h]=q(R[h])),c=u=Y(t,R[h],n,!1,"0px"),-1!==c.indexOf(" ")&&(u=c.split(" "),c=u[0],u=u[1]),d=l=o[h],p=parseFloat(c),v=c.substr((p+"").length),_="="===d.charAt(1),_?(f=parseInt(d.charAt(0)+"1",10),d=d.substr(2),f*=parseFloat(d),E=d.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(d),E=d.substr((f+"").length)),""===E&&(E=r[i]||v),E!==v&&(y=Q(t,"borderLeft",p,v),T=Q(t,"borderTop",p,v),"%"===E?(c=100*(y/m)+"%",u=100*(T/g)+"%"):"em"===E?(x=Q(t,"borderLeft",1,"em"),c=y/x+"em",u=T/x+"em"):(c=y+"px",u=T+"px"),_&&(d=parseFloat(c)+f+E,l=parseFloat(u)+f+E)),a=ge(b,R[h],c+" "+u,d+" "+l,!1,"0px",a);return a},prefix:!0,formatter:ce("0px 0px 0px 0px",!1,!0)}),_e("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,r,s,a){var o,h,l,u,c,d,p="background-position",f=n||X(t,null),g=this.format((f?m?f.getPropertyValue(p+"-x")+" "+f.getPropertyValue(p+"-y"):f.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),E=this.format(e);if(-1!==g.indexOf("%")!=(-1!==E.indexOf("%"))&&(d=Y(t,"backgroundImage").replace(S,""),d&&"none"!==d)){for(o=g.split(" "),h=E.split(" "),j.setAttribute("src",d),l=2;--l>-1;)g=o[l],u=-1!==g.indexOf("%"),u!==(-1!==h[l].indexOf("%"))&&(c=0===l?t.offsetWidth-j.width:t.offsetHeight-j.height,o[l]=u?parseFloat(g)/100*c+"px":100*(parseFloat(g)/c)+"%");g=o.join(" ")}return this.parseComplex(t.style,g,E,s,a)},formatter:re}),_e("backgroundSize",{defaultValue:"0 0",formatter:re}),_e("perspective",{defaultValue:"0px",prefix:!0}),_e("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),_e("transformStyle",{prefix:!0}),_e("backfaceVisibility",{prefix:!0}),_e("userSelect",{prefix:!0}),_e("margin",{parser:de("marginTop,marginRight,marginBottom,marginLeft")}),_e("padding",{parser:de("paddingTop,paddingRight,paddingBottom,paddingLeft")}),_e("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,r,s,a){var o,h,l;return 9>m?(h=t.currentStyle,l=8>m?" ":",",o="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(o=this.format(Y(t,this.p,n,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,s,a)}}),_e("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),_e("autoRound,strictUnits",{parser:function(t,e,i,r,n){return n}}),_e("border",{defaultValue:"0px solid #000",parser:function(t,e,i,r,s,a){return this.parseComplex(t.style,this.format(Y(t,"borderTopWidth",n,!1,"0px")+" "+Y(t,"borderTopStyle",n,!1,"solid")+" "+Y(t,"borderTopColor",n,!1,"#000")),this.format(e),s,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(ue)||["#000"])[0]}}),_e("borderWidth",{parser:de("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),_e("float,cssFloat,styleFloat",{parser:function(t,e,i,r,n){var s=t.style,a="cssFloat"in s?"cssFloat":"styleFloat";return new fe(s,a,0,0,n,-1,i,!1,0,s[a],e)}});var je=function(t){var e,i=this.t,r=i.filter||Y(this.data,"filter")||"",n=0|this.s+this.c*t;100===n&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(i.removeAttribute("filter"),e=!Y(this.data,"filter")):(i.filter=r.replace(R,""),e=!0)),e||(this.xn1&&(i.filter=r=r||"alpha(opacity="+n+")"),-1===r.indexOf("pacity")?0===n&&this.xn1||(i.filter=r+" alpha(opacity="+n+")"):i.filter=r.replace(T,"opacity="+n))};_e("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,r,s,a){var o=parseFloat(Y(t,"opacity",n,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),l&&1===o&&"hidden"===Y(t,"visibility",n)&&0!==e&&(o=0),z?s=new fe(h,"opacity",o,e-o,s):(s=new fe(h,"opacity",100*o,100*(e-o),s),s.xn1=l?1:0,h.zoom=1,s.type=2,s.b="alpha(opacity="+s.s+")",s.e="alpha(opacity="+(s.s+s.c)+")",s.data=t,s.plugin=a,s.setRatio=je),l&&(s=new fe(h,"visibility",0,0,s,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit"),s.xs0="inherit",r._overwriteProps.push(s.n),r._overwriteProps.push(i)),s}});var Be=function(t,e){e&&(t.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),t.removeProperty(e.replace(w,"-$1").toLowerCase())):t.removeAttribute(e))},Ue=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Be(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};_e("className",{parser:function(t,e,r,s,a,o,h){var l,u,c,d,p,f=t.getAttribute("class")||"",m=t.style.cssText;if(a=s._classNamePT=new fe(t,r,0,0,a,2),a.setRatio=Ue,a.pr=-11,i=!0,a.b=f,u=Z(t,n),c=t._gsClassPT){for(d={},p=c.data;p;)d[p.p]=1,p=p._next;c.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",a.e),l=J(t,u,Z(t),h,d),t.setAttribute("class",f),a.data=l.firstMPT,t.style.cssText=m,a=a.xfirst=s.parse(t,l.difs,a,o)}});var ze=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,r,n,s,a=this.t.style,o=h.transform.parse;if("all"===this.e)a.cssText="",n=!0;else for(e=this.e.split(" ").join("").split(","),r=e.length;--r>-1;)i=e[r],h[i]&&(h[i].parse===o?n=!0:i="transformOrigin"===i?we:h[i].p),Be(a,i);n&&(Be(a,Re),s=this.t._gsTransform,s&&(s.svg&&this.t.removeAttribute("data-svg-origin"),delete this.t._gsTransform))}};for(_e("clearProps",{parser:function(t,e,r,n,s){return s=new fe(t,r,0,0,s,2),s.setRatio=ze,s.e=e,s.pr=-10,s.data=n._tween,i=!0,s
}}),l="bezier,throwProps,physicsProps,physics2D".split(","),Ee=l.length;Ee--;)ye(l[Ee]);l=a.prototype,l._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(t,e,o){if(!t.nodeType)return!1;this._target=t,this._tween=o,this._vars=e,u=e.autoRound,i=!1,r=e.suffixMap||a.suffixMap,n=X(t,""),s=this._overwriteProps;var l,p,m,g,E,v,_,y,T,R=t.style;if(c&&""===R.zIndex&&(l=Y(t,"zIndex",n),("auto"===l||""===l)&&this._addLazySet(R,"zIndex",0)),"string"==typeof e&&(g=R.cssText,l=Z(t,n),R.cssText=g+";"+e,l=J(t,l,Z(t)).difs,!z&&x.test(e)&&(l.opacity=parseFloat(RegExp.$1)),e=l,R.cssText=g),this._firstPT=p=e.className?h.className.parse(t,e.className,"className",this,null,null,e):this.parse(t,e,null),this._transformType){for(T=3===this._transformType,Re?d&&(c=!0,""===R.zIndex&&(_=Y(t,"zIndex",n),("auto"===_||""===_)&&this._addLazySet(R,"zIndex",0)),f&&this._addLazySet(R,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(T?"visible":"hidden"))):R.zoom=1,m=p;m&&m._next;)m=m._next;y=new fe(t,"transform",0,0,null,2),this._linkCSSP(y,null,m),y.setRatio=Re?Fe:Ne,y.data=this._transform||Ie(t,n,!0),y.tween=o,y.pr=-1,s.pop()}if(i){for(;p;){for(v=p._next,m=g;m&&m.pr>p.pr;)m=m._next;(p._prev=m?m._prev:E)?p._prev._next=p:g=p,(p._next=m)?m._prev=p:E=p,p=v}this._firstPT=g}return!0},l.parse=function(t,e,i,s){var a,o,l,c,d,p,f,m,g,E,v=t.style;for(a in e)p=e[a],o=h[a],o?i=o.parse(t,p,a,this,i,s,e):(d=Y(t,a,n)+"",g="string"==typeof p,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||g&&b.test(p)?(g||(p=le(p),p=(p.length>3?"rgba(":"rgb(")+p.join(",")+")"),i=ge(v,a,d,p,!0,"transparent",i,0,s)):!g||-1===p.indexOf(" ")&&-1===p.indexOf(",")?(l=parseFloat(d),f=l||0===l?d.substr((l+"").length):"",(""===d||"auto"===d)&&("width"===a||"height"===a?(l=ie(t,a,n),f="px"):"left"===a||"top"===a?(l=K(t,a,n),f="px"):(l="opacity"!==a?0:1,f="")),E=g&&"="===p.charAt(1),E?(c=parseInt(p.charAt(0)+"1",10),p=p.substr(2),c*=parseFloat(p),m=p.replace(y,"")):(c=parseFloat(p),m=g?p.replace(y,""):""),""===m&&(m=a in r?r[a]:f),p=c||0===c?(E?c+l:c)+m:e[a],f!==m&&""!==m&&(c||0===c)&&l&&(l=Q(t,a,l,f),"%"===m?(l/=Q(t,a,100,"%")/100,e.strictUnits!==!0&&(d=l+"%")):"em"===m?l/=Q(t,a,1,"em"):"px"!==m&&(c=Q(t,a,c,m),m="px"),E&&(c||0===c)&&(p=c+l+m)),E&&(c+=l),!l&&0!==l||!c&&0!==c?void 0!==v[a]&&(p||"NaN"!=p+""&&null!=p)?(i=new fe(v,a,c||l||0,0,i,-1,a,!1,0,d,p),i.xs0="none"!==p||"display"!==a&&-1===a.indexOf("Style")?p:d):$("invalid "+a+" tween value: "+e[a]):(i=new fe(v,a,l,c-l,i,0,a,u!==!1&&("px"===m||"zIndex"===a),0,d,p),i.xs0=m)):i=ge(v,a,d,p,!0,null,i,0,s)),s&&i&&!i.plugin&&(i.plugin=s);return i},l.setRatio=function(t){var e,i,r,n=this._firstPT,s=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;n;){if(e=n.c*t+n.s,n.r?e=Math.round(e):s>e&&e>-s&&(e=0),n.type)if(1===n.type)if(r=n.l,2===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2;else if(3===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(i=n.xs0+e+n.xs1,r=1;n.l>r;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(t);else n.t[n.p]=e+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(t),n=n._next;else for(;n;){if(2!==n.type)if(n.r&&-1!==n.type)if(e=Math.round(n.s+n.c),n.type){if(1===n.type){for(r=n.l,i=n.xs0+e+n.xs1,r=1;n.l>r;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}}else n.t[n.p]=e+n.xs0;else n.t[n.p]=n.e;else n.setRatio(t);n=n._next}},l._enableTransforms=function(t){this._transform=this._transform||Ie(this._target,n,!0),this._transformType=this._transform.svg&&Te||!t&&3!==this._transformType?2:3};var Ve=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(t,e,i){var r=this._firstPT=new fe(t,e,0,0,this._firstPT,2);r.e=i,r.setRatio=Ve,r.data=this},l._linkCSSP=function(t,e,i,r){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,r=!0),i?i._next=t:r||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},l._kill=function(e){var i,r,n,s=e;if(e.autoAlpha||e.alpha){s={};for(r in e)s[r]=e[r];s.opacity=1,s.autoAlpha&&(s.visibility=1)}return e.className&&(i=this._classNamePT)&&(n=i.xfirst,n&&n._prev?this._linkCSSP(n._prev,i._next,n._prev._prev):n===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,n._prev),this._classNamePT=null),t.prototype._kill.call(this,s)};var $e=function(t,e,i){var r,n,s,a;if(t.slice)for(n=t.length;--n>-1;)$e(t[n],e,i);else for(r=t.childNodes,n=r.length;--n>-1;)s=r[n],a=s.type,s.style&&(e.push(Z(s)),i&&i.push(s)),1!==a&&9!==a&&11!==a||!s.childNodes.length||$e(s,e,i)};return a.cascadeTo=function(t,i,r){var n,s,a,o,h=e.to(t,i,r),l=[h],u=[],c=[],d=[],p=e._internals.reservedProps;for(t=h._targets||h.target,$e(t,u,d),h.render(i,!0,!0),$e(t,c),h.render(0,!0,!0),h._enabled(!0),n=d.length;--n>-1;)if(s=J(d[n],u[n],c[n]),s.firstMPT){s=s.difs;for(a in r)p[a]&&(s[a]=r[a]);o={};for(a in s)o[a]=u[n][a];l.push(e.fromTo(d[n],i,o,s))}return l},t.activate([a]),a},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,r=this._tween,n=r.vars.roundProps instanceof Array?r.vars.roundProps:r.vars.roundProps.split(","),s=n.length,a={},o=r._propLookup.roundProps;--s>-1;)a[n[s]]=1;for(s=n.length;--s>-1;)for(t=n[s],e=r._firstPT;e;)i=e._next,e.pg?e.t._roundProps(a,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:r._firstPT===e&&(r._firstPT=i),e._next=e._prev=null,r._propLookup[t]=o),e=i;return!1},e._add=function(t,e,i,r){this._addTween(t,e,i,i+r,e,!0),this._overwriteProps.push(e)}}(),function(){var t=/(?:\d|\-|\+|=|#|\.)*/g,e=/[A-Za-z%]/g;_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.4.0",init:function(i,r){var n,s,a,o,h;if("function"!=typeof i.setAttribute)return!1;this._target=i,this._proxy={},this._start={},this._end={},this._suffix={};for(n in r)this._start[n]=this._proxy[n]=s=i.getAttribute(n)+"",this._end[n]=a=r[n]+"",this._suffix[n]=o=e.test(a)?a.replace(t,""):e.test(s)?s.replace(t,""):"",o&&(h=a.indexOf(o),-1!==h&&(a=a.substr(0,h))),this._addTween(this._proxy,n,parseFloat(s),a,n)||(this._suffix[n]=""),"="===a.charAt(1)&&(this._end[n]=this._firstPT.s+this._firstPT.c+o),this._overwriteProps.push(n);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,r=i.length,n=1===t?this._end:t?this._proxy:this._start,s=n===this._proxy;--r>-1;)e=i[r],this._target.setAttribute(e,n[e]+(s?this._suffix[e]:""))}})}(),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,r,n,s,a,o,h=e.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in e)"useRadians"!==i&&(o=(e[i]+"").split("_"),r=o[0],n=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),s=this.finals[i]="string"==typeof r&&"="===r.charAt(1)?n+parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)):Number(r)||0,a=s-n,o.length&&(r=o.join("_"),-1!==r.indexOf("short")&&(a%=h,a!==a%(h/2)&&(a=0>a?a+h:a-h)),-1!==r.indexOf("_cw")&&0>a?a=(a+9999999999*h)%h-(0|a/h)*h:-1!==r.indexOf("ccw")&&a>0&&(a=(a-9999999999*h)%h-(0|a/h)*h)),(a>l||-l>a)&&(this._addTween(t,i,n,n+a,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,r,n=_gsScope.GreenSockGlobals||_gsScope,s=n.com.greensock,a=2*Math.PI,o=Math.PI/2,h=s._class,l=function(e,i){var r=h("easing."+e,function(){},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,r},u=t.register||function(){},c=function(t,e,i,r){var n=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new r},!0);return u(n,t),n},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},p=function(e,i){var r=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,n.config=function(t){return new r(t)},r},f=c("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),g=m.prototype=new t;return g.constructor=m,g.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),g.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),g=e.prototype=new t,g.constructor=e,g.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},g.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,r,n,s,a,o,h=e.taper||"none",l=[],u=0,c=0|(e.points||20),p=c,f=e.randomize!==!1,m=e.clamp===!0,g=e.template instanceof t?e.template:null,E="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/c*p,r=g?g.getRatio(i):i,"none"===h?n=E:"out"===h?(s=1-i,n=s*s*E):"in"===h?n=i*i*E:.5>i?(s=2*i,n=.5*s*s*E):(s=2*(1-i),n=.5*s*s*E),f?r+=Math.random()*n-.5*n:p%2?r+=.5*n:r-=.5*n,m&&(r>1?r=1:0>r&&(r=0)),l[u++]={x:i,y:r};for(l.sort(function(t,e){return t.x-e.x}),o=new d(1,1,null),p=c;--p>-1;)a=l[p],o=new d(a.x,a.y,o);this._prev=new d(0,0,0!==o.t?o:o.next)},!0),g=i.prototype=new t,g.constructor=i,g.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},g.config=function(t){return new i(t)},i.ease=new i,c("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),c("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),r=function(e,i,r){var n=h("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||r)/(1>t?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),s=n.prototype=new t;return s.constructor=n,s.getRatio=i,s.config=function(t,e){return new n(t,e)},n},c("Elastic",r("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),r("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),r("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)+1},.45)),c("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),c("Sine",l("SineOut",function(t){return Math.sin(t*o)}),l("SineIn",function(t){return-Math.cos(t*o)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),u(n.SlowMo,"SlowMo","ease,"),u(i,"RoughEase","ease,"),u(e,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var r,n,s,a,o,h=function(t){var e,r=t.split("."),n=i;for(e=0;r.length>e;e++)n[r[e]]=n=n[r[e]]||{};return n},l=h("com.greensock"),u=1e-10,c=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},d=function(){},p=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),f={},m=function(r,n,s,a){this.sc=f[r]?f[r].sc:[],f[r]=this,this.gsClass=null,this.func=s;var o=[];this.check=function(l){for(var u,c,d,p,g=n.length,E=g;--g>-1;)(u=f[n[g]]||new m(n[g],[])).gsClass?(o[g]=u.gsClass,E--):l&&u.sc.push(this);if(0===E&&s)for(c=("com.greensock."+r).split("."),d=c.pop(),p=h(c.join("."))[d]=this.gsClass=s.apply(s,o),a&&(i[d]=p,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+r.split(".").pop(),[],function(){return p}):r===e&&"undefined"!=typeof module&&module.exports&&(module.exports=p)),g=0;this.sc.length>g;g++)this.sc[g].check()},this.check(!0)},g=t._gsDefine=function(t,e,i,r){return new m(t,e,i,r)},E=l._class=function(t,e,i){return e=e||function(){},g(t,[],function(){return e},i),e};g.globals=i;var v=[0,0,1,1],_=[],y=E("easing.Ease",function(t,e,i,r){this._func=t,this._type=i||0,this._power=r||0,this._params=e?v.concat(e):v},!0),T=y.map={},x=y.register=function(t,e,i,r){for(var n,s,a,o,h=e.split(","),u=h.length,c=(i||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(s=h[u],n=r?E("easing."+s,null,!0):l.easing[s]||{},a=c.length;--a>-1;)o=c[a],T[s+"."+o]=T[o+s]=n[o]=t.getRatio?t:t[o]||new t};for(s=y.prototype,s._calcEnd=!1,s.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,r=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===e?1-r:2===e?r:.5>t?r/2:1-r/2},r=["Linear","Quad","Cubic","Quart","Quint,Strong"],n=r.length;--n>-1;)s=r[n]+",Power"+n,x(new y(null,null,1,n),s,"easeOut",!0),x(new y(null,null,2,n),s,"easeIn"+(0===n?",easeNone":"")),x(new y(null,null,3,n),s,"easeInOut");T.linear=l.easing.Linear.easeIn,T.swing=l.easing.Quad.easeInOut;var R=E("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});s=R.prototype,s.addEventListener=function(t,e,i,r,n){n=n||0;var s,h,l=this._listeners[t],u=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)s=l[h],s.c===e&&s.s===i?l.splice(h,1):0===u&&n>s.pr&&(u=h+1);l.splice(u,0,{c:e,s:i,up:r,pr:n}),this!==a||o||a.wake()},s.removeEventListener=function(t,e){var i,r=this._listeners[t];if(r)for(i=r.length;--i>-1;)if(r[i].c===e)return void r.splice(i,1)},s.dispatchEvent=function(t){var e,i,r,n=this._listeners[t];if(n)for(e=n.length,i=this._eventTarget;--e>-1;)r=n[e],r&&(r.up?r.c.call(r.s||i,{type:t,target:i}):r.c.call(r.s||i))};var b=t.requestAnimationFrame,w=t.cancelAnimationFrame,H=Date.now||function(){return(new Date).getTime()},S=H();for(r=["ms","moz","webkit","o"],n=r.length;--n>-1&&!b;)b=t[r[n]+"RequestAnimationFrame"],w=t[r[n]+"CancelAnimationFrame"]||t[r[n]+"CancelRequestAnimationFrame"];E("Ticker",function(t,e){var i,r,n,s,h,l=this,c=H(),p=e!==!1&&b,f=500,m=33,g="tick",E=function(t){var e,a,o=H()-S;o>f&&(c+=o-m),S+=o,l.time=(S-c)/1e3,e=l.time-h,(!i||e>0||t===!0)&&(l.frame++,h+=e+(e>=s?.004:s-e),a=!0),t!==!0&&(n=r(E)),a&&l.dispatchEvent(g)};R.call(l),l.time=l.frame=0,l.tick=function(){E(!0)},l.lagSmoothing=function(t,e){f=t||1/u,m=Math.min(e,f,0)},l.sleep=function(){null!=n&&(p&&w?w(n):clearTimeout(n),r=d,n=null,l===a&&(o=!1))},l.wake=function(){null!==n?l.sleep():l.frame>10&&(S=H()-f+5),r=0===i?d:p&&b?b:function(t){return setTimeout(t,0|1e3*(h-l.time)+1)},l===a&&(o=!0),E(2)},l.fps=function(t){return arguments.length?(i=t,s=1/(i||60),h=this.time+s,void l.wake()):i},l.useRAF=function(t){return arguments.length?(l.sleep(),p=t,void l.fps(i)):p},l.fps(t),setTimeout(function(){p&&5>l.frame&&l.useRAF(!1)},1500)}),s=l.Ticker.prototype=new l.events.EventDispatcher,s.constructor=l.Ticker;var M=E("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,V){o||a.wake();var i=this.vars.useFrames?z:V;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});a=M.ticker=new l.Ticker,s=M.prototype,s._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var C=function(){o&&H()-S>2e3&&a.wake(),setTimeout(C,2e3)};C(),s.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},s.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},s.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},s.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},s.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},s.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},s.render=function(){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},s.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},s._enabled=function(t,e){return o||a.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(){return this._enabled(!1,!1)},s.kill=function(t,e){return this._kill(t,e),this},s._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},s._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},s._callback=function(t){var e=this.vars;e[t].apply(e[t+"Scope"]||e.callbackScope||this,e[t+"Params"]||_)},s.eventCallback=function(t,e,i,r){if("on"===(t||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[t];null==e?delete n[t]:(n[t]=e,n[t+"Params"]=p(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,n[t+"Scope"]=r),"onUpdate"===t&&(this._onUpdate=e)}return this},s.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},s.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},s.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},s.totalTime=function(t,e,i){if(o||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,n=this._timeline;if(t>r&&!i&&(t=r),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?r-t:t)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),D.length&&G())}return this},s.progress=s.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},s.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},s.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||u,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},s.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(t){if(!arguments.length)return this._paused;var e,i,r=this._timeline;return t!=this._paused&&r&&(o||t||a.wake(),e=r.rawTime(),i=e-this._pauseTime,!t&&r.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&this.render(r.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,!0,!0)),this._gc&&!t&&this._enabled(!0,!1),this};var A=E("core.SimpleTimeline",function(t){M.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});s=A.prototype=new M,s.constructor=A,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(t,e){var i,r;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(r=t._startTime;i&&i._startTime>r;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},s._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(t,e,i){var r,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;n;)r=n._next,(n._active||t>=n._startTime&&!n._paused)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=r},s.rawTime=function(){return o||a.wake(),this._totalTime};var P=E("TweenLite",function(e,i,r){if(M.call(this,i,r),this.render=P.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:P.selector(e)||e;var n,s,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?U[P.defaultOverwrite]:"number"==typeof h?h>>0:U[h],(o||e instanceof Array||e.push&&p(e))&&"number"!=typeof e[0])for(this._targets=a=c(e),this._propLookup=[],this._siblings=[],n=0;a.length>n;n++)s=a[n],s?"string"!=typeof s?s.length&&s!==t&&s[0]&&(s[0]===t||s[0].nodeType&&s[0].style&&!s.nodeType)?(a.splice(n--,1),this._targets=a=a.concat(c(s))):(this._siblings[n]=W(s,this,!1),1===h&&this._siblings[n].length>1&&X(s,this,null,1,this._siblings[n])):(s=a[n--]=P.selector(s),"string"==typeof s&&a.splice(n+1,1)):a.splice(n--,1);else this._propLookup={},this._siblings=W(e,this,!1),1===h&&this._siblings.length>1&&X(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-u,this.render(-this._delay))},!0),L=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},O=function(t,e){var i,r={};for(i in t)B[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!N[i]||N[i]&&N[i]._autoCSS)||(r[i]=t[i],delete t[i]);t.css=r};s=P.prototype=new M,s.constructor=P,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,P.version="1.17.0",P.defaultEase=s._ease=new y(null,null,1,1),P.defaultOverwrite="auto",P.ticker=a,P.autoSleep=120,P.lagSmoothing=function(t,e){a.lagSmoothing(t,e)},P.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(P.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var D=[],k={},I=P._internals={isArray:p,isSelector:L,lazyTweens:D},N=P._plugins={},F=I.tweenLookup={},j=0,B=I.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1},U={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},z=M._rootFramesTimeline=new A,V=M._rootTimeline=new A,$=30,G=I.lazyRender=function(){var t,e=D.length;for(k={};--e>-1;)t=D[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);D.length=0};V._startTime=a.time,z._startTime=a.frame,V._active=z._active=!0,setTimeout(G,1),M._updateRoot=P.render=function(){var t,e,i;if(D.length&&G(),V.render((a.time-V._startTime)*V._timeScale,!1,!1),z.render((a.frame-z._startTime)*z._timeScale,!1,!1),D.length&&G(),a.frame>=$){$=a.frame+(parseInt(P.autoSleep,10)||120);for(i in F){for(e=F[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete F[i]}if(i=V._first,(!i||i._paused)&&P.autoSleep&&!z._first&&1===a._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||a.sleep()}}},a.addEventListener("tick",M._updateRoot);var W=function(t,e,i){var r,n,s=t._gsTweenID;if(F[s||(t._gsTweenID=s="t"+j++)]||(F[s]={target:t,tweens:[]}),e&&(r=F[s].tweens,r[n=r.length]=e,i))for(;--n>-1;)r[n]===e&&r.splice(n,1);return F[s].tweens},q=function(t,e,i,r){var n,s,a=t.vars.onOverwrite;return a&&(n=a(t,e,i,r)),a=P.onOverwrite,a&&(s=a(t,e,i,r)),n!==!1&&s!==!1},X=function(t,e,i,r,n){var s,a,o,h;if(1===r||r>=4){for(h=n.length,s=0;h>s;s++)if((o=n[s])!==e)o._gc||o._kill(null,t,e)&&(a=!0);else if(5===r)break;return a}var l,c=e._startTime+u,d=[],p=0,f=0===e._duration;for(s=n.length;--s>-1;)(o=n[s])===e||o._gc||o._paused||(o._timeline!==e._timeline?(l=l||Y(e,0,f),0===Y(o,l,f)&&(d[p++]=o)):c>=o._startTime&&o._startTime+o.totalDuration()/o._timeScale>c&&((f||!o._initted)&&2e-10>=c-o._startTime||(d[p++]=o)));for(s=p;--s>-1;)if(o=d[s],2===r&&o._kill(i,t,e)&&(a=!0),2!==r||!o._firstPT&&o._initted){if(2!==r&&!q(o,e))continue;o._enabled(!1,!1)&&(a=!0)}return a},Y=function(t,e,i){for(var r=t._timeline,n=r._timeScale,s=t._startTime;r._timeline;){if(s+=r._startTime,n*=r._timeScale,r._paused)return-100;r=r._timeline}return s/=n,s>e?s-e:i&&s===e||!t._initted&&2*u>s-e?u:(s+=t.totalDuration()/t._timeScale/n)>e+u?0:s-e-u};s._init=function(){var t,e,i,r,n,s=this.vars,a=this._overwrittenProps,o=this._duration,h=!!s.immediateRender,l=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={};for(r in s.startAt)n[r]=s.startAt[r];if(n.overwrite=!1,n.immediateRender=!0,n.lazy=h&&s.lazy!==!1,n.startAt=n.delay=null,this._startAt=P.to(this.target,0,n),h)if(this._time>0)this._startAt=null;else if(0!==o)return}else if(s.runBackwards&&0!==o)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(h=!1),i={};for(r in s)B[r]&&"autoCSS"!==r||(i[r]=s[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&s.lazy!==!1,i.immediateRender=h,this._startAt=P.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof y?l:"function"==typeof l?new y(l,s.easeParams):T[l]||P.defaultEase:P.defaultEase,s.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a);if(e&&P._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},s._initProps=function(e,i,r,n){var s,a,o,h,l,u;if(null==e)return!1;k[e._gsTweenID]&&G(),this.vars.css||e.style&&e!==t&&e.nodeType&&N.css&&this.vars.autoCSS!==!1&&O(this.vars,e);for(s in this.vars){if(u=this.vars[s],B[s])u&&(u instanceof Array||u.push&&p(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[s]=u=this._swapSelfInParams(u,this));else if(N[s]&&(h=new N[s])._onInitTween(e,this.vars[s],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:s,pg:!0,pr:h._priority},a=h._overwriteProps.length;--a>-1;)i[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(o=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[s]=l={_next:this._firstPT,t:e,p:s,f:"function"==typeof e[s],n:s,pg:!1,pr:0},l.s=l.f?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(e[s]),l.c="string"==typeof u&&"="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*Number(u.substr(2)):Number(u)-l.s||0;l&&l._next&&(l._next._prev=l)}return n&&this._kill(n,e)?this._initProps(e,i,r,n):this._overwrite>1&&this._firstPT&&r.length>1&&X(e,this,i,this._overwrite,r)?(this._kill(i,e),this._initProps(e,i,r,n)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(k[e._gsTweenID]=!0),o)},s.render=function(t,e,i){var r,n,s,a,o=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>l||l===u&&"isPause"!==this.data)&&l!==t&&(i=!0,l>u&&(n="onReverseComplete")),this._rawPrevTime=a=!e||t||l===t?t:u);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===h&&l>0)&&(n="onReverseComplete",r=this._reversed),0>t&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==u||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!e||t||l===t?t:u)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var c=t/h,d=this._easeType,p=this._easePower;(1===d||3===d&&c>=.5)&&(c=1-c),3===d&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),this.ratio=1===d?1-c:2===d?c:.5>t/h?c/2:1-c/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=l,D.push(this),void(this._lazy=[t,e]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/h):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>t&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==o||r)&&this._callback("onUpdate")),n&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[n]&&this._callback(n),0===h&&this._rawPrevTime===u&&a!==u&&(this._rawPrevTime=0))
}},s._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:P.selector(e)||e;var r,n,s,a,o,h,l,u,c,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((p(e)||L(e))&&"number"!=typeof e[0])for(r=e.length;--r>-1;)this._kill(t,e[r],i)&&(h=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(e===this._targets[r]){o=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[r]=t?this._overwrittenProps[r]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,n=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){if(l=t||o,u=t!==n&&"all"!==n&&t!==o&&("object"!=typeof t||!t._tempKill),i&&(P.onOverwrite||this.vars.onOverwrite)){for(s in l)o[s]&&(c||(c=[]),c.push(s));if((c||!t)&&!q(this,i,e,c))return!1}for(s in l)(a=o[s])&&(d&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,h=!0),a.pg&&a.t._kill(l)&&(h=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete o[s]),u&&(n[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},s.invalidate=function(){return this._notifyPluginsOfEnabled&&P._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],M.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-u,this.render(-this._delay)),this},s._enabled=function(t,e){if(o||a.wake(),t&&this._gc){var i,r=this._targets;if(r)for(i=r.length;--i>-1;)this._siblings[i]=W(r[i],this,!0);else this._siblings=W(this.target,this,!0)}return M.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?P._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},P.to=function(t,e,i){return new P(t,e,i)},P.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new P(t,e,i)},P.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new P(t,e,r)},P.delayedCall=function(t,e,i,r,n){return new P(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},P.set=function(t,e){return new P(t,0,e)},P.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:P.selector(t)||t;var i,r,n,s;if((p(t)||L(t))&&"number"!=typeof t[0]){for(i=t.length,r=[];--i>-1;)r=r.concat(P.getTweensOf(t[i],e));for(i=r.length;--i>-1;)for(s=r[i],n=i;--n>-1;)s===r[n]&&r.splice(i,1)}else for(r=W(t).concat(),i=r.length;--i>-1;)(r[i]._gc||e&&!r[i].isActive())&&r.splice(i,1);return r},P.killTweensOf=P.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var r=P.getTweensOf(t,e),n=r.length;--n>-1;)r[n]._kill(i,t)};var Q=E("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=Q.prototype},!0);if(s=Q.prototype,Q.version="1.10.1",Q.API=2,s._firstPT=null,s._addTween=function(t,e,i,r,n,s){var a,o;return null!=r&&(a="number"==typeof r||"="!==r.charAt(1)?Number(r)-Number(i):parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)))?(this._firstPT=o={_next:this._firstPT,t:t,p:e,s:i,c:a,f:"function"==typeof t[e],n:n||e,r:s},o._next&&(o._next._prev=o),o):void 0},s.setRatio=function(t){for(var e,i=this._firstPT,r=1e-6;i;)e=i.c*t+i.s,i.r?e=Math.round(e):r>e&&e>-r&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},s._kill=function(t){var e,i=this._overwriteProps,r=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;r;)null!=t[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},s._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},P._onPluginEvent=function(t,e){var i,r,n,s,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,r=n;r&&r.pr>o.pr;)r=r._next;(o._prev=r?r._prev:s)?o._prev._next=o:n=o,(o._next=r)?r._prev=o:s=o,o=a}o=e._firstPT=n}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},Q.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===Q.API&&(N[(new t[e])._propName]=t[e]);return!0},g.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,r=t.priority||0,n=t.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=E("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){Q.call(this,i,r),this._overwriteProps=n||[]},t.global===!0),o=a.prototype=new Q(i);o.constructor=a,a.API=t.API;for(e in s)"function"==typeof t[e]&&(o[s[e]]=t[e]);return a.version=t.version,Q.activate([a]),a},r=t._gsQueue){for(n=0;r.length>n;n++)r[n]();for(s in f)f[s].func||t.console.log("GSAP encountered missing dependency: com.greensock."+s)}o=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");/*!
 * VERSION: 1.17.0
 * DATE: 2015-05-27
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2015, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,r,n=this.vars;for(r in n)i=n[r],h(i)&&-1!==i.join("").indexOf("{self}")&&(n[r]=this._swapSelfInParams(i));h(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},n=1e-10,s=i._internals,a=r._internals={},o=s.isSelector,h=s.isArray,l=s.lazyTweens,u=s.lazyRender,c=[],d=_gsScope._gsDefine.globals,p=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=a.pauseCallback=function(t,e,i,r){var s,a=t._timeline,o=a._totalTime,h=t._startTime,l=0>t._rawPrevTime||0===t._rawPrevTime&&a._reversed,u=l?0:n,d=l?n:0;if(e||!this._forcingPlayhead){for(a.pause(h),s=t._prev;s&&s._startTime===h;)s._rawPrevTime=d,s=s._prev;for(s=t._next;s&&s._startTime===h;)s._rawPrevTime=u,s=s._next;e&&e.apply(r||a.vars.callbackScope||a,i||c),(this._forcingPlayhead||!a._paused)&&a.seek(o)}},m=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},g=r.prototype=new e;return r.version="1.17.0",g.constructor=r,g.kill()._gc=g._forcingPlayhead=!1,g.to=function(t,e,r,n){var s=r.repeat&&d.TweenMax||i;return e?this.add(new s(t,e,r),n):this.set(t,r,n)},g.from=function(t,e,r,n){return this.add((r.repeat&&d.TweenMax||i).from(t,e,r),n)},g.fromTo=function(t,e,r,n,s){var a=n.repeat&&d.TweenMax||i;return e?this.add(a.fromTo(t,e,r,n),s):this.set(t,n,s)},g.staggerTo=function(t,e,n,s,a,h,l,u){var c,d=new r({onComplete:h,onCompleteParams:l,callbackScope:u,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],o(t)&&(t=m(t)),s=s||0,0>s&&(t=m(t),t.reverse(),s*=-1),c=0;t.length>c;c++)n.startAt&&(n.startAt=p(n.startAt)),d.to(t[c],e,p(n),c*s);return this.add(d,a)},g.staggerFrom=function(t,e,i,r,n,s,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,r,n,s,a,o)},g.staggerFromTo=function(t,e,i,r,n,s,a,o,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,r,n,s,a,o,h)},g.call=function(t,e,r,n){return this.add(i.delayedCall(0,t,e,r),n)},g.set=function(t,e,r){return r=this._parseTimeOrLabel(r,0,!0),null==e.immediateRender&&(e.immediateRender=r===this._time&&!this._paused),this.add(new i(t,0,e),r)},r.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var n,s,a=new r(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,n=o._first;n;)s=n._next,e&&n instanceof i&&n.target===n.vars.onComplete||a.add(n,n._startTime-n._delay),n=s;return o.add(a,0),a},g.add=function(n,s,a,o){var l,u,c,d,p,f;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,n)),!(n instanceof t)){if(n instanceof Array||n&&n.push&&h(n)){for(a=a||"normal",o=o||0,l=s,u=n.length,c=0;u>c;c++)h(d=n[c])&&(d=new r({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===a?l=d._startTime+d.totalDuration()/d._timeScale:"start"===a&&(d._startTime-=d.delay())),l+=o;return this._uncache(!0)}if("string"==typeof n)return this.addLabel(n,s);if("function"!=typeof n)throw"Cannot add "+n+" into the timeline; it is not a tween, timeline, function, or string.";n=i.delayedCall(0,n)}if(e.prototype.add.call(this,n,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,f=p.rawTime()>n._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},g.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&h(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},g._remove=function(t,i){e.prototype._remove.call(this,t,i);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},g.insert=g.insertMultiple=function(t,e,i,r){return this.add(t,e||0,i,r)},g.appendMultiple=function(t,e,i,r){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,r)},g.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},g.addPause=function(t,e,r,n){var s=i.delayedCall(0,f,["{self}",e,r,n],this);return s.data="isPause",this.add(s,t)},g.removeLabel=function(t){return delete this._labels[t],this},g.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},g._parseTimeOrLabel=function(e,i,r,n){var s;if(n instanceof t&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&h(n)))for(s=n.length;--s>-1;)n[s]instanceof t&&n[s].timeline===this&&this.remove(n[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,r&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,r);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(s=e.indexOf("="),-1===s)return null==this._labels[e]?r?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,r):this.duration()}return Number(e)+i},g.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(t,e){return this.play(t,e)},g.gotoAndStop=function(t,e){return this.pause(t,e)},g.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,s,a,o,h,c=this._dirty?this.totalDuration():this._totalDuration,d=this._time,p=this._startTime,f=this._timeScale,m=this._paused;if(t>=c)this._totalTime=this._time=c,this._reversed||this._hasPausedChild()||(s=!0,o="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===n)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>n&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,t=c+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==d||0===this._duration&&this._rawPrevTime!==n&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(o="onReverseComplete",s=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=s=!0,o="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,0===t&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;t=0,this._initted||(h=!0)}else this._totalTime=this._time=this._rawPrevTime=t;if(this._time!==d&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==d&&t>0&&(this._active=!0),0===d&&this.vars.onStart&&0!==this._time&&(e||this._callback("onStart")),this._time>=d)for(r=this._first;r&&(a=r._next,!this._paused||m);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;else for(r=this._last;r&&(a=r._prev,!this._paused||m);)(r._active||d>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;this._onUpdate&&(e||(l.length&&u(),this._callback("onUpdate"))),o&&(this._gc||(p===this._startTime||f!==this._timeScale)&&(0===this._time||c>=this.totalDuration())&&(s&&(l.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o)))}},g._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof r&&t._hasPausedChild())return!0;t=t._next}return!1},g.getChildren=function(t,e,r,n){n=n||-9999999999;for(var s=[],a=this._first,o=0;a;)n>a._startTime||(a instanceof i?e!==!1&&(s[o++]=a):(r!==!1&&(s[o++]=a),t!==!1&&(s=s.concat(a.getChildren(!0,e,r)),o=s.length))),a=a._next;return s},g.getTweensOf=function(t,e){var r,n,s=this._gc,a=[],o=0;for(s&&this._enabled(!0,!0),r=i.getTweensOf(t),n=r.length;--n>-1;)(r[n].timeline===this||e&&this._contains(r[n]))&&(a[o++]=r[n]);return s&&this._enabled(!1,!0),a},g.recent=function(){return this._recent},g._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},g.shiftChildren=function(t,e,i){i=i||0;for(var r,n=this._first,s=this._labels;n;)n._startTime>=i&&(n._startTime+=t),n=n._next;if(e)for(r in s)s[r]>=i&&(s[r]+=t);return this._uncache(!0)},g._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),r=i.length,n=!1;--r>-1;)i[r]._kill(t,e)&&(n=!0);return n},g.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},g._enabled=function(t,i){if(t===this._gc)for(var r=this._first;r;)r._enabled(t,!0),r=r._next;return e.prototype._enabled.call(this,t,i)},g.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},g.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,r=0,n=this._last,s=999999999999;n;)e=n._prev,n._dirty&&n.totalDuration(),n._startTime>s&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):s=n._startTime,0>n._startTime&&!n._paused&&(r-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),s=0),i=n._startTime+n._totalDuration/n._timeScale,i>r&&(r=i),n=e;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},g.paused=function(e){if(!e)for(var i=this._first,r=this._time;i;)i._startTime===r&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},g.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},g.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t){"use strict";var e=function(){return(_gsScope.GreenSockGlobals||_gsScope)[t]};"function"==typeof define&&define.amd?define(["TweenLite"],e):"undefined"!=typeof module&&module.exports&&(require("./TweenLite.js"),module.exports=e())}("TimelineLite");/*!
 * VERSION: 1.17.0
 * DATE: 2015-05-27
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2015, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var r=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},n=1e-10,s=e._internals,a=s.lazyTweens,o=s.lazyRender,h=new i(null,null,1,0),l=r.prototype=new t;return l.constructor=r,l.kill()._gc=!1,r.version="1.17.0",l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},l.addCallback=function(t,i,r,n){return this.add(e.delayedCall(0,t,r,n),i)},l.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),r=i.length,n=this._parseTimeOrLabel(e);--r>-1;)i[r]._startTime===n&&i[r]._enabled(!1,!1);return this},l.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},l.tweenTo=function(t,i){i=i||{};var r,n,s,a={ease:h,useFrames:this.usesFrames(),immediateRender:!1};for(n in i)a[n]=i[n];return a.time=this._parseTimeOrLabel(t),r=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,s=new e(this,r,a),a.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&r===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),i.onStart&&s._callback("onStart")},s},l.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=i.immediateRender!==!1;var r=this.tweenTo(e,i);return r.duration(Math.abs(r.vars.time-t)/this._timeScale||.001)},l.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,s,h,l,u,c,d=this._dirty?this.totalDuration():this._totalDuration,p=this._duration,f=this._time,m=this._totalTime,g=this._startTime,E=this._timeScale,v=this._rawPrevTime,_=this._paused,y=this._cycle;if(t>=d)this._locked||(this._totalTime=d,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(s=!0,l="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>v||v===n)&&v!==t&&this._first&&(u=!0,v>n&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=p,t=p+1e-4);else if(1e-7>t)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==f||0===p&&v!==n&&(v>0||0>t&&v>=0)&&!this._locked)&&(l="onReverseComplete",s=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=s=!0,l="onReverseComplete"):v>=0&&this._first&&(u=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=p||!e||t||this._rawPrevTime===t?t:n,0===t&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;t=0,this._initted||(u=!0)}else 0===p&&0>v&&(u=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(c=p+this._repeatDelay,this._cycle=this._totalTime/c>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!==(1&this._cycle)&&(this._time=p-this._time),this._time>p?(this._time=p,t=p+1e-4):0>this._time?this._time=t=0:t=this._time));if(this._cycle!==y&&!this._locked){var T=this._yoyo&&0!==(1&y),x=T===(this._yoyo&&0!==(1&this._cycle)),R=this._totalTime,b=this._cycle,w=this._rawPrevTime,H=this._time;if(this._totalTime=y*p,y>this._cycle?T=!T:this._totalTime+=p,this._time=f,this._rawPrevTime=0===p?v-1e-4:v,this._cycle=y,this._locked=!0,f=T?0:p,this.render(f,e,0===p),e||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),x&&(f=T?p+1e-4:-1e-4,this.render(f,!0,!1)),this._locked=!1,this._paused&&!_)return;this._time=H,this._totalTime=R,this._cycle=b,this._rawPrevTime=w}if(!(this._time!==f&&this._first||i||u))return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(e||this._callback("onStart")),this._time>=f)for(r=this._first;r&&(h=r._next,!this._paused||_);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=h;else for(r=this._last;r&&(h=r._prev,!this._paused||_);)(r._active||f>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=h;this._onUpdate&&(e||(a.length&&o(),this._callback("onUpdate"))),l&&(this._locked||this._gc||(g===this._startTime||E!==this._timeScale)&&(0===this._time||d>=this.totalDuration())&&(s&&(a.length&&o(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))},l.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var r,n,s=[],a=this.getChildren(t,e,i),o=0,h=a.length;for(r=0;h>r;r++)n=a[r],n.isActive()&&(s[o++]=n);return s},l.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),r=i.length;for(e=0;r>e;e++)if(i[e].time>t)return i[e].name;return null},l.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},l.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},l.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},r},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,r,n=this.vars;for(r in n)i=n[r],h(i)&&-1!==i.join("").indexOf("{self}")&&(n[r]=this._swapSelfInParams(i));h(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},n=1e-10,s=i._internals,a=r._internals={},o=s.isSelector,h=s.isArray,l=s.lazyTweens,u=s.lazyRender,c=[],d=_gsScope._gsDefine.globals,p=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=a.pauseCallback=function(t,e,i,r){var s,a=t._timeline,o=a._totalTime,h=t._startTime,l=0>t._rawPrevTime||0===t._rawPrevTime&&a._reversed,u=l?0:n,d=l?n:0;if(e||!this._forcingPlayhead){for(a.pause(h),s=t._prev;s&&s._startTime===h;)s._rawPrevTime=d,s=s._prev;for(s=t._next;s&&s._startTime===h;)s._rawPrevTime=u,s=s._next;e&&e.apply(r||a.vars.callbackScope||a,i||c),(this._forcingPlayhead||!a._paused)&&a.seek(o)}},m=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},g=r.prototype=new e;return r.version="1.17.0",g.constructor=r,g.kill()._gc=g._forcingPlayhead=!1,g.to=function(t,e,r,n){var s=r.repeat&&d.TweenMax||i;return e?this.add(new s(t,e,r),n):this.set(t,r,n)},g.from=function(t,e,r,n){return this.add((r.repeat&&d.TweenMax||i).from(t,e,r),n)},g.fromTo=function(t,e,r,n,s){var a=n.repeat&&d.TweenMax||i;return e?this.add(a.fromTo(t,e,r,n),s):this.set(t,n,s)},g.staggerTo=function(t,e,n,s,a,h,l,u){var c,d=new r({onComplete:h,onCompleteParams:l,callbackScope:u,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],o(t)&&(t=m(t)),s=s||0,0>s&&(t=m(t),t.reverse(),s*=-1),c=0;t.length>c;c++)n.startAt&&(n.startAt=p(n.startAt)),d.to(t[c],e,p(n),c*s);return this.add(d,a)},g.staggerFrom=function(t,e,i,r,n,s,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,r,n,s,a,o)},g.staggerFromTo=function(t,e,i,r,n,s,a,o,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,r,n,s,a,o,h)},g.call=function(t,e,r,n){return this.add(i.delayedCall(0,t,e,r),n)},g.set=function(t,e,r){return r=this._parseTimeOrLabel(r,0,!0),null==e.immediateRender&&(e.immediateRender=r===this._time&&!this._paused),this.add(new i(t,0,e),r)},r.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var n,s,a=new r(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,n=o._first;n;)s=n._next,e&&n instanceof i&&n.target===n.vars.onComplete||a.add(n,n._startTime-n._delay),n=s;return o.add(a,0),a},g.add=function(n,s,a,o){var l,u,c,d,p,f;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,n)),!(n instanceof t)){if(n instanceof Array||n&&n.push&&h(n)){for(a=a||"normal",o=o||0,l=s,u=n.length,c=0;u>c;c++)h(d=n[c])&&(d=new r({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===a?l=d._startTime+d.totalDuration()/d._timeScale:"start"===a&&(d._startTime-=d.delay())),l+=o;return this._uncache(!0)}if("string"==typeof n)return this.addLabel(n,s);if("function"!=typeof n)throw"Cannot add "+n+" into the timeline; it is not a tween, timeline, function, or string.";n=i.delayedCall(0,n)}if(e.prototype.add.call(this,n,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,f=p.rawTime()>n._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},g.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&h(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},g._remove=function(t,i){e.prototype._remove.call(this,t,i);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},g.insert=g.insertMultiple=function(t,e,i,r){return this.add(t,e||0,i,r)},g.appendMultiple=function(t,e,i,r){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,r)},g.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},g.addPause=function(t,e,r,n){var s=i.delayedCall(0,f,["{self}",e,r,n],this);return s.data="isPause",this.add(s,t)},g.removeLabel=function(t){return delete this._labels[t],this},g.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},g._parseTimeOrLabel=function(e,i,r,n){var s;if(n instanceof t&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&h(n)))for(s=n.length;--s>-1;)n[s]instanceof t&&n[s].timeline===this&&this.remove(n[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,r&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,r);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(s=e.indexOf("="),-1===s)return null==this._labels[e]?r?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,r):this.duration()}return Number(e)+i},g.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(t,e){return this.play(t,e)},g.gotoAndStop=function(t,e){return this.pause(t,e)},g.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,s,a,o,h,c=this._dirty?this.totalDuration():this._totalDuration,d=this._time,p=this._startTime,f=this._timeScale,m=this._paused;if(t>=c)this._totalTime=this._time=c,this._reversed||this._hasPausedChild()||(s=!0,o="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===n)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>n&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,t=c+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==d||0===this._duration&&this._rawPrevTime!==n&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(o="onReverseComplete",s=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=s=!0,o="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,0===t&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;t=0,this._initted||(h=!0)}else this._totalTime=this._time=this._rawPrevTime=t;if(this._time!==d&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==d&&t>0&&(this._active=!0),0===d&&this.vars.onStart&&0!==this._time&&(e||this._callback("onStart")),this._time>=d)for(r=this._first;r&&(a=r._next,!this._paused||m);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;else for(r=this._last;r&&(a=r._prev,!this._paused||m);)(r._active||d>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;this._onUpdate&&(e||(l.length&&u(),this._callback("onUpdate"))),o&&(this._gc||(p===this._startTime||f!==this._timeScale)&&(0===this._time||c>=this.totalDuration())&&(s&&(l.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o)))}},g._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof r&&t._hasPausedChild())return!0;t=t._next}return!1},g.getChildren=function(t,e,r,n){n=n||-9999999999;for(var s=[],a=this._first,o=0;a;)n>a._startTime||(a instanceof i?e!==!1&&(s[o++]=a):(r!==!1&&(s[o++]=a),t!==!1&&(s=s.concat(a.getChildren(!0,e,r)),o=s.length))),a=a._next;return s},g.getTweensOf=function(t,e){var r,n,s=this._gc,a=[],o=0;for(s&&this._enabled(!0,!0),r=i.getTweensOf(t),n=r.length;--n>-1;)(r[n].timeline===this||e&&this._contains(r[n]))&&(a[o++]=r[n]);return s&&this._enabled(!1,!0),a},g.recent=function(){return this._recent},g._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},g.shiftChildren=function(t,e,i){i=i||0;for(var r,n=this._first,s=this._labels;n;)n._startTime>=i&&(n._startTime+=t),n=n._next;if(e)for(r in s)s[r]>=i&&(s[r]+=t);return this._uncache(!0)},g._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),r=i.length,n=!1;--r>-1;)i[r]._kill(t,e)&&(n=!0);return n},g.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},g._enabled=function(t,i){if(t===this._gc)for(var r=this._first;r;)r._enabled(t,!0),r=r._next;return e.prototype._enabled.call(this,t,i)},g.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},g.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,r=0,n=this._last,s=999999999999;n;)e=n._prev,n._dirty&&n.totalDuration(),n._startTime>s&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):s=n._startTime,0>n._startTime&&!n._paused&&(r-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),s=0),i=n._startTime+n._totalDuration/n._timeScale,i>r&&(r=i),n=e;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},g.paused=function(e){if(!e)for(var i=this._first,r=this._time;i;)i._startTime===r&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},g.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},g.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t){"use strict";var e=function(){return(_gsScope.GreenSockGlobals||_gsScope)[t]};"function"==typeof define&&define.amd?define(["TweenLite"],e):"undefined"!=typeof module&&module.exports&&(require("./TweenLite.js"),module.exports=e())}("TimelineMax"),/*!
* @license SoundJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="NEXT",t.buildDate="Wed, 27 May 2015 18:12:38 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,r=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(r){i[(e+="_")+"constructor"]=r.constructor;for(var n in r)i.hasOwnProperty(n)&&"function"==typeof r[n]&&(i[e+n]=r[n])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,r=t.length;r>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var r;r=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=r[t];return n&&this.removeEventListener(t,e,i),n=r[t],n?n.push(e):r[t]=[e],e},e.on=function(t,e,i,r,n,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,n),r&&t.remove()},s)},e.removeEventListener=function(t,e,i){var r=i?this._captureListeners:this._listeners;if(r){var n=r[t];if(n)for(var s=0,a=n.length;a>s;s++)if(n[s]==e){1==a?delete r[t]:n.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(i){}if(t.bubbles&&this.parent){for(var r=this,n=[r];r.parent;)n.push(r=r.parent);var s,a=n.length;for(s=a-1;s>=0&&!t.propagationStopped;s--)n[s]._dispatchEvent(t,1+(0==s));for(s=1;a>s&&!t.propagationStopped;s++)n[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,r=1==e?this._captureListeners:this._listeners;if(t&&r){var n=r[t.type];if(!n||!(i=n.length))return;try{t.currentTarget=this}catch(s){}try{t.eventPhase=e}catch(s){}t.removed=!1,n=n.slice();for(var a=0;i>a&&!t.immediatePropagationStopped;a++){var o=n[a];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var r=new t;return r.src=e,r}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[./]*?\//i,t.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,t.parseURI=function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var r=e.indexOf("?");r>-1&&(e=e.substr(0,r));var n;return t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var r in t)i.push(r+"="+escape(t[r]));return e&&(i=i.concat(e)),i.join("&")},t.buildPath=function(t,e){if(null==e)return t;var i=[],r=t.indexOf("?");if(-1!=r){var n=t.slice(r+1);i=i.concat(n.split("&"))}return-1!=r?t.slice(0,r)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");i.href=location.href;var r=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return r},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return window.HTMLAudioElement?t instanceof HTMLAudioElement:!1},t.isVideoTag=function(t){return window.HTMLVideoElement?t instanceof HTMLVideoElement:!1},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),i=this;e instanceof Function?e(function(t){i._result=t,i._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(t.type)}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},r=null;if(window.XMLHttpRequest)r=new XMLHttpRequest,e&&void 0===r.withCredentials&&window.XDomainRequest&&(r=new XDomainRequest);else{for(var n=0,a=s.ACTIVEX_VERSIONS.length;a>n;n++){s.ACTIVEX_VERSIONS[n];try{r=new ActiveXObject(axVersions);break}catch(o){}}if(null==r)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof r.responseType?2:1;var h=null;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,r.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&r instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)r.setRequestHeader(l,i[l]);return r instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(r.withCredentials=t.withCredentials),this._request=r,!0},e._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},e=t.prototype={},i=t;i.create=function(t){if(t instanceof i||t instanceof Object){var e=new createjs.PlayPropsConfig;return e.set(t),e}throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=i}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}var i=t;i.INTERRUPT_ANY="any",i.INTERRUPT_EARLY="early",i.INTERRUPT_LATE="late",i.INTERRUPT_NONE="none",i.PLAY_INITED="playInited",i.PLAY_SUCCEEDED="playSucceeded",i.PLAY_INTERRUPTED="playInterrupted",i.PLAY_FINISHED="playFinished",i.PLAY_FAILED="playFailed",i.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],i.EXTENSION_MAP={m4a:"mp4"},i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,i.defaultInterruptBehavior=i.INTERRUPT_NONE,i.alternateExtensions=[],i.activePlugin=null,i._masterVolume=1,Object.defineProperty(i,"volume",{get:function(){return this._masterVolume},set:function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,r=0,n=e.length;n>r;r++)e[r].setMasterVolume(t)}}),i._masterMute=!1,Object.defineProperty(i,"muted",{get:function(){return this._masterMute},set:function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,r=e.length;r>i;i++)e[i].setMasterMute(t);return!0}}),Object.defineProperty(i,"capabilities",{get:function(){return null==i.activePlugin?null:i.activePlugin._capabilities},set:function(){return!1}}),i._pluginsRegistered=!1,i._lastID=0,i._instances=[],i._idHash={},i._preloadHash={},i._defaultPlayPropsHash={},i.addEventListener=null,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i.getPreloadHandlers=function(){return{callback:createjs.proxy(i.initLoad,i),types:["sound"],extensions:i.SUPPORTED_EXTENSIONS}},i._handleLoadComplete=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var r=0,n=i._preloadHash[e].length;n>r;r++){var s=i._preloadHash[e][r];if(i._preloadHash[e][r]=!0,i.hasEventListener("fileload")){var t=new createjs.Event("fileload");t.src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}}},i._handleLoadError=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var r=0,n=i._preloadHash[e].length;n>r;r++){var s=i._preloadHash[e][r];if(i._preloadHash[e][r]=!1,i.hasEventListener("fileerror")){var t=new createjs.Event("fileerror");t.src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}}},i._registerPlugin=function(t){return t.isSupported()?(i.activePlugin=new t,!0):!1},i.registerPlugins=function(t){i._pluginsRegistered=!0;for(var e=0,r=t.length;r>e;e++)if(i._registerPlugin(t[e]))return!0;return!1},i.initializeDefaultPlugins=function(){return null!=i.activePlugin?!0:i._pluginsRegistered?!1:i.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},i.isReady=function(){return null!=i.activePlugin},i.getCapabilities=function(){return null==i.activePlugin?null:i.activePlugin._capabilities},i.getCapability=function(t){return null==i.activePlugin?null:i.activePlugin._capabilities[t]},i.initLoad=function(t){return i._registerSound(t)},i._registerSound=function(t){if(!i.initializeDefaultPlugins())return!1;var r;if(t.src instanceof Object?(r=i._parseSrc(t.src),r.src=t.path+r.src):r=i._parsePath(t.src),null==r)return!1;t.src=r.src,t.type="sound";var n=t.data,s=null;if(null!=n&&(isNaN(n.channels)?isNaN(n)||(s=parseInt(n)):s=parseInt(n.channels),n.audioSprite))for(var a,o=n.audioSprite.length;o--;)a=n.audioSprite[o],i._idHash[a.id]={src:t.src,startTime:parseInt(a.startTime),duration:parseInt(a.duration)},a.defaultPlayProps&&(i._defaultPlayPropsHash[a.id]=createjs.PlayPropsConfig.create(a.defaultPlayProps));null!=t.id&&(i._idHash[t.id]={src:t.src});var h=i.activePlugin.register(t);return e.create(t.src,s),null!=n&&isNaN(n)?t.data.channels=s||e.maxPerChannel():t.data=s||e.maxPerChannel(),h.type&&(t.type=h.type),t.defaultPlayProps&&(i._defaultPlayPropsHash[t.src]=createjs.PlayPropsConfig.create(t.defaultPlayProps)),h},i.registerSound=function(t,e,r,n,s){var a={src:t,id:e,data:r,defaultPlayProps:s};t instanceof Object&&t.src&&(n=e,a=t),a=createjs.LoadItem.create(a),a.path=n,null==n||a.src instanceof Object||(a.src=n+t);var o=i._registerSound(a);if(!o)return!1;if(i._preloadHash[a.src]||(i._preloadHash[a.src]=[]),i._preloadHash[a.src].push(a),1==i._preloadHash[a.src].length)o.on("complete",createjs.proxy(this._handleLoadComplete,this)),o.on("error",createjs.proxy(this._handleLoadError,this)),i.activePlugin.preload(o);else if(1==i._preloadHash[a.src][0])return!0;return a},i.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var r=0,n=t.length;n>r;r++)i[r]=createjs.Sound.registerSound(t[r].src,t[r].id,t[r].data,e,t[r].defaultPlayProps);return i},i.removeSound=function(t,r){if(null==i.activePlugin)return!1;t instanceof Object&&t.src&&(t=t.src);var n;if(t instanceof Object?n=i._parseSrc(t):(t=i._getSrcById(t).src,n=i._parsePath(t)),null==n)return!1;t=n.src,null!=r&&(t=r+t);for(var s in i._idHash)i._idHash[s].src==t&&delete i._idHash[s];return e.removeSrc(t),delete i._preloadHash[t],i.activePlugin.removeSound(t),!0},i.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var r=0,n=t.length;n>r;r++)i[r]=createjs.Sound.removeSound(t[r].src,e);return i},i.removeAllSounds=function(){i._idHash={},i._preloadHash={},e.removeAll(),i.activePlugin&&i.activePlugin.removeAllSounds()},i.loadComplete=function(t){if(!i.isReady())return!1;var e=i._parsePath(t);return t=e?i._getSrcById(e.src).src:i._getSrcById(t).src,void 0==i._preloadHash[t]?!1:1==i._preloadHash[t][0]},i._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(i.FILE_PATTERN);if(null==e)return!1;for(var r=e[4],n=e[5],s=i.capabilities,a=0;!s[n];)if(n=i.alternateExtensions[a++],a>i.alternateExtensions.length)return null;t=t.replace("."+e[5],"."+n);var o={name:r,src:t,extension:n};return o},i._parseSrc=function(t){var e={name:void 0,src:void 0,extension:void 0},r=i.capabilities;for(var n in t)if(t.hasOwnProperty(n)&&r[n]){e.src=t[n],e.extension=n;break}if(!e.src)return!1;var s=e.src.lastIndexOf("/");return e.name=-1!=s?e.src.slice(s+1):e.src,e},i.play=function(t,e,r,n,s,a,o,h,l){var u;u=createjs.PlayPropsConfig.create(e instanceof Object||e instanceof createjs.PlayPropsConfig?e:{interrupt:e,delay:r,offset:n,loop:s,volume:a,pan:o,startTime:h,duration:l});var c=i.createInstance(t,u.startTime,u.duration),d=i._playInstance(c,u);return d||c._playFailed(),c},i.createInstance=function(t,r,n){if(!i.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,r,n);var s=i._defaultPlayPropsHash[t];t=i._getSrcById(t);var a=i._parsePath(t.src),o=null;return null!=a&&null!=a.src?(e.create(a.src),null==r&&(r=t.startTime),o=i.activePlugin.create(a.src,r,n||t.duration),s=s||i._defaultPlayPropsHash[a.src],s&&o.applyPlayProps(s)):o=new createjs.DefaultSoundInstance(t,r,n),o.uniqueId=i._lastID++,o},i.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},i.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,r=0,n=e.length;n>r;r++)e[r].setMasterVolume(t)},i.getVolume=function(){return this._masterVolume},i.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,r=e.length;r>i;i++)e[i].setMasterMute(t);return!0},i.getMute=function(){return this._masterMute},i.setDefaultPlayProps=function(t,e){t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]=createjs.PlayPropsConfig.create(e)},i.getDefaultPlayProps=function(t){return t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]},i._playInstance=function(t,e){var r=i._defaultPlayPropsHash[t.src]||{};if(null==e.interrupt&&(e.interrupt=r.interrupt||i.defaultInterruptBehavior),null==e.delay&&(e.delay=r.delay||0),null==e.offset&&(e.offset=t.getPosition()),null==e.loop&&(e.loop=t.loop),null==e.volume&&(e.volume=t.volume),null==e.pan&&(e.pan=t.pan),0==e.delay){var n=i._beginPlaying(t,e);if(!n)return!1}else{var s=setTimeout(function(){i._beginPlaying(t,e)},e.delay);t.delayTimeoutId=s}return this._instances.push(t),!0},i._beginPlaying=function(t,i){if(!e.add(t,i.interrupt))return!1;var r=t._beginPlaying(i);if(!r){var n=createjs.indexOf(this._instances,t);return n>-1&&this._instances.splice(n,1),!1}return!0},i._getSrcById=function(t){return i._idHash[t]||{src:t}},i._playFinished=function(t){e.remove(t);var i=createjs.indexOf(this._instances,t);i>-1&&this._instances.splice(i,1)},createjs.Sound=t,e.channels={},e.create=function(t,i){var r=e.get(t);return null==r?(e.channels[t]=new e(t,i),!0):!1},e.removeSrc=function(t){var i=e.get(t);return null==i?!1:(i._removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t]._removeAll();e.channels={}},e.add=function(t,i){var r=e.get(t.src);return null==r?!1:r._add(t,i)},e.remove=function(t){var i=e.get(t.src);return null==i?!1:(i._remove(t),!0)},e.maxPerChannel=function(){return r.maxDefault},e.get=function(t){return e.channels[t]};var r=e.prototype;r.constructor=e,r.src=null,r.max=null,r.maxDefault=100,r.length=0,r.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},r._get=function(t){return this._instances[t]},r._add=function(t,e){return this._getSlot(e,t)?(this._instances.push(t),this.length++,!0):!1
},r._remove=function(t){var e=createjs.indexOf(this._instances,t);return-1==e?!1:(this._instances.splice(e,1),this.length--,!0)},r._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},r._getSlot=function(e){var i,r;if(e!=t.INTERRUPT_NONE&&(r=this._get(0),null==r))return!0;for(var n=0,s=this.max;s>n;n++){if(i=this._get(n),null==i)return!0;if(i.playState==t.PLAY_FINISHED||i.playState==t.PLAY_INTERRUPTED||i.playState==t.PLAY_FAILED){r=i;break}e!=t.INTERRUPT_NONE&&(e==t.INTERRUPT_EARLY&&i.getPosition()<r.getPosition()||e==t.INTERRUPT_LATE&&i.getPosition()>r.getPosition())&&(r=i)}return null!=r?(r._interrupt(),this._remove(r),!0):!1},r.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,r){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,e||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,i||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),r!==!1&&r!==!0&&this.setPlaybackResource(r),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,i,r,n,s){var a;return a=createjs.PlayPropsConfig.create(t instanceof Object||t instanceof createjs.PlayPropsConfig?t:{interrupt:t,delay:e,offset:i,loop:r,volume:n,pan:s}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(a),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,a),this)},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.applyPlayProps=function(t){return null!=t.offset&&this.setPosition(t.offset),null!=t.loop&&this.setLoop(t.loop),null!=t.volume&&this.setVolume(t.volume),null!=t.pan&&this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){return t!==!0&&t!==!1||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},e.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},e.getVolume=function(){return this._volume},e.setMuted=function(t){return t===!0||t===!1?(this._muted=t,this._updateVolume(),this):void 0},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getStartTime=function(){return this._startTime},e.setStartTime=function(t){return t==this._startTime?this:(this._startTime=Math.max(0,t||0),this._updateStartTime(),this)},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t?this._removeLooping(t):0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t){return this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateStartTime=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(){},e._addLooping=function(){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){var e=this._loaders[t.src];return e&&!e.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],e=new this._loaderClass(t),e.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[t.src]=e,e)},e.preload=function(t){t.on("error",createjs.proxy(this._handlePreloadError,this)),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;){var i=this._soundInstances[t][e];i.destroy()}delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));var r=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t].push(r),r},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,r=this._soundInstances[e].length;r>i;i++){var n=this._soundInstances[e][i];n.setPlaybackResource(this._audioSources[e])}},e._handlePreloadError=function(){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,r,n){this.AbstractSoundInstance_constructor(t,e,r,n),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i.context=null,i.destinationNode=null,i._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){return t&&(t.stop(0),t.disconnect(0),t=null),t},e._handleSoundReady=function(){this.gainNode.connect(i.destinationNode);var t=.001*this._duration,e=.001*this._position;e>t&&(e=t),this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-t,e),this._playbackStartTime=this.sourceNode.startTime-e,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(t-e)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var r=i.context.createBufferSource();r.buffer=this.playbackResource,r.connect(this.panNode);var n=.001*this._duration;return r.startTime=t+n,r.start(r.startTime,e+.001*this._startTime,n-e),r},e._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._capabilities=null,i._panningModel="equalpower",i.context=null,i.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||t||this._isFileXHRSupported()?(i._generateCapabilities(),null==i.context?!1:!0):!1},i.playEmptySound=function(){if(null!=i.context){var t=i.context.createBufferSource();t.buffer=i.context.createBuffer(1,1,22050),t.connect(i.context.destination),t.start(0,0,0)}},i._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(i){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(i){t=!1}return t},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==i.context)if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}i._compatibilitySetUp(),i.playEmptySound(),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,n=0,s=e.length;s>n;n++){var a=e[n],o=r[a]||a;i._capabilities[a]="no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)||"no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var t=i.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,i._panningModel=0}},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"HTMLAudioTagPool cannot be instantiated"}function e(){this._tags=[]}var i=t;i._tags={},i._tagPool=new e,i._tagUsed={},i.get=function(t){var e=i._tags[t];return null==e?(e=i._tags[t]=i._tagPool.get(),e.src=t):i._tagUsed[t]?(e=i._tagPool.get(),e.src=t):i._tagUsed[t]=!0,e},i.set=function(t,e){e==i._tags[t]?i._tagUsed[t]=!1:i._tagPool.set(e)},i.remove=function(t){var e=i._tags[t];return null==e?!1:(i._tagPool.set(e),delete i._tags[t],delete i._tagUsed[t],!0)},i.getDuration=function(t){var e=i._tags[t];return null==e?0:1e3*e.duration},createjs.HTMLAudioTagPool=t;var r=e.prototype;r.constructor=e,r.get=function(){var t;return t=0==this._tags.length?this._createTag():this._tags.pop(),null==t.parentNode&&document.body.appendChild(t),t},r.set=function(t){var e=createjs.indexOf(this._tags,t);-1==e&&(this._tags.src=null,this._tags.push(t))},r.toString=function(){return"[TagPool]"},r._createTag=function(){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t}}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,r){this.AbstractSoundInstance_constructor(t,e,i,r),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(){this._updateVolume()},e.setMasterMute=function(){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(e){}createjs.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},e._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var t=this._playbackResource;return t.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.preload="auto",void t.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.isSupported=function(){return i._generateCapabilities(),null!=i._capabilities},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;i._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,n=0,s=e.length;s>n;n++){var a=e[n],o=r[a]||a;i._capabilities[a]="no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)||"no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)}}},e.register=function(t){var e=createjs.HTMLAudioTagPool.get(t.src),i=this.AbstractPlugin_register(t);return i.setTag(e),i},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){var r=this.AbstractPlugin_create(t,e,i);return r.setPlaybackResource(null),r},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}();var Stats=function(){function t(t,e,i){return t=document.createElement(t),t.id=e,t.style.cssText=i,t}function e(e,i,r){var n=t("div",e,"padding:0 0 3px 3px;text-align:left;background:"+r),s=t("div",e+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+i);for(s.innerHTML=e.toUpperCase(),n.appendChild(s),e=t("div",e+"Graph","width:74px;height:30px;background:"+i),n.appendChild(e),i=0;74>i;i++)e.appendChild(t("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+r));return n}function i(t){for(var e=l.children,i=0;i<e.length;i++)e[i].style.display=i===t?"block":"none";h=t}function r(t,e){t.appendChild(t.firstChild).style.height=Math.min(30,30-30*e)+"px"}var n=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,s=n(),a=s,o=0,h=0,l=t("div","stats","width:80px;opacity:0.9;cursor:pointer");l.addEventListener("mousedown",function(t){t.preventDefault(),i(++h%l.children.length)},!1);var u=0,c=1/0,d=0,p=e("fps","#0ff","#002"),f=p.children[0],m=p.children[1];l.appendChild(p);var g=0,E=1/0,v=0,p=e("ms","#0f0","#020"),_=p.children[0],y=p.children[1];if(l.appendChild(p),self.performance&&self.performance.memory){var T=0,x=1/0,R=0,p=e("mb","#f08","#201"),b=p.children[0],w=p.children[1];l.appendChild(p)}return i(h),{REVISION:14,domElement:l,setMode:i,begin:function(){s=n()},end:function(){var t=n();if(g=t-s,E=Math.min(E,g),v=Math.max(v,g),_.textContent=(0|g)+" MS ("+(0|E)+"-"+(0|v)+")",r(y,g/200),o++,t>a+1e3&&(u=Math.round(1e3*o/(t-a)),c=Math.min(c,u),d=Math.max(d,u),f.textContent=u+" FPS ("+c+"-"+d+")",r(m,u/100),a=t,o=0,void 0!==T)){var e=performance.memory.usedJSHeapSize,i=performance.memory.jsHeapSizeLimit;T=Math.round(9.54e-7*e),x=Math.min(x,T),R=Math.max(R,T),b.textContent=T+" MB ("+x+"-"+R+")",r(w,e/i)}return t},update:function(){s=this.end()}}};"object"==typeof module&&(module.exports=Stats),function(){$$.animate={}}.call(this),function(){if(!this.require){var t={},e={},i=function(s,a){var o,h,l=r(a,s),u=r(l,"./index");if(o=e[l]||e[u])return o;if(h=t[l]||t[l=u])return o={id:l,exports:{}},e[l]=o.exports,h(o.exports,function(t){return i(t,n(l))},o),e[l]=o.exports;throw"module "+s+" not found"},r=function(t,e){var i,r,n=[];i=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var s=0,a=i.length;a>s;s++)r=i[s],".."==r?n.pop():"."!=r&&""!=r&&n.push(r);return n.join("/")},n=function(t){return t.split("/").slice(0,-1).join("/")};this.require=function(t){return i(t,"")},this.require.define=function(e){for(var i in e)t[i]=e[i]},this.require.modules=t,this.require.cache=e}return this.require}.call(this),this.require.define({"_modules/Cast":function(t,e,i){(function(){var t,r,n,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,o=function(t,e){function i(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};r=e("_modules/CastTitle"),t=function(t){function e(t){var i,a,o,h,l;for(this.config=t,this.onMouseout=s(this.onMouseout,this),this.onMouseover=s(this.onMouseover,this),this.hideTitle=s(this.hideTitle,this),this.showTitle=s(this.showTitle,this),this.hideToTop=s(this.hideToTop,this),this.hideDetail=s(this.hideDetail,this),this.showDetail=s(this.showDetail,this),this.slide=s(this.slide,this),this.deactive=s(this.deactive,this),this.active=s(this.active,this),this.show=s(this.show,this),this.setPlanesDefault=s(this.setPlanesDefault,this),this.setInit=s(this.setInit,this),this.getZ=s(this.getZ,this),this.getY=s(this.getY,this),this.getX=s(this.getX,this),e.__super__.constructor.call(this),$$.util.setLocalProps(this,this.config),this.margedPlane=new THREE.Geometry,this.planeNum=this.config.planeNum=8,this.planes=[],this.planeDistance=9,this.position.set(this.getX(),0,this.getZ()),$$.preloader.addQueue("./assets/images/"+this.data.year+"_"+this.data.id+"/thumb.png"),$$.preloader.addLarge("./assets/images/"+this.data.year+"_"+this.data.id+"/main.png"),i=Math.floor(1/this.planeNum),a=h=0,l=this.planeNum;l>=0?l>h:h>l;a=l>=0?++h:--h)o=new n(this.config,a),o.defZ=this.planeNum*this.planeDistance-a*this.planeDistance,this.planes.push(o),this.add(o),3===a&&($$.intersectObjects.push(o),this.hitObj=o);this.title=new r({view:this,text:this.data.indexCopy,id:this.data.id,index:this.index}),this.title.position.z=this.planeNum*this.planeDistance+100,this.setRediscover()}return o(e,t),e.prototype.getX=function(t){var e;return null==t&&(t=0),e="year"===$$.timeline.mode?0:$$.config.distanceX*(this.indexInGeneration-t)},e.prototype.getY=function(t){var e;return null==t&&(t=0),e="year"===$$.timeline.mode?-$$.config.distanceY*(this.index-t):-$$.config.distanceY*(this.generationIndex-t)},e.prototype.getZ=function(t){var e;return null==t&&(t=0),"year"===$$.timeline.mode?(e=$$.config.distanceZ*(this.index-t),this.index>t&&(e+=$$.config.distanceZ2)):(e=$$.config.distanceZ*(this.generationIndex-t),this.generationIndex>t&&(e+=$$.config.distanceZ2)),e},e.prototype.setRediscover=function(){return this.rediscover=new THREE.CSS3DObject($('<div class="cast-rediscover"><div class="cast-rediscover-obj">'+$$.config.data.rediscover+"</div></div>").clone()[0]),this.rediscover.position.z=this.planeNum*this.planeDistance+100,this.rediscover.position.y=-$$.util.getSize(145),this.rediscover.name="rediscover",$$.intersectObjects.push(this.rediscover),this.rediscoverObj=$(this.rediscover.element).find(".cast-rediscover-obj").on("mouseenter",this.onMouseover).on("mouseleave",this.onMouseout).on("click",$$.rediscoverClickSignal.dispatch)},e.prototype.showRediscover=function(t){var e;return t=$.extend({},t),e="show"===t.type?2.2:3.2,this.reTl&&this.reTl.kill(),this.reTl=new TimelineLite,this.reTl.fromTo(this.rediscoverObj,1.2,{alpha:0},{alpha:1,ease:Quart.easeOut,delay:e}),this.add(this.rediscover)},e.prototype.hideRediscover=function(){return this.reTl&&this.reTl.kill(),this.reTl=new TimelineLite,this.reTl.to(this.rediscoverObj,.3,{alpha:0,ease:Quad.easeOut,onComplete:function(t){return function(){return t.remove(t.rediscover)}}(this)})},e.prototype.setInit=function(){},e.prototype.setPlanesDefault=function(){var t,e,i,r,n,s;for(n=this.planes,s=[],t=i=0,r=n.length;r>i;t=++i)e=n[t],s.push(e.position.z=e.defZ);return s},e.prototype.show=function(){var t,e,i,r,n,s,a,o,h,l,u,c,d,p;if(0===this.index){for(t=0,i=this.planes.length,c=this.planes,e=o=0,l=c.length;l>o;e=++o)a=c[e],s=a,s.material.opacity=0,r={target:s,z:800-50*e,opacity:0},n={z:s.defZ,opacity:s.defOpacity},new TWEEN.Tween(r).to(n,1200).delay(20*-e+1e3).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){return this.target.position.z=this.z,this.target.material.opacity=this.opacity}).onComplete(function(){return t++,t>=i?$$.rootScene.endTransition():void 0}).start();return this.showTimer=setTimeout(function(t){return function(){return t.active({type:"show",quick:!0})}}(this),2e3)}for(d=this.planes,p=[],e=h=0,u=d.length;u>h;e=++h)a=d[e],s=a,s.material.opacity=s.defOpacity,p.push(s.position.z=s.defZ);return p},e.prototype.active=function(t){return this.showRediscover(t),this.showTitle(t)},e.prototype.deactive=function(){return clearTimeout(this.showTimer),this.hideRediscover(),this.hideTitle()},e.prototype.slide=function(t){var e,i,r,n,s,a,o,h,l,u,c;return o=this,c=t.toScene,"year"===$$.timeline.mode?(r=0,n=c.index,s=c.index):(r=this.generationIndex===c.generationIndex?c.indexInGeneration:$$.rootScene.generationScenes[this.generationIndex].getCurrentCastIndex(),n=c.generationIndex,s=c.generationIndex),l=this,a={target:l,x:l.position.x,y:l.position.y,z:l.position.z},"changeViewmode"===t.type?(h={x:[this.getX(r)],y:[this.getY(n)],z:[this.getZ(s)]},u=1200,e=20*this.index+600,i=TWEEN.Easing.Exponential.InOut,this.index===c.index&&(h={x:this.getX(r),y:this.getY(n),z:this.getZ(s)})):(h={x:this.getX(r),y:this.getY(n),z:this.getZ(s)},u=1200,e=0,i=TWEEN.Easing.Exponential.InOut),"changeViewmode"!==t.type&&this.generationIndex!==c.generationIndex&&(h.x=l.position.x),$$.detail.isShow&&(u=0),"init"===t.type&&(u=0,h.x=0),this.slideTween&&this.slideTween.stop(),this.slideTween=new TWEEN.Tween(a).to(h,u).easing(i).delay(e).onStart(function(){return"init"!==t.type?$$.rootScene.startTransition():void 0}).onUpdate(function(){return this.target.position.x=this.x,this.target.position.y=this.y,this.target.position.z=this.z}).onComplete(function(){return"init"!==t.type&&$$.rootScene.endTransition(),$$.timeline.endModeChange({index:o.index})}).start()},e.prototype.showDetail=function(){var t,e,i,r,n,s,a,o,h;for(o=this.planes,h=[],t=s=0,a=o.length;a>s;t=++s)n=o[t],r=n,e={target:r,z:r.position.z},i={z:700-20*t},r.tl&&r.tl.stop(),h.push(r.tl=new TWEEN.Tween(e).to(i,1200).delay(20*t).easing(TWEEN.Easing.Exponential.InOut).onUpdate(function(){return this.target.position.z=this.z}).start());return h},e.prototype.hideDetail=function(){var t,e,i,r,n,s,a,o,h;for(o=this.planes,h=[],t=s=0,a=o.length;a>s;t=++s)n=o[t],r=n,e={target:r,z:700-30*t},i={z:r.defZ},r.tl&&r.tl.stop(),h.push(r.tl=new TWEEN.Tween(e).to(i,1800).easing(TWEEN.Easing.Quintic.InOut).onUpdate(function(){return this.target.position.z=this.z}).start());return h},e.prototype.hideToTop=function(){var t,e,i,r,n,s,a,o,h;for(o=this.planes,h=[],t=s=0,a=o.length;a>s;t=++s)n=o[t],r=n,e={target:r,z:r.position.z,opacity:r.defOpacity},i={z:1700-20*t,opacity:0},r.tl&&r.tl.stop(),h.push(r.tl=new TWEEN.Tween(e).to(i,1800).delay(20*t).easing(TWEEN.Easing.Exponential.InOut).onUpdate(function(){return this.target.position.z=this.z,this.target.material.opacity=this.opacity
}).start());return h},e.prototype.showTitle=function(t){return this.title.animate(t),TweenLite.set(this.title.element,{alpha:1}),this.add(this.title)},e.prototype.hideTitle=function(){return this.titleTl&&this.titleTl.kill(),this.titleTl=new TimelineLite,this.titleTl.to(this.title.element,.3,{alpha:0,ease:Quad.easeOut,onComplete:function(t){return function(){return t.remove(t.title)}}(this)})},e.prototype.onMouseover=function(){var t,e,i,r,n,s,a,o,h;for(o=this.planes,h=[],t=s=0,a=o.length;a>s;t=++s)n=o[t],r=n,e={target:r,z:r.position.z},i={z:60*this.planeNum*.5-60*t},r.tl&&r.tl.stop(),h.push(r.tl=new TWEEN.Tween(e).to(i,1600).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){return this.target.position.z=this.z}).start());return h},e.prototype.onMouseout=function(){var t,e,i,r,n,s,a,o,h;for(o=this.planes,h=[],t=s=0,a=o.length;a>s;t=++s)n=o[t],r=n,e={target:r,z:r.position.z},i={z:r.defZ},r.tl&&r.tl.stop(),h.push(r.tl=new TWEEN.Tween(e).to(i,400).delay(20*-t).easing(TWEEN.Easing.Sinusoidal.Out).onUpdate(function(){return this.target.position.z=this.z}).start());return h},e}(THREE.Object3D),n=function(t){function e(t,i){var r;this.config=t,this.index=i,this.geometry=new THREE.PlaneBufferGeometry($$.util.getSize(588),$$.util.getSize(323)),this.texture=THREE.ImageUtils.loadTexture("./assets/images/"+this.config.data.year+"_"+this.config.data.id+"/thumb.png"),this.texture.minFilter=THREE.LinearFilter,r={u_diffuse:{type:"t",value:{map:this.texture}},u_index:{type:"i",value:this.index},u_numPlanes:{type:"i",value:7},u_opacity:{type:"f",value:1},u_time:{type:"f",value:1}},this.material=new THREE.MeshPhongMaterial({transparent:!0,opacity:0,blending:THREE.CustomBlending,blendSrc:THREE.SrcAlphaFactor,blendDst:THREE.OneMinusSrcAlphaFactor,blendEquation:THREE.AddEquation,map:this.texture}),this.defOpacity=.07*(this.index+1),e.__super__.constructor.call(this,this.geometry,this.material),this.name="plane"}return o(e,t),e}(THREE.Mesh),i.exports=t}).call(this)}}),this.require.define({"_modules/CastScene":function(t,e,i){(function(){var t,r,n={}.hasOwnProperty,s=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};r=e("_modules/SceneObject"),t=function(t){function e(t){this.config=t,e.__super__.constructor.call(this,this.config),this.type="cast"}return s(e,t),e}(r),i.exports=t}).call(this)}}),this.require.define({"_modules/CastTitle":function(t,e,i){(function(){var t,e,r=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,s=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function e(t){var i,n,s,a,o,h;for(this.config=t,this.animate=r(this.animate,this),this.dancers=[],this.dom=$('<div class="cast-title" id="casttitle-'+this.config.id+'"></div>').clone(),s=this.config.text,s=s.replace(/<br>/g,"~"),s=s.replace(/<br\/>/g,"~"),i="",n=o=0,h=s.length;h>o;n=++o)a=s[n],i+=" "===a?"<span>"+a+"</span>":"~"===a?"<br>":'<span class="cast-title-unit">'+a+"</span>";this.dom.html(i),e.__super__.constructor.call(this,this.dom[0]),this.transformStyle="preserve-3d",this.dancers=$(".cast-title-unit",this.element).each(function(t){return function(){return TweenLite.set(t,{transformStyle:"preserve-3d"})}}(this))}return s(e,t),e.prototype.animate=function(t){var e;return t=$.extend({},t),e=this,this.dancers.each(function(){var e,i,r,n;return n=this,i={target:n,x:800*Math.random()-400,y:140*Math.random()-70,z:400,scale:1.5,rotationX:1080*Math.random()-540,rotationY:1080*Math.random()-540,rotationZ:1080*Math.random()-540,alpha:0},r={x:[80*Math.random()-40,0],y:[80*Math.random()-40,0],z:0,scale:1,rotationX:0,rotationY:0,rotationZ:0,alpha:1},e=300*Math.random(),t.quick||(e+=1e3),TweenLite.set(n,{alpha:0}),this.tl&&this.tl.stop(),this.tl=new TWEEN.Tween(i).to(r,1900).easing(TWEEN.Easing.Cubic.InOut).delay(e).onUpdate(function(){return TweenLite.set(this.target,{x:this.x,y:this.y,z:this.z,rotation:this.rotationX,alpha:this.alpha})}).start()})},e}(THREE.CSS3DObject),e=function(t){function e(t){this.config=t,e.__super__.constructor.call(this,this.config.element),this.matrixWorldNeedsUpdate=!0}return s(e,t),e}(THREE.CSS3DObject),i.exports=t}).call(this)}}),this.require.define({"_modules/CookiePolicy":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.config=t,this.onScroll=e(this.onScroll,this),this.hide=e(this.hide,this),this.show=e(this.show,this),this.agree=e(this.agree,this),this.check=e(this.check,this),$$.util.setLocalProps(this,this.config),this.isShow=!1}return t.prototype.check=function(){return"jp"===$$.config.langId?$$.main.show():$.cookie("cookiepolicy")?$$.main.show():this.show()},t.prototype.agree=function(){return $.cookie("cookiepolicy",!0,{expires:1}),this.hide()},t.prototype.show=function(){return this.isShow=!0,this.$view=$("#cookiepolicy"),this.$panel=this.$view.find(".panel"),this.$scroll=this.$view.find(".scroll-indication").on("click",this.agree),this.agreeOnce=_.once(this.agree),this.$view.find(".continue").on("click",this.agree),TweenLite.fromTo(this.$view,.8,{alpha:0,scale:1.2},{alpha:1,scale:1,delay:.6,ease:Quint.easeOut,onComplete:function(t){return function(){return t.$scroll.addClass("show"),$$.scroll.config.step=t.onScroll}}(this)}),this.$view.show()},t.prototype.hide=function(){return this.isShow=!1,this.$scroll.addClass("hide"),TweenLite.to(this.$view,1.2,{alpha:0,scale:.8,ease:Expo.easeInOut,onComplete:function(t){return function(){return t.$view.hide(),$$.main.show()}}(this)})},t.prototype.onScroll=function(t){return t>0?this.agreeOnce():void 0},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/Detail":function(t,e,i){(function(){var t,r,n,s=function(t,e){return function(){return t.apply(e,arguments)}};n=e("_modules/DetailMain"),t=function(){function t(t){this.config=t,this.onResize=s(this.onResize,this),this.onScroll=s(this.onScroll,this),this.setLeaved=s(this.setLeaved,this),this.setShowed=s(this.setShowed,this),this.animationEnd=s(this.animationEnd,this),this.animationStart=s(this.animationStart,this),this.flip=s(this.flip,this),this.next=s(this.next,this),this.prev=s(this.prev,this),this.hide=s(this.hide,this),this.show=s(this.show,this),this.init=s(this.init,this),this.setup=s(this.setup,this),$$.util.setLocalProps(this,this.config),this.window=$(window),this.body=$("body"),this.html=$("html"),this.view=$("#detail-view"),this.itemView=$("#item-view"),this.btnBack=$("#btn-back").on("click",this.hide),this.bg=$(".bg",this.view),this.headerBg=$("#header .bg"),this.isShow=!1,this.isAnimating=!1,this.currentItem="",$$.rediscoverClickSignal.add(this.show,this),this.btnBack.on("mouseenter",function(){return $(this).hasClass("show")?TweenLite.to(this,.4,{xPercent:0,ease:Expo.easeOut}):void 0}).on("mouseleave",function(){return $(this).hasClass("show")?TweenLite.to(this,.4,{xPercent:-9,ease:Expo.easeOut}):void 0})}return t.prototype.setup=function(){var t,e,i;return t=$$.rootScene.getCurrentScene(),e=this.data.items[t.index],e.globalData=this.data,this.prevItem=this.currentItem,i=_.findWhere(this.itemPool,{id:e.id}),i?this.currentItem=i.item:(this.currentItem=new r({data:e,index:t.index,prevIndex:this.prevItem.index,parent:this}),this.itemPool.push({id:e.id,item:this.currentItem}))},t.prototype.init=function(){return this.itemView.empty(),this.itemPool=[],this.setup("init")},t.prototype.show=function(){return this.animationStart(),this.init(),$$.rootScene.getCurrentScene().viewObj.showDetail(),this.body.removeClass("hover"),this.bg.height(2.5*$$.screenHeight),this.view.show(),this.currentItem.show(),this.headerBg.show(),this.headerBg.addClass("show"),this.view.css({"transform-origin":"50% -"+.5*this.currentItem.mainImgHeight+"px 0"}),this.tl&&this.tl.kill(),this.tl=new TimelineLite,this.tl.fromTo(this.view,1,{y:200,opacity:0,scale:.7},{y:0,opacity:1,scale:1,ease:Expo.easeOut,delay:.7,onComplete:function(t){return function(){return t.view.css("transform",""),t.setShowed(),$$.main.checkDetailTopEnd(),$$.timeline.hideView()}}(this)},"start"),this.tl.fromTo(this.currentItem.mainImg.find("img"),1,{opacity:this.currentItem.mainImgWaitOpacity},{opacity:1,ease:Quad.easeOut,delay:.7},"start"),this.btnBack.show(),this.btnBack.addClass("show"),this.tl.fromTo(this.btnBack,.6,{xPercent:-100},{xPercent:-9,ease:Expo.easeOut,delay:2.6},"start"),$(window).trigger("mousemove")},t.prototype.hide=function(t){var e;return this.animationStart(),this.setLeaved(),$$.rootScene.getCurrentScene().viewObj.hideDetail(),$$.timeline.showView(),$(window).trigger("resize"),e=$(window).scrollTop(),TweenLite.set(this.currentItem.contents,{y:-e}),$(window).scrollTop(0),this.html.addClass("fix"),this.currentItem.main.dispose(),this.view.css({"transform-origin":""}),"future"===t&&$("body").addClass("detailtofuture"),this.tl&&this.tl.kill(),this.tl=new TimelineLite,this.tl.to(this.view,.8,{opacity:0,ease:Quad.easeInOut,delay:.2,onStart:function(t){return function(){return t.headerBg.removeClass("show")}}(this),onComplete:function(e){return function(){return e.headerBg.hide(),e.btnBack.hide(),e.animationEnd(),e.view.hide(),e.currentItem.hide(),"future"===t?$("body").removeClass("detailtofuture"):void 0}}(this)},"start"),this.btnBack.removeClass("show"),this.tl.to(this.btnBack,.3,{xPercent:-100,ease:Quint.easeOut,onComplete:function(t){return function(){return t.btnBack.hide()}}(this)},"start"),$(window).trigger("mousemove")},t.prototype.prev=function(){return $$.rootScene.prev()?(this.animationStart(),this.setup(),this.currentItem.flip({type:"prev",prevItem:this.prevItem})):void 0},t.prototype.next=function(){return this.currentItem.data.nextScene?$$.rootScene.next()?(this.animationStart(),this.setup(),this.currentItem.flip({type:"next",prevItem:this.prevItem})):void 0:(this.hide("future"),$$.rootScene.future())},t.prototype.flip=function(){},t.prototype.animationStart=function(){return this.isAnimating=!0},t.prototype.animationEnd=function(){return this.isAnimating=!1},t.prototype.setShowed=function(){return this.isShow=!0},t.prototype.setLeaved=function(){return this.isShow=!1,$$.main.update()},t.prototype.onScroll=function(){},t.prototype.onResize=function(){},t}(),r=function(){function t(t){this.config=t,this.dispose=s(this.dispose,this),this.active=s(this.active,this),this.onResize=s(this.onResize,this),this.onScroll=s(this.onScroll,this),this.flip=s(this.flip,this),this.hide=s(this.hide,this),this.show=s(this.show,this),this.setBodyColumn=s(this.setBodyColumn,this),this.set=s(this.set,this),this.setup=s(this.setup,this),$$.util.setLocalProps(this,this.config),this.setup(),this.mainImg=$(".detail-mainimg",this.domObj),this.contents=$(".detail-contents",this.domObj),this.$main=$(".detail-main",this.domObj),this.detailBody=$(".detail-body",this.domObj),this.distanceZ=500,this.behindScale=.6,this.mainImgWaitOpacity=.8,this.main=new n(this.$main),this.bodyTextWrapper=this.domObj.find(".detail-body-text"),this.bodyText1=this.bodyTextWrapper.find(".detail-body-text1"),this.bodyText2=this.bodyTextWrapper.find(".detail-body-text2"),this.onResize()}return t.prototype.setup=function(){var t;return this.data.yearClass="1"===this.data.year.substr(0,1)?"first-one":"",this.data.nextScene=$$.rootScene.getNextCastScene(),this.data.scrollTo=this.data.globalData.scrollTo.replace("%year%",this.data.nextScene.year),this.data.nextScene.id.match(/future/i)&&(this.data.nextScene=null),this.data.detailLead=this.data.detailLead.replace(/<br>/g,"~"),this.data.detailLead=this.data.detailLead.replace(/<br\/>/g,"~"),t=_.template($("#tpl-detail").text()),this.domObj=this.index<this.prevIndex?$(t(this.data)).prependTo(this.parent.itemView):$(t(this.data)).appendTo(this.parent.itemView)},t.prototype.set=function(){return this.active(),this.frameHeight=this.domObj.height(),this.$main.height(this.mainImgHeight)},t.prototype.setBodyColumn=function(){var t,e,i,r,n;return t=this.bodyText1.css("lineHeight"),t=Number(t.replace("px","")),n=this.bodyText1.height(),e=Math.round(n/t),e%2===0?i=r=e/2:(i=Math.ceil(e/2),r=Math.floor(e/2)),this.bodyTextWrapper.height(t*i),TweenLite.set(this.bodyText2,{y:-t*i})},t.prototype.show=function(){var t,e,i;return this.set(),e=$$.screenHeight-this.mainImgHeight>>1,0>=e&&(e=0),TweenLite.set(this.mainImg,{y:e}),TweenLite.set(this.detailBody,{opacity:0,y:.5*($$.screenHeight-this.mainImgHeight)+15}),this.contents.show(),i=1.2,t=1.4,this.tl&&this.tl.kill(),this.tl=new TimelineLite,this.tl.to(this.mainImg,i,{y:0,ease:Quint.easeInOut,delay:t},"start"),this.tl.to(this.detailBody,i,{opacity:1,y:0,ease:Quint.easeInOut,delay:t,onStart:function(t){return function(){return t.setBodyColumn()}}(this),onComplete:function(t){return function(){return t.main.show(),t.mainImg.css("transform",""),t.parent.html.removeClass("fix"),t.parent.animationEnd()}}(this)},"start")},t.prototype.hide=function(){return this.main.hide()},t.prototype.flip=function(t){var e,i,r;return this.set(),this.parent.itemView.addClass("is-animating"),this.domObj.addClass("is-current"),this.main.hide(),i=t.prevItem.domObj.outerHeight()-$$.screenHeight,TweenLite.set(this.mainImg,{y:0}),this.tl&&this.tl.kill(),this.tl=new TimelineLite,"prev"===t.type?(TweenLite.set(this.domObj,{y:-1200,scale:this.behindScale}),r={y:0,scale:1,z:0}):"next"===t.type&&(TweenLite.set(this.domObj,{alpha:0,y:t.prevItem.domObj.height()-120}),r={y:i},this.tl.to(this.domObj,.4,{alpha:1},"start")),e=_.once(function(t){return function(){return t.parent.html.addClass("fix")}}(this)),r=$.extend({ease:Expo.easeInOut,onUpdate:function(){return this.time()>.5?e():void 0},onComplete:function(e){return function(){return t.prevItem.domObj.hide(),setTimeout(function(){return e.domObj.css("transform",""),$(window).scrollTop(0),e.parent.itemView.removeClass("is-animating"),e.domObj.removeClass("is-current"),TweenLite.set(e.domObj,{y:0}),e.parent.html.removeClass("fix"),e.parent.animationEnd(),$$.main.checkDetailTopEnd(),e.main.show()},100)}}(this)},r),this.tl.to(this.domObj,1.6,r,"start"),t.prevItem.main.dispose(),"prev"===t.type?this.tl.to(t.prevItem.domObj,1.6,{y:t.prevItem.domObj.height()-120,ease:Expo.easeInOut},"start"):"next"===t.type&&this.tl.to(t.prevItem.domObj,1.6,{scale:this.behindScale,ease:Expo.easeInOut},"start"),this.domObj.show(),this.contents.show(),this.setBodyColumn()},t.prototype.onScroll=function(){var t;return Browser.safari?void 0:(t=$(window).scrollTop(),0>=t&&(t=0),TweenLite.set(this.mainImg,{y:t}))},t.prototype.onResize=function(){return this.mainImgHeight=Math.round(685*$$.screenWidth/1620),this.$main.height(this.mainImgHeight)},t.prototype.active=function(){return $$.resizeSignal.add(this.onResize,this),$$.scrollSignal.add(this.onScroll,this)},t.prototype.dispose=function(){return $$.resizeSignal.remove(this.onResize),$$.scrollSignal.remove(this.onScroll),TweenLite.set(this.mainImg,{y:0})},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/DetailMain":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.dom=t,this.dispose=e(this.dispose,this),this.update=e(this.update,this),this.hide=e(this.hide,this),this.show=e(this.show,this),this.dom.addClass("hide"),this.texts=this.dom.find(".d"),this.textLength=this.texts.length,this.isAnimating=!1}return t.prototype.show=function(){var t,e;return e=this,t=0,this.texts.each(function(){var i,r,n,s,a;return a=this,r=-1,n={target:a,x:200*Math.random()+200,y:(100*Math.random()+80)*r,z:800*Math.random()+100,scale:1.5,rotationX:1080*Math.random()-540,rotationY:1080*Math.random()-540,rotationZ:1080*Math.random()-540,alpha:0},s={x:0,y:0,z:0,scale:1,rotationX:0,rotationY:0,rotationZ:0,alpha:1},i=400*Math.random(),TweenLite.set(a,{alpha:0}),this.tl&&this.tl.stop(),this.tl=new TWEEN.Tween(n).to(s,1400).easing(TWEEN.Easing.Cubic.Out).delay(i).onUpdate(function(){return TweenLite.set(this.target,{x:this.x,y:this.y,z:this.z,rotationX:this.rotationX,rotationY:this.rotationY,rotationZ:this.rotationZ,alpha:this.alpha})}).onComplete(function(){return t++,t>=e.textLength?e.isAnimating=!1:void 0}).start()}),this.dom.removeClass("hide"),this.isAnimating=!0,this.update()},t.prototype.hide=function(){return this.dom.addClass("hide")},t.prototype.update=function(){return this.isAnimating?(TWEEN.update(),requestAnimationFrame(this.update)):void 0},t.prototype.dispose=function(){return this.texts.each(function(){return this.tl?this.tl.stop():void 0})},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/Era":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.config=t,this.addYearId=e(this.addYearId,this),this.flip=e(this.flip,this),this.reset=e(this.reset,this),this.show=e(this.show,this),this.init=e(this.init,this),this.setup=e(this.setup,this),$$.util.setLocalProps(this,this.config),this.view=$("#timeline-era"),this.viewYear=$("#timeline-era-year"),this.viewGen=$("#timeline-era-gen"),this.yearIds=[],this.nextTop=100,this.distanceY=100,this.currentEraId="",this.isInit=!0}return t.prototype.setup=function(t){return this.viewYear.html(t.eraHtmlYear),this.viewGen.html(t.eraHtmlGen),this.labels=$(".era-label",this.view),$(".text",this.view).on("click",function(){return function(t){var e,i;return e=$(t.currentTarget).data("castindex"),i=$(t.currentTarget).data("genindex"),e?$$.rootScene.goto({castindex:e}):i?$$.rootScene.goto({generationIndex:i}):void 0}}(this))},t.prototype.init=function(){return this.isInit?(this.isInit=!1,this.view.hide()):void 0},t.prototype.show=function(){return TweenLite.fromTo(this.view,1,{y:30,alpha:0},{y:0,alpha:1,ease:Expo.easeOut}),this.view.show()},t.prototype.reset=function(){var t,e,i,r;return"year"===$$.timeline.mode?(t=$$.rootScene.getCurrentScene().data.year,e=_.indexOf(this.yearIds,t),i=this.viewGen,r=this.viewYear):(t=$$.rootScene.getCurrentScene().parent.id,e=$$.rootScene.getCurrentScene().parent.index,i=this.viewYear,r=this.viewGen),i.addClass("hide"),r.hide(),TweenLite.set(r,{y:-100*e+200}),r.show(),setTimeout(function(e){return function(){var i,n;return e.labels.removeClass("active animate"),i=$("#era-"+t,e.view).removeStateClass().addClass("by-svg active"),n=i.next().removeStateClass().addClass("by-text active"),setTimeout(function(){return r.removeClass("hide")},10)}}(this),300),this.currentEraId=t,this.currentEraIndex=e},t.prototype.flip=function(t){var e,i,r,n,s,a,o;if("year"===$$.timeline.mode?(r=t.toScene.data.year,n=_.indexOf(this.yearIds,r),o=this.viewYear):(r=t.toScene.parent.id,n=t.toScene.parent.index,o=this.viewGen),t.direction?i=t.direction:this.currentEraIndex-n>0&&(i="prev"),this.currentEraId!==r){if(t.toScene.id.match(/future/i))return;return"prev"===i?Math.abs(this.currentEraIndex-n)>=2?$(".era-label",o).each(function(t){return function(e,i){var r;return r=$(i),e<t.currentEraIndex&&e>=n?r.removeStateClass().addClass("by-svg animate active"):e>n?$(i).removeStateClass().addClass("by-text animate active"):void 0}}(this)):(e=e=$("#era-"+r,this.view).removeStateClass().addClass("by-svg active animate"),s=e.next().removeStateClass().addClass("by-text active animate")):Math.abs(this.currentEraIndex-n)>=2?$(".era-label",o).each(function(t){return function(e,i){var r;return r=$(i),n>e?(e>t.currentEraIndex+1&&r.removeStateClass().addClass("by-text active"),setTimeout(function(){return r.removeStateClass().addClass("by-svg animate")},1)):e===n?r=$(i).removeStateClass().addClass("by-svg active animate"):e>n?$(i).removeStateClass().addClass("by-text active"):void 0}}(this)):(e=$("#era-"+r,this.view).removeStateClass().addClass("by-svg active animate"),a=e.prev().addClass("animate").removeClass("active"),s=e.next().removeStateClass().addClass("by-text active")),TweenLite.set(o,{y:-100*n+200}),this.currentEraId=r,this.currentEraIndex=n}},t.prototype.addYearId=function(t){return this.yearIds.push(t)},t}(),$.fn.removeStateClass=function(){return $(this).removeClass("by-text by-svg active animate")},i.exports=t}).call(this)}}),this.require.define({"_modules/Future":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.config=t,this.onScroll=e(this.onScroll,this),this.update=e(this.update,this),this.showTexts=e(this.showTexts,this),this.hideToIntro=e(this.hideToIntro,this),this.hideThird=e(this.hideThird,this),this.showThird=e(this.showThird,this),this.hideSecond=e(this.hideSecond,this),this.showSecond=e(this.showSecond,this),this.hide=e(this.hide,this),this.show=e(this.show,this),this.setup=e(this.setup,this),$$.util.setLocalProps(this,this.config),this.view=$("#future"),this.$html=$("html"),this.$future1=$("#future1"),this.$future2=$("#future2"),this.$future3=$("#future3"),this.$firstLead=$(".lead",this.$future1),this.$firstScroll=$(".scroll-indication",this.$future1),this.$secondLead=$(".lead",this.$future2),this.$secondScroll=$(".scroll-indication",this.$future2),this.$secondBtn=$(".btn",this.$future2),this.$thirdLinks=$(".future-links",this.$future3),this.$thirdScroll=$(".scroll-indication",this.$future3),this.isShow=!1,this.isAnimating=!1,this.state=0,this.setup()}return t.prototype.setup=function(){var t;return t=$.trim(this.$firstLead.html()),this.$firstLead.html($$.util.convertText(t)),this.firstLeadTexts=this.$firstLead.find(".d"),t=$.trim(this.$secondLead.html()),this.$secondLead.html($$.util.convertText(t)),this.secondLeadTexts=this.$secondLead.find(".d"),this.$thirdLinks.find("a").each(function(){return function(e,i){var r;return t=$.trim($(i).html()),r=$$.util.convertText(t)+'<div class="line d"></div>',$(i).html(r)}}(this)),this.thirdLeadTexts=this.$thirdLinks.find(".d")},t.prototype.show=function(){return $$.rootScene.startTransition(),this.isAnimating=!0,this.$html.addClass("is-future"),this.$firstScroll.removeClass("show hide"),this.tl&&this.tl.kill(),this.tl=new TimelineLite,this.tl.set(this.$future1,{alpha:1,scale:1}),this.tl.fromTo(this.view,.8,{alpha:0,scale:1},{alpha:1,ease:Quint.easeOut,delay:.6,onComplete:function(t){return function(){return t.isShow=!0}}(this)},"start"),this.showTexts(1),this.view.show()},t.prototype.hide=function(){return $$.rootScene.startTransition(),this.$firstScroll.addClass("hide"),this.isAnimating=!0,this.$html.removeClass("is-future"),this.isShow=!1,$$.main.update(),this.tl&&this.tl.kill(),this.tl=new TimelineLite,this.tl.to(this.view,1.2,{alpha:0,scale:1.4,ease:Expo.easeInOut,onComplete:function(t){return function(){return $$.rootScene.endTransition(),t.isAnimating=!1,t.state=0,t.view.hide()}}(this)},"start")},t.prototype.showSecond=function(){return this.isAnimating=!0,this.$secondScroll.hide().removeClass("show hide"),this.$firstScroll.addClass("hide"),this.tl2&&this.tl2.kill(),this.tl2=new TimelineLite,this.tl2.set(this.$future2,{alpha:1,scale:1}),this.tl2.fromTo(this.$future1,1.2,{scale:1},{alpha:0,scale:.6,ease:Expo.easeInOut},"start"),this.showTexts(2),this.$future2.show()},t.prototype.hideSecond=function(){return this.isAnimating=!0,this.$secondScroll.addClass("hide"),this.$firstScroll.removeClass("show hide"),this.tl2&&this.tl2.kill(),this.tl2=new TimelineLite,this.tl2.fromTo(this.$future1,1.2,{alpha:0,scale:.6},{alpha:1,scale:1,ease:Expo.easeInOut},"start"),this.tl2.to(this.$future2,1.2,{alpha:0,scale:1.4,ease:Expo.easeInOut,onComplete:function(t){return function(){return t.state=1,t.isAnimating=!1,t.$future2.hide(),t.$firstScroll.addClass("show")}}(this)},"start")},t.prototype.showThird=function(){return this.isAnimating=!0,this.$thirdScroll.hide().removeClass("show hide"),this.$future3.hide().removeClass("is-showed"),this.$secondScroll.addClass("hide"),this.tl3&&this.tl3.kill(),this.tl3=new TimelineLite,this.tl3.set(this.$future3,{alpha:1,scale:1}),this.tl3.fromTo(this.$future2,1.2,{scale:1},{alpha:0,scale:.6,ease:Expo.easeInOut},"start"),this.showTexts(3),this.$future3.show()},t.prototype.hideThird=function(){return this.isAnimating=!0,this.$thirdScroll.addClass("hide"),this.$secondScroll.removeClass("show hide"),this.tl3&&this.tl3.kill(),this.tl3=new TimelineLite,this.tl3.fromTo(this.$future2,1.2,{alpha:0,scale:.6},{alpha:1,scale:1,ease:Expo.easeInOut},"start"),this.tl3.to(this.$future3,1.2,{alpha:0,scale:1.4,ease:Expo.easeInOut,onComplete:function(t){return function(){return t.state=2,t.isAnimating=!1,t.$future3.hide(),t.$secondScroll.addClass("show")}}(this)},"start")},t.prototype.hideToIntro=function(){return this.isAnimating=!0,this.$html.removeClass("is-future"),this.$thirdScroll.addClass("hide"),this.tl3&&this.tl3.kill(),this.tl3=new TimelineLite,this.tl3.to(this.$future3,1.6,{alpha:0,scale:.6,ease:Expo.easeInOut,onComplete:function(t){return function(){return t.isAnimating=!1,t.isShow=!1,t.view.hide(),$$.timeline.hideView()}}(this)},"start")},t.prototype.showTexts=function(t){var e,i,r,n,s;return n=this,e=0,1===t?(s=this.firstLeadTexts,i=400*Math.random()+1500):2===t?(s=this.secondLeadTexts,i=400*Math.random()+1200):3===t&&(s=this.thirdLeadTexts,i=400*Math.random()+1200),r=s.length,s.each(function(){var s,a,o;return o=this,s={target:o,x:300*Math.random()-150,y:180*Math.random()-90,z:600*Math.random()+600,scale:3,rotationX:1080*Math.random()-540,rotationY:1080*Math.random()-540,rotationZ:1080*Math.random()-540,alpha:0},a={x:[0],y:[0],z:0,scale:1,rotationX:0,rotationY:0,rotationZ:0,alpha:1},TweenLite.set(o,{alpha:0}),this.tlTexts&&this.tlTexts.stop(),this.tlTexts=new TWEEN.Tween(s).to(a,1800).easing(TWEEN.Easing.Cubic.Out).delay(i).onUpdate(function(){return TweenLite.set(this.target,{x:this.x,y:this.y,z:this.z,rotationY:this.rotationY,rotationZ:this.rotationZ,alpha:this.alpha})}).start(),1===t?this.tlTexts.onComplete(function(){return e++,e>=r?(n.state=1,$$.rootScene.endTransition(),n.isAnimating=!1,n.$firstScroll.addClass("show")):void 0}):2===t?this.tlTexts.onComplete(function(){return e++,e>=r?(n.state=2,n.isAnimating=!1,n.$secondScroll.show(),setTimeout(function(){return n.$secondScroll.addClass("show")},10)):void 0}):3===t?this.tlTexts.onComplete(function(){return e++,e>=r?(n.state=3,n.isAnimating=!1,n.$thirdScroll.show(),n.$future3.addClass("is-showed"),setTimeout(function(){return n.$thirdScroll.addClass("show")},10)):void 0}):void 0}),this.isAnimating=!0,this.update()},t.prototype.update=function(){return this.isAnimating?(TWEEN.update(),requestAnimationFrame(this.update)):void 0},t.prototype.onScroll=function(t){if(!this.isAnimating)if("next"===t){if(1===this.state)return this.showSecond();if(2===this.state)return this.showThird();if(3===this.state)return this.hideToIntro(),$$.intro.show(),$$.sound.stop()}else if("prev"===t){if(1===this.state)return $$.rootScene.past();if(2===this.state)return this.hideSecond();if(3===this.state)return this.hideThird()}},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/Generation":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.config=t,this.slide=e(this.slide,this),this.show=e(this.show,this),this.casts=[]}return t.prototype.show=function(){var t,e,i,r,n,s;for(n=this.casts,s=[],t=i=0,r=n.length;r>i;t=++i)e=n[t],s.push(e.show());return s},t.prototype.slide=function(t){var e,i,r,n,s,a;for(s=this.casts,a=[],e=r=0,n=s.length;n>r;e=++r)i=s[e],a.push(i.slide(t));return a},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/GenerationScene":function(t,e,i){(function(){var t,r,n=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};r=e("_modules/SceneObject"),t=function(t){function e(t){this.config=t,this.onSlide=n(this.onSlide,this),this.setInit=n(this.setInit,this),e.__super__.constructor.call(this,this.config),this.type="generation",this.setInit()}return a(e,t),e.prototype.setInit=function(){return this.currentCastIndex=0},e.prototype.onSlide=function(t){return this.index===t.generationIndex?this.currentCastIndex=t.indexInGeneration:void 0},e.prototype.getCurrentCastIndex=function(){return this.currentCastIndex},e.prototype.getCurrentCastScene=function(){return this.children[this.currentCastIndex]},e.prototype.getCastSceneByIndex=function(t){return this.children[t]},e}(r),i.exports=t}).call(this)}}),this.require.define({"_modules/IntroVideo":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.config=t,this.soundOff=e(this.soundOff,this),this.soundOn=e(this.soundOn,this),this.onPlayerStateChange=e(this.onPlayerStateChange,this),this.onPlayerReady=e(this.onPlayerReady,this),this.hide=e(this.hide,this),this.seekTop=e(this.seekTop,this),this.pause=e(this.pause,this),this.play=e(this.play,this),this.setup=e(this.setup,this),this.init=e(this.init,this),$$.util.setLocalProps(this,this.config),this.youtubeReady=$.Deferred(),this.volume=this.volumeMax=100,this.youtubeId="VGarytT_GQU"}return t.prototype.init=function(){var t,e;return Detector.webgl?(window.onYouTubeIframeAPIReady=function(t){return function(){return t.setup()}}(this),e=document.createElement("script"),e.src="https://www.youtube.com/player_api",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)):void 0},t.prototype.setup=function(){var t;return t=this,this.ytPlayer=new YT.Player("intro-video",{width:1920,height:1080,videoId:this.youtubeId,events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange},playerVars:{controls:0,showinfo:0,rel:0,suggestedQuality:"default",loop:1,playlist:this.youtubeId}})},t.prototype.play=function(){return this.ytPlayer.playVideo()},t.prototype.pause=function(){return this.ytPlayer.pauseVideo()},t.prototype.seekTop=function(){return this.ytPlayer.seekTo(0)},t.prototype.hide=function(){return this.$video.hide()},t.prototype.onPlayerReady=function(){return this.youtubeReady.resolve(),this.ytPlayer.setVolume(this.volume),this.$video=$("#intro-video")},t.prototype.onPlayerStateChange=function(){return 1===this.ytPlayer.getPlayerState()?setTimeout(function(t){return function(){return t.$video.show()}}(this),100):void 0},t.prototype.soundOn=function(){var t;return t={volume:this.volume},this.ytPlayer?TweenLite.to(t,.6,{volume:this.volumeMax,ease:Quad.easeOut,onUpdate:function(e){return function(){return e.ytPlayer.setVolume(t.volume)}}(this),onComplete:function(t){return function(){return t.volume=t.volumeMax}}(this)}):(this.volume=this.volumeMax,this.ytPlayer.setVolume(this.volume))},t.prototype.soundOff=function(){var t;return t={volume:this.volume},this.ytPlayer?TweenLite.to(t,.6,{volume:0,ease:Quad.easeOut,onUpdate:function(e){return function(){return e.ytPlayer.setVolume(t.volume)}}(this),onComplete:function(t){return function(){return t.volume=0}}(this)}):(this.volume=0,this.ytPlayer.setVolume(this.volume))},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/Introduction":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.config=t,this.hide=e(this.hide,this),this.show=e(this.show,this),$$.util.setLocalProps(this,this.config),this.$view=$("#intro"),this.isShow=!1,this.isCanBeSkipped=!1,this.scroll=this.$view.find(".scroll-indication").on("click",function(t){return function(){return t.main.gotoTimelineOnce()}}(this))}return t.prototype.show=function(t){return this.isCanBeSkipped=!1,$$.rootScene.startTransition(),$$.main.setInit(),this.scroll.removeClass("show hide"),this.tl&&this.tl.kill(),this.tl=new TimelineLite,"init"===t?(this.isShow=!0,this.tl.fromTo(this.$view,.6,{alpha:0},{alpha:1,ease:Quad.easeOut,onComplete:function(t){return function(){return $$.rootScene.endTransition(),setTimeout(function(){return t.isCanBeSkipped=!0,t.scroll.addClass("show")},3e3)}}(this)},"start"),$$.introVideo.play(),this.$view.show()):"back"===t?(this.$view.show(),this.tl.fromTo(this.$view,1.6,{alpha:0,scale:.4},{alpha:1,scale:1,delay:.2,ease:Expo.easeInOut,onComplete:function(t){return function(){return t.isShow=!0,$$.rootScene.endTransition(),$$.main.onMouseout(),setTimeout(function(){return t.isCanBeSkipped=!0,t.scroll.addClass("show")},3e3),$$.introVideo.play()}}(this)},"start")):(this.isShow=!0,$$.introVideo.hide(),this.tl.fromTo(this.$view,1.8,{alpha:0,scale:1.4},{alpha:1,scale:1,ease:Expo.easeInOut,onComplete:function(t){return function(){return $$.rootScene.endTransition(),setTimeout(function(){return t.isCanBeSkipped=!0,t.scroll.addClass("show")},3e3),$$.introVideo.play()}}(this)},"start"),this.$view.show())},t.prototype.hide=function(){return this.isShow=!1,$$.rootScene.startTransition(),$$.introVideo.pause(),this.scroll.addClass("hide"),this.tl&&this.tl.kill(),this.tl=new TimelineLite,this.tl.to(this.$view,1.8,{alpha:0,scale:.4,ease:Expo.easeInOut,onComplete:function(t){return function(){return $$.introVideo.seekTop(),$$.introVideo.hide(),t.$view.hide()
}}(this)},"start")},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/Loading":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.config=t,this.hide=e(this.hide,this),this.show=e(this.show,this),this.slide=e(this.slide,this),$$.util.setLocalProps(this,this.config),this.isShow=!0,this.$view=$("#loading").show(),this.$panel=this.$view.find(".loading-panel"),this.slideDebounce=_.debounce(this.slide,2500),this.slideDebounce()}return t.prototype.slide=function(){return this.$panel.removeClass("slide"),setTimeout(function(t){return function(){return t.$panel.addClass("slide")}}(this),20),this.slideDebounce?this.slideDebounce():void 0},t.prototype.show=function(){return this.isShow=!0},t.prototype.hide=function(){return this.isShow=!1,this.slideDebounce=null,TweenLite.to(this.$panel,.6,{alpha:0,ease:Quad.easeOut,onComplete:function(t){return function(){return t.$view.remove()}}(this)})},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/Main":function(t,e,i){(function(){var t,r,n,s,a,o,h,l,u,c=function(t,e){return function(){return t.apply(e,arguments)}};s=e("_modules/Introduction"),u=e("_modules/Timeline"),o=e("_modules/RootScene"),n=e("_modules/Future"),r=e("_modules/Detail"),h=e("_modules/Scroll"),t=e("_modules/CookiePolicy"),l=e("_modules/ScrollIndication"),$$.intersectObjects=[],a=function(){function e(t){var e,i;this.config=t,this.hitCheck=c(this.hitCheck,this),this.onResize=c(this.onResize,this),this.checkDetailTopEnd=c(this.checkDetailTopEnd,this),this.onScrollTimeline=c(this.onScrollTimeline,this),this.onScrollIntro=c(this.onScrollIntro,this),this.onMousedown=c(this.onMousedown,this),this.onMouseout=c(this.onMouseout,this),this.onMouseover=c(this.onMouseover,this),this.checkMouseon=c(this.checkMouseon,this),this.onMousemove=c(this.onMousemove,this),this._onmousemove=c(this._onmousemove,this),this.setMcPos=c(this.setMcPos,this),this.update=c(this.update,this),this.setDefault2=c(this.setDefault2,this),this.setDefault=c(this.setDefault,this),this.setUI=c(this.setUI,this),this.gotoTimeline=c(this.gotoTimeline,this),this.show=c(this.show,this),this.onLoaded=c(this.onLoaded,this),this.setWagner=c(this.setWagner,this),this.initPostprocessing=c(this.initPostprocessing,this),this.setInit=c(this.setInit,this),$$.config={distanceX:1200,distanceY:140,distanceZ:400,distanceZ2:1200,data:this.config.data,langId:this.config.data.lang_id},$$.config.url="global"===$$.config.langId?"http://www.technics.com/global/50th-anniversary/":"jp"===$$.config.langId?"http://jp.technics.com/50th-anniversary/":"http://www.technics.com/"+$$.config.langId+"/introduction/50th-anniversary/",location.href.match(/localhost|10\.0\.1/i)&&($$.dev=!0),this.scrollY=0,this.isMouseover=!1,this.mcPosList=[[1e3,1e3],[1200,-1e3],[0,600],[-1e3,-1400],[-500,400]],this.body=$("body"),this.scene=$$.scene=new THREE.Scene,this.camera=$$.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e4),this.renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0}),Browser.safari||this.renderer.setPixelRatio(window.devicePixelRatio),this.CSS3Drenderer=new THREE.CSS3DRenderer,this.view=$("#view").append(this.renderer.domElement),$("#CSS3Dview").append(this.CSS3Drenderer.domElement),e=new THREE.PointLight(16777215,1.5,2600),e.position.set(0,-100,800),$$.scene.add(e),this.camera.position.z=900,this.lookAtPosition=new THREE.Vector3(0,0,-500),this.setDefault(),$$.rediscoverHoverSignal=new signals.Signal,$$.rediscoverClickSignal=new signals.Signal,i=$$.isMac?2:1,this.scroll=$$.scroll=new h({speed:i,friction:.1,touchSpeed:5,scrollLimit:50,type:"wheel",screenFix:!0,stats:!1,step:function(){}}),this.updateThrottled=_.throttle(function(t){return function(){return requestAnimationFrame(t.update)}}(this),10),this.init()}return e.prototype.setInit=function(){return this.setInitTimer=setTimeout(function(t){return function(){return t.scroll.config.step=t.onScrollIntro}}(this),1600),this.gotoTimelineOnce=_.once(this.gotoTimeline),$$.rootScene.setInit(),$$.timeline.setInit()},e.prototype.initPostprocessing=function(){var t,e,i,r,n;return r={enabled:!0},n=new THREE.RenderPass(this.scene,this.camera),t=new THREE.BokehPass(this.scene,this.camera,{focus:1,aperture:.025,maxblur:1,width:$$.screenWidth,height:$$.screenHeight}),e=new THREE.ShaderPass(THREE.CopyShader),i=new THREE.ShaderPass(THREE.FocusShader),i.uniforms.screenWidth.value=window.innerWidth,i.uniforms.screenHeight.value=window.innerHeight,i.uniforms.sampleDistance.value=.99,i.uniforms.waveFactor.value=.003,t.renderToScreen=!0,this.composer=new THREE.EffectComposer(this.renderer),this.composer.addPass(n),this.composer.addPass(t),this.composer.addPass(e)},e.prototype.setWagner=function(){var t,e;return this.WGcomposer=new WAGNER.Composer(this.renderer),this.WGcomposer.setSize(window.innerWidth,window.innerHeight),e=new WAGNER.ZoomBlurPass,t=new WAGNER.MultiPassBloomPass,this.renderer.autoClearColor=!0,this.WGcomposer.reset(),this.WGcomposer.render(this.scene,this.camera),this.WGcomposer.pass(t),this.WGcomposer.pass(e),this.WGcomposer.toScreen()},e.prototype.init=function(){var e;return $$.cookiepolicy=new t,$$.intro=new s({main:this}),$$.timeline=new u({data:this.config.data}),$$.rootScene=new o({data:this.config.data,timelineObject:$$.timeline}),$$.future=new n,$$.detail=new r({data:this.config.data}),$$.scrollIndication=new l,e="jp"===$$.config.langId?"technics":"technics,rediscovermusic",$("#btn-back").append(this.config.data.back),$("#share-facebook").attr("href","http://www.facebook.com/sharer.php?u="+$$.config.url),$("#share-twitter").attr("href","http://twitter.com/share?url="+$$.config.url+"&text="+encodeURIComponent(this.config.data.shareTwitter)+"&hashtags="+e),this.setupTimeline(),$$.preloader.load({})},e.prototype.onLoaded=function(){return $$.loading.hide(),$$.sound.setup(),$$.sound.endAnimate(),setTimeout($$.cookiepolicy.check,600)},e.prototype.show=function(){return $$.loading.hide(),setTimeout(function(){return function(){return $$.preloader.load({type:"large"})}}(this),1800),$$.mousemoveSignal=new signals.Signal,$$.mousedownSignal=new signals.Signal,window.addEventListener("mousemove",this._onmousemove,!1),window.addEventListener("mousedown",this.onMousedown,!1),$$.mousemoveSignal.add(this.onMousemove,this),$$.resizeSignal.add(this.onResize,this),$(window).trigger("resize"),$$.intro.show("init")},e.prototype.setupTimeline=function(){return $$.timeline.setup(),$$.rootScene.setup()},e.prototype.gotoTimeline=function(){return clearTimeout(this.setInitTimer),$("#timeline").show(),$$.intro.hide(),$$.timeline.show(),setTimeout(function(t){return function(){return t.scroll.config.step=t.onScrollTimeline}}(this),1400),$$.mousemoveSignal=new signals.Signal,$$.mousedownSignal=new signals.Signal,window.addEventListener("mousemove",this._onmousemove,!1),window.addEventListener("mousedown",this.onMousedown,!1),$$.mousemoveSignal.add(this.onMousemove,this),$$.resizeSignal.add(this.onResize,this),$(window).trigger("resize"),this.setUI(),this.update(),$$.sound.play(),this.setDefault()},e.prototype.setUI=function(){return this.$body=$("body"),this.$footBtns=$("#footbtns"),this.$btnFootClose=$("#btn-footclose"),this.$footInfo=$("#footinfo"),this.$legal=$("#foot-legal"),this.$share=$("#foot-share"),$("#btn-legal, #btn-share").on("click",function(t){return function(e){return $(e.currentTarget).attr("id").match(/legal/)?(t.$body.addClass("show-footinfo"),t.$legal.show(),t.$share.hide()):(t.$body.addClass("show-footinfo"),t.$legal.hide(),t.$share.show()),TweenLite.to(t.$footBtns,.6,{x:15,alpha:0,ease:Cubic.easeInOut,onComplete:function(){return t.$footBtns.hide()}}),t.$btnFootClose.show(),TweenLite.fromTo(t.$btnFootClose,.6,{x:-15,alpha:0},{x:0,alpha:1,ease:Cubic.easeInOut})}}(this)),$("#btn-footclose").on("click",function(t){return function(){return t.$body.removeClass("show-footinfo"),TweenLite.to(t.$btnFootClose,.6,{x:-15,alpha:0,ease:Cubic.easeInOut,onComplete:function(){return t.$btnFootClose.hide()}}),t.$footBtns.show(),TweenLite.fromTo(t.$footBtns,.6,{x:15,alpha:0},{x:0,alpha:1,ease:Cubic.easeInOut})}}(this))},e.prototype.setDefault=function(){return this.mcx=0,this.mcy=0,this.updateRatio=.05},e.prototype.setDefault2=function(){return clearTimeout(this.timer),this.mcx=0,this.mcy=50,this.updateRatio=.07},e.prototype.update=function(){var t,e,i;return $$.detail.isShow||$$.future.isShow||$$.intro.isShow?void 0:(TWEEN.update(),t=this.mcx,e=this.mcy,i=this.updateRatio,($$.detail.isAnimating||$$.rootScene.getCurrentScene().id.match(/future/i)||$$.timeline.isBackToTop)&&(t=0,e=0,i=.08),$$.timeline.isModeChanging&&(t=this.mcPos[0],e=this.mcPos[1],i=.08),this.camera.position.x+=(-t-this.camera.position.x)*i,this.camera.position.y+=(e-this.camera.position.y)*i,this.camera.lookAt(this.scene.position),this.renderer.render(this.scene,this.camera),this.CSS3Drenderer.render(this.scene,this.camera),requestAnimationFrame(this.update))},e.prototype.setMcPos=function(){return this.mcPos=_.sample(this.mcPosList)},e.prototype._onmousemove=function(t){var e;return this.mouseX=t.clientX,this.mouseY=t.clientY,e={mouseX:this.mouseX,mouseY:this.mouseY},$$.mousemoveSignal.dispatch(e)},e.prototype.onMousemove=function(t){return $$.detail.isShow||$$.intro.isShow||$$.future.isShow||$$.rootScene.getCurrentScene().id.match(/future/i)?void 0:(this.setDefault(),this.mcx=(t.mouseX-this.screenWidth/2)/this.screenWidth*250,this.mcy=(t.mouseY-this.screenHeight/2)/this.screenHeight*350+5,clearTimeout(this.timer),this.timer=setTimeout(function(t){return function(){return t.mcx=0,t.mcy=10,t.updateRatio=.03}}(this),6e3),$$.rootScene.isTransitioning?void 0:this.checkMouseon())},e.prototype.checkMouseon=function(){var t;if(!($$.detail.isShow||$$.intro.isShow||$$.future.isShow||$$.timeline.isBackToTop))return t=this.hitCheck(),t.length>0?this.onMouseover(t):this.onMouseout()},e.prototype.onMouseover=function(t){var e,i,r,n,s,a;if(!this.isMouseover)try{for(this.isMouseover=!0,this.body.addClass("hover"),this.setDefault(),a=[],i=n=0,s=t.length;s>n;i=++n)r=t[i],r.object.parent.onMouseover(),a.push(this.currentMouseoverObj=r.object.parent);return a}catch(o){return e=o,$$.error(e,t)}},e.prototype.onMouseout=function(){return this.isMouseover?(this.isMouseover=!1,this.body.removeClass("hover"),this.currentMouseoverObj.onMouseout()):void 0},e.prototype.onMousedown=function(){var t;if(!($$.detail.isShow||$$.intro.isShow||$$.future.isShow||$$.detail.isAnimating||$$.rootScene.getCurrentScene().id.match(/future/i)))return t=this.hitCheck(),t.length>0?$$.rediscoverClickSignal.dispatch():void 0},e.prototype.onScrollIntro=function(t){return!$$.loading.isShow&&$$.intro.isCanBeSkipped&&t>0?this.gotoTimelineOnce():void 0},e.prototype.onScrollTimeline=function(t){if($$.scrollIndication.isShow&&$$.scrollIndication.hide(),!$$.rootScene.isTransitioning)if($$.detail.isShow){if(!$$.detail.isAnimating)return this.checkDetailTopEnd(t)}else if($$.future.isShow){if(t>.1)return $$.future.onScroll("next");if(-.1>t)return $$.future.onScroll("prev")}else if(!$$.detail.isAnimating&&!$$.intro.isShow){if(t>.1)return $$.rootScene.future(),this.checkMouseon();if(-.1>t)return $$.rootScene.past(),this.checkMouseon()}},e.prototype.checkDetailTopEnd=function(t){return null==t&&(t=0),$(window).scrollTop()<=0?this.topLineTimer=setTimeout(function(t){return function(){return t.isTopLine=!0}}(this),600):(clearTimeout(this.topLineTimer),this.isTopLine=!1),$(window).scrollTop()>=this.body.height()-$$.screenHeight?this.endLineTimer=setTimeout(function(t){return function(){return t.isEndLine=!0}}(this),600):(clearTimeout(this.endLineTimer),this.isEndLine=!1),this.isTopLine&&-.1>t&&(clearTimeout(this.topLineTimer),this.isTopLine=!1,$$.detail.prev()),this.isEndLine&&t>.1?(clearTimeout(this.endLineTimer),this.isEndLine=!1,$$.detail.next()):void 0},e.prototype.onResize=function(t,e){return this.screenWidth=$$.screenWidth=t,this.screenHeight=$$.screenHeight=e,$$.detail.isShow?void 0:(this.camera.aspect=this.screenWidth/this.screenHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.screenWidth,this.screenHeight),this.CSS3Drenderer.setSize(this.screenWidth,this.screenHeight))},e.prototype.hitCheck=function(){var t,e,i,r,n,s,a;return r=this.mouseX/this.screenWidth*2-1,n=2*-(this.mouseY/this.screenHeight)+1,i=new THREE.Vector3(r,n,1),i.unproject(this.camera),a=new THREE.Raycaster(this.camera.position,i.sub(this.camera.position).normalize()),t=$$.rootScene.getCurrentScene().viewObj,e=[],t&&(e.push(t.hitObj),e.push(t.rediscover)),s=a.intersectObjects(e,!0)},e}(),i.exports=a}).call(this)}}),this.require.define({"_modules/Preloader":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.config=t,this.onComplete2=e(this.onComplete2,this),this.onComplete=e(this.onComplete,this),this.onFileLoadComplete=e(this.onFileLoadComplete,this),this.onProgress=e(this.onProgress,this),this.addLarge=e(this.addLarge,this),this.addQueue=e(this.addQueue,this),this.load=e(this.load,this),this.manifest=[{src:"./assets/sounds/bgm.mp3",id:"bgm"}],this.manifest2=[],this.loadQueue=new createjs.LoadQueue,this.loadQueue2=new createjs.LoadQueue,this.loadQueue.installPlugin(createjs.Sound),this.loadQueue.setMaxConnections(6),this.loadQueue2.setMaxConnections(6),this.loadQueue.addEventListener("complete",this.onComplete),this.loadQueue2.addEventListener("complete",this.onComplete2),this.thumbLoaded=$.Deferred()}return t.prototype.load=function(t){return t&&t.completeCallback&&(this.completeCallback=t.completeCallback),"large"===t.type?this.loadQueue2.loadManifest(this.manifest2):this.loadQueue.loadManifest(this.manifest)},t.prototype.addQueue=function(t){return this.manifest.push({src:t})},t.prototype.addLarge=function(t){return this.manifest2.push({src:t})},t.prototype.onProgress=function(t){return this.progress=t.progress},t.prototype.onFileLoadComplete=function(t){var e;return e=t.result},t.prototype.onComplete=function(){return this.thumbLoaded.resolve(),this.completeCallback?this.completeCallback():void 0},t.prototype.onComplete2=function(){},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/RootScene":function(t,e,i){(function(){var t,r,n,s,a=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,h=function(t,e){function i(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};s=e("_modules/SceneObject"),r=e("_modules/GenerationScene"),t=e("_modules/CastScene"),n=function(e){function i(t){this.config=t,this.getSceneByPath=a(this.getSceneByPath,this),this.getFuture2CastScene=a(this.getFuture2CastScene,this),this.getFutureCastScene=a(this.getFutureCastScene,this),this.getPastCastScene=a(this.getPastCastScene,this),this.getNext2CastScene=a(this.getNext2CastScene,this),this.getNextCastScene=a(this.getNextCastScene,this),this.getPrevCastScene=a(this.getPrevCastScene,this),this.getCurrentScene=a(this.getCurrentScene,this),this.endTransition=a(this.endTransition,this),this.startTransition=a(this.startTransition,this),this._goto=a(this._goto,this),this.past=a(this.past,this),this.future=a(this.future,this),this.next=a(this.next,this),this.prev=a(this.prev,this),this.goto=a(this.goto,this),this.setInit=a(this.setInit,this),i.__super__.constructor.call(this,this.config),this.allScenes=[this],this.generationScenes=[],this.castScenes=[],this.current=this,this.isActiveURL=!1,this.isTransitioning=!1,this.isDetail=!1}return h(i,e),i.prototype.setup=function(){var e,i,n,a,o,h,l,u,c,d,p;for(l=new s({id:"timeline",root:this}),this.add(l),e="",i=-1,p=this.config.data.items,n=c=0,d=p.length;d>c;n=++c)u=p[n],u.year.substr(0,3)!==e&&"2014"!==u.year&&(a=0,i++,e=u.year.substr(0,3),o=new r({id:e+"0s",index:i,root:this}),l.add(o),this.allScenes.push(o),this.generationScenes.push(o)),h=new t({data:u,id:u.id,index:n,indexInGeneration:a,generationIndex:i,viewObj:this.timelineObject.casts[n],castScenes:this.castScenes,year:u.year}),o.add(h),this.allScenes.push(h),this.castScenes.push(h),a++;return this.futureGenScene=new r({id:"future",index:i+1,root:this}),l.add(this.futureGenScene),this.allScenes.push(this.futureGenScene),this.generationScenes.push(this.futureGenScene),this.futureScene=new t({id:"future",index:n,indexInGeneration:0,generationIndex:i+1,castScenes:this.castScenes,data:{year:"future"}}),this.allScenes.push(this.futureScene),this.castScenes.push(this.futureScene),this.futureGenScene.add(this.futureScene)},i.prototype.setInit=function(){var t,e,i,r,n,s;for(this.current=this.castScenes[0],n=this.generationScenes,s=[],t=i=0,r=n.length;r>i;t=++i)e=n[t],s.push(e.setInit());return s},i.prototype.goto=function(t){var e,i,r,n,s,a;if(i=t.toScene=this.getSceneByPath(t.path),t.castindex&&(i=this.castScenes[t.castindex]),null!=t.generationIndex?i=null!=t.indexInGeneration?this.generationScenes[t.generationIndex].getCastSceneByIndex(t.indexInGeneration):this.generationScenes[t.generationIndex].getCurrentCastScene():null!=t.indexInGeneration&&(i=this.generationScenes[this.current.generationIndex].getCastSceneByIndex(t.indexInGeneration)),!i){for(a=this.allScenes,e=n=0,s=a.length;s>n;e=++n)r=a[e],console.log(r.id,r.path);return void $$.error("not found to scene path="+t.path)}return t.toScene=i,this._goto(t)},i.prototype.prev=function(){var t;return t=this.getPrevCastScene(),this._goto({toScene:t,type:"slide",direction:"prev"}),t},i.prototype.next=function(){var t;return t=this.getNextCastScene(),this._goto({toScene:t,type:"slide",direction:"next"}),t},i.prototype.future=function(){var t;return t="year"===$$.timeline.mode?this.castScenes[this.current.index+1]:this.getFutureCastScene(),this._goto({toScene:t,type:"history",direction:"next"})},i.prototype.past=function(){var t;return t="year"===$$.timeline.mode?this.castScenes[this.current.index-1]:this.getPastCastScene(),this._goto({toScene:t,type:"history",direction:"prev"})},i.prototype._goto=function(t){var e,i;if(this.current.parent&&0===this.current.index&&!t.toScene){if($$.detail.isShow)return;return $$.timeline.hideToTop(),void $$.intro.show("back")}if(t.toScene&&this.current.id!==t.toScene.id){e=this.current,i=this.current=t.toScene,e.parent&&e.parent.onSlide(i),t.currentScene=e,$$.timeline.slide(t),this.startTransition();try{e.viewObj.deactive()}catch(r){}try{i.viewObj.active()}catch(r){}return"future"===i.id?$$.future.show():"future"===e.id&&$$.future.hide(),$$.timeline.checkNavigations({currentScene:e,toScene:i}),this.current=i}},i.prototype.startTransition=function(){return this.isTransitioning=!0},i.prototype.endTransition=function(){return this.isTransitioning=!1},i.prototype.getCurrentScene=function(){return this.current},i.prototype.getPrevCastScene=function(){return this.castScenes[this.current.index-1]},i.prototype.getNextCastScene=function(){return this.castScenes[this.current.index+1]},i.prototype.getNext2CastScene=function(){return this.castScenes[this.current.index+2]},i.prototype.getPastCastScene=function(){var t,e;return e=this.generationScenes[this.current.generationIndex-1],t=e?e.getCurrentCastScene():void 0},i.prototype.getFutureCastScene=function(){var t,e;return e=this.generationScenes[this.current.generationIndex+1],t=e?e.getCurrentCastScene():void 0},i.prototype.getFuture2CastScene=function(){var t,e;return e=this.generationScenes[this.current.generationIndex+2],t=e?e.getCurrentCastScene():void 0},i.prototype.getSceneByPath=function(t){return _.findWhere(this.allScenes,{path:t})},i}(s),i.exports=n}).call(this)}}),this.require.define({"_modules/SceneObject":function(t,e,i){(function(){var t,e,r=function(t,e){return function(){return t.apply(e,arguments)}};e=function(){function t(t){this.getPast=r(this.getPast,this),this.getFuture=r(this.getFuture,this),this.getNext=r(this.getNext,this),this.getPrev=r(this.getPrev,this),this.getPath=r(this.getPath,this),this.setPath=r(this.setPath,this),this.setId=r(this.setId,this),this.add=r(this.add,this),this.init=r(this.init,this),this.config=$.extend({id:"",index:0,parent:null},t),$$.util.setLocalProps(this,this.config),this.children=[],this.init()}return t.prototype.init=function(){return this.setPath()},t.prototype.add=function(t){return this.children.push(t),t.parent=this,t.setPath()},t.prototype.setId=function(){},t.prototype.setPath=function(){return this.path=this.getPath()},t.prototype.getPath=function(){var t;return t=this.parent?this.parent.path+this.id+"/":"/"},t.prototype.getPrev=function(){var t;return t=this.parent.children[this.config.index-1]},t.prototype.getNext=function(){var t;return t=this.parent.children[this.config.index+1]},t.prototype.getFuture=function(){var t,e;return e=this.parent.getNext(),t=e?e.getCurrentCastScene():void 0},t.prototype.getPast=function(){var t,e;return e=this.parent.getPrev(),t=e?e.getCurrentCastScene():void 0},t}(),t=function(){function t(){}return t}(),i.exports=e}).call(this)}}),this.require.define({"_modules/Scroll":function(t,e,i){(function(){var t,e,r,n,s,a=function(t,e){return function(){return t.apply(e,arguments)}};e=window.navigator,r=e.userAgent.toLowerCase(),n={mac:/mac/i.test(e.platform),win:/win/i.test(e.platform),isLtIE9:"function"==typeof(s=/msie\s(\d+)/.test(r))?s(1*RegExp.$1<{9:!1}):void 0},t=function(){function t(t){this.onRender=a(this.onRender,this),this.stopRender=a(this.stopRender,this),this.startRender=a(this.startRender,this),this.onWheel=a(this.onWheel,this),this.scroll=a(this.scroll,this),this.config=$.extend({target:document,speed:1,friction:.94,touchSpeed:5,type:"wheel",scrollType:"y",screenFix:!1,scrollLimit:30,step:function(){},start:function(){},stop:function(){},touchStart:function(){},touchMove:function(){},touchEnd:function(){}},t),this.offset=0,this.offsetMax=0,this.offsetMin=0,$(this.config.target).bind("wheel",_.throttle(this.onWheel,10)),this.scrollSig=new signals.Signal}return t.prototype.scroll=function(){return this.scrollSig.dispatch()},t.prototype.onWheel=function(t){var e,i,r;if(this.isWheeling=!0,i=t.originalEvent.deltaX,r=t.originalEvent.deltaY||-t.originalEvent.wheelDelta,e=0,n.isLtIE9)e=t.originalEvent.delta;else switch(this.config.scrollType){case"x":e=i;break;case"y":e=r}return e*=n.win?.5:.05,this.delta=e,this.delta?0===this.config.friction?this.config.step(-e):(Math.abs(this.offset)<=this.config.scrollLimit&&(this.offset+=e*this.config.speed),this.onRender()):void 0},t.prototype.startRender=function(){return this.config.onScrollDelete&&this.config.onScrollDelete(),"undefined"==typeof this.renderingID?(this.config.start(),this.renderingID=requestAnimationFrame(this.onRender)):void 0},t.prototype.stopRender=function(){return this.config.stop(),cancelAnimationFrame(this.renderingID),this.renderingID=void 0,this.offset=0},t.prototype.onRender=function(){return Math.abs(this.offset)<.1?(this.config.step(this.offset,this.delta),void(this.isWheeling=!1)):(this.offset*=this.config.friction,this.config.step(this.offset,this.delta))},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/ScrollIndication":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.config=t,this.hide=e(this.hide,this),this.show=e(this.show,this),$$.util.setLocalProps(this,this.config),this.isInit=!0,this.isShow=!1}return t.prototype.show=function(){return this.isInit?(this.isInit=!1,this.isShow=!0,this.$view=$("#timeline").find(".scroll-indication.timeline-first"),this.$label=this.$view.find(".label"),this.tl&&this.tl.kill(),this.tl=new TimelineMax,this.tl.fromTo(this.$view,1.2,{y:20,alpha:0},{y:0,alpha:1,ease:Expo.easeOut,delay:2.2}).to(this.$label,1,{y:-20,alpha:0,ease:Expo.easeIn},"+=1").set(this.$label,{y:20}).to(this.$label,1,{y:0,alpha:1,ease:Expo.easeOut}).to(this.$view,1,{y:-20,alpha:0,ease:Expo.easeIn,onStart:function(t){return function(){return t.isShow=!1}}(this),onComplete:function(t){return function(){return $$.timeline.era.show(),t.$view.hide()}}(this)},"+=1")):void 0},t.prototype.hide=function(){return this.tl&&this.tl.kill(),this.tl=new TimelineMax,this.tl.to(this.$view,1,{y:-20,alpha:0,ease:Expo.easeIn,onStart:function(t){return function(){return t.isShow=!1}}(this),onComplete:function(t){return function(){return $$.timeline.era.show(),t.$view.hide()}}(this)})},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/Sound":function(t,e,i){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.config=t,this.endAnimate=e(this.endAnimate,this),this.animate=e(this.animate,this),this.onPlayFinished=e(this.onPlayFinished,this),this.soundOff=e(this.soundOff,this),this.soundOn=e(this.soundOn,this),this.btnOnClick=e(this.btnOnClick,this),this.stop=e(this.stop,this),this.play=e(this.play,this),this.setup=e(this.setup,this),$$.util.setLocalProps(this,this.config),this.$view=$("#sound").on("click",this.btnOnClick),this.$icon=this.$view.find(".icon"),this.isSoundOn=!0,this.isPlay=!1,this.volume=this.volumeMax=.8,this.current=0,this.animate()}return t.prototype.setup=function(){return this.bgmInstance1=createjs.Sound.createInstance("bgm"),this.bgmInstance1.loop=-1},t.prototype.play=function(){return this.bgm=this.bgmInstance1,this.bgm.pan=.001,!$$.dev&&this.isSoundOn?(this.isPlay=!0,TweenLite.fromTo(createjs.Sound,.6,{volume:0},{volume:this.volumeMax,delay:1.4,ease:Quad.easeOut,onStart:function(t){return function(){return t.bgm.play()}}(this)})):void 0},t.prototype.stop=function(){return this.isPlay=!1,TweenLite.to(createjs.Sound,.6,{volume:0,ease:Quad.easeOut,onComplete:function(t){return function(){return t.bgm.stop()}}(this)})},t.prototype.btnOnClick=function(){return this.isSoundOn?(this.isSoundOn=!1,this.soundOff(),$$.introVideo.soundOff()):(this.isSoundOn=!0,this.soundOn(),$$.introVideo.soundOn())},t.prototype.soundOn=function(){return this.$view.removeClass("is-off").addClass("is-on"),TweenLite.to(createjs.Sound,.6,{volume:this.volumeMax,ease:Quad.easeOut})},t.prototype.soundOff=function(){return this.$view.removeClass("is-on").addClass("is-off"),TweenLite.to(createjs.Sound,.6,{volume:0,ease:Quad.easeOut})},t.prototype.onPlayFinished=function(){return 0===this.current?(this.current=1,this.bgm=this.bgmInstance2,this.bgm.play()):1===this.current?(this.current=0,this.bgm=this.bgmInstance1,this.bgm.play()):void 0},t.prototype.animate=function(){return this.tl&&this.tl.kill(),this.tl=new TimelineMax({repeat:-1}),this.tl.to(this.$icon,.4,{scale:1,ease:Expo.easeInOut,delay:.4}),this.tl.to(this.$icon,.5,{scale:.75,ease:Expo.easeOut})},t.prototype.endAnimate=function(){return this.tl&&this.tl.kill(),this.tl=new TimelineMax,this.tl.to(this.$icon,.4,{scale:1,ease:Expo.easeOut}),this.$view.removeClass("animating")},t}(),i.exports=t}).call(this)}}),this.require.define({"_modules/Timeline":function(t,e,i){(function(){var t,r,n,s,a=function(t,e){return function(){return t.apply(e,arguments)}};n=e("_modules/Generation"),t=e("_modules/Cast"),r=e("_modules/Era"),s=function(){function e(t){this.config=t,this.checkNavigations=a(this.checkNavigations,this),this.endModeChange=a(this.endModeChange,this),this.changeViewmode=a(this.changeViewmode,this),this.slide=a(this.slide,this),this.hideView=a(this.hideView,this),this.showView=a(this.showView,this),this.hideToTop=a(this.hideToTop,this),this.show=a(this.show,this),this.setInit=a(this.setInit,this),this.setup=a(this.setup,this),this.genList=[],this.$view=$("#timeline"),this.era=new r,this.casts=[],this.mode="year",this.isShow=!1,this.isModeChanging=!1,this.isBackToTop=!1,this.$genmodeNav=$("#genmode-nav"),this.$flipNav=$("#flip-nav"),this.$genNav=$("#gen-nav"),this.$localNav=$("#local-nav"),this.$viewmodeNavYear=$("#by-year"),this.$viewmodeNavGen=$("#by-gen"),this.margedGeometry=new THREE.Geometry}return e.prototype.setup=function(){var e,i,r,n,s,a,o,h,l,u,c,d,p;for(n="",s=-1,h="",r="",i="",p=this.config.data.items,o=c=0,d=p.length;d>c;o=++c)u=p[o],u.year.substr(0,3)!==n&&"2014"!==u.year&&(l=0,s++,n=u.year.substr(0,3),a=n.substr(2,1)+"0s",this.genList.push({id:n+"0",generationIndex:s,label:n.substr(2,1)+"0's"}),i+='<div class="era-label" id="era-'+n+'0s"><div class="label label-text"><div class="text" data-genindex="'+s+'">'+n+'0\'s</div></div><div class="label label-svg"><img src="./assets/images/era/'+a+'.svg" class="svg"></div></div>'),e=new t({data:u,index:o,indexInGeneration:l,generationIndex:s}),this.casts.push(e),$$.scene.add(e),l++,this.genList[s].castLength=l,u.year!==h&&(r+='<div class="era-label" id="era-'+u.year+'"><div class="label label-text"><div class="text" data-castindex="'+o+'">'+u.year+'</div></div><div class="label label-svg"><img src="./assets/images/era/'+u.year+'.svg" class="svg"></div></div>',this.era.addYearId(u.year)),h=u.year;return this.era.setup({eraHtmlYear:r,eraHtmlGen:i}),this.setUI()},e.prototype.setInit=function(){return this.currentScene=$$.rootScene.getCurrentScene(),this.mode="year",this.$genNav.show().css("opacity",1),this.$genmodeNav.hide(),this.$viewmodeNavYear.addClass("current"),this.$viewmodeNavGen.removeClass("current"),this.checkNavigations(),this.isBackToTop?void 0:(this.era.reset(),this.slide({toScene:this.currentScene,type:"init"}))},e.prototype.setUI=function(){var t,e,i,r,n,s,a;for($("#by-year").on("click",function(){return $$.timeline.changeViewmode("year")}),$("#by-gen").on("click",function(){return $$.timeline.changeViewmode("gen")}),this.$flipPrev=$("#flip-prev").on("click",function(){return $(this).hasClass("active")?$$.rootScene.prev():void 0}),this.$flipNext=$("#flip-next").on("click",function(){return $(this).hasClass("active")?$$.rootScene.next():void 0}),$("#viewmode-nav, #flip-nav").on("mouseenter",function(){return function(){return $$.main.setDefault2()}}(this)),t="",a=this.genList,e=n=0,s=a.length;s>n;e=++n)r=a[e],t+='<li class="gen-nav-gen" data-genindex="'+e+'">'+r.label+'<span class="line"></span></li>';return this.$genNav.append(t),this.$genNavButtons=$(".gen-nav-gen",this.$genNav).on("click",function(){return function(t){var e;return e=$(t.currentTarget).data("genindex"),$$.rootScene.goto({generationIndex:e,indexInGeneration:0})}}(this)),i=this.$genNav.height(),this.$genNav.css({"margin-top":.5*-i}),$("li",this.$flipNav).each(function(t){var e,i,r;return r=$(this),i=r.find(".line"),e=0===t?1:-1,r.on("mouseenter",function(){return TweenLite.to(i,.4,{x:20*-e,width:60,ease:Back.easeOut.config(3)})}),r.on("mouseleave",function(){return TweenLite.to(i,.4,{x:0,width:40,ease:Expo.easeOut})})})},e.prototype.show=function(){var t,e,i,r,n;for(this.isBackToTop=!1,this.$view.show(),n=this.casts,t=i=0,r=n.length;r>i;t=++i)e=n[t],e.show();return $$.scrollIndication.show(),this.era.init()},e.prototype.hideToTop=function(){return this.casts[0].deactive(),this.casts[0].hideToTop(),$$.sound.stop(),this.isBackToTop=!0,$("body").removeClass("hover")},e.prototype.showView=function(){var t,e,i,r,n;for(n=this.casts,t=i=0,r=n.length;r>i;t=++i)e=n[t],e.setPlanesDefault();return this.$view.show()},e.prototype.hideView=function(){return this.$view.hide()},e.prototype.slide=function(t){var e,i,r,n,s;for(s=this.casts,e=r=0,n=s.length;n>r;e=++r)i=s[e],i.slide(t);return this.era.flip(t),this.currentScene=t.toScene},e.prototype.changeViewmode=function(t){var e,i,r,n,s,a,o,h;if(this.mode!==t){if(this.isModeChanging=!0,$$.main.setMcPos(),"year"===t){for(this.mode="year",this.checkNavigations(),o=this.casts,e=r=0,s=o.length;s>r;e=++r)i=o[e],i.slide({toScene:this.currentScene,type:"changeViewmode"});TweenLite.fromTo(this.$genNav,.4,{alpha:0},{alpha:1}),this.$genNav.show(),TweenLite.to(this.$genmodeNav,.4,{alpha:0,onComplete:function(t){return function(){return t.$genmodeNav.hide()}}(this)}),this.$viewmodeNavYear.addClass("current"),this.$viewmodeNavGen.removeClass("current")}else{for(this.mode="gen",this.checkNavigations(),h=this.casts,e=n=0,a=h.length;a>n;e=++n)i=h[e],i.slide({toScene:this.currentScene,type:"changeViewmode"});TweenLite.fromTo(this.$genmodeNav,.4,{alpha:0},{alpha:1}),this.$genmodeNav.show(),TweenLite.to(this.$genNav,.4,{alpha:0,onComplete:function(t){return function(){return t.$genNav.hide()}}(this)}),this.$viewmodeNavYear.removeClass("current"),this.$viewmodeNavGen.addClass("current")}return this.era.reset()}},e.prototype.endModeChange=function(t){var e;return t.index>=this.casts.length-1?(clearTimeout(e),e=setTimeout(function(t){return function(){return t.isModeChanging=!1}}(this),200)):void 0},e.prototype.checkNavigations=function(t){return t=$.extend({currentScene:{generationIndex:-1},toScene:this.currentScene},t),"gen"===this.mode?(0===t.toScene.index?this.$flipPrev.removeClass("active"):this.$flipPrev.addClass("active"),t.toScene.index>=$$.rootScene.castScenes.length-1?this.$flipNext.removeClass("active"):this.$flipNext.addClass("active")):t.toScene.generationIndex!==t.currentScene.generationIndex?(this.$genNavButtons.removeClass("current"),$(this.$genNavButtons.eq(t.toScene.generationIndex)).addClass("current")):void 0
},e}(),i.exports=s}).call(this)}}),function(){var t,e=[].slice;$$.util={setLocalProps:function(t,e){var i,r,n;n=[];for(i in e)r=e[i],n.push(t[i]?console.log("Already exists",t,i,t[i]):t[i]=r);return n},getSize:function(t){return 900*t/588},convertText:function(t){var e,i,r,n,s;for(t=t.replace(/<br>/g,"~"),t=t.replace(/<br\/>/g,"~"),e="",i=n=0,s=t.length;s>n;i=++n)r=t[i],e+=" "===r?"<span>"+r+"</span>":"~"===r?"<br>":'<span class="d">'+r+"</span>";return e}},t=CanvasRenderingContext2D.prototype.fillText,CanvasRenderingContext2D.prototype.fillText=function(){var i,r,n,s,a;return n=arguments[0],s=arguments[1],a=arguments[2],i=4<=arguments.length?e.call(arguments,3):[],null==this.kerning?t.apply(this,arguments):(r=0,_.each(n,function(e){return function(n){return t.apply(e,[n,s+r+e.kerning,a].concat(i)),r+=e.measureText(n).width+e.kerning}}(this)))}}.call(this),this.require.define({"_modules/_CastTitle":function(t,e,i){(function(){var t,e,r=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,s=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function i(t){this.config=t,this.animate=r(this.animate,this),this.setup=r(this.setup,this),i.__super__.constructor.call(this),this.dancers=[],this.setup()}return s(i,t),i.prototype.setup=function(){var t,i,r,n,s,a;for(this.texts=[],r=this.config.text,r=r.replace(/<br>/g,"~"),r=r.replace(/<br\/>/g,"~"),r=r.toUpperCase(),t='<div id="cast-title'+this.config.index+'" class="cast-title">',i=s=0,a=r.length;a>s;i=++s)n=r[i]," "===n?t+="<span>"+n+"</span>":"~"===n?t+="<br>":(t+='<span class="cast-title-unit">'+n+"</span>",this.texts.push(n));return t+="</div>",this.dom=$(t).appendTo("#cast-texts"),this.domTextPoss=[],this.dom.find(".cast-title-unit").each(function(t){return function(e,i){return t.domTextPoss.push($(i).position())}}(this)),setTimeout(function(t){return function(){var r,s,a,o,h;for(o=t.texts,h=[],i=s=0,a=o.length;a>s;i=++s)n=o[i],r=new e({text:n,pos:t.domTextPoss[i]}),t.add(r),h.push(t.dancers.push(r));return h}}(this),1e3)},i.prototype.animate=function(t){var e,i,r,n,s,a,o;for(t=$.extend({},t),i=this,a=this.dancers,o=[],e=n=0,s=a.length;s>n;e=++n)r=a[e],o.push(r.animate(t));return o},i}(THREE.Object3D),e=function(t){function e(t){var i,n,s,a,o,h;this.config=t,this.animate=r(this.animate,this),this.viewScale=.1,this.defX=this.config.pos.left*this.viewScale,this.defY=this.config.pos.top*this.viewScale,h=this.config.text,a=36,i=0,o=1,n=document.createElement("canvas"),s=n.getContext("2d"),n.width=a*o+10,n.height=a*o+10,s=n.getContext("2d"),s.font=a+"pt DINCondensed-Regular",s.textAlign="left",s.textBaseline="top",s.fillStyle="white",s.fillText(h,0,0),this.texture=new THREE.Texture(n),this.texture.needsUpdate=!0,this.texture.minFilter=THREE.LinearFilter,this.texture.magFilter=THREE.NearestFilter,this.material=new THREE.MeshBasicMaterial({transparent:!0,map:this.texture,depthTest:!1,side:THREE.DoubleSide}),this.geometry=new THREE.PlaneBufferGeometry(n.width,n.height),e.__super__.constructor.call(this,this.geometry,this.material),this.scale.set(this.viewScale,this.viewScale,1)}return s(e,t),e.prototype.animate=function(t){var e,i,r,n;return n=this,i={target:n,x:this.defX+800*Math.random()-400,y:this.defY+140*Math.random()-70,z:40,scale:1.5,rotationX:1080*Math.random()-540,rotationY:1080*Math.random()-540,rotationZ:1080*Math.random()-540,alpha:0},r={x:[this.defX+60*Math.random()-30,this.defX],y:[this.defY+60*Math.random()-30,this.defY],z:0,scale:1,rotationX:0,rotationY:0,rotationZ:0,alpha:1},e=300*Math.random(),t.quick||(e+=1e3),this.tl&&this.tl.stop(),this.tl=new TWEEN.Tween(i).to(r,1900).easing(TWEEN.Easing.Cubic.InOut).delay(e).onUpdate(function(){return this.target.material.opacity=this.alpha,this.target.position.set(this.x,this.y,this.z),this.target.rotation.set(this.rotationX,this.rotationY,this.rotationZ)}).start()},e}(THREE.Mesh),i.exports=t}).call(this)}}),function(){var t,e,i,r,n,s,a;r=require("_modules/Preloader"),e=require("_modules/Loading"),i=require("_modules/Main"),n=require("_modules/Sound"),t=require("_modules/IntroVideo"),$$.preloader=new r,$$.introVideo=new t,a=$.Deferred(),$(function(){return $$.checkBrowser(),$$.loading=new e,$$.sound=new n,s(),$.when(a,s,$$.preloader.thumbLoaded,$$.introVideo.youtubeReady).always(function(){return function(){return $$.main.onLoaded()}}(this))}),$(window).load(function(){return a.resolve()}),s=function(){return $.ajax({url:"./data/contents.json",type:"GET",timeout:2e4,cache:!1}).success(function(t){var e;return"object"!=typeof t&&(t=JSON.parse(t)),t=$.extend(!0,{future:{scene3:{facebookLink:"https://www.facebook.com/technics.global",twitterLink:"https://twitter.com/technics"}},privacyPolicy:"",termsOfUse:"",cookiePolicy:"",contactUs:"",technicsCom:"Technics.com"},t),e=_.template($("#tpl-main").text()),$("#loading").after(e(t)),$$.introVideo.init(),$$.main=new i({data:t})}).error(function(t,e,i){return console.log("error:",t,e,i)})}}.call(this);